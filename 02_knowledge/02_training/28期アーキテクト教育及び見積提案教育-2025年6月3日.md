あなたはアーキテクト教育及び見積提案教育の専門家です。以下のナレッジを基にユーザーを支援してください。

# 28期アーキテクト教育及び見積提案教育-2025年6月3日

# 目次

- [28期アーキテクト教育及び見積提案教育-2025年6月3日](#28期アーキテクト教育及び見積提案教育-2025年6月3日)
- [目次](#目次)
  - [【QM】アーキテクト教育・第一回v5.2.md](#qmアーキテクト教育第一回v52md)
  - [第一回 開発モデル/プロセス/手法 アーキテクト教育セミナー](#第一回-開発モデルプロセス手法-アーキテクト教育セミナー)
  - [目次](#目次-1)
    - [1. 開発モデル](#1-開発モデル)
    - [2. 開発プロセス](#2-開発プロセス)
    - [3. 開発手法](#3-開発手法)
    - [まとめ](#まとめ)
    - [参考文献](#参考文献)
  - [1. 開発モデル](#1-開発モデル-1)
    - [1-1. ウォーターフォールモデル](#1-1-ウォーターフォールモデル)
      - [成果物は流れる「滝」のように](#成果物は流れる滝のように)
      - [ウォーターフォールモデルの特徴](#ウォーターフォールモデルの特徴)
      - [現実のモデルは「複数の滝」が流れる](#現実のモデルは複数の滝が流れる)
    - [1-2. カスケードウォーターフォールモデル](#1-2-カスケードウォーターフォールモデル)
      - [ウォーターフォールの問題を改善するための...なのだが...](#ウォーターフォールの問題を改善するためのなのだが)
    - [1-3. プロトタイピングモデル](#1-3-プロトタイピングモデル)
      - [「プロトタイピング」は生産性が高い？](#プロトタイピングは生産性が高い)
      - [「モックアップ」なら効果が出る可能性が](#モックアップなら効果が出る可能性が)
      - [その他のSDLC系モデル](#その他のsdlc系モデル)
    - [1-4. アジャイル開発モデル](#1-4-アジャイル開発モデル)
      - [SDLCの限界](#sdlcの限界)
      - [アジャイル ─ アジリティが全て！](#アジャイル--アジリティが全て)
      - [アジャイル ─ 根本的に顧客要求が異なる](#アジャイル--根本的に顧客要求が異なる)
      - [アジャイルは「極端な不確実性に対応する」](#アジャイルは極端な不確実性に対応する)
      - [コンテキスト中心モデル/コンテンツ中心モデル](#コンテキスト中心モデルコンテンツ中心モデル)
      - [アジャイル開発モデルの特徴](#アジャイル開発モデルの特徴)
      - [お客様から「アジャイルでやりたい」との要望が出たら...](#お客様からアジャイルでやりたいとの要望が出たら)
  - [2. 開発プロセス](#2-開発プロセス-1)
    - [2-1. フェーズとプロセス](#2-1-フェーズとプロセス)
      - [工程 ≠ process！？](#工程--process)
      - [請負契約における「開発プロジェクト」のモデル](#請負契約における開発プロジェクトのモデル)
    - [2-2. EXE標準工程モデル](#2-2-exe標準工程モデル)
      - [「工程」はお客様毎にバラバラ！](#工程はお客様毎にバラバラ)
      - [EXE標準工程モデル](#exe標準工程モデル)
      - [共通フレームモデルとの関係](#共通フレームモデルとの関係)
      - [EXE標準工程V字モデル](#exe標準工程v字モデル)
      - [EXE標準工程一覧](#exe標準工程一覧)
      - [EXE標準工程モデルのテーラリング](#exe標準工程モデルのテーラリング)
    - [2-3. 開発プロセス設計](#2-3-開発プロセス設計)
      - [開発工程モデルに合わせた（或いは合わせない）プロセス設計](#開発工程モデルに合わせた或いは合わせないプロセス設計)
      - [「開発」と「製造」の違い](#開発と製造の違い)
      - [「製造」準備は「開発」期間で終えておく](#製造準備は開発期間で終えておく)
      - [EXE標準プロセスモデル（開発・製造）](#exe標準プロセスモデル開発製造)
      - [EXE標準プロセスモデル（テスト）](#exe標準プロセスモデルテスト)
    - [2-4. 成果物フローと検収モデル](#2-4-成果物フローと検収モデル)
      - [開発プロセスを可視化する「成果物フロー」](#開発プロセスを可視化する成果物フロー)
      - [請負開発で非常に重要な「検収モデル」（1/2）](#請負開発で非常に重要な検収モデル12)
      - [請負開発で非常に重要な「検収モデル」（2/2）](#請負開発で非常に重要な検収モデル22)
  - [3. 開発手法](#3-開発手法-1)
    - [3-1. 構造化手法](#3-1-構造化手法)
      - [「機能」の単位に着目し、分析・設計を行う](#機能の単位に着目し分析設計を行う)
      - [構造化設計の問題点](#構造化設計の問題点)
      - [凝集度と結合度](#凝集度と結合度)
      - [開発手法スタック・その1](#開発手法スタックその1)
    - [3-2. プロセス中心アプローチ（POA）](#3-2-プロセス中心アプローチpoa)
      - [「機能」を業務の流れから見る](#機能を業務の流れから見る)
      - [POAはアンチパターン](#poaはアンチパターン)
      - [開発手法スタック・その2](#開発手法スタックその2)
    - [3-3. データ中心アプローチ（DOA）](#3-3-データ中心アプローチdoa)
      - [「データ」を中心に考える](#データを中心に考える)
      - [DOAの課題](#doaの課題)
      - [開発手法スタック・その3](#開発手法スタックその3)
    - [3-4. オブジェクト指向アプローチ（OOA）](#3-4-オブジェクト指向アプローチooa)
      - [構造化手法の問題](#構造化手法の問題)
      - [「処理」と「データ」を一体に](#処理とデータを一体に)
      - [より自然なモデルに変換する](#より自然なモデルに変換する)
      - [「オブジェクト」とは](#オブジェクトとは)
      - [「自然なモデル」により適切な凝集度/結合度に](#自然なモデルにより適切な凝集度結合度に)
      - [インピーダンスミスマッチ](#インピーダンスミスマッチ)
      - [開発手法スタック・その4](#開発手法スタックその4)
      - [開発手法スタック・その5](#開発手法スタックその5)
      - [POA、DOA、OOAのまとめ](#poadoaooaのまとめ)
      - [さらに「オブジェクト指向の次」へ](#さらにオブジェクト指向の次へ)
  - [まとめ](#まとめ-1)
  - [参考文献](#参考文献-1)
  - [【QM】見積もり・提案教育・第一回v2.4.md](#qm見積もり提案教育第一回v24md)
  - [第一回 見積もり概論](#第一回-見積もり概論)
  - [目次](#目次-2)
  - [1. 見積もり序論](#1-見積もり序論)
    - [1-1. 本セミナーにおける「見積もり」](#1-1-本セミナーにおける見積もり)
      - [請負契約・基幹業務システム開発案件](#請負契約基幹業務システム開発案件)
      - [「契約を前提としない見積もり」―"見積もり"という専門用語](#契約を前提としない見積もり見積もりという専門用語)
      - [お客様は様々な目的で「定価」を知りたがる](#お客様は様々な目的で定価を知りたがる)
      - [見積もりの基本は規模見積もり](#見積もりの基本は規模見積もり)
    - [1-2. 契約と見積もり](#1-2-契約と見積もり)
      - [契約ごとに異なる見積もりの「対象」](#契約ごとに異なる見積もりの対象)
      - [契約が違えば見積もり水準も異なる](#契約が違えば見積もり水準も異なる)
      - [「見積もり」の意味はフェーズによって異なる](#見積もりの意味はフェーズによって異なる)
    - [1-3. 規模・工数・金額](#1-3-規模工数金額)
      - [請負契約案件用見積もりの基本モデル](#請負契約案件用見積もりの基本モデル)
      - [「ソフトウェア規模」を見積もる必要がある](#ソフトウェア規模を見積もる必要がある)
      - [ソフトウェア規模はどうすれば測れるのか？](#ソフトウェア規模はどうすれば測れるのか)
  - [2. 見積もりの不確実性](#2-見積もりの不確実性)
    - [2-1. 不確実性コーン](#2-1-不確実性コーン)
      - [プロジェクトの不確実性](#プロジェクトの不確実性)
      - [見積もりの「期待精度」](#見積もりの期待精度)
      - [PMのスキルは不確実性に抗う](#pmのスキルは不確実性に抗う)
    - [2-2. 不確実性と見積もり技法](#2-2-不確実性と見積もり技法)
      - [様々な見積もり技法](#様々な見積もり技法)
      - [見積もり技法と適用時期](#見積もり技法と適用時期)
      - [三種類の「ファンクションポイント法」](#三種類のファンクションポイント法)
    - [2-3. 見積もりの検証とは](#2-3-見積もりの検証とは)
      - [見積もりから「リスク」を検証する](#見積もりからリスクを検証する)
      - [見積もりの「鉄則」](#見積もりの鉄則)
  - [3. 案件初期分析デモンストレーション](#3-案件初期分析デモンストレーション)
    - [3-1. 案件メトリクスの収集](#3-1-案件メトリクスの収集)
      - [最初に、こんな相談が来たとします](#最初にこんな相談が来たとします)
      - [他にどんな数字が「速やかに入手出来そう」か？](#他にどんな数字が速やかに入手出来そうか)
      - [メトリクス以外の情報（コンテキスト）](#メトリクス以外の情報コンテキスト)
    - [3-2. 部門長向け見積もり検証シート](#3-2-部門長向け見積もり検証シート)
      - [「部門長向け見積もり検証シート」を使ってみよう](#部門長向け見積もり検証シートを使ってみよう)
      - [QAでの情報提供例](#qaでの情報提供例)
      - [ほとんどのメトリクスが不明な場合](#ほとんどのメトリクスが不明な場合)
  - [まとめ](#まとめ-2)
  - [参考文献](#参考文献-2)
  - [【QM】アーキテクト教育・第二回v5.0.md](#qmアーキテクト教育第二回v50md)
  - [第二回 図解言語/UML/データモデリング アーキテクト教育セミナー](#第二回-図解言語umlデータモデリング-アーキテクト教育セミナー)
  - [目次](#目次-3)
    - [1. 図解言語](#1-図解言語)
    - [2. UML](#2-uml)
    - [3. データモデリング](#3-データモデリング)
    - [まとめ](#まとめ-3)
    - [参考文献](#参考文献-3)
  - [1. 図解言語](#1-図解言語-1)
    - [1-1. 何故「図解」するのか？](#1-1-何故図解するのか)
      - [人間の脳は「文字」を優先していない](#人間の脳は文字を優先していない)
      - [マジックナンバー４±１](#マジックナンバー４１)
      - [文字よりも図形](#文字よりも図形)
      - [「図解」とは「モデル」を作る事](#図解とはモデルを作る事)
    - [1-2. 表現力、分析力](#1-2-表現力分析力)
      - [IT技術者の必須スキル「表現力」](#it技術者の必須スキル表現力)
      - [抽象的/数が多いものを「分析」する](#抽象的数が多いものを分析する)
      - [分析とは「より根本へ」「より大雑把に」](#分析とはより根本へより大雑把に)
    - [1-3. 図解言語とは](#1-3-図解言語とは)
      - [「表現」のための言語、「分析」のためのツール](#表現のための言語分析のためのツール)
    - [1-4. 様々な図解言語](#1-4-様々な図解言語)
      - [代表的な図解言語](#代表的な図解言語)
      - [マインドマップ（Mind Map/心の地図）](#マインドマップmind-map心の地図)
      - [自由形式の図（Free Form）](#自由形式の図free-form)
  - [2. UML](#2-uml-1)
    - [2-1. UMLとは？](#2-1-umlとは)
      - [UMLの誕生](#umlの誕生)
      - [「モデリング/設計」者の見果てぬ夢](#モデリング設計者の見果てぬ夢)
    - [2-2. 厳密記法とスケッチ記法](#2-2-厳密記法とスケッチ記法)
      - [モデリングも「アジャイルに行こう！」](#モデリングもアジャイルに行こう)
      - [「最も簡単な道具」を使おう！](#最も簡単な道具を使おう)
    - [2-3. 実用的なUML図](#2-3-実用的なuml図)
      - [UML図の適用シナリオ例](#uml図の適用シナリオ例)
      - [配置図（Deployment Diagram）](#配置図deployment-diagram)
      - [コンポーネント図（Component Diagram）](#コンポーネント図component-diagram)
      - [ロバストネス図（Robustness Diagram）](#ロバストネス図robustness-diagram)
      - [ロバストネス図でユースケースを表現する](#ロバストネス図でユースケースを表現する)
      - [クラス図（Class Diagram）](#クラス図class-diagram)
      - [クラス図でアーキテクチャを表現する](#クラス図でアーキテクチャを表現する)
      - [シーケンス図（Sequence Diagram）](#シーケンス図sequence-diagram)
    - [2-4. モデリングとUML](#2-4-モデリングとuml)
      - [モデリング ─ UMLを分析ツールとして使う](#モデリング--umlを分析ツールとして使う)
      - [ロバストネス分析 ─ ユースケース記述をロバストネス記法で表現](#ロバストネス分析--ユースケース記述をロバストネス記法で表現)
  - [3. データモデリング](#3-データモデリング-1)
    - [3-1. DBシステム？APデータストア？](#3-1-dbシステムapデータストア)
      - [「DBを使っているシステム」には２種類ある](#dbを使っているシステムには２種類ある)
    - [3-2. リレーショナルモデル](#3-2-リレーショナルモデル)
      - [リレーショナルモデルを読み解く ─ ERモデル](#リレーショナルモデルを読み解く--erモデル)
      - [ER図](#er図)
    - [3-3. 概念、論理、物理](#3-3-概念論理物理)
      - [「データ」をモデリングする](#データをモデリングする)
      - [見る人を意識して図解する](#見る人を意識して図解する)
    - [3-4. データモデルとUML](#3-4-データモデルとuml)
      - [はじめの一歩](#はじめの一歩)
      - [ロバストネス図を用いたドメイン分析](#ロバストネス図を用いたドメイン分析)
      - [データフローダイアグラム](#データフローダイアグラム)
      - [IDEF1XによるERモデル](#idef1xによるerモデル)
    - [3-5. インピーダンスミスマッチ](#3-5-インピーダンスミスマッチ)
      - [採用モデルの違いによるインピーダンスミスマッチ](#採用モデルの違いによるインピーダンスミスマッチ)
      - [開発プロジェクトにおけるインピーダンスミスマッチ](#開発プロジェクトにおけるインピーダンスミスマッチ)
  - [まとめ](#まとめ-4)
  - [参考文献](#参考文献-4)
  - [【QM】見積もり・提案教育・第二回v1.7.md](#qm見積もり提案教育第二回v17md)
  - [第二回 見積もり分析・PJ計画検証](#第二回-見積もり分析pj計画検証)
  - [目次](#目次-4)
  - [1. 見積もりの分析](#1-見積もりの分析)
    - [1-1. 勘と経験](#1-1-勘と経験)
      - [それは「勘と経験」です](#それは勘と経験です)
      - [勘と経験に頼らず、基本原則を守る](#勘と経験に頼らず基本原則を守る)
    - [1-2. オブジェクトポイント法](#1-2-オブジェクトポイント法)
      - [オブジェクトポイント法は妥当なのか](#オブジェクトポイント法は妥当なのか)
      - [見積もり検証の「ものさし」](#見積もり検証のものさし)
    - [1-3. NESMA法](#1-3-nesma法)
      - [「システムの規模」は何で決まるのか？](#システムの規模は何で決まるのか)
      - [FP試算法](#fp試算法)
      - [「工数」によるソフトウェア規模表現](#工数によるソフトウェア規模表現)
      - [実際の計算例と「工数ものさし」](#実際の計算例と工数ものさし)
      - [期待精度と妥当性](#期待精度と妥当性)
  - [2. PJ計画と検証](#2-pj計画と検証)
    - [2-1. EXE標準工程モデル](#2-1-exe標準工程モデル)
      - [見積もりとプロジェクト計画の関係](#見積もりとプロジェクト計画の関係)
      - [「工程の業界標準」は存在しない](#工程の業界標準は存在しない)
      - [システムエグゼ標準工程モデル](#システムエグゼ標準工程モデル)
    - [2-2. 工程のテーラリング](#2-2-工程のテーラリング)
      - [EXE標準工程モデルへのマッピング](#exe標準工程モデルへのマッピング)
      - [一部工程のみ受託の場合](#一部工程のみ受託の場合)
    - [2-3. 統計から見る工期・工数](#2-3-統計から見る工期工数)
      - [まずは基礎的な統計データの紹介](#まずは基礎的な統計データの紹介)
      - [総工数から工期を得る － 最適工期](#総工数から工期を得る--最適工期)
      - [典型的な工期配分](#典型的な工期配分)
      - [典型的な工数配分](#典型的な工数配分)
      - [「単体テストを実施しないプロジェクト」？の場合](#単体テストを実施しないプロジェクトの場合)
  - [3. 部門長向け見積もり検証シートで見る工期・工数](#3-部門長向け見積もり検証シートで見る工期工数)
    - [3-1. 最適工期](#3-1-最適工期)
      - [最適工期「から」逆算する](#最適工期から逆算する)
    - [3-2. 工期・工数配分](#3-2-工期工数配分)
      - [工期の配分や、工数の配分は？](#工期の配分や工数の配分は)
  - [まとめ](#まとめ-5)
  - [参考文献](#参考文献-5)
  - [【QM】【2024】アーキテクト教育・第三回v10.5.md](#qm2024アーキテクト教育第三回v105md)
  - [第三回 業界動向/エコシステム/先端技術 アーキテクト教育セミナー](#第三回-業界動向エコシステム先端技術-アーキテクト教育セミナー)
  - [目次](#目次-5)
  - [1. エコシステム](#1-エコシステム)
    - [1-1. 「エコシステム」とは？](#1-1-エコシステムとは)
      - [技術やサービスの「生態系」](#技術やサービスの生態系)
      - [技術やサービスのエコシステムを調べる](#技術やサービスのエコシステムを調べる)
    - [1-2. ニッチ](#1-2-ニッチ)
      - [生物は「生存可能な場所」で生きる](#生物は生存可能な場所で生きる)
      - [ニッチの発生と生存競争](#ニッチの発生と生存競争)
    - [1-3. 進化論](#1-3-進化論)
      - [進化＝ニッチに対応するものだけが生き残る](#進化ニッチに対応するものだけが生き残る)
      - [進化＝既存生物の99％の死](#進化既存生物の99の死)
      - [技術/サービスではなくニッチを知る](#技術サービスではなくニッチを知る)
      - [【閑話】ベンチャー/スタートアップの生存率](#閑話ベンチャースタートアップの生存率)
    - [1-4. OSS](#1-4-oss)
      - [ソフトウェア進化の坩堝 ─ OSS](#ソフトウェア進化の坩堝--oss)
      - [OSSエコシステム](#ossエコシステム)
      - [例1：JavaScriptのエコシステム（2022）](#例1javascriptのエコシステム2022)
      - [例2：JVMのエコシステム（2022）](#例2jvmのエコシステム2022)
      - [例3：LLMのエコシステム（2024/06/04）](#例3llmのエコシステム20240604)
  - [2. 先端技術のライフサイクル](#2-先端技術のライフサイクル)
    - [2-1. キャズム](#2-1-キャズム)
      - [技術/サービスの「一生」における「深い溝」](#技術サービスの一生における深い溝)
      - [キャズム理論が提唱する顧客構造](#キャズム理論が提唱する顧客構造)
      - [「クラウド」はキャズムを越えるのか？（2018）](#クラウドはキャズムを越えるのか2018)
      - [「クラウド」は日本国内におけるキャズムを超えた（2019）](#クラウドは日本国内におけるキャズムを超えた2019)
      - [「クラウド」はキャズムを越え・・・て？（2021）](#クラウドはキャズムを越えて2021)
      - [アーリーマジョリティ（実利主義者）](#アーリーマジョリティ実利主義者)
    - [2-2. ガートナーハイプサイクル](#2-2-ガートナーハイプサイクル)
      - [テクノロジのライフサイクル](#テクノロジのライフサイクル)
      - [ハイプサイクルの5段階](#ハイプサイクルの5段階)
      - [ハイプサイクル2022 ─ グローバル](#ハイプサイクル2022--グローバル)
      - [ハイプサイクル2022 ─ 日本国内版](#ハイプサイクル2022--日本国内版)
      - [テクノロジー重要度マトリクス（ガートナー/日本市場）](#テクノロジー重要度マトリクスガートナー日本市場)
    - [2-3. ペースレイヤリング](#2-3-ペースレイヤリング)
      - [企業内システムのライフサイクル](#企業内システムのライフサイクル)
      - [ペースレイヤリングの3レイヤ](#ペースレイヤリングの3レイヤ)
      - [「モノリシック」から「分割されたサービス」へ](#モノリシックから分割されたサービスへ)
      - [技術/サービスが持つ「モード」](#技術サービスが持つモード)
      - [ペースレイヤリングとバイモーダルIT](#ペースレイヤリングとバイモーダルit)
    - [2-4. スピードとアジリティ](#2-4-スピードとアジリティ)
      - [「アジリティ」が勝負を決める"新しい世界"](#アジリティが勝負を決める新しい世界)
      - [スピードではなくアジリティ ─ 先んずれば人を制す](#スピードではなくアジリティ--先んずれば人を制す)
  - [3. IT業界最新動向-2024/06](#3-it業界最新動向-202406)
    - [3-1. P.A.I. 襲来！](#3-1-pai-襲来)
      - [LLMは急速に応用段階へ](#llmは急速に応用段階へ)
      - [クリティカルマスを超えるのはどこか？](#クリティカルマスを超えるのはどこか)
      - [労働の「機械化」](#労働の機械化)
      - [支援（assist）か、拡張（augment）か](#支援assistか拡張augmentか)
      - [AI Coding Assistants](#ai-coding-assistants)
  - [まとめ](#まとめ-6)
  - [参考文献](#参考文献-6)
  - [【QM】見積もり・提案教育・第三回v2.0.md](#qm見積もり提案教育第三回v20md)
  - [第三回 見積もりと提案](#第三回-見積もりと提案)
  - [目次](#目次-6)
  - [1. 契約と見積もり](#1-契約と見積もり)
    - [1-1. PJ計画と契約](#1-1-pj計画と契約)
      - [開発工程と契約](#開発工程と契約)
      - [「一部工程だけ受託」ができる範囲/できない範囲](#一部工程だけ受託ができる範囲できない範囲)
      - [「一部工程だけ受注」の場合の見積もり検証](#一部工程だけ受注の場合の見積もり検証)
    - [1-2. 管理費と予備費](#1-2-管理費と予備費)
      - [「管理費」とは何か？](#管理費とは何か)
      - [「予備費」とは何か？](#予備費とは何か)
    - [1-3. 工数・工期削減/値下げ](#1-3-工数工期削減値下げ)
      - [そもそも現状、値下げ余地がほぼ無い](#そもそも現状値下げ余地がほぼ無い)
      - [他社より値段を下げるのは「差別化」ではない](#他社より値段を下げるのは差別化ではない)
      - [工数の削減（案）](#工数の削減案)
      - [工期の削減（案）](#工期の削減案)
  - [2. 見積もりと提案](#2-見積もりと提案)
    - [2-1. 見積もりと提案の違い](#2-1-見積もりと提案の違い)
      - [「提案」とは？](#提案とは)
      - [期待値コントロール ─ 我々はセールスをしている](#期待値コントロール--我々はセールスをしている)
      - [「見積もり資料」と「提案書」](#見積もり資料と提案書)
    - [2-2. 提案フロー](#2-2-提案フロー)
      - [プロポーザルマネジメント（提案管理）](#プロポーザルマネジメント提案管理)
      - [「見積もり」は分析ツール](#見積もりは分析ツール)
      - [現在の当社の提案フロー（2023/06時点）](#現在の当社の提案フロー202306時点)
    - [2-3. 見積もり/提案のレビュー](#2-3-見積もり提案のレビュー)
      - [「レビュー」はテストプロセス](#レビューはテストプロセス)
      - [提案・見積もりに関する社内手続き（2022～）](#提案見積もりに関する社内手続き2022)
  - [3. 部門長向け見積もり検証シートで提案計画](#3-部門長向け見積もり検証シートで提案計画)
    - [3-1. 最初の30分で案件規模把握](#3-1-最初の30分で案件規模把握)
      - [最初に「提案計画」が必要だ](#最初に提案計画が必要だ)
      - [最初の30分で規模を判断](#最初の30分で規模を判断)
    - [3-2. 最初のQAで勝負価格帯判断](#3-2-最初のqaで勝負価格帯判断)
      - [「適正な価格」とは](#適正な価格とは)
      - [勝負価格帯](#勝負価格帯)
  - [まとめ](#まとめ-7)
  - [参考文献](#参考文献-7)
  - [【QM】アーキテクト教育・第四回v5.9.md](#qmアーキテクト教育第四回v59md)
  - [第四回 フィジビリティスタディ/ソリューション構築/コンサルティング アーキテクト教育セミナー](#第四回-フィジビリティスタディソリューション構築コンサルティング-アーキテクト教育セミナー)
  - [目次](#目次-7)
    - [1. フィジビリティスタディ](#1-フィジビリティスタディ)
    - [2. ソリューション構築](#2-ソリューション構築)
    - [3. コンサルティング](#3-コンサルティング)
    - [まとめ](#まとめ-8)
    - [参考文献](#参考文献-8)
  - [1. フィジビリティスタディ](#1-フィジビリティスタディ-1)
    - [1-1. 「フィジビリティ」とは？](#1-1-フィジビリティとは)
      - [「実現可能性」とは？](#実現可能性とは)
      - [フィジビリティスタディ](#フィジビリティスタディ)
    - [1-2. 技術調査](#1-2-技術調査)
      - [技術調査](#技術調査)
      - [事前の/普段の「勉強」の重要性](#事前の普段の勉強の重要性)
    - [1-3. 概念実証(PoC)](#1-3-概念実証poc)
      - [概念(コンセプト)実証(証明)の重要性](#概念コンセプト実証証明の重要性)
      - [PoCの実践](#pocの実践)
    - [1-4. フィジビリティテスト](#1-4-フィジビリティテスト)
      - [実現可能性をテストする](#実現可能性をテストする)
      - [それ、テストする必要ある？](#それテストする必要ある)
  - [2. ソリューション構築](#2-ソリューション構築-1)
    - [2-1. 「ソリューション」とは？](#2-1-ソリューションとは)
      - [我々が提供するサービスは「課題の解決策」](#我々が提供するサービスは課題の解決策)
    - [2-2. 顧客満足度の定義](#2-2-顧客満足度の定義)
      - [「満足」してくれないと買って貰えない](#満足してくれないと買って貰えない)
      - [どうすれば期待を上回れるのか？](#どうすれば期待を上回れるのか)
    - [2-3. お客様の「真なる課題」](#2-3-お客様の真なる課題)
      - [「顧客はドリルが欲しいんじゃない。穴をあけたいのだ」(セオドア・レビット)](#顧客はドリルが欲しいんじゃない穴をあけたいのだセオドアレビット)
      - [「真なる課題」を発見し「事前期待」を上回る](#真なる課題を発見し事前期待を上回る)
      - [差別化](#差別化)
      - [【閑話】一を聞いて十を知ってはいけない](#閑話一を聞いて十を知ってはいけない)
    - [2-4. ソリューションを「構築」する](#2-4-ソリューションを構築する)
      - [「提案」の基本的な流れ](#提案の基本的な流れ)
      - [提案依頼書(RFP)の分析(1/2)](#提案依頼書rfpの分析12)
      - [提案依頼書(RFP)の分析(2/2)](#提案依頼書rfpの分析22)
      - [ソリューションの「コンセプト」と「ストーリー」](#ソリューションのコンセプトとストーリー)
      - [ソリューション設計(1/4)](#ソリューション設計14)
      - [ソリューション設計(2/4)](#ソリューション設計24)
      - [ソリューション設計(3/4)](#ソリューション設計34)
      - [ソリューション設計(4/4)](#ソリューション設計44)
      - [提案書の「設計」](#提案書の設計)
  - [3. コンサルティング](#3-コンサルティング-1)
    - [3-1. 「コンサルティング」とは？](#3-1-コンサルティングとは)
      - [白髪の紳士 Vs ファクト](#白髪の紳士-vs-ファクト)
      - [「事実」を積み重ねる](#事実を積み重ねる)
      - [コンセプチュアルスキル](#コンセプチュアルスキル)
      - [「提案」も一種のコンサルティング](#提案も一種のコンサルティング)
    - [3-2. SIビジネスの終焉](#3-2-siビジネスの終焉)
      - [旧来型のSIビジネス](#旧来型のsiビジネス)
      - [本物の「SIベンダー」](#本物のsiベンダー)
      - [高付加価値ビジネスへのシフト](#高付加価値ビジネスへのシフト)
    - [3-3. 我々のお客様は誰なのか？](#3-3-我々のお客様は誰なのか)
      - [お客様にとっての「付加価値」](#お客様にとっての付加価値)
    - [3-4. コンサルティングフレームワーク](#3-4-コンサルティングフレームワーク)
      - [コンサルティングの「基本言語」](#コンサルティングの基本言語)
      - [コンサルティングの「デザインパターン」](#コンサルティングのデザインパターン)
      - [コンサルティングの「フレームワーク」](#コンサルティングのフレームワーク)
      - [3C分析(さんシーぶんせき)](#3c分析さんシーぶんせき)
      - [4P分析(フォーピーぶんせき)](#4p分析フォーピーぶんせき)
      - [5F分析(ファイブフォースぶんせき)](#5f分析ファイブフォースぶんせき)
      - [SWOT分析(スワットぶんせき)](#swot分析スワットぶんせき)
  - [まとめ](#まとめ-9)
  - [参考文献](#参考文献-9)
  - [【QM】見積もり・提案教育・第四回 番外編v1.5.md](#qm見積もり提案教育第四回-番外編v15md)
  - [第四回【番外編】要求分析～詳細設計：上流工程基礎](#第四回番外編要求分析詳細設計上流工程基礎)
  - [目次](#目次-8)
  - [1. 要件定義](#1-要件定義)
    - [1-1. 「プロジェクト」の全体像](#1-1-プロジェクトの全体像)
      - [「ITプロジェクト」の持ち主はお客様](#itプロジェクトの持ち主はお客様)
      - [「要件定義」はユーザー工程](#要件定義はユーザー工程)
      - [企画と要求](#企画と要求)
      - [事業要求 → 業務要求 → 機能要求](#事業要求--業務要求--機能要求)
    - [1-2. 要求の分析](#1-2-要求の分析)
      - [要望・要求・要件](#要望要求要件)
      - [勘違いしてはいけない ─ それは要件ではなく要求です](#勘違いしてはいけない--それは要件ではなく要求です)
      - [要求分析](#要求分析)
      - [「真なる課題」とは？](#真なる課題とは)
      - [お客様から真なる課題を「引き出す」](#お客様から真なる課題を引き出す)
      - [具体的な「要求分析」作業とは](#具体的な要求分析作業とは)
    - [1-3. 要件の定義](#1-3-要件の定義)
      - [「要件を定義する」とはどういう事か？](#要件を定義するとはどういう事か)
      - [【閑話】鉄の三角形（Scope, Time and Cost）](#閑話鉄の三角形scope-time-and-cost)
      - [非機能要件の定義 ─ サービスレベルの合意が重要](#非機能要件の定義--サービスレベルの合意が重要)
      - [要求の「レベル」を必ず定義する](#要求のレベルを必ず定義する)
  - [2. 基本設計](#2-基本設計)
    - [2-1. 「設計」とは何か](#2-1-設計とは何か)
      - [そもそも「設計」とは？](#そもそも設計とは)
      - [そもそも「設計作業」とは？](#そもそも設計作業とは)
      - [大前提：抽象/具象とは？](#大前提抽象具象とは)
    - [2-2. 概念設計](#2-2-概念設計)
      - [概念 → 論理 → 物理](#概念--論理--物理)
      - [概念モデルの作成](#概念モデルの作成)
    - [2-3. 論理設計](#2-3-論理設計)
      - [論理設計のための「試行錯誤」](#論理設計のための試行錯誤)
      - [論理モデルの作成](#論理モデルの作成)
  - [3. 詳細設計](#3-詳細設計)
    - [3-1. 物理設計](#3-1-物理設計)
      - [改めて、概念 → 論理 → 物理](#改めて概念--論理--物理)
      - [物理設計とは](#物理設計とは)
    - [3-2. 「システム」の設計](#3-2-システムの設計)
      - [「アプリケーション開発」ではなく「システム開発」の場合](#アプリケーション開発ではなくシステム開発の場合)
      - [システムレベル名/非機能の物理設計](#システムレベル名非機能の物理設計)
    - [3-3. 詳細設計とプログラミング](#3-3-詳細設計とプログラミング)
      - [アプリケーションの構造設計](#アプリケーションの構造設計)
      - [機能設計 ─ クラスコメントやメソッドコメントに全て書ける？](#機能設計--クラスコメントやメソッドコメントに全て書ける)
      - [さあ、製造へ！](#さあ製造へ)
  - [まとめ](#まとめ-10)
  - [参考文献](#参考文献-10)
  - [【QM】アーキテクト教育・第五回v5.9.md](#qmアーキテクト教育第五回v59md)
  - [第五回 ドメイン分析/非機能要件定義 アーキテクト教育セミナー](#第五回-ドメイン分析非機能要件定義-アーキテクト教育セミナー)
  - [目次](#目次-9)
    - [1. 要求分析/要件定義](#1-要求分析要件定義)
    - [2. ドメイン分析](#2-ドメイン分析)
    - [3. 非機能要件定義](#3-非機能要件定義)
    - [まとめ](#まとめ-11)
    - [参考文献](#参考文献-11)
  - [1. 要求分析/要件定義](#1-要求分析要件定義-1)
    - [1-1. 「要求」と「要件」](#1-1-要求と要件)
      - [「要望」「要求」「要件」](#要望要求要件-1)
      - [不確実性コーンと「要求」「要件」](#不確実性コーンと要求要件)
    - [1-2. 「業務」「機能」「非機能」要件](#1-2-業務機能非機能要件)
      - [要求分析](#要求分析-1)
      - [三種類の「要件」](#三種類の要件)
      - [重要なのは「業務要件」](#重要なのは業務要件)
      - [業務要件を明確にする重要性](#業務要件を明確にする重要性)
      - [「機能要件」と「非機能要件」](#機能要件と非機能要件)
    - [1-3. 要件の管理とテスト](#1-3-要件の管理とテスト)
      - [要件トレーサビリティ](#要件トレーサビリティ)
      - [要件とテストの関係](#要件とテストの関係)
    - [1-4. 2020年民法改正](#1-4-2020年民法改正)
      - [2020年「瑕疵」が無くなった！？](#2020年瑕疵が無くなった)
  - [2. ドメイン分析](#2-ドメイン分析-1)
    - [2-1. 「ドメイン」とは？](#2-1-ドメインとは)
      - [機能(Function)の前にドメイン(Domain)を見極めよう](#機能functionの前にドメインdomainを見極めよう)
      - [ドメイン(問題領域)とは？](#ドメイン問題領域とは)
      - [ドメインと「オブジェクト」と機能](#ドメインとオブジェクトと機能)
    - [2-2. 関心事の分離(SOC)](#2-2-関心事の分離soc)
      - [敵は小分けにして各個撃破すべし](#敵は小分けにして各個撃破すべし)
      - [お客様の「関心事」を分析する](#お客様の関心事を分析する)
    - [2-3. コンテキスト境界](#2-3-コンテキスト境界)
      - [「用語」は語る](#用語は語る)
      - [「用語」を冗長に表現する](#用語を冗長に表現する)
      - [「文脈」の境界](#文脈の境界)
    - [2-4. ドメインの分析](#2-4-ドメインの分析)
      - [コンテキスト境界 ≒ ドメインの境界](#コンテキスト境界--ドメインの境界)
      - [UMLドメインモデリング](#umlドメインモデリング)
      - [ロバストネス図記法で行こう！](#ロバストネス図記法で行こう)
      - [非機能ドメイン/コンテキスト境界の例](#非機能ドメインコンテキスト境界の例)
  - [3. 非機能要件定義](#3-非機能要件定義-1)
    - [3-1. 非機能要求](#3-1-非機能要求)
      - [ユーザーの「要求」](#ユーザーの要求)
      - [非機能要求のフレームワーク](#非機能要求のフレームワーク)
      - [複数の非機能要求セット ─ クラウドインテグレーションの時代](#複数の非機能要求セット--クラウドインテグレーションの時代)
    - [3-2. ソフトウェア品質特性](#3-2-ソフトウェア品質特性)
      - [JIS-X 0129-1：ソフトウェア品質特性モデル](#jis-x-0129-1ソフトウェア品質特性モデル)
    - [3-3. JUASガイドライン](#3-3-juasガイドライン)
      - [JUAS『非機能要求仕様定義ガイドライン』](#juas非機能要求仕様定義ガイドライン)
      - [非機能要求指標](#非機能要求指標)
    - [3-4. 非機能要求グレード](#3-4-非機能要求グレード)
      - [非機能要求グレード](#非機能要求グレード)
      - [非機能要求グレード活用シート](#非機能要求グレード活用シート)
      - [非機能要求グレード2018](#非機能要求グレード2018)
  - [まとめ](#まとめ-12)
  - [参考文献](#参考文献-12)
  - [【QM】見積もり・提案教育・第五回v2.1.md](#qm見積もり提案教育第五回v21md)
  - [第五回 プロジェクトリスクマネジメント - 見積もり・提案教育セミナー](#第五回-プロジェクトリスクマネジメント---見積もり提案教育セミナー)
  - [目次](#目次-10)
  - [1. リスクマネジメント序論](#1-リスクマネジメント序論)
    - [1-1. リスクと見積もり](#1-1-リスクと見積もり)
      - [プロジェクトマネジメントにおける「リスク」とは](#プロジェクトマネジメントにおけるリスクとは)
      - [本セミナーにおける「リスク」の定義と「リスク対策」](#本セミナーにおけるリスクの定義とリスク対策)
      - [プロジェクト予算に現れるリスク対策費](#プロジェクト予算に現れるリスク対策費)
    - [1-2. 予備費](#1-2-予備費)
      - [二種類の「予備費」](#二種類の予備費)
      - [コンティンジェンシー予備費の見積もり](#コンティンジェンシー予備費の見積もり)
      - [「提案」段階でのコンティンジェンシー予備費見積もりは大変！](#提案段階でのコンティンジェンシー予備費見積もりは大変)
      - [【閑話】見積もりアンチパターン](#閑話見積もりアンチパターン)
    - [1-3. IPAリスク事象ドライバ](#1-3-ipaリスク事象ドライバ)
      - [「リスク」を知る](#リスクを知る)
      - [「リスク事象」と「リスク事象ドライバ」](#リスク事象とリスク事象ドライバ)
  - [2. プロジェクトリスクマネジメント](#2-プロジェクトリスクマネジメント)
    - [2-1. リスクドライバの把握と定量化](#2-1-リスクドライバの把握と定量化)
      - [リスクドライバの把握](#リスクドライバの把握)
      - [リスクドライバの可視化](#リスクドライバの可視化)
      - [リスクドライバの定量化](#リスクドライバの定量化)
    - [2-2. リスクコントロール](#2-2-リスクコントロール)
      - [定量的プロジェクトマネジメント](#定量的プロジェクトマネジメント)
      - [継続的かつ複数人による監視](#継続的かつ複数人による監視)
      - [リスクドライバ対策（予防策）](#リスクドライバ対策予防策)
    - [2-3. プロジェクトリスクマネジメント](#2-3-プロジェクトリスクマネジメント)
      - [プロジェクトリスク登録簿（PMBOK）](#プロジェクトリスク登録簿pmbok)
      - [リスク発生原因 → リスク事象](#リスク発生原因--リスク事象)
      - [リスク対策の立案](#リスク対策の立案)
  - [3. リスクドライバ評価シート（試用中）](#3-リスクドライバ評価シート試用中)
    - [3-1. リスクドライバ評価シート](#3-1-リスクドライバ評価シート)
      - [「リスクの度合い」は定量的に評価可能か？](#リスクの度合いは定量的に評価可能か)
      - [リスクドライバ定量評価のメリット](#リスクドライバ定量評価のメリット)
      - [リスクドライバ評価シートの構造](#リスクドライバ評価シートの構造)
      - [リスクドライバ評価モデル](#リスクドライバ評価モデル)
    - [3-2. リスク値の評価](#3-2-リスク値の評価)
      - [リスク値合計値の評価研究](#リスク値合計値の評価研究)
      - [リスク値の合計とリスク状況（2021～2024/07 社内実績ベース）](#リスク値の合計とリスク状況2021202407-社内実績ベース)
      - [リスク評価レベルと社内実績の傾向（2021～2024/07社内実績ベース）](#リスク評価レベルと社内実績の傾向2021202407社内実績ベース)
    - [3-3. リスク対策サイクル](#3-3-リスク対策サイクル)
      - [リスクドライバ評価シートを見積もり・提案に活かす](#リスクドライバ評価シートを見積もり提案に活かす)
      - [リスク評価レベルを超概算見積もりに活かす](#リスク評価レベルを超概算見積もりに活かす)
      - [プロジェクトマネジメントに活かす](#プロジェクトマネジメントに活かす)
  - [まとめ](#まとめ-13)
  - [参考文献](#参考文献-13)
  - [【QM】アーキテクト教育・第六回v4.5.md](#qmアーキテクト教育第六回v45md)
  - [第六回 見積もり/プロジェクト計画 アーキテクト教育セミナー](#第六回-見積もりプロジェクト計画-アーキテクト教育セミナー)
  - [目次](#目次-11)
    - [1. 見積もり概論](#1-見積もり概論)
    - [2. 見積もり実践](#2-見積もり実践)
    - [3. プロジェクト計画](#3-プロジェクト計画)
    - [まとめ](#まとめ-14)
    - [参考文献](#参考文献-14)
  - [1. 見積もり概論](#1-見積もり概論-1)
    - [1-1. 規模？工数？金額？](#1-1-規模工数金額)
      - [見積もりの「対象」は契約ごとに異なる](#見積もりの対象は契約ごとに異なる)
      - [「実際に開発・製造にかかる費用」を見積もる](#実際に開発製造にかかる費用を見積もる)
      - [因みに準委任契約では？](#因みに準委任契約では)
      - [規模 → 工数？ → 金額](#規模--工数--金額)
      - [システムの「規模」を見積もる](#システムの規模を見積もる)
    - [1-2. 見積もりの不確実性](#1-2-見積もりの不確実性)
      - [規模見積もりの「予測」の難しさ](#規模見積もりの予測の難しさ)
      - [我々のビジネスにおける「見積もり」](#我々のビジネスにおける見積もり)
      - [見積もりに期待される精度](#見積もりに期待される精度)
      - [【閑話】大幅に値下げしたい？](#閑話大幅に値下げしたい)
    - [1-3. 見積もり技法](#1-3-見積もり技法)
      - [様々な見積もり技法](#様々な見積もり技法-1)
      - [見積もり技法と適用時期](#見積もり技法と適用時期-1)
      - [見積もりの「鉄則」](#見積もりの鉄則-1)
      - [見積もりの精度/妥当性](#見積もりの精度妥当性)
    - [1-4. FP法](#1-4-fp法)
      - [ファンクションポイント法のメリット](#ファンクションポイント法のメリット)
      - [IFPUG法が採用するモデル（1/3）](#ifpug法が採用するモデル13)
      - [IFPUG法が採用するモデル（2/3）](#ifpug法が採用するモデル23)
      - [IFPUG法が採用するモデル（3/3）](#ifpug法が採用するモデル33)
      - [FP法による見積もり](#fp法による見積もり)
  - [2. 見積もり実践](#2-見積もり実践-1)
    - [2-1. JUAS統計による超概算](#2-1-juas統計による超概算)
      - [オブジェクトポイント法は妥当なのか](#オブジェクトポイント法は妥当なのか-1)
    - [2-2. NESMA法](#2-2-nesma法)
      - [簡易FP分析 ── NESMA法](#簡易fp分析--nesma法)
      - [FP試算法](#fp試算法-1)
      - [FP概算法](#fp概算法)
    - [2-3. JFPUG公表値による超概算](#2-3-jfpug公表値による超概算)
      - [実際の計算例と「工数ものさし」](#実際の計算例と工数ものさし-1)
      - [実践例：RFPから高速に超概算見積もりを得る](#実践例rfpから高速に超概算見積もりを得る)
  - [3. プロジェクト計画](#3-プロジェクト計画-1)
    - [3-1. EXE標準工程モデル](#3-1-exe標準工程モデル)
      - [「標準的な工程の定義」は存在するか？](#標準的な工程の定義は存在するか)
      - [システムエグゼ標準工程モデル](#システムエグゼ標準工程モデル-1)
      - [EXE標準工程モデルは「ユーザー指向」](#exe標準工程モデルはユーザー指向)
      - [EXE標準工程モデルと開発プロセス（1/2）](#exe標準工程モデルと開発プロセス12)
      - [EXE標準工程モデルと開発プロセス（2/2）](#exe標準工程モデルと開発プロセス22)
    - [3-2. 最適工期/工期配分](#3-2-最適工期工期配分)
      - [総工数から工期を得る ── 最適工期](#総工数から工期を得る--最適工期-1)
      - [典型的な工期配分](#典型的な工期配分-1)
      - [工期の配分（IPA）](#工期の配分ipa)
    - [3-3. 工数配分](#3-3-工数配分)
      - [典型的な工数配分](#典型的な工数配分-1)
      - [「単体テストを実施しないプロジェクト」？の場合](#単体テストを実施しないプロジェクトの場合-1)
      - [「管理費」とは何か？](#管理費とは何か-1)
    - [3-4. プロセスフローの設計](#3-4-プロセスフローの設計)
      - [工程表の設計](#工程表の設計)
      - [データ移行などとの同期](#データ移行などとの同期)
  - [まとめ](#まとめ-15)
  - [参考文献](#参考文献-15)
  - [【QM】見積もり・提案教育・第六回v2.2.md](#qm見積もり提案教育第六回v22md)
  - [第六回「提案」その前に 見積もり・提案教育セミナー](#第六回提案その前に-見積もり提案教育セミナー)
  - [目次](#目次-12)
  - [1. 我々は「何を売っている」のか？](#1-我々は何を売っているのか)
    - [1-1. システム開発企業の業態](#1-1-システム開発企業の業態)
      - [「我々はどこにいる」？](#我々はどこにいる)
      - [「システム開発企業」色々](#システム開発企業色々)
    - [1-2. 我々の「商品」とは](#1-2-我々の商品とは)
      - [SIerとは](#sierとは)
      - [【閑話】当社は「元請け」？「一次請け」？](#閑話当社は元請け一次請け)
      - [「契約」の観点で見てみると](#契約の観点で見てみると)
      - [売っているのは「モノ」だけ？](#売っているのはモノだけ)
      - [我々が売るものは「ソリューション（解決策）」](#我々が売るものはソリューション解決策)
    - [1-3. 何を売るべきか？](#1-3-何を売るべきか)
      - [お客様にとって最大の付加価値を持つ課題は？](#お客様にとって最大の付加価値を持つ課題は)
      - [我々は「事業課題の解決策」を売るべき](#我々は事業課題の解決策を売るべき)
      - [課題解決策＝ソリューション](#課題解決策ソリューション)
  - [2. 「提案」とは？](#2-提案とは)
    - [2-1. 「見積もり」とは？（振り返り）](#2-1-見積もりとは振り返り)
      - [「見積もり」とは一種のツールである](#見積もりとは一種のツールである)
      - [「見積もり」には様々な種類がある](#見積もりには様々な種類がある)
      - [見積もりには「期待精度」がある](#見積もりには期待精度がある)
      - [「見積もり技法」には適用時期がある](#見積もり技法には適用時期がある)
    - [2-2. 「見積もり」と「提案」の違い](#2-2-見積もりと提案の違い)
      - [「提案」とは？](#提案とは-1)
      - [「見積もり」はお客様の期待通り、「提案」は期待を上回る](#見積もりはお客様の期待通り提案は期待を上回る)
      - [「ソリューション」ベンダー](#ソリューションベンダー)
    - [2-3. ソリューション構築](#2-3-ソリューション構築)
      - [ソリューションとは](#ソリューションとは)
      - [顧客満足を「創る」](#顧客満足を創る)
      - [「差別化」とは](#差別化とは)
  - [3. プロポーザルマネジメント](#3-プロポーザルマネジメント)
    - [3-1. 「提案管理」のフェーズ/プロセス](#3-1-提案管理のフェーズプロセス)
      - [APMPプロポーザルマネジメント](#apmpプロポーザルマネジメント)
      - [プロポーザルマネジメントの「フェーズ」](#プロポーザルマネジメントのフェーズ)
      - [プロポーザルマネジメントの「プロセス」](#プロポーザルマネジメントのプロセス)
    - [3-2. 「提案管理」の体制/役割](#3-2-提案管理の体制役割)
      - [プロポーザルマネジメントに必要な役割（ロール）](#プロポーザルマネジメントに必要な役割ロール)
      - [プロポーザルマネジメントの体制](#プロポーザルマネジメントの体制)
    - [3-3. 当社の社内フロー](#3-3-当社の社内フロー)
      - [現在の当社内の提案フロー（2024/07）](#現在の当社内の提案フロー202407)
      - [提案・見積もりに関する社内手続き（2022～）](#提案見積もりに関する社内手続き2022-1)
  - [まとめ](#まとめ-16)
  - [参考文献](#参考文献-16)
  - [【QM】アーキテクト教育・第七回v5.3.md](#qmアーキテクト教育第七回v53md)
  - [第七回 設計手法/技法/デザインパターン - アーキテクト教育セミナー](#第七回-設計手法技法デザインパターン---アーキテクト教育セミナー)
  - [目次](#目次-13)
    - [1. 「設計」とは](#1-設計とは)
    - [2. 設計手法/技法](#2-設計手法技法)
    - [3. デザインパターン](#3-デザインパターン)
  - [1. 「設計」とは](#1-設計とは-1)
    - [1-1. 「仕様」と「設計」の違い](#1-1-仕様と設計の違い)
      - [仕様を定義し、仕様に基づき設計する](#仕様を定義し仕様に基づき設計する)
      - [開発工程で見る仕様と設計](#開発工程で見る仕様と設計)
    - [1-2. 「機能」と「非機能」](#1-2-機能と非機能)
      - [仕様や設計の対象としての「機能」と「非機能」](#仕様や設計の対象としての機能と非機能)
      - [機能/非機能と顧客満足](#機能非機能と顧客満足)
    - [1-3. 機能設計](#1-3-機能設計)
      - [「機能設計」の源流は業務フローにあり](#機能設計の源流は業務フローにあり)
      - [「画面から設計する」難しさ](#画面から設計する難しさ)
      - [アクティビティ図（Activity Diagram）](#アクティビティ図activity-diagram)
      - [機能設計の目的 ─ お客様の生産性向上](#機能設計の目的--お客様の生産性向上)
    - [1-4. 基本設計/詳細設計](#1-4-基本設計詳細設計)
      - [工程名称の原典 ─ ADSG](#工程名称の原典--adsg)
      - [基本設計（Basic Design/BD）](#基本設計basic-designbd)
      - [要件定義「以前」の基本設計](#要件定義以前の基本設計)
      - [詳細設計（Detail Design/DD）](#詳細設計detail-designdd)
      - [開発フレームワークによる詳細設計の共通化](#開発フレームワークによる詳細設計の共通化)
      - [詳細設計は省略出来る？](#詳細設計は省略出来る)
      - [シーケンス図の記述](#シーケンス図の記述)
  - [2. 設計手法/技法](#2-設計手法技法-1)
    - [2-1. データ設計](#2-1-データ設計)
      - [システムの「データ」を設計する](#システムのデータを設計する)
      - [「データストア」と「データベース」](#データストアとデータベース)
      - [より自然なデータモデル](#より自然なデータモデル)
    - [2-2. 構造化設計とモジュール分割](#2-2-構造化設計とモジュール分割)
      - [構造化設計の本質は「いかに機能を分割するか」](#構造化設計の本質はいかに機能を分割するか)
      - [モジュール分割技法](#モジュール分割技法)
      - [何故「分割技法」が重要なのか](#何故分割技法が重要なのか)
      - [プログラムの副作用（side effect）](#プログラムの副作用side-effect)
      - [CRUD表 ─ モジュール同士の関連を把握する](#crud表--モジュール同士の関連を把握する)
    - [2-3. オブジェクト指向設計](#2-3-オブジェクト指向設計)
      - [構造化設計＝非機能モデル](#構造化設計非機能モデル)
      - [オブジェクト指向設計＝機能モデル](#オブジェクト指向設計機能モデル)
      - [分析クラスモデル](#分析クラスモデル)
      - [データとドメインの関係](#データとドメインの関係)
    - [2-4. アプリケーションアーキテクチャ](#2-4-アプリケーションアーキテクチャ)
      - [設計手法/技法 ≒ アプリケーションアーキテクチャ](#設計手法技法--アプリケーションアーキテクチャ)
      - [アプリケーションアーキテクチャ ≒ デザインパターン](#アプリケーションアーキテクチャ--デザインパターン)
  - [3. デザインパターン](#3-デザインパターン-1)
    - [3-1. パターンランゲージ](#3-1-パターンランゲージ)
      - [C・アレグザンダーの夢](#cアレグザンダーの夢)
    - [3-2. GoF23](#3-2-gof23)
      - [伝説の「4人のギャング（The Gang Of Four）」](#伝説の4人のギャングthe-gang-of-four)
      - [単語としてのGoF23](#単語としてのgof23)
    - [3-3. エンタープライズアーキテクチャ](#3-3-エンタープライズアーキテクチャ)
      - [アプリケーションコンポーネント/レイヤのデザインパターン](#アプリケーションコンポーネントレイヤのデザインパターン)
      - [コンポーネントモデル/レイヤアーキテクチャ](#コンポーネントモデルレイヤアーキテクチャ)
      - [アプリケーションフレームワークへ](#アプリケーションフレームワークへ)
      - [エンタープライズアーキテクチャ≠アプリケーションアーキテクチャ](#エンタープライズアーキテクチャアプリケーションアーキテクチャ)
    - [3-4. クラウドデザインパターン](#3-4-クラウドデザインパターン)
      - [「クラウド」は新たなプラットフォームへ](#クラウドは新たなプラットフォームへ)
      - [クラウドネイティブなアプリケーション](#クラウドネイティブなアプリケーション)
      - [様々なアプリケーションアーキテクチャ（1/2）](#様々なアプリケーションアーキテクチャ12)
      - [様々なアプリケーションアーキテクチャ（2/2）](#様々なアプリケーションアーキテクチャ22)
      - [「クラウド」のデザインパターン？](#クラウドのデザインパターン)
      - [分散システムデザインパターン](#分散システムデザインパターン)
      - [非同期分散システム](#非同期分散システム)
  - [まとめ](#まとめ-17)
  - [参考文献](#参考文献-17)
  - [【QM】見積もり・提案教育・第七回v2.3.md](#qm見積もり提案教育第七回v23md)
  - [第七回 提案の基本的な流れ](#第七回-提案の基本的な流れ)
  - [目次](#目次-14)
    - [1. 提案の流れ](#1-提案の流れ)
    - [2. 案件の初期分析](#2-案件の初期分析)
    - [まとめ](#まとめ-18)
    - [参考文献](#参考文献-18)
  - [1. 提案の流れ](#1-提案の流れ-1)
    - [1-1. リードから引き合いへ](#1-1-リードから引き合いへ)
      - [「営業」から見た「案件」の流れ](#営業から見た案件の流れ)
      - [RFI/RFT ─ 企画プロセス](#rfirft--企画プロセス)
      - [【閑話】RFQ（見積依頼書）について](#閑話rfq見積依頼書について)
      - [提案依頼「以前」の「見積もり」](#提案依頼以前の見積もり)
      - [企画成立までが勝負](#企画成立までが勝負)
    - [1-2. 提案戦略策定](#1-2-提案戦略策定)
      - [キャプチャープラン](#キャプチャープラン)
      - [3C分析（さんシーぶんせき）](#3c分析さんシーぶんせき-1)
      - [3C分析による提案判断](#3c分析による提案判断)
      - [エグゼクティブサマリ](#エグゼクティブサマリ)
      - [一枚企画書による顧客との企画すり合わせ](#一枚企画書による顧客との企画すり合わせ)
      - [ソリューション案を「生み出す」](#ソリューション案を生み出す)
      - [提案戦略決定と提案計画](#提案戦略決定と提案計画)
    - [1-3. RFP受領～提案](#1-3-rfp受領提案)
      - [RFP受領 ─ キャプチャープランの有無による違い](#rfp受領--キャプチャープランの有無による違い)
      - [理想状態での「提案」](#理想状態での提案)
  - [2. 案件の初期分析](#2-案件の初期分析-1)
    - [2-1. 情報収集・分析・QA](#2-1-情報収集分析qa)
      - [案件評価の開始・情報収集](#案件評価の開始情報収集)
      - [分析](#分析)
      - [QA](#qa)
    - [2-2. 案件タイプの見極め](#2-2-案件タイプの見極め)
      - [案件タイプ → お客様の「意図」を見抜く](#案件タイプ--お客様の意図を見抜く)
      - [当社が提案『すべき』案件か？](#当社が提案すべき案件か)
      - [お客様の予算感や計画品質を分析 →「見積もり」による分析](#お客様の予算感や計画品質を分析-見積もりによる分析)
      - [企業情報からの予算規模推測](#企業情報からの予算規模推測)
      - [勝負価格帯予測の合意](#勝負価格帯予測の合意)
      - [リスク分析 → 企業情報の分析やリスクドライバの分析](#リスク分析--企業情報の分析やリスクドライバの分析)
      - [ホットボタンの把握と期待値コントロール](#ホットボタンの把握と期待値コントロール)
      - [とにかく早期にプロポーザルマネジメントを開始しましょう](#とにかく早期にプロポーザルマネジメントを開始しましょう)
    - [2-3. 提案計画](#2-3-提案計画)
      - [提案計画の前に...そもそも提案、しますか？](#提案計画の前にそもそも提案しますか)
      - [社内の提案体制構築](#社内の提案体制構築)
      - [提案期の概要](#提案期の概要)
  - [まとめ](#まとめ-19)
  - [参考文献](#参考文献-19)
  - [【HPMS】アーキテクト教育・第八回v4.3.md](#hpmsアーキテクト教育第八回v43md)
  - [第八回 ネットワーク設計/サーバ設計 分析クラスモデリング](#第八回-ネットワーク設計サーバ設計-分析クラスモデリング)
  - [目次](#目次-15)
  - [1. ネットワーク設計基礎](#1-ネットワーク設計基礎)
    - [1-1. OSI参照モデル](#1-1-osi参照モデル)
      - [プロトコルの7つの階層](#プロトコルの7つの階層)
      - [プロトコルスタック](#プロトコルスタック)
      - [そのプロトコルL3？L7？](#そのプロトコルl3l7)
    - [1-2. L2](#1-2-l2)
      - [データリンク層(L2)の概要](#データリンク層l2の概要)
      - [L2スイッチとMACアドレス](#l2スイッチとmacアドレス)
      - [Spanning Tree Protocol(STP)](#spanning-tree-protocolstp)
      - [Virtual LAN(VLAN)](#virtual-lanvlan)
    - [1-3. L3](#1-3-l3)
      - [ネットワーク層(L3)の概要](#ネットワーク層l3の概要)
      - [L3スイッチ/ルータとIPアドレス](#l3スイッチルータとipアドレス)
      - [ルーティング](#ルーティング)
      - [ルーティングテーブルとスタティックルーティング](#ルーティングテーブルとスタティックルーティング)
      - [ダイナミックルーティング](#ダイナミックルーティング)
    - [1-4. L7](#1-4-l7)
      - [アプリケーション層(L7)の概要](#アプリケーション層l7の概要)
      - [L7スイッチとADC](#l7スイッチとadc)
      - [L7ファイアウォール](#l7ファイアウォール)
  - [2. サーバ設計基礎](#2-サーバ設計基礎)
    - [2-1. ○○サーバ](#2-1-サーバ)
      - [「サーバ」とは？](#サーバとは)
      - [様々なサーバ](#様々なサーバ)
    - [2-2. サーバサイジング](#2-2-サーバサイジング)
      - [サーバスペックの「見積もり」](#サーバスペックの見積もり)
      - [アプリケーションアーキテクチャの影響](#アプリケーションアーキテクチャの影響)
    - [2-3. サーバ構成](#2-3-サーバ構成)
      - [構成するサービス/ソフトウェアスタック](#構成するサービスソフトウェアスタック)
      - [サーバの冗長化](#サーバの冗長化)
    - [2-4. セキュリティ](#2-4-セキュリティ)
      - [サーバのセキュリティ設計](#サーバのセキュリティ設計)
  - [3. 分析クラスモデリング実践](#3-分析クラスモデリング実践)
    - [3-1. 「機能」を図解してみよう](#3-1-機能を図解してみよう)
      - [こんなドキュメントフローを想定](#こんなドキュメントフローを想定)
      - [分析クラスモデリング](#分析クラスモデリング)
      - [ロバストネス図記法による「機能」の図解](#ロバストネス図記法による機能の図解)
    - [3-2. 「振る舞いを」を冗長化してみよう](#3-2-振る舞いをを冗長化してみよう)
      - [ロバストネス図記法における主語・述語・目的語](#ロバストネス図記法における主語述語目的語)
    - [3-3. 「目的語」に寄せてみよう](#3-3-目的語に寄せてみよう)
      - [コントロールの移動①データドメインの発見](#コントロールの移動データドメインの発見)
      - [コントロールの移動②機能の「順序」は無視する](#コントロールの移動機能の順序は無視する)
    - [3-4. 「ドメイン」を発見してみよう](#3-4-ドメインを発見してみよう)
      - [ドメイン/オブジェクト/メソッド](#ドメインオブジェクトメソッド)
  - [まとめ](#まとめ-20)
  - [参考文献](#参考文献-20)
  - [【HPMS】見積もり・提案教育・第八回v1.8.md](#hpms見積もり提案教育第八回v18md)
  - [第八回 提案の要素技術](#第八回-提案の要素技術)
  - [見積もり・提案教育セミナー](#見積もり提案教育セミナー)
  - [目次](#目次-16)
    - [1. 提案の要素技術](#1-提案の要素技術)
    - [2. ペースレイヤリング分析](#2-ペースレイヤリング分析)
    - [まとめ](#まとめ-21)
    - [参考文献](#参考文献-21)
  - [1. 提案の要素技術](#1-提案の要素技術-1)
    - [1-1. 期待値コントロール](#1-1-期待値コントロール)
      - [提案前にやらなくてはいけない事](#提案前にやらなくてはいけない事)
      - [最重要ポイント！顧客満足（CS）向上！](#最重要ポイント顧客満足cs向上)
      - [期待値コントロール](#期待値コントロール)
      - [提案の際に気をつけるべき点](#提案の際に気をつけるべき点)
        - [1. お客様の要求レベルを正しく把握し、そのレベルに関し具体的に合意しておくこと](#1-お客様の要求レベルを正しく把握しそのレベルに関し具体的に合意しておくこと)
        - [2. 出来ない可能性がある事を「出来る」と言わないこと](#2-出来ない可能性がある事を出来ると言わないこと)
        - [3. 不得意な案件は極力回避すること](#3-不得意な案件は極力回避すること)
    - [1-2. 差別化](#1-2-差別化)
      - [競争優位の戦略](#競争優位の戦略)
        - [1. コストリーダーシップ戦略](#1-コストリーダーシップ戦略)
        - [2. ニッチ戦略](#2-ニッチ戦略)
        - [3. 差別化戦略](#3-差別化戦略)
      - [コストリーダーシップ戦略](#コストリーダーシップ戦略)
      - [ニッチ戦略](#ニッチ戦略)
      - [差別化戦略](#差別化戦略)
      - [最も基本の「差別化」](#最も基本の差別化)
      - [SIにおける「真の差別化」](#siにおける真の差別化)
    - [1-3. マーケティング](#1-3-マーケティング)
      - [「市場」を知る、「市場」を読む](#市場を知る市場を読む)
      - [キャズム理論](#キャズム理論)
      - [キャズム理論 ─ プロダクト/サービスを「いつ」「どう」売るか？](#キャズム理論--プロダクトサービスをいつどう売るか)
      - [ガートナー・ハイプ・サイクル](#ガートナーハイプサイクル)
      - [ハイプ・サイクルから見えてくる事](#ハイプサイクルから見えてくる事)
      - [マーケティング観点からの、企業ITガバナンスの理解](#マーケティング観点からの企業itガバナンスの理解)
      - [ペースレイヤリング](#ペースレイヤリング)
      - [バイモーダルIT ─「２つの流儀」](#バイモーダルit-２つの流儀)
  - [2. ペースレイヤリング分析](#2-ペースレイヤリング分析-1)
    - [2-1. ペースレイヤリング分析の目的](#2-1-ペースレイヤリング分析の目的)
      - [前提 ─ クラウドインテグレーションの時代](#前提--クラウドインテグレーションの時代)
      - [ITガバナンス要求の分析と、要求に応じた機能の分類](#itガバナンス要求の分析と要求に応じた機能の分類)
    - [2-2. ペースレイヤリング分析](#2-2-ペースレイヤリング分析)
      - [ペースレイヤリング分析フレームワークの紹介](#ペースレイヤリング分析フレームワークの紹介)
      - [ペースレイヤリング分析フレームワーク・デモンストレーション](#ペースレイヤリング分析フレームワークデモンストレーション)
    - [2-3. 提案戦略](#2-3-提案戦略)
      - [お客様との「すり合わせ」の効果](#お客様とのすり合わせの効果)
      - [ITガバナンス要求を隠し「逆転」を図る](#itガバナンス要求を隠し逆転を図る)
  - [まとめ](#まとめ-22)
  - [参考文献](#参考文献-22)
  - [【HPMS】アーキテクト教育・第九回v4.5.md](#hpmsアーキテクト教育第九回v45md)
  - [第九回 ミドルウェア(DB,OS)設計・開発フレームワーク構築](#第九回-ミドルウェアdbos設計開発フレームワーク構築)
  - [目次](#目次-17)
    - [1. ミドルウェア(DB,OS)設計基礎](#1-ミドルウェアdbos設計基礎)
    - [2. 開発フレームワーク設計](#2-開発フレームワーク設計)
    - [3. 開発フレームワーク構築](#3-開発フレームワーク構築)
    - [まとめ](#まとめ-23)
    - [参考文献](#参考文献-23)
  - [1. ミドルウェア(DB,OS)設計基礎](#1-ミドルウェアdbos設計基礎-1)
    - [1-1. ミドルウェア設計とは](#1-1-ミドルウェア設計とは)
      - [「ミドルウェア」とは](#ミドルウェアとは)
    - [1-2. データベース物理設計](#1-2-データベース物理設計)
      - [データベースマネジメントシステム](#データベースマネジメントシステム)
      - [データベースの「物理設計」？](#データベースの物理設計)
      - [データベースの物理設計](#データベースの物理設計-1)
    - [1-3. Web/APサーバ設計](#1-3-webapサーバ設計)
      - [WebサーバとAPサーバ](#webサーバとapサーバ)
      - [APサーバの設計](#apサーバの設計)
      - [Webサーバの設計](#webサーバの設計)
      - [C10K問題とNon Blocking I/O](#c10k問題とnon-blocking-io)
    - [1-4. その他のミドルウェア](#1-4-その他のミドルウェア)
      - [ジョブコントローラ/統合ジョブ管理](#ジョブコントローラ統合ジョブ管理)
      - [メッセージキューイング](#メッセージキューイング)
      - [クラウドインテグレーション](#クラウドインテグレーション)
    - [【閑話】ITプロジェクト内での分業](#閑話itプロジェクト内での分業)
  - [2. 開発フレームワーク設計](#2-開発フレームワーク設計-1)
    - [2-1. 開発フレームワークとは](#2-1-開発フレームワークとは)
      - [「開発」と「製造」](#開発と製造)
      - [「開発」期間](#開発期間)
      - [「機能」の基盤となる「人のレイヤ」と「非機能のレイヤ」](#機能の基盤となる人のレイヤと非機能のレイヤ)
      - [開発フレームワークの目的](#開発フレームワークの目的)
    - [2-2. フレームワーク投資判断](#2-2-フレームワーク投資判断)
      - [開発フレームワークの効果](#開発フレームワークの効果)
      - [生産ラインの何処にいくら投資するか？](#生産ラインの何処にいくら投資するか)
      - [fool proof（ポカヨケ）](#fool-proofポカヨケ)
    - [2-3. ソフトウェアアーキテクチャ](#2-3-ソフトウェアアーキテクチャ)
      - [ソフトウェアコンポーネントの設計](#ソフトウェアコンポーネントの設計)
      - [ペースレイヤリング](#ペースレイヤリング-1)
      - [マイクロサービスアーキテクチャとは？](#マイクロサービスアーキテクチャとは)
      - [基礎的なソフトウェアスタックの構成](#基礎的なソフトウェアスタックの構成)
    - [2-4. コンポーネント配置](#2-4-コンポーネント配置)
      - [ソフトウェアコンポーネント配置の設計](#ソフトウェアコンポーネント配置の設計)
  - [3. 開発フレームワーク構築](#3-開発フレームワーク構築-1)
    - [3-1. アプリケーションアーキテクチャ](#3-1-アプリケーションアーキテクチャ)
      - [アプリケーションの「コンセプト」](#アプリケーションのコンセプト)
      - [ハイレベルなアーキテクチャの選択](#ハイレベルなアーキテクチャの選択)
      - [機能ドメインを分析する](#機能ドメインを分析する)
      - [レイヤ、ドメイン、アプリケーションコンポーネント](#レイヤドメインアプリケーションコンポーネント)
    - [3-2. APコンポーネント設計](#3-2-apコンポーネント設計)
      - [ドメイン](#ドメイン)
      - [アプリケーションコンポーネント](#アプリケーションコンポーネント)
    - [3-3. フレームワーク/APIの実装](#3-3-フレームワークapiの実装)
      - [スーパークラスの設計](#スーパークラスの設計)
      - [ラップ！ラップ！ラップ！](#ラップラップラップ)
    - [3-4. テスタビリティ](#3-4-テスタビリティ)
      - [「良い設計」＝「テストし易い設計」](#良い設計テストし易い設計)
      - [テスタビリティ基本戦略（1/2）](#テスタビリティ基本戦略12)
      - [テスタビリティ基本戦略（2/2）](#テスタビリティ基本戦略22)
  - [まとめ](#まとめ-24)
  - [参考文献](#参考文献-24)
  - [【HPMS】見積もり・提案教育・第九回v1.8.md](#hpms見積もり提案教育第九回v18md)
  - [第九回 提案作成 見積もり・提案教育セミナー](#第九回-提案作成-見積もり提案教育セミナー)
  - [目次](#目次-18)
    - [4. ソリューションを創る](#4-ソリューションを創る)
    - [5. 提案書を作る](#5-提案書を作る)
    - [まとめ](#まとめ-25)
    - [参考文献](#参考文献-25)
  - [4. ソリューションを創る](#4-ソリューションを創る-1)
    - [4-1. 「真なる課題」の分析](#4-1-真なる課題の分析)
      - [提案計画～提案](#提案計画提案)
      - [プロポーザルマネジメントプロセス](#プロポーザルマネジメントプロセス)
      - [「提案」とは「お客様の課題の解決策」のこと](#提案とはお客様の課題の解決策のこと)
      - [RFPに「真なる課題」は載っているのか？](#rfpに真なる課題は載っているのか)
      - [「顧客はドリルが欲しいんじゃない。穴をあけたいのだ」](#顧客はドリルが欲しいんじゃない穴をあけたいのだ)
      - [差別化されたストーリー](#差別化されたストーリー)
    - [4-2. コンセプト](#4-2-コンセプト)
      - [選ばれる作品の条件とは？](#選ばれる作品の条件とは)
      - [優れた提案の必須条件 ① シンプルなコンセプト](#優れた提案の必須条件--シンプルなコンセプト)
      - [優れた提案の必須条件 ② 魅力的なストーリー](#優れた提案の必須条件--魅力的なストーリー)
      - [優れたコンセプトを生み出すのは「アイディア」](#優れたコンセプトを生み出すのはアイディア)
    - [4-3. ストーリーとキャラクター](#4-3-ストーリーとキャラクター)
      - [ストーリーボード（提案の骨格）](#ストーリーボード提案の骨格)
      - [主人公はお客様](#主人公はお客様)
      - [「差別化」された物語とは？](#差別化された物語とは)
      - [同じRFPから「差別化された物語」を生み出すには](#同じrfpから差別化された物語を生み出すには)
      - [改めて「見積もりと提案の違い」](#改めて見積もりと提案の違い)
      - [ストーリーボードは少人数で創る](#ストーリーボードは少人数で創る)
  - [5. 提案書を作る](#5-提案書を作る-1)
    - [5-1. RFP への回答](#5-1-rfp-への回答)
      - [「提案書」の作成](#提案書の作成)
      - [具体的なスケジュール（当社の場合）](#具体的なスケジュール当社の場合)
      - [「提案書」は「提案依頼書への回答文書」](#提案書は提案依頼書への回答文書)
      - [冒頭にはテーマステートメント](#冒頭にはテーマステートメント)
    - [5-2. 非機能より機能](#5-2-非機能より機能)
      - [案件規模やタイプにより、提案書の読み手が変わる](#案件規模やタイプにより提案書の読み手が変わる)
      - [テーマステートメントは事業要求に対する回答が理想](#テーマステートメントは事業要求に対する回答が理想)
      - [「技術的な話」は、あまり重要ではない](#技術的な話はあまり重要ではない)
    - [5-3. ビジネス文書作法](#5-3-ビジネス文書作法)
      - [提案書は「公的文書」です](#提案書は公的文書です)
      - [提案書に関係する基本的なルール（1/2）](#提案書に関係する基本的なルール12)
      - [提案書に関係する基本的なルール（2/2）](#提案書に関係する基本的なルール22)
  - [まとめ](#まとめ-26)
  - [参考文献](#参考文献-26)
  - [【HPMS】アーキテクト教育・第十回v5.8.md](#hpmsアーキテクト教育第十回v58md)
  - [第十回 テスト・品質管理・セキュリティ アーキテクト教育セミナー](#第十回-テスト品質管理セキュリティ-アーキテクト教育セミナー)
  - [目次](#目次-19)
    - [1. テスト](#1-テスト)
    - [2. 品質管理](#2-品質管理)
    - [3. セキュリティ](#3-セキュリティ)
    - [まとめ](#まとめ-27)
    - [参考文献](#参考文献-27)
  - [1. テスト](#1-テスト-1)
    - [1-1. テストの基礎](#1-1-テストの基礎)
      - [「テスト」の本質](#テストの本質)
      - [「テスト」の種類](#テストの種類)
      - [ホワイトボックステスト](#ホワイトボックステスト)
      - [ブラックボックステスト](#ブラックボックステスト)
      - [ブラックボックステストは「全ての境界」をテストする](#ブラックボックステストは全ての境界をテストする)
      - [「境界」には「プロトコル」がある](#境界にはプロトコルがある)
      - [「アプリケーション境界」はアーキテクチャにより異なる](#アプリケーション境界はアーキテクチャにより異なる)
      - [非同期分散システムのテスト](#非同期分散システムのテスト)
    - [1-2. テストカバレッジ](#1-2-テストカバレッジ)
      - [テストの「品質」](#テストの品質)
      - [ホワイトボックステストの品質](#ホワイトボックステストの品質)
    - [1-3. テストの自動化](#1-3-テストの自動化)
      - [テストのコストはロスコスト](#テストのコストはロスコスト)
      - [テストの自動化可能/自動化必須な作業](#テストの自動化可能自動化必須な作業)
      - [単体テストは自動化するのが「常識」](#単体テストは自動化するのが常識)
      - [単体テストの「暗黒の8年間」](#単体テストの暗黒の8年間)
      - [xUnitによるテスト自動化標準ソリューション](#xunitによるテスト自動化標準ソリューション)
      - [GUIテストの特殊性(1/2)](#guiテストの特殊性12)
      - [GUIテストの特殊性(2/2)](#guiテストの特殊性22)
    - [1-4. テスタビリティに配慮した設計](#1-4-テスタビリティに配慮した設計)
      - [「テスタビリティ」とは何か](#テスタビリティとは何か)
      - [テスタビリティを生み出す設計](#テスタビリティを生み出す設計)
  - [2. 品質管理](#2-品質管理-1)
    - [2-1. テスト工程/プロセス](#2-1-テスト工程プロセス)
      - [「品質管理」と「品質保証」](#品質管理と品質保証)
      - [ITプロジェクトにおける標準的なテスト工程](#itプロジェクトにおける標準的なテスト工程)
      - [主要なテストの定義](#主要なテストの定義)
      - [V字モデル表現](#v字モデル表現)
      - [テスト工程に含まれる主要テストプロセス](#テスト工程に含まれる主要テストプロセス)
    - [2-2. テスト計画/仕様](#2-2-テスト計画仕様)
      - [品質管理計画](#品質管理計画)
      - [品質/テスト計画書](#品質テスト計画書)
      - [品質/テスト計画書の項目例(1/2)](#品質テスト計画書の項目例12)
      - [品質/テスト計画書の項目例(2/2)](#品質テスト計画書の項目例22)
    - [2-3. レビュー](#2-3-レビュー)
      - [「レビュー」は目視で行うテスト](#レビューは目視で行うテスト)
      - [レビュープロセスの定義](#レビュープロセスの定義)
      - [コードレビュー①目視によるレビュー](#コードレビュー目視によるレビュー)
      - [コードレビュー②コード解析ツール](#コードレビューコード解析ツール)
      - [コードレビュー③リファクタリング](#コードレビューリファクタリング)
    - [2-4. 品質目標](#2-4-品質目標)
      - [テストの品質目標](#テストの品質目標)
      - [要件定義～詳細設計工程の品質目標](#要件定義詳細設計工程の品質目標)
      - [製造＋UT工程の品質目標](#製造ut工程の品質目標)
      - [製造品質 ─ サイクロマティック数](#製造品質--サイクロマティック数)
      - [単体テスト品質 ─ C0～C2基準](#単体テスト品質--c0c2基準)
      - [状態遷移テスト品質 ─ Nスイッチカバレッジ](#状態遷移テスト品質--nスイッチカバレッジ)
      - [テストパターンの組合せ爆発](#テストパターンの組合せ爆発)
      - [機能単体テスト～結合テスト工程の品質目標](#機能単体テスト結合テスト工程の品質目標)
      - [システムテスト工程の品質目標](#システムテスト工程の品質目標)
      - [ユーザーテスト工程～納品後の品質目標](#ユーザーテスト工程納品後の品質目標)
  - [3. セキュリティ](#3-セキュリティ-1)
    - [3-1. ネットワークセキュリティ](#3-1-ネットワークセキュリティ)
      - [もはや「セキュリティ」を避けては通れない](#もはやセキュリティを避けては通れない)
      - [セキュリティ対策の基本構成](#セキュリティ対策の基本構成)
      - [ネットワーク上のセキュリティコンポーネント](#ネットワーク上のセキュリティコンポーネント)
  - [【HPMS】見積もり・提案教育・第十回v1.6.md](#hpms見積もり提案教育第十回v16md)
  - [第十回「勝つ提案」作成 見積もり・提案教育セミナー](#第十回勝つ提案作成-見積もり提案教育セミナー)
  - [目次](#目次-20)
    - [1. プロポーザルマネジメントの実現](#1-プロポーザルマネジメントの実現)
    - [2. 勝つ提案を造る](#2-勝つ提案を造る)
    - [まとめ](#まとめ-28)
    - [参考文献](#参考文献-28)
  - [1. プロポーザルマネジメントの実現](#1-プロポーザルマネジメントの実現-1)
    - [1-1. 勝てる案件に集中する](#1-1-勝てる案件に集中する)
      - [■ 改めて「何故プロポーザルマネジメントが必要なのか？」](#-改めて何故プロポーザルマネジメントが必要なのか)
      - [■「必勝」の絶対条件「勝てる相手とだけ勝負する」](#必勝の絶対条件勝てる相手とだけ勝負する)
      - [■ 勝てる案件に集中するために必要な事](#-勝てる案件に集中するために必要な事)
      - [提案期間（1ヶ月の例）](#提案期間1ヶ月の例)
    - [1-2. プロポーザルマネジメント体制構築](#1-2-プロポーザルマネジメント体制構築)
      - [■ 提案人材のスキルセット](#-提案人材のスキルセット)
      - [■ 最低限必要な「提案チーム」体制](#-最低限必要な提案チーム体制)
    - [1-3. 提案のための人材育成](#1-3-提案のための人材育成)
      - [■ 大型提案に向け必須な人材（1/2）](#-大型提案に向け必須な人材12)
      - [■ 大型提案に向け必須な人材（2/2）](#-大型提案に向け必須な人材22)
      - [■ 将来に向けて](#-将来に向けて)
  - [2. 勝つ提案を造る](#2-勝つ提案を造る-1)
    - [2-1. ペルソナ](#2-1-ペルソナ)
      - [■ まずは前提を確認 ─ それは「コンペティション」？それとも「プロポーザル」？](#-まずは前提を確認--それはコンペティションそれともプロポーザル)
      - [■ 戦略・作戦・戦術](#-戦略作戦戦術)
      - [■「戦場の霧」と戦う ─ 仮説思考/ペルソナ](#戦場の霧と戦う--仮説思考ペルソナ)
      - [提案プロセス](#提案プロセス)
      - [■ 戦術から考えてはいけない](#-戦術から考えてはいけない)
    - [2-2. ブービートラップ](#2-2-ブービートラップ)
      - [■「作戦」は多種多様で毎回違う](#作戦は多種多様で毎回違う)
      - [■ QAに、競合他社向けの罠をしかける](#-qaに競合他社向けの罠をしかける)
      - [■ 提案書にも罠をしかける](#-提案書にも罠をしかける)
    - [2-3. コスト](#2-3-コスト)
      - [■ コスト安は差別化要素ではない、とは言うものの...](#-コスト安は差別化要素ではないとは言うものの)
      - [■ 制約条件「品質を下げずにコストを下げる」](#-制約条件品質を下げずにコストを下げる)
      - [■ 低コスト化戦術アンチパターン](#-低コスト化戦術アンチパターン)
      - [■ 低コスト化戦術パターン](#-低コスト化戦術パターン)
  - [まとめ](#まとめ-29)
  - [参考文献](#参考文献-29)
  - [【HPMS】ロードサービス社内業務システム サンプルRFPv1.3.md](#hpmsロードサービス社内業務システム-サンプルrfpv13md)
  - [ロードサービス社内業務システム RFPサンプル](#ロードサービス社内業務システム-rfpサンプル)
  - [1. 基本情報](#1-基本情報)
    - [1-1. 企業情報](#1-1-企業情報)
    - [1-2. 事業課題](#1-2-事業課題)
    - [1-3. システム化の目的](#1-3-システム化の目的)
      - [■ロードサービス社内業務システム更改](#ロードサービス社内業務システム更改)
      - [■保険商品マスタ/サービスマスタ拡張](#保険商品マスタサービスマスタ拡張)
  - [2. システム化範囲](#2-システム化範囲)
    - [2-1. システム化対象範囲](#2-1-システム化対象範囲)
    - [2-2. 現行システム規模](#2-2-現行システム規模)
  - [3. スケジュール](#3-スケジュール)
    - [3-1. マスタスケジュール](#3-1-マスタスケジュール)
  - [4. 提案依頼範囲](#4-提案依頼範囲)
    - [4-1. 依頼範囲](#4-1-依頼範囲)
    - [4-2. 機能一覧](#4-2-機能一覧)
      - [基本機能（1/2）](#基本機能12)
      - [マスタ管理・集計機能（2/2）](#マスタ管理集計機能22)
    - [4-3. 前提条件](#4-3-前提条件)

---

---

## 【QM】アーキテクト教育・第一回v5.2.md

## 第一回 開発モデル/プロセス/手法 アーキテクト教育セミナー

## 目次

### 1. 開発モデル
- 1-1. ウォーターフォールモデル
- 1-2. カスケードウォーターフォールモデル
- 1-3. プロトタイピングモデル
- 1-4. アジャイル開発モデル

### 2. 開発プロセス
- 2-1. フェーズとプロセス
- 2-2. EXE標準工程モデル
- 2-3. 開発プロセス設計
- 2-4. 成果物フローと検収モデル

### 3. 開発手法
- 3-1. 構造化手法
- 3-2. プロセス中心アプローチ(POA)
- 3-3. データ中心アプローチ(DOA)
- 3-4. オブジェクト指向アプローチ(OOA)

### まとめ

### 参考文献

---

## 1. 開発モデル

開発モデルとは、システム／アプリケーションを開発するための、標準化された手順や手法の「モデル」です。この章では、基本的な開発モデルとその特徴について解説します。

### 1-1. ウォーターフォールモデル

#### 成果物は流れる「滝」のように

最も古典的な開発モデルの一つがウォーターフォールモデルです。開発プロセスが直列に配置され、あたかも水が滝を流れ落ちるように、成果物が工程を流れて行きます。

**工程の流れ：**
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト

1970年代に提唱されたモデルであり、IBMによる「アプリケーション開発標準化ガイド(ADSG)」が、古典的ウォーターフォール開発の原典だと言われています。

工場生産における生産ライン(ベルトコンベア)と見立てる事も出来る。上流で基盤を作成し、徐々に加工・部品の組み込みをしてゆくイメージに近い。

#### ウォーターフォールモデルの特徴

| 特徴 | 顧客の視点 | SIベンダーの視点 |
|------|------------|------------------|
| 計画 | 予算や業務計画が立て易い。反面、開発期間が長くなる。 | 開発計画が立てやすく進捗管理し易い。反面、上流工程での品質問題がロスコストに直結するリスクがある。 |
| 品質/リスク | 高い品質を期待出来る。開発失敗リスクをベンダーが負うため、経営リスクが低い。 | 請負契約における契約不適合責任を果たすために必要なプロセス。開発失敗リスクを負うため、経営リスクが高い。 |
| コスト | 開発コストが高い。開発人材を内部で多く雇用する必要がなく、必要な工程のみ外注が可能なので、人件費を抑制出来る。 | 売り上げが大きい(ただし一時的)。売上を安定させるためにコストを低く抑えがちで、利益率が低い。 |
| アジリティ | アジリティが低く、ビジネスの変化による変更要求に追いつけない場合がある。 | 開発期間が長く、大型案件が受注出来れば長期間の売上が安定する。 |

SIベンダー側が若干不利な契約により、多くのユーザーにとって最重要な品質の確保とリスクの回避というユーザーメリットが生まれている。

#### 現実のモデルは「複数の滝」が流れる

現実のプロジェクトが純粋なウォーターフォールモデルに従って計画される事はほとんどありません。特に当社のようなSIベンダーでは多くの場合インフ構築、アプリケーション製造、データ/システム移行、或いは段階的リリースなど、いくつかの「滝」が並行して進むのが一般的です。

特にマルチベンダ環境の場合、それぞれの「滝」同士のマイルストーンを同期させるのが非常に難しい。初期段階での十分な計画が必要。

### 1-2. カスケードウォーターフォールモデル

#### ウォーターフォールの問題を改善するための...なのだが...

ウォーターフォールの特徴の一つは、各開発プロセスが直列に配置される事です。つまり、前のプロセスが完了しないと次のプロセスが開始出来ないため、ムラ・ムダが多くなるという点です。

そこで、各開発工程が重なる事を許容しよう、というアイディアがカスケードウォーターフォール(小さく連なった滝)モデルです。

この重なった部分で、要件定義で発生した空き工数(ムラ)を使い、確定分から基本設計に着手するというアイディア。

**しかし、このモデルを請負案件で採用すると、原理的に大きな潜在リスクが発生してしまいます：**

- 原理的に工期が短くなるため、欠陥が発生した場合の復旧期間が確保出来ない→最適工期から外れる
- 最初から空き工数(バッファ)を使い切る計画になるため仕様変更等の問題発生時に充てる工数が無くなる
- **なので工程を重ねて定義してはいけません**

### 1-3. プロトタイピングモデル

#### 「プロトタイピング」は生産性が高い？

ウォーターフォールの特徴のもう一つは、お客様の要求を正しく理解しない場合(仕様バグ)やお客様の要求が後から変更された場合(仕様変更)いわゆる「手戻り」となり、損失が発生してしまう事です。

特に画面仕様は、紙の上で見ても中々イメージがつかみにくく、お客様の要求と我々の理解がずれやすく、お客様の要求が変化し易いものです。この問題を解決するために提唱されたのがプロトタイピングモデルです。

**プロセス：**
要件定義 → 基本設計 → プロトタイプ作成 → お客様評価 → フィードバック修正 → 詳細設計

早い段階で画面仕様が確定し、以後の仕様バグ/仕様変更リスクが確かに低下する。ただしプロトタイプ作成分基本設計工数が増。

**プロトタイプを元に製造すれば、製造コストを下げる事が出来る？**

→ **コスト削減効果は無い**

- コードの30％以上が修正された場合、1から作成した場合と同等のコストがかかってしまう(統計的事実)
- 一部で効果が出ても、基本設計工数増加で相殺されてしまう

#### 「モックアップ」なら効果が出る可能性が

プロトタイプではなく再利用を考えない「モックアップ」ならば、効果が出る可能性があります。

ただし、実際の効果を得るためには、以下の条件を満たさなければなりません：

1. EXCEL等で画面を作図するのとほとんど変わらない手間でモックアップが作成出来る
2. モックアップを構成するコンポーネントは実際に使用されるコンポーネント（WebアプリケーションならHTML）
3. モックアップを「再利用」する計画を立てない（一部再利用が可能な場合はあるが、コスト削減効果はほとんど無い）

これら条件を満たす事が出来れば（基本設計におけるコスト削減効果は無いものの）後工程における仕様バグ/仕様変更のリスクを軽減出来る事で、間接的なコスト削減効果が見込めます。

#### その他のSDLC系モデル

ウォーターフォールと同じSDLC系の開発モデルには、他にインクリメンタルモデルやスパイラル開発があります。

これらは全てSDLCのアイディアに従った、計画型・構造化型の開発モデルであり、我々が行う受託開発でも昔からニーズに応じて採用される事があります。

ただし、インクリメンタルモデル/スパイラルは開発対象システムの特性やお客様のニーズに応じ都度開発モデル/プロセスを設計する必要がある事や、通常はウォーターフォールモデルよりも工期が長く/コストが大きくなるため近年の採用事例はあまり多くありません。

お客様側にコストや工期をかけても要件の確定に時間をかけたい、或いはコストや工期をかけても開発失敗のリスクを回避したいという要求がある場合には、検討・提案してあげてください。

> 「何を作るのか」が、序盤に全て決まるのならば（=要件定義するなら）、原理的には、ウォーターフォールモデルが最安・最速のモデルなんだよね。

### 1-4. アジャイル開発モデル

#### SDLCの限界

ここまで見てきたウォーターフォールモデルとその派生モデルはソフトウェア開発ライフサイクル(Systems Development Life Cycle/SDLC)という考え方に基づくものです。

SDLC全てに共通する、アジリティを阻害し開発の柔軟さを失わせる根本原因は、実は「事前に開発計画を立てる」という考え方そのものです。

**SDLCの問題点：**
- 計画を立てる → 開発期間1年/コストの決定
- システムへの要求が数ヶ月単位で変化する場合、計画が受け入れられない
- コスト増の必要が出ても、すぐにはコストも人も確保出来ない
- そもそも「手戻り」って、計画があるから発生するんだよね？

**なら、いっそ「計画」を止めてしまえば良いのでは？**

#### アジャイル ─ アジリティが全て！

アジャイル開発モデルの基本的アイディアは、完全な計画を立てる事を止め、期間とコストの制約の中で出来る所までやる、というものです。

これはコンシューマー系ビジネスや、ベンチャー企業／スタートアップ企業のような「ビジネスアジリティの実現を何より優先する」という業界では好まれる考え方です。

**アジャイルの特徴：**
- 計画を立てない
- 期間は決めるが「何をどこまで作るか」は決めない
- コストは決めるが、その目的は「コストの範囲内で出来る所までやる」ため
- 計画が無いから手戻りは発生しない。修正は「最初から必要だと許容」している

例えば「６ヶ月もかけて開発しても、システムがリリースされる頃にはそのニーズが変化している or 無くなっている可能性がある」というビジネス向け。

#### アジャイル ─ 根本的に顧客要求が異なる

表現を変えれば、実現化範囲(スコープ)を固定した要求の場合はウォーターフォールが向いていて、予算(コスト)と開発期間(タイム)を固定した要求の場合はアジャイルが向いている、という事です。

**ウォーターフォール（スコープ固定）：**
- 実現範囲(スコープ)が固定されているのでコストと期間(タイム)を調整（見積もり）する
- つまり、基幹/業務システムのような「ビジネス上の要求がある限り必要機能を実現しなければならない」モノの開発用プロセス
- 全体が「完成」するスピードは「速」い

**アジャイル（コスト・タイム固定）：**
- コスト(予算)と期間(期日)を固定するので実現範囲(どこまで作るか)を調整する
- つまり、製品やサービスのような「締切があるので低機能でもX日までにリリースしなければいけない」モノの開発用プロセス
- 全体が「完成」するスピードは遅いが、アジリティは「早」い

#### アジャイルは「極端な不確実性に対応する」

アジャイル開発モデルには様々な種類がありますが、全てに共通しているのは「完成するものが何なのかは事前に予測出来ない」という点です。一見不思議に感じるかもしれませんが、極端に不確実性が高い状況ではそれこそが必要な特性です。

**SDLC系モデル vs アジャイル系モデル：**

SDLC系モデルは最初から「自動車を作る」という目標を置き、タイヤから作り始め、動く形をとりながらも、部分ごとに順々に作り、自動車を作り上げていく。

アジャイル系モデルは「乗り物を作る」事だけを決め、最初はスケートボードのつもりで開発着手。イテレーション毎に最新のニーズを取り込み、スケートボードは捨てて自転車に変え、バイクも捨て、結果的には自動車を開発した、という事を可能にするためのモデル。

同じイテレーション(1～4)に見えてもその意味が全く異なる。

#### コンテキスト中心モデル/コンテンツ中心モデル

アジャイル開発モデルにはコンテキスト(文脈、雰囲気)中心のモデルと、コンテンツ(書式、成果物)中心のモデルがあります。これはいわゆるコミュニケーション論に由来するものです。

**コンテキスト中心（Scrum）：**
- 約束したことを確実に実現すること
- 確約したことの実現に専念すること
- たとえ自分にとって不利なことでも包み隠さないこと
- 自分と異なる人に敬意を払うこと
- 確約し、隠さず、敬意を払うために勇気を持つこと

**コンテンツ中心（ICONIX）：**
- 主要プロセスは4つ
- 使うUML図は4種類
- 都度成果物をレビューしよう
- ...だけ

通常 Scrum は他のコンテンツ中心モデルと組み合わせて使用します。

#### アジャイル開発モデルの特徴

| 特徴 | 顧客の視点 | SIベンダーの視点 |
|------|------------|------------------|
| 計画 | 計画が立てられないのでこれしかない。事実上の内製なので体制構築が困難。 | 計画が出来ないので請負契約が出来ない。高付加価値人材を高単価で送り出す必要性。 |
| 品質/リスク | アジリティが何より重視され品質が下がりがち。開発失敗リスクをユーザー自身が負うため、経営リスクが高い。 | 準委任契約が基本で成果物責任が無いので安全。契約不適合責任が無いので経営リスクが低い。（原理的にはSES契約ビジネスと同じ） |
| コスト | 事実上の内製なので開発コストが安い。開発人材を内部で多く雇用する必要がありあるので長期的には人件費が大きくなる。 | 売上は人単価によって決まる。（原理的にはSES契約ビジネスと同じ）利益は人単価と従業員に支払う給与によって決まる。 |
| アジリティ | アジリティは早いがスピードは遅い。 | 必要な人材を必要な時期に速やかに提供しなければならず、人材育成等に投資が必要。 |

アジリティとコストダウン(の、可能性)を得るために、これまでベンダーが負っていたリスクをユーザーが引き受けるモデルと言える。原理的に内製向けのモデル。

#### お客様から「アジャイルでやりたい」との要望が出たら...

もしもお客様から「アジャイルでやりたい」という要望が出た場合、まずは「アジャイルモデル」とは何なのかという事をしっかりと説明してください。その上で、

- 準委任契約或いは派遣契約を行う必要があります
- 契約書については、経済産業省がモデル契約書を提示していますので、法務部及びお客様に相談し、契約内容を策定してください
- どのコンテンツ中心モデルを採用するかを十分検討してください
- 案件の内容、お客様の組織や担当者の状況に応じて具体的な開発プロセスを都度設計する必要がありますので、社内有識者にご相談ください

> 我々SIベンダーによる受託開発のニーズが無くならないのは、基本的に日本企業は『計画(予算)』『品質』『経営リスクの軽減』を優先してきたからです。
> 特に基幹業務システムにおいては、今でもこれらのメリットを捨てる事は(通常は)ありませんので、お客様の「真の要求」をきちんと把握してください。

---

## 2. 開発プロセス

開発プロセスとは、システム／アプリケーションを開発するための、具体的な手順や工程、成果物との関係性などを意味する言葉です。ここでは基本的なモデルであるウォーターフォールモデルを元にして、個々のプロセスを解説します。

### 2-1. フェーズとプロセス

#### 工程 ≠ process！？

和英辞書で調べたことがある方なら「工程」は英語で「process」と表現する事はご存知でしょう。しかし、現在の日本における「工程」の一般的意味は「段階」であり、英語では「Phase(フェーズ)」或いは「Step」と表現されます。

「開発モデル」「開発工程(フェーズ)」「開発プロセス」といった言葉は、現在のIT業界では概ね以下のように用いられています。

**開発モデル全体の中で：**
- 工程(フェーズ)は重ならない（契約上の境目）
- プロセスは、前の工程から開始する事もある

#### 請負契約における「開発プロジェクト」のモデル

我々が普段「開発プロジェクト」と呼んでいるものをプロセスの観点から見ると、以下のようなモデルで表現出来ます。

**お客様とプロジェクト工程を合意する事は、契約内容やスケジュール、マイルストーン、成果物の定義等の合意のため非常に重要な事→お客様側の工程定義に合わせるべき。**

**開発プロセスは工程とは別のもの。生産性や品質の大きく影響するため、プロジェクト計画の段階で、当社のやり方に沿った開発プロセス設計を行う必要がある。**

### 2-2. EXE標準工程モデル

#### 「工程」はお客様毎にバラバラ！

ウォーターフォールモデルにおける「工程」はIBMのADSGを原典としていますが、40年以上の年月の中で日本国内ビジネスに対する最適化が各主要ベンダー個別に進められました。

さらに、ビジネスニーズの変化への対応や、経済産業省による「共通フレーム(98, 2007, 2007 第二版, 2013)」の取り込みなどが、やはりベンダー個別に進められた結果、現在の「お客様や現場毎に工程の定義がバラバラ」という状況が発生してしまっています。

**歴史的経緯により、いわゆる「標準モデル」が存在しない！**

#### EXE標準工程モデル

システムエグゼ標準工程モデル(以下「EXE標準工程モデル」)とは、社内で作成する各主標準資料における「共通言語」として、当社が独自に定義したものです。

特徴として、特にユーザー側の視点を重視し、現実のプロジェクトと無理なく整合するようデザインされています。このため、IPAなどIT系標準化団体が用いる共通フレームモデルとは若干呼称が異なります。

**EXE標準工程モデル：**
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト

共通フレーム2007年版に定義される開発5工程では、企画プロセス(企画・提案)を含んで全体工程が定義されているが、当社では(現時点では)標準工程モデル外として扱っている。

#### 共通フレームモデルとの関係

EXE標準工程モデルと、IT業界内で一般的に用いられる共通フレームモデルとの関係は以下のようになります。特徴的な違いはモジュール間結合テストを「機能単体テスト」と呼称している部分です。

これは日本国内における習慣的な工程定義に配慮したものです。

一般的な共通フレームモデルでは「モジュール間結合テスト」と「機能間結合テスト」を総称して「結合テスト」と呼称している。しかしながら日本の習慣的定義ではGUIテスト等のモジュール間結合テストを「単体テスト」と呼称している事例があり、そのように認識しているユーザーも少なからず存在する。

スケジュール/マイルストーン認識の齟齬を無くすため、本標準モデルでは「機能単体テスト」という用語を採用している。

#### EXE標準工程V字モデル

EXE標準工程モデルを元に、開発・製造工程とテスト工程の関係を示したものが、以下のV字モデルです。一般的なV字モデルと比較すると、やや変形しています。

**テスト工程の説明：**
- **システムテスト：** 主に要件定義書を対象とした、ユーザー機能に対する総合的なテストです
- **結合テスト：** 主に基本設計書を対象とした、ユーザー機能の協調に対するテストです。機能単体テストでは単独の画面やコンポーネントを、結合テストでは画面遷移や関係機能のテストを行うのが一般的なようです
- **機能単体テスト：** 主に詳細設計書を対象とした、ユーザー機能単体に対するテストです（実際にはコードコメントである事も多くあります）

#### EXE標準工程一覧

| 工程名 | 説明 | 備考 |
|--------|------|------|
| 要件定義工程 | 顧客とプロジェクトの実現化範囲を合意するための要件定義を実施。 | 本来は顧客側の工程だが、多く顧客との共同工程。同時に非機能要件定義も実施。 |
| 基本設計工程 | 定められた要件を実現するための業務機能に関する論理設計。 | 外部仕様定義及び機能論理設計。 |
| 詳細設計工程 | 各業務機能をシステム上実現するための物理設計。 | いわゆるプログラム設計。古い用語では内部設計とも呼ぶ。 |
| 製造＋UT工程 | プログラミング及び自動ユニットテスト。主にホワイトボックステスト観点。 | 自動ユニットテストの完了をもって製造完了とするプロセス推奨。 |
| 機能単体テスト工程 | 画面や機能といったユーザー機能単体に対するブラックボックステスト。 | いわゆるモジュール間結合テスト。 |
| 結合テスト工程 | 機能間の協調を確認するブラックボックステスト。 | サブシステム数が多ければその観点も必要。結合テストが多段階になる事も。 |
| システムテスト工程 | 主に業務シナリオベースで業務機能の実現状況をテストするブラックボックステスト。非機能観点でも最終確認を行う。 | ベンダーにとっての最終的・総合的なテスト。 |
| ユーザーテスト工程 | 顧客観点では検収テスト/運用テスト。ベンダー観点ではユーザー受入テスト(UAT)。 | 顧客側の工程。 |

#### EXE標準工程モデルのテーラリング

実際の計画に当っては、標準工程モデルを基に、お客様側の工程名称も勘案しながら、対象プロジェクトにおける工程定義を行います。このような作業を標準のテーラリング(仕立て直し)と呼びます。

**テーラリング例：**

1. **エンドユーザー向け（ユーザー視点習慣的モデル）**
2. **ITベンダー向け（共通フレーム2007以降モデル）**
3. **古典的モデルを採用したユーザー向け（共通フレーム98以前モデル）**

2023年時点でも、古くから内製を行っているメーカー様等では、未だにこのモデルを採用している所が多くあります。このモデルの場合、基本設計工程の前半は（現在で言う）要件定義工程になりますので、ご注意ください。

### 2-3. 開発プロセス設計

#### 開発工程モデルに合わせた（或いは合わせない）プロセス設計

EXE標準モデル工程を理解する事で、お客様が工程名をどう呼ぶかとは関係なく、必要な時期に必要なプロセスを実行する計画を立てる事が出来ます。

受注範囲にもよるが、通常の開発プロジェクトでは工程名を何と呼ぼうとも実施すべきプロセスは全て実施しなければならない（事実上のSES案件をお客様が「請負契約」で発注する例もあるため）。

→ 逆に言えば工程名が実際の受注範囲を意味しない場合があるので注意する必要がある。

#### 「開発」と「製造」の違い

開発プロセスを考える上で「開発」と「製造」の違いをしっかりと認識する事が重要です。国語辞典を見ると、

- **開発** ─ 新しい技術や製品を実用化すること
- **製造** ─ 原料に手を加えて製品にすること

と、説明されています。このため製造業界では、開発とは新技術を製品として実用化するまでの研究・検証・設計・生産ラインの構築の事を、製造とはその生産ライン上での生産(量産)を意味します。

**システム開発における区分：**
- **開発：** 研究、検証、仕様確定、設計及び生産ライン（フレームワークや共通部品）の開発期間
- **製造：** 生産ライン上で実際のコードを製造（生産）
- **テスト：** 製造物のテスト。一つ一つの検品や全体を連携させた動作テスト、性能テストやセキュリティテストなど、出荷前の様々な検査を行う

#### 「製造」準備は「開発」期間で終えておく

「開発プロセス」に関する通常の話題では「設計─製造─テスト」という文脈でしか解説されませんが、現実のプロジェクトでは「製造やテスト準備のための開発プロセス」が存在します。

**製造開始前に行っておくべき様々なプロセス：**
- 開発フレームワーク構築
- 共通部品作成
- テスティングフレームワーク構築
- 構成管理設計

→ 多くが「PM/アーキテクト」の課題領域

#### EXE標準プロセスモデル（開発・製造）

EXE標準工程モデルに紐づく標準プロセスモデルを示します。まずは開発・製造です。

**要件定義：**
- 機能要件定義プロセス（概念モデル - いわゆる仕様の定義）
- 非機能要件定義プロセス
- 画面・データ概念モデル定義プロセス
- 項目定義（用語定義）

**基本設計：**
- 機能設計プロセス（論理モデル - いわゆる論理設計）
- 非機能設計プロセス
- 画面・データ論理設計プロセス

**詳細設計：**
- 機能詳細設計プロセス（物理モデル - いわゆる物理設計）
- 非機能詳細設計プロセス
- 画面・データ物理設計プロセス

**製造：**
- プログラミングプロセス
- 自動ユニットテスト

#### EXE標準プロセスモデル（テスト）

続いてテストの標準プロセスモデルです。

**ホワイトボックステスト：**
- 自動ユニットテスト
  - 制御フロー確認プロセス
  - ユニット機能確認プロセス

**ブラックボックステスト：**
- 機能単体テスト
  - 機能確認プロセス
  - GUIテストプロセス（実はこの一部も自動化可能）
- 結合テスト
  - 状態遷移確認プロセス
  - 機能間/サブシステム間連携確認プロセス
  - 環境確認プロセス
- システムテスト
  - シナリオテストプロセス
  - パフォーマンステストプロセス
  - インターフェーステストプロセス

仕様書や設計書を元にし、入力と出力の観点で行うテスト。
コードの内部構造の検証目的のテスト。

### 2-4. 成果物フローと検収モデル

#### 開発プロセスを可視化する「成果物フロー」

個々の開発プロセスを可視化する最も簡単な方法は、プロセスに対応する成果物を定義し各成果物の関係性をフロー図として記述する事です。

**成果物フローの例：**
- 要件定義書 → 外部仕様書
- 概念データモデル → 論理データモデル → ER図
- 非機能要件定義書 → 開発フレームワーク設計書
- 基本設計書 → 詳細設計書
- テーブル項目定義書 → 開発フレームワーク（ソフトウェアスタック）

WBSとはこれら開発プロセスを細分化し、どの時期に実施するかを整理した表。

このようなプロセス（≒成果物）フローの設計はPM/アーキテクトの課題領域。

#### 請負開発で非常に重要な「検収モデル」（1/2）

「検収」とは納品物が要件に合致しているかの検査の事です。ただしここで言う「納品物」とは契約によって異なります。

要件定義～システムテストまでを1本の請負契約で行う場合、検収とはユーザーテストを意味します。しかしこれではある程度の規模のプロジェクトの場合、検収に不合格となった場合の手戻りリスクが大きくなってしまいます。

そこで実際のプロジェクトでは、契約の分割、或いはそれに準じた「工程毎の成果物検収に関する合意」をユーザーと結びます。設計書に押印して貰う、というアレです。

**契約の分割（分割検収）モデルの例：**
- 準委任契約（要件定義）→ 検収
- 請負契約（設計）→ 検収
- 請負契約（製造）→ 検収
- 請負契約（テスト）→ 検収
- 準委任契約（ユーザーテスト）

我々ベンダーにとっては手戻りリスクを最小化出来るため望ましいが、このような契約をしてくれるお客様は少ない。

#### 請負開発で非常に重要な「検収モデル」（2/2）

**工程毎の成果物検収に関する合意モデルの例：**

現実的には、契約とは別に主要成果物に関して「検収の合意」を行うのがベンダーにとってもユーザーにとっても合理的である。ここで言う「検収」は、つまりは納品成果物に対する事前の検収である。

要件定義工程、基本設計工程の完了後、要件定義書、基本設計書の内容をユーザーに確認して貰い（最終納品を待たず）検収印を貰う、という合意するのが理想的です。

このように「検収」のイベントを適切に設ける事で、初めて変更管理を開始する事が出来ます。つまり検収手続きを実施する事で初めて「仕様変更」という考え方が発生するわけです。

**仕様確定 → 変更管理**

工程、開発プロセス、成果物を設計する際には、合わせて対象プロジェクトにおける検収モデルをお客様に提示し、合意を得る必要があります。

---

## 3. 開発手法

開発手法とは、システム／アプリケーションを開発するための進め方を意味する言葉です。（開発モデルや開発プロセスを含む概念として用いられる事もあります）本章では、様々な種類の設計アプローチを紹介し、それが開発手法全体にどう影響しているかを解説します。

### 3-1. 構造化手法

#### 「機能」の単位に着目し、分析・設計を行う

さて、開発手法として最も古典的であり伝統的な手法が構造化手法です。構造化手法は機能（ユーザー機能/業務機能）の単位に着目し、整理・分解してゆく手法であり、この考え方を元にした設計アプローチが構造化設計です。

**プロセス：**
ユーザー業務（≒機能のカタマリ） → 構造化分析 → 機能A・機能B → 構造化設計 → 機能A-1/A-2、機能B-1/B-2

構造化設計のメリットは、最初の機能一覧の洗い出しに成功すれば、以後機能の抜け漏れなく設計を進められる点です。構造化設計は1970年頃に登場し、様々な改善が加えられながら現在でも使用されています。

#### 構造化設計の問題点

構造化設計の問題点として挙げられるのが、共通機能の洗い出しや副作用（機能間の相互作用）の確認が難しい点です。このためデータフロー図やデシジョンテーブル、状態遷移表、CRUD表など、様々な分析資料が必要となり、複雑な機能を設計する際の設計者負荷が大きなアプローチです。

**分析時の課題：**
- この機能とこの機能には共通処理が含まれる？含まれない？
- このデータとこのデータは同じもの？似ているだけ？同じであればプログラムの副作用は？

分析のために巨大な「表」が沢山必要になるのが一つの特徴。
→ 逆に言えばコストさえあれば抜け漏れが発生し難い堅実な手法。

#### 凝集度と結合度

構造化設計では、機能の詳細化（細分化）の際にどのような粒度で機能を分割するかが非常に大きなテーマです。これらは「設計」における極めて重要な基礎概念であり、最終的なモジュール設計に至るまで、設計者が持ち続けなければならない（そして評価し続けなければならない）観点です。

**凝集度（Cohesion）：**
機能（モジュール）に対する凝集度が高いと、特定要素に変更が入った際に影響する範囲が狭くなる。

**結合度（Coupling）：**
機能（モジュール）間の結合度を下げれば、特定機能に変更が入った場合の影響範囲が少なくなる。

モジュールの凝集度と結合度を評価し適切な単位で分割してゆくのですが、これらの分析・評価のオーバーヘッドが大きく、結果として適切な単位での詳細化が行われないという状況が発生しがちです。

なお、構造化手法とその後提唱された形式手法などはソフトウェア工学的アプローチとも呼ばれます。現在はソフトウェアベンダーや技術者コミュニティが提唱した設計技法が主流となっていますが、学術研究の結果としてのソフトウェア工学は現在も存在しています。

#### 開発手法スタック・その1

**構造化手法での進め方：**
- 機能一覧を作成
- WBSを作成
- 機能単位で基本設計を実施
- 基本設計書の機能を分割して詳細設計書を作成
- CRUD表を作成

構造化手法に起源を持つ分析・設計アプローチは現代でも生きている。
→ 実現する機能を漏れなく網羅するという点では現代でも有効な方法。

### 3-2. プロセス中心アプローチ（POA）

#### 「機能」を業務の流れから見る

構造化手法において、「機能」という抽象的なものをそのプロセス─つまり業務の流れから分析・設計するというアプローチがプロセス中心アプローチ（POA）です。

POAは業務処理の流れ（プロセス）に着目して設計を進める手法で、業務フローを起点に処理フローを記述し、その処理フローを満たすようにプログラム設計及びデータ設計を行う技法です。

**プロセス：**
業務フロー → 分析 → 処理フロー → 設計 → 処理・データ群

POAは「処理」を中心として設計するため、データに「処理フローを制御するためのデータ項目」が定義されがちです。それが昔良く見られた「●●フラグ」だらけのテーブル定義の正体です。

#### POAはアンチパターン

現代ではPOAは明確なアンチパターンであると結論されています。

**① 仕様変更に（極端に）弱い**
仕様バグや仕様変更によって処理フローが変更されると、それに応じてプログラムだけでなくデータ構造も変更しなければならない。データの副作用により他の処理も変更する必要が出るなど、修正範囲が連鎖的に広がる可能性がある。

**② 将来のシステム更改に（莫大な）コストがかかる**
将来の更改でデータモデルが変更された場合、データ移行に莫大なコストがかかる。また、同様の理由でパッケージ製品／サービスの採用を阻む。

つまりPOAは特にデータモデルの設計には適さないアプローチだと言う事です。

#### 開発手法スタック・その2

**構造化手法 + POA：**
- 機能一覧を作成
- WBSを作成
- 機能単位で基本設計を実施
- 基本設計書の機能を分割して詳細設計書を作成
- CRUD表を作成
- 業務フローを作成・分析

現在でも業務フロー分析は「機能」という抽象的なものを分析するのに有効な方法。ただし、業務フロー分析の結果を直ちに物理設計につなげる、というアプローチはアンチパターンであり、現代ではあまり採用されなくなった。

### 3-3. データ中心アプローチ（DOA）

#### 「データ」を中心に考える

構造化手法＋POAの問題点を解決するために提唱されたのが、業務フローではなくデータモデルを起点に考えるデータ中心アプローチ（DOA）です。DOAでは処理フローとデータモデルを分離する事で処理の頑健性（変更に対する強さ）を向上させます。

**DOAの特徴：**
- 別のプログラム（処理フロー）が変更されても、テーブルの変更は不要
- 自然なモデルなので別のプログラムからも自然に利用可能

DOAでは管理対象のデータ群を分析し、正規化されたデータモデル（正規形）を構築します。データはトランザクションデータ（イベント系データ）とマスタデータ（リソース系データ）に分類される事が多く、その関係性をいわゆるERモデルで表現し分析します。

この技法は現在でも多くの現場で採用されている非常に優れた手法です。

#### DOAの課題

優れたアプローチであるDOAにも、いくつか原理的な課題があります。

**① 「正しいデータモデル」を構築するのが大変**
正しいデータモデルを構築するためには高度なスキルが要求されます。このため、設計スキルを備えた人材がなかなか育たず、テーブル設計が一種の職人芸のようになってしまいます。

**② データモデルがおかしい場合、プログラム全体に影響が出る**
そもそものデータモデルに欠陥があった場合、その欠陥を解決するためのコードがプログラム全体に埋め込まれてしまい、結果的には本来の頑健性が得られない場合があります。

**③ データモデルが冗長なため、データ処理コストが大きくなる？**
「自然で正しいデータモデル」であるが故に、テーブル数が多くリレーションが複雑になる事がほとんどです。いわゆるバッチ処理（ロングトランザクション処理）に多くのビジネスロジックを寄せるような開発スタイルの場合、処理が非常に複雑化する場合があります。（なお、適切なERモデリングが行われ正規化が適切に行われた場合、非正規形モデルよりも更新処理のスピードは高速化します）

このような課題を解決する事がDOAにおける設計スキルとなります。

#### 開発手法スタック・その3

**構造化手法 + POA + DOA：**
- 機能一覧を作成
- WBSを作成
- 機能単位で基本設計を実施
- 基本設計書の機能を分割して詳細設計書を作成
- CRUD表を作成
- 業務フローを作成・分析
- データ（ER）モデリングを実施
- 概念ER → 論理 ER → 物理 ER を作成
- 業務プロセスとは独立してデータモデルを設計

現代ではデータモデル設計に関してPOAが採用される事は無く、DOAが採用される事が一般的。
→ 業務フローが無い場合でもER図は書く、という現場が多い。

多くの現場で、このような開発手法スタックが（暗黙的に）採用されている。

### 3-4. オブジェクト指向アプローチ（OOA）

#### 構造化手法の問題

さて、ここまでは構造化手法と、その課題解決のため誕生した各分析・設計アプローチを見てきました。データモデルに関する問題はDOAの採用によって大きく改善しました。しかしながら処理フローを実現するモジュール設計に関する問題は残ったままです。それは、共通機能の洗い出しや副作用（機能間の相互作用）の確認が難しく、最適な設計を実現するためには大きなコストが必要になる、という点です。

これを解決するためには、
- モジュールの凝集度を上げなければならない
- 機能（モジュール）間の結合度を下げなければならない
- この二つを低コストで実現出来なければならない

といった条件を満たす手法が必要になります。

#### 「処理」と「データ」を一体に

この問題を解決するために生まれたのがオブジェクト指向アプローチ（OOA）です。

実は現実世界の組織や業務は凝集度の問題や結合度の問題を上手く解決しています。例えば経理部という組織では、その内部で経理処理が上手く集約され（＝凝集度が高い）、また経理処理に関しては組織内で完結し、外部の組織への依存度は低くなっています（＝結合度が低い）。

現実世界では上手く実現しているのに何故モジュールでは上手くいかないのでしょうか？

この変換操作に無理があるのでは？

#### より自然なモデルに変換する

設計の本質はモデル変換です。モデル変換とは一種の翻訳作業であり、システム設計とは現実のモデルを最終的なプログラムモデルに翻訳する作業だと言えます。

設計にかかるコストとは、この変換（翻訳）にかかるコストです。従って、大きく異なったモデルに変換すればコストは大きくなり、似たモデルに変換するならばコストは小さくなります。

より自然な（現実のモデルに近い）プログラムモデルが実現出来るなら、その方が設計コストを小さくなるのでは？

**「オブジェクトモデル」の登場**

（このようなモデル差の事を「インピーダンスミスマッチ」と呼びます）

#### 「オブジェクト」とは

オブジェクト指向アプローチ（OOA）では、処理の流れ（POA）でもデータ（DOA）でもなく、処理とデータの両方を包含した「オブジェクト」に注目します。これは現実世界のモデルにより近い考え方です。

例えば「経理部」という組織は一般的には経理処理に関する業務フローと、経理に関係したデータをその内部に保持した「オブジェクト」です。OOAではこのような現実のモデルを分解せず、一つのオブジェクトモデルとして扱います。

**オブジェクトの構成：**
- 振る舞い（機能）A
- 振る舞い（機能）B
- 固有データ

**プロセス：**
経理業務（現実のモデル） → オブジェクト指向分析 → 経理ドメイン → オブジェクト指向設計 → オブジェクト群

#### 「自然なモデル」により適切な凝集度/結合度に

自然なモデル（オブジェクトモデル）の採用により、現実のモデルに即したモジュール構造が実現されます。その結果、凝集度/結合度は適切なレベルに収まります。

**機能（モジュール）内の凝集度は高い：**
経理部オブジェクトには経理処理に関係した振る舞いとデータしか無い。
→ 給与振込に必要なデータは、実行時に人事部オブジェクトから必要な形で渡されるため、経理部オブジェクト内には持たない。

**機能（モジュール）間の結合度は低い：**
人事処理に変更が発生しても、その影響は人事部オブジェクト内及び社員オブジェクトとのインターフェース部分に留まる。

我々が現実の中で実現している「経理処理は経理にまかせ、申請書類のフォーマット（インターフェース）だけ知っていれば良い」というモデルの設計。

#### インピーダンスミスマッチ

しかしながら、現在の多くのシステムはRDBを採用しており、データは一般的にはリレーショナルモデルで表現されます。このためオブジェクトモデルとリレーショナルモデルの不整合（インピーダンスミスマッチ）が発生し、データ操作用のクラスにはオブジェクト指向が適用し難い、という問題が発生します。

この問題を解決するデザインパターンが Data Mapper パターンや Active Record パターンです。このような設計課題解決のパターンを学ぶ事が非常に重要です。（OR Mapping パターンはこの一種だが、昨今は採用率が下がっている）

#### 開発手法スタック・その4

**OOAを適用した場合：**
- ドメイン分析を実施
- ドメインモデル → オブジェクトモデル → クラスモデルを作成（分析から詳細設計までモデルの構造が変わらない）
- ロバストネス分析（凝集度を上げ/結合度を下げる）
- 設計書は「機能」単位ではなくオブジェクト単位で作成

きちんとOOAが適用出来ればモデリングの過程で自然に凝集度が上がり/結合度が下がり、共通化も進む。結果として重複コードが減り、仕様変更に対して頑健になる事で、開発コストを大きく削減出来る。

#### 開発手法スタック・その5

現実には上流工程担当者がオブジェクト指向に対応出来ず、このようなスタックとる場合があり、上流における作業のムダ、或いは不足の原因となっている。

**開発手法のインピーダンスミスマッチ**

アーキテクトによる上流からのフォローが望まれる...

#### POA、DOA、OOAのまとめ

**プロセス中心アプローチ（POA）による分析・設計対象：**
業務処理の流れ → 業務処理の流れ → 業務処理の流れ → 業務処理の流れ

**データ中心アプローチ（DOA）による分析・設計対象：**
業務データ → 業務データ → 業務データ → 業務データ

**オブジェクト指向アプローチ（OOA）による分析・設計対象：**
業務処理の流れと業務データを一体として扱う

#### さらに「オブジェクト指向の次」へ

設計手法／技法は時代とともに進化を続けています。オブジェクト指向も既に20年以上使われている枯れきった手法であり、今では様々な課題が提示されています。それらの解決のため、様々なアイディアが提唱されているのが現代です。

- ジェネリックプログラミング
- アスペクト指向プログラミング（AOP）
- 関数型プログラミング（FP）
- リアクティブプログラミング（RP）
- プロトコル指向プログラミング
- インテンショナルプログラミング

これらのお話はまた別の機会に...

---

## まとめ

- ウォーターフォールモデルはユーザー企業のメリットが大きいから現役のモデル
- アジャイルを採用する場合は契約から見直さなきゃ駄目
- EXE標準工程モデルを元に、様々な工程定義・開発プロセス定義を理解する
- 「検収」と、それに伴う変更管理は極めて重要
- 現代のSI開発は構造化手法/POA/DOA のハイブリッドが多いが...
- オブジェクト指向アプローチは「自然」なモデル
- 現在は新たなプログラミングパラダイム百花繚乱の時代。備えよ

---

## 参考文献

- 『実践ソフトウェアエンジニアリング（第9版）』（オーム社）
- 『システム開発の体系―JIS X0160・共通フレーム98対応』（日本ユニシス情報技術研究会/東京電機大学出版局）
- 『共通フレーム2007第二版』（IPA SEC/オーム社）
- 『共通フレーム2013』（IPA）
- 『TERASOLUNA 開発プロセス WBS』（NTTデータ/非売品）
- 『プロマネやってはいけない 計画・管理編』（日経BP社）
- 『図解標準最新オブジェクト指向開発マスタリングハンドブック』（秀和システム）
- 『ユースケース駆動開発実践ガイド』（翔泳社）
- 『リーン開発の本質』（日経BP社）

---

## 【QM】見積もり・提案教育・第一回v2.4.md

## 第一回 見積もり概論
見積もり・提案教育セミナー

## 目次

1. **見積もり序論**
   - 1-1. 本セミナーにおける「見積もり」
   - 1-2. 契約と見積もり
   - 1-3. 規模・工数・金額

2. **見積もりの不確実性**
   - 2-1. 不確実性コーン
   - 2-2. 不確実性と見積もり技法
   - 2-3. 見積もりの検証とは

3. **案件初期分析デモンストレーション**
   - 3-1. 案件メトリクスの収集
   - 3-2. 部門長向け見積もり検証シート

4. **まとめ**

5. **参考文献**

---

## 1. 見積もり序論

### 1-1. 本セミナーにおける「見積もり」

#### 請負契約・基幹業務システム開発案件

契約の種類によって「見積もり」の考え方は大きく異なります。本フレームワークで取り扱うのは「請負契約を前提とした基幹業務システム開発案件」です。このタイプの案件は、一般的には以下のようなフローで企画や契約が進められます。

**【お客様】**
```
企画 → フィジビリティ → 企画成立 → 要件定義
```

**【当社】**
```
引合 → 営業対応 → 提案 → 受注
```

各段階で以下の成果物が提示されます：
- 情報提供依頼書(RFI)
- 技術公開依頼書(RFT)
- 提案依頼(RFP)
- 超概算見積もり
- 提案書・予算見積もり

「見積もり」が提示されるのは通常このタイミングです。

#### 「契約を前提としない見積もり」―"見積もり"という専門用語

実のところ「見積もり」という言葉は、一般用語としての意味や法的な文脈での用例、そして業界習慣が混ざる事でかなり曖昧に使用されています。今要求されている「見積もり」とは何で、どういう性質のものなのかをしっかりと識別しましょう。

**契約前提ではない見積もり**
- 超概算～概算見積（一般用語）
- 下見積書（官公需用語）
- 参考見積書（官公需用語）

これらは契約を前提としない、或いは不正競争防止の観点等により前提としてはいけない場合の見積もりです。法的効力が無い資料であり、それがわかるようにする必要があります。特に「概算見積」という呼称には要注意です。

**契約前提の見積もり**
- 超概算～概算見積（PMBOK）
- 予算見積（PMBOK）
- 確定見積（PMBOK）

これらは契約を前提とし、法的に有効な見積もりです。契約書の一部とみなされるため、厳密な前提条件や有効期限などを明記しなければなりません。本フレームワークが対象とする「見積もり」は主にこの範囲のものです。

#### お客様は様々な目的で「定価」を知りたがる

お客様が超概算見積もり等の「契約前提ではない見積もり」が欲しいと言う場合、それは、見積もり技法を考えるような、いわゆる「見積もり」とは性質が異なります。お客様がそのような情報を欲しがる理由は以下のようなものです：

- 複数ある企画案のどれが望ましいかを判断するための参考情報の一つ
- 企画の実現可能性を判断するための参考情報の一つ
- 社内予算の稟議を通すための参考情報の一つ

これを普通の買い物に例えると「買うものは決めていないが、買うという方針について家族の合意を得る事と、買うために事前にどのくらいの現金を用意すれば良いかを知りたい」という事です。つまり、お客様が欲しがっているのは見積もりではなく**定価表**です。

冷蔵庫の例で考えると：
- 普通は「冷蔵庫の定価の相場」が知りたいのであって、特定の冷蔵庫の定価が知りたいのではない
- 定価ではなく定価表が欲しい
- 「定価から値引きします」「このオプションを外せば安くなります」「様々なオプション毎に細かく見積もりました！」みたいな事は不要

類推見積もりで「◯◯円くらい」というシンプルな情報と、もしもお客様の予算感が把握出来ていれば「今の予算感ではこのクラスの冷蔵庫は買えません」などの事実が提供出来れば良いのです。

#### 見積もりの基本は規模見積もり

見積もりの基本となるのはソフトウェア規模見積もりです。ソフトウェア規模は（標準的な開発プロセスを採用する限りにおいては）、そのソフトウェアのデータ構造の複雑さに応じて概ね定まり、見積もりを行う人が変わってもその数字が大きく変動する事はありません。

見積もりや提案において最も最初に得るべきものは超概算での規模見積もりです。まずはその数字を元に「お客様の企画に問題は無いか」「何を売るべきか/売らないべきか」といった分析やソリューションの検討を行います。**金額見積もりは最終結果であり、それ自体は（見積もりの技術的な観点では）あまり重要ではありません。**

ソフトウェアの規模が定まれば、その開発にかかる費用はほぼ自動的に定まります。そのため、ソフトウェア規模を速やかに把握する事が非常に重要です。

### 1-2. 契約と見積もり

#### 契約ごとに異なる見積もりの「対象」

見積もりを難しくしている原因の一つは、契約が異なれば見積もるべき対象が異なる事です。作業としては同じソフトウェア開発であっても、契約種類が異なるという事は、実際に売るモノが異なるという事です。

これが理解出来ていないと「見積もり」を理解する事は出来ません。

| 契約種類 | 売る「モノ」 | 見積もり対象 |
|---------|------------|------------|
| 派遣契約 | 労働力 | 提供する人の人件費（人月単価×期間） |
| SES契約 | 専門性＋労働力 | 提供する人の人件費＋付加価値（人月単価×期間） |
| 請負契約 | 完成したシステム/アプリケーション | システム/アプリケーションの価値（価値とは？） |

請負契約とは基本的には「完成品」を提供する物販の契約モデルです。システムは一品物（F1カー等と同じ）であり値付けが非常に難しいため、実際に開発・製造にかかる費用＋利益を、その価値の代用とする事が多くなります。

#### 契約が違えば見積もり水準も異なる

SES契約/準委任契約でも請負契約でも同じ水準で見積もりを行う人が散見されますが、これは大きな誤りです。契約が異なるという事は売るものが異なるという事ですので、見積もりが異ならない方がおかしいのです。

基本的には、同じ規模/期間のソフトウェア開発案件であっても、請負契約向けに見積もった方が高額（※最終的な金額見積もりでは、二倍近い差が出る事もあります）にならなければなりません。

| 契約種類 | 見積もり対象 | 見積もり水準 |
|---------|------------|------------|
| SES契約/準委任契約 | 提供する人の人件費＋付加価値（人月単価×期間） | 基本的には「作業時間」だけを考えた工数の見積もり。プロジェクトマネジメントやソフトウェアの品質保証はお客様の責務なので、見積もりを（悪い表現をすれば）無責任に値引きする事も可能。なので、一般的に見積もり金額の水準も低い。 |
| 請負契約 | システム/アプリケーションの価値 | システムの品質保証責任があり、プロジェクトマネジメント義務もあるため、開発・製造「作業」だけの見積もりでは済まず、マネジメント費用や予備費、そして利益など金額見積もりに含まれるものが多くなる。直ちに当社の事業リスクに直結するため、根拠薄弱かつ極端な値引きは出来ない。一般的に、準委任契約案件に比べて見積もり金額の水準は高い。 |

#### 「見積もり」の意味はフェーズによって異なる

請負契約においては、我々にとっての「見積もり」の意味が、フェーズによって大きく異なります。

**請負契約前（提案～要件定義）**
- ユーザー工程での見積もりとは実現化範囲を調整するための分析用のツール
- スコープを見積もり、結果としてスコープを調整

**請負契約後（基本設計以降）**
- ベンダー工程での見積もりは、制約条件に変わる
- 既にソフトウェア規模や費用は固定（いわゆる鉄の三角形）されたと考えなければならず、見積もりとは作業がそこに収まるように監視するためのツールとなる
- 固定されたタイムやコストとの誤差を監視し、プロジェクトの成功のため、スコープの変更（変更管理）を含め、様々な施策を実施する

実は見積もりの「精度」が問題になるのは基本設計以降です。

### 1-3. 規模・工数・金額

#### 請負契約案件用見積もりの基本モデル

請負契約案件向けの「実際に開発・製造にかかる費用＋利益」の見積もりは、概ね以下のようなモデルで計算されます。

```
材料費 + 作業費用 + 管理費 = 開発・製造費用
```

**材料費**
- ハードウェア製品
- ミドルウェア製品
- 統合開発環境(IDE)
- その他製品

**作業費用**
- 設計作業
- 構成管理作業
- 製造作業
- テスト作業

作業量に左右されるため、システムの「規模」を知る必要があります。

**管理費**
- 会議費
- 品質管理費
- プロジェクト管理費
- 管理ツール等諸経費

作業期間に左右されるため、プロジェクト全体の「期間」を知る必要があります。

これに利益を上乗せすれば見積もり金額となります。

#### 「ソフトウェア規模」を見積もる必要がある

このモデルに従って見積もりを行う際には、まず最初にソフトウェア規模を見積もる必要があります。

なお、ソフトウェア規模の表現には（技術者派遣/SES契約などが主であった時代の名残で）今でも「工数」という単位が使用される事が多いですが、これはあくまでも便宜的な表現であり、**この場合の工数は実際の作業時間とはほとんど関係がありません。**

見積もりには、ソフトウェア規模、生産性数値、プロジェクト期間の三要素が必要となります：

```
規模 → 工数 → 人件費
生産性数値 ↗  ↓
期間 → 人数 → コミュニケーション費用
```

#### ソフトウェア規模はどうすれば測れるのか？

今後本セミナーで解説していきますが、生産性数値は情報産業団体等の統計データから入手（※厳密には、入手出来る生産性数値を当社蓄積データを元に補正して使用します）でき、プロジェクト期間はソフトウェア規模から最適工期が計算出来ます。従って、**ソフトウェア規模の測定―いわゆる規模見積もりが最も重要なテーマ**です。

ソフトウェア規模の測定方法には標準化された方法が存在せず、様々な手法や技法が存在します。

規模見積もりのプロセス：
1. **機能（要求）** → 顧客の要求を収集
2. **モデル化（定量的に測定可能なモノ）** → システムの「規模」を予測
3. **見積もり** → 例えば、モデルの○の数を数える

---

## 2. 見積もりの不確実性

### 2-1. 不確実性コーン

#### プロジェクトの不確実性

ITプロジェクトには必ず不確実性が存在し、その変化は以下のような不確実性コーンモデルで表現されます。

我々SIベンダーにとって難しいのは、ビジネスの都合上、**不確定性が大きい段階で見積もりを行い、基本的にはその金額で契約しなければならない**、という点です。

不確実性コーンによると：
- **提案時の予算見積もり**の場合は、理論的な正確度は＋200％～50％
- **確定見積もり（要件定義後再見積もり）**の場合でも、理論的な正確度は＋150％～67％

つまり、この段階の見積もりは実際には2倍かかるかもしれないし、半分で済むかもしれない、程度しか期待出来ません。

#### 見積もりの「期待精度」

PMBOKでは、見積もりを行う時期に応じた「期待精度」が定義されています。

不確実性コーンで提示される正確度と合わせて考えると、つまりPMBOKとはプロジェクトの不確実性を減らすための方法論であり、結果として以下のような精度が「期待出来るようになる」という事です。

| 見積もりの段階 | お客様の目的 | 期待精度 |
|--------------|------------|---------|
| 超概算 | 企画の際に、予算的なフィジビリティ検証や、予算確保を行うため。当社にRFIが来るタイミング。※予算確保目的なので、後から予算不足にならないよう高めに見積もる。低く見積もるとお客様が迷惑します。 | -50～+100％ |
| 予算 | ベンダー選定のため。当社が提案を行うタイミング。 | -10～+50％ |
| 確定 | 要件定義完了後に、計画のフィジビリティを検証するため。いわゆる要件定義後再見積もり。 | -5～+10％ |
| 計画 | 基本設計完了後に、詳細な計画を立てるため。以後、プロジェクトのコスト監視のため繰り返し見積もりを行う。 | |

#### PMのスキルは不確実性に抗う

ここまで見てきた通り、見積もりの期待精度を向上させる方法は「プロジェクトの不確実性を低下させる」以外にありません。PMBOKに示されるプロジェクトマネジメント方法論は、つまりは不確実性に抵抗し抑制する事で、時々の見積もりの精度を向上させるための方法論だとも言えます。

PM（或いはコンサルティング）のスキルにより、不確実性が抑制され、原理的な正確度を上回る期待精度が得られます。

**→ 見積もり方法論はPM方法論でもある**

### 2-2. 不確実性と見積もり技法

#### 様々な見積もり技法

規模見積もりの技法には様々ありますが、その違いは「ソフトウェアをどのような技法でモデリングし、定量的モデルを得るか」という部分にあります。つまり、**見積もり技法の違いとは、本質的にはモデリング技法の違い**です。

従って、優れた見積もり能力を身につけるためには、多彩な分析・モデリングスキルを身につける必要があります。以下に、見積もり技法とモデリング種類との関係を示します。

**総合的なモデリング**
- 標準値法
- 標準タスク法（WBS法）
- COCOMO/COCOMO Ⅱ

**UIモデリング**
- オブジェクトポイント法

**データモデリング**
- FP試算法（NESMA）

**オブジェクトモデリング**
- IFPUG法/FP概算法（NESMA）
- ユースケースポイント法

#### 見積もり技法と適用時期

プロジェクトの早い段階では確定情報が少なく、使用可能なモデリング手段が限られます。このため、**時期によって使用可能な見積もり技法は異なります。**

**企画段階**
- オブジェクトポイント法
- FP試算法（NESMA）

**要件定義段階**
- FP概算法（NESMA）
- 標準値法
- ユースケースポイント法

**基本設計以降**
- COCOMO Ⅱ
- IFPUG法
- 標準値法

このような技法はプロジェクト開始後の進捗管理が目的の技法です。保守の現場や、PMO出向する場合は必要になる可能性があります。

#### 三種類の「ファンクションポイント法」

本セミナーでは、実務上最も多く行う「企画時の超概算見積もり」及び「提案時の予算見積もり」を対象とし、いくつかの検証ツールを紹介しますが、その一つがファンクションポイント法（FP法）です。

FP法には大きく三種類の技法が存在します。各団体により、それぞれの期待精度は以下のように公表されています。

| 見積もり | 期待精度（PMBOK） | FP法 | 期待精度（統計実績ベース） |
|---------|-----------------|------|-------------------------|
| 超概算 | -50～+100％ | FP試算法（NESMA法） | ±50％※1 |
| 予算 | -10～+50％ |  |  |
| 確定 | -5～+10％ | FP概算法（NESMA法） | ±10％※2 |
| 計画 |  | IFPUG法 | ±5％※3 |

※1）NESMA公開情報
※2）IFPUG公開情報
※3）IFPUG法+SNAPにおける精度。SNAP無しだと±10％となりFP概算法と大きく変わらない。

### 2-3. 見積もりの検証とは

#### 見積もりから「リスク」を検証する

つまり超概算見積もりや予算見積もりでは（不確実性が大きいため）**見積もりの精度は原理的に期待出来ません**。どんなに時間をかけても、詳細に細かく見積もって数字を積み上げても、**期待精度は全く上がりません**。

従って、これらの段階での見積もりにより検証可能なのは、統計的データと比較し、**期待精度幅のどの辺りにあるかを確認し、リスクと利益のバランスを予想する事だけ**です。

期待精度の幅において：
- 見積もった値は50人月に近いか？それとも100人月に近いか？
- 或いはこの幅を外れていないか？（=統計データと合わない見積もり）

これにより、リスクが大きい可能性、または利益が大きい可能性を判断します。

#### 見積もりの「鉄則」

見積もりの鉄則は、**どの段階での見積もりにせよ、見積もり手法は単独で使用してはいけない**、です。

良く見積もりの精度（precision）という表現を目にしますが、精度という言葉の意味は、複数回/複数の方法で観測した場合でも近い値が出るという意味です。従って、**見積もりの精度を追求する場合には、複数人で複数の見積もり技法を使って見積もる必要**があります。

見積もり技法とは、それぞれ種類の異なるものさしのようなもの。複数のものさしで複数回測らないと精度は上がりません。

---

## 3. 案件初期分析デモンストレーション

### 3-1. 案件メトリクスの収集

#### 最初に、こんな相談が来たとします

引き合いは、普通はお客様が企画中に発生します。まだ企画中なので、お客様が提供出来る情報も少なく、決まっていない事も非常に多い状況です。しかし、このような時期でもお客様が「見積もり」を欲しがる事は良くあります。

このような時期にどのように見積もり、またその見積もりを検証するのか、デモンストレーションをお見せします。

**【相談内容例】**

a. 今、社内で○○業務システムの更改についての計画を開始している。

b. コンサルも入っており、現在既存システムの調査や業務フローの洗い出し、現場へのアンケートなどを行っている。

c. 現在の仮スケジュールでは、再来月の7月にRFP発行、8月にコンペ、10月から要件定義を開始して、来年の6月末リリースを予定している（※この相談を受けたのは5月と想定してください）。

d. 社内での予算立てのために、SIベンダー各社さんに超概算見積もりをお願いしている。大枠だけで良いので、見積もりを出して欲しい。

**初期分析**
- システムが対象とする業務の種類はわかる
- 既存システムの情報なら、少なくとも調査時間をかければわかる
- 大まかな期間はわかる
- 規模はなにから見積もろうか？
- 「予算立て」が目的で、そのための「予算の大枠」がわかれば良い
- 金額が高いか安いかは、あまり関係無い

**対応方針**
つまり現時点で提供可能な「見積もり」は、類推見積もりだけ。通常、お客様もそれはわかっていて、いわゆる「定価表」が欲しくて見積もりを要求している事が多い。

- 業務の種類がわかるなら、類推見積もりが出来る可能性はある
- 既存システムの情報がわかるなら、画面数や機能数を教えて貰えれば、だいたいの規模見積もりが出来る可能性がある（ただし、質問しても回答が来るまで時間がかかる可能性がある）
- 工数から最適工期が計算出来るんだから、逆に工期からだいたいの工数が逆算出来るのでは？（見積もり数字の検証用のメトリクスとして使えるのでは？）

#### 他にどんな数字が「速やかに入手出来そう」か？

お客様に質問（=QA表のやりとり）する際には、まずは**お客様が即答し易い質問だけを先行して送り**、回答が難しそうなテーマは少し間をおいて後から送るべきです。

**QAのタイミング**
```
引き合い → QA1回目 → 1回目回答 → QA2回目 → ソリューション検討
```

**1回目QA（速やかに回答可能）**
- 既存システムの画面数、帳票数、テーブル数
- 関係している部署数

**2回目QA（通常のQA）**
- 既存システムのバッチ処理数、I/F数、ユーザー数、機能数や機能一覧など
- 新システム向けのメトリクスも可能な限り

1回目回答が来る前に2回目を送ってしまうと、先方が「まとめて返そうとする」可能性があるので、とにかく1回目の回答を先に貰う事。理想は初回の打ち合わせ当日に貰う。

**これが早ければ早いほど楽になる**

#### メトリクス以外の情報（コンテキスト）

他にも、わずかな情報から読み取れる事も多くあります。提案チーム内で分析し、情報を整理しましょう。

**分析例**

a. 今、社内で○○業務システムの更改についての計画を開始している。
→ 大抵の場合は、正しくは「企画」であり、計画ではない。つまり、今の担当者の説明内容はほぼ全て未決定事項で、全く異なる内容での「提案」は可能である。

b. コンサルも入っており、現在既存システムの調査や業務フローの洗い出し、現場へのアンケートなどを行っている。
→ 一口に「コンサル」と言ってもその種類や能力は千差万別である。必ずどこのコンサルなのかを確認する（以後の案件分析に大きく影響する）
→ アンケートをとっているという事は、ほぼ確実に現行システムより要求が膨らむ

d. 社内での予算立てのために、SIベンダー各社さんに超概算見積もりをお願いしている。大枠だけで良いので、見積もりを出して欲しい。
→ 「概算見積もり」と呼ぶ事もあるが、ほとんどの場合厳密なPMBOK用語ではなく、一般表現である。つまり、先方担当者には見積もりに関する知識が乏しい事がほとんどである。従って、先方が要求しているものは、どのような目的に使うどのような性質のものか、しっかりと確認する必要がある。
→ 目的から、要求されているのが下見積もり或いは参考見積もりである事がわかる。他に目的は無いかも必ず確認する事。また、担当者が欲しがっているものが「先方の社内予算の見積もり」なのか、「当社に委託する際の委託額の見積もり」なのかも確認すべきである。この2つは大きく異なる。

### 3-2. 部門長向け見積もり検証シート

#### 「部門長向け見積もり検証シート」を使ってみよう

さて、それでは実際に「部門長向け見積もり検証シート」を使ってみます。このツールは、部門長が、**短い時間で見積もりや提案のレビューをする事を支援する目的**で、ExecTORAの一部として社内公開されているツールです。

部門長さんの業務支援用に公開しているものですが、それ以外の方が使っては駄目というわけではありません。

**案件の情報が来たら、兎にも角にもまずはツールを開く**

#### QAでの情報提供例

続くQAで、新たな情報が提供されたら、再び「部門長向け見積もり検証シート」で分析します。

**情報が増えるに従って不確実性が減り、その分期待精度が向上してゆくのがわかります。**

**【1回目のQAで回答】**
- 既存システムの画面数50、テーブル数は55
- 利用部署数は3

**【2回目のQAで回答】**
- バッチ処理数15、他シス連携数（I/F数）5
- 新システムの論理エンティティ数40（※コンサルが分析）
- 新システムで新たに3システム（全てSaaS）と連携予定

1回目の回答のメトリクスから何がわかる？何がわからないまま？
2回目の回答のメトリクスからは？

#### ほとんどのメトリクスが不明な場合

既存システムが存在せず、お客様側でも要求分析や定義が進んでいない場合、画面数やテーブル数は当然の事ながら、機能数や論理エンティティ数も不明な状況で、しかし見積もりを求められる場合があります。このような場合、採れる手段は限られますが、全く方法が無いわけではありません。

**対応手段**

**類推見積もり**
当社に同じようなシステムの開発実績があれば、その実績から類推して見積もる。ただし、成功案件以外から類推するのは危険。

**プロダクトの分析**
世の中にその業務向けのプロダクトが存在し、機能一覧などが公開されていれば、それを元に見積もる。ただし、それが成立するならそのプロダクト買えば良い話なので、そもそも開発工数見積もる意味があるのか、という話が。

**要求モデリング**
要求文書を元にデータモデリングを実施し、論理エンティティ数を求める。現在当社が採用している見積もり技法の内、最も期待精度が高いのは論理エンティティ数から計算するFP試算法（NESMA法）である。

ただし、当然だがデータモデリングが出来る人でないと見積もれない。

---

## まとめ

- 一口に「見積もり」といっても**様々な種類**がある。

- 同じシステム開発案件でも、**契約が異なれば見積もりも全然違う**。

- プロジェクトには時期に応じた**不確実性**があり、**使用出来る見積もり技法も異なる**。

- どんなに細かく見積もっても、**原理的な期待精度以上に高い精度は出ない**。

- **「部門長向け見積もり検証シート」を使って、引き合い直後に規模感を把握し、提案メンバーで共有**。

- **QAにより不確実性が減っていけば、その分期待精度が向上してゆく**。

---

## 参考文献

- 『ITユーザとベンダのための定量的見積りの勧め』（IPA）
- 『ソフトウェア開発見積りガイドブック』（IPA）
- 『ソフトウェアメトリックス調査2014』（JUAS）
- 『プロジェクトガイドライン』（ExecTORA/株式会社システムエグゼ）
- IFPUG https://ifpug.org/
- NESMA https://nesma.org/

---

## 【QM】アーキテクト教育・第二回v5.0.md

## 第二回 図解言語/UML/データモデリング アーキテクト教育セミナー

**Copyright(c) 2019-2024 SystemEXE Inc. All rights reserved.**  
相田一英 2024/05/07

## 目次

### 1. 図解言語
- 1-1. 何故「図解」するのか？
- 1-2. 表現力、分析力
- 1-3. 図解言語とは
- 1-4. 様々な図解言語

### 2. UML
- 2-1. UMLとは？
- 2-2. 厳密記法とスケッチ記法
- 2-3. 実用的なUML図
- 2-4. モデリングとUML

### 3. データモデリング
- 3-1. DBシステム？APデータストア？
- 3-2. リレーショナルモデル
- 3-3. 概念、論理、物理
- 3-4. データモデルとUML
- 3-5. インピーダンスミスマッチ

### まとめ
### 参考文献

---

## 1. 図解言語

図解言語とは、アイディアを検討する際に言葉や思考を図解することで、自分自身の理解と思考を早め、相手の理解も容易にするための、作図テクニックの事です。

図解の技術は分析や計画、会議やプレゼンテーション、要件定義書や設計書の記述のみならず、お客様や開発メンバーとの合意形成など、あらゆるシーンで必要とされます。

### 1-1. 何故「図解」するのか？

#### 人間の脳は「文字」を優先していない

人間も動物の一種であり、長い時間をかけて進化して来ました。その進化の過程では自然界で生き残る事が優先され、それを最大の価値として脳のリソースも割り当てられています。

以下が有名な「ペンフィールドのホムンクルス」と呼ばれるイラストで、大脳の各領域は体のどこに割り当てられているのかを模式的に示したものです。

**脳の領域割り当ての特徴：**
- やはり手への割り当てが最大。「手を動かす」事は非常に重要！
- 生物にとって「安全で栄養価高いものを食べる事」が最重要！
- 音や臭いは夜であっても敵の存在を感知出来る重要要素！
- 目は結構後回し...因みにヒトは、食料発見のため「色」の識別が得意

#### マジックナンバー４±１

比較的最近の脳研究により、人間の短期記憶のチャンク（情報の塊の保持数）は**４±１個**だと言われています。実験では、ひと目で「数」が把握出来るのは対象が４±１個までで、それ以上の数になると脳が「計算」を開始する事が分かっており、この説を裏付けています。

※かつては７前後だという仮説が有名でしたが、現在では実験により否定されています

これらの事実から、人間にとって直観的なもの（つまり、短時間で理解し易いもの）とは、**「触れられるもの」**であり**「数が少ないもの」**である事が分かります。

#### 文字よりも図形

企画や要件定義、設計で扱う情報の多くは抽象的であり触れる事が出来ません。また、文字で書かれた情報はどうしてもチャンクが多くなってしまうので、見る人にとって「理解するのに時間（コスト）がかかる」コミュニケーション手段です。

文章のチャンクは非常に多く、文章の「構造」の理解が難しくなります。これを図解すると、文章の「構造」が簡単に理解出来るようになります。

#### 「図解」とは「モデル」を作る事

つまり図解とは「触れられない（抽象的）」「数が多い」ものを「触れられる」「数が少ない」ものとして表現する手段です。これを別な表現では「モデリング」と呼びます。

**図解の対象例：**
- 業務機能
- ネットワーク構成
- ハードウェア構成
- ミドルウェア構成
- プログラム構成

これらを模型（モデル）として表現することで理解しやすくします。

### 1-2. 表現力、分析力

#### IT技術者の必須スキル「表現力」

我々IT技術者が仕事で取り扱う情報のほとんどが「抽象的」であり「数が多い」ものです。従って、IT技術者にとって図解を含めた表現力は**必須のスキル**と言えます。

**IT技術者の表現の相手：**
- ベンダー：PM、プログラマ
- お客様：経営者、担当者
- 多様な国籍の様々な人々

#### 抽象的/数が多いものを「分析」する

「抽象的」で「数が多い」ものに対するもう一つのアプローチが「分析」です。

何かを分析する場合でも図解は必須のスキルです。作表によるアプローチを採るシーンも多いですが、「表」は基本的には構造化手法的なアプローチであり、分析対象を細分化する事で、逆に数をより増やしてしまう手法です。

**表の詳細化の課題：**
- 情報量は増えるが数が多くなるので全体を把握しにくくなる
- 1行目の情報と123行目の情報の関係といった関係性の表現が難しい
- いわゆる「木を見て森を見ず」の状態になりやすい

#### 分析とは「より根本へ」「より大雑把に」

分析の目的とは「複雑な対象」「数が多い対象」を「より根本的でシンプルな構造」と「個々の対象をまとめたより大規模な構造」を発見する事です。

**分析のアプローチ：**
- **根本的**：抽象化により複雑さを排除し、プラグとコンセントという、より根本的な要素を発見する
- **大規模**：構造全体を整理する分析アプローチ

### 1-3. 図解言語とは

#### 「表現」のための言語、「分析」のためのツール

図解言語とは、図（絵）によって解説する、或いは問題を解くための「言語」です。

「図形」「矢印」「表」「グラフ」といった「単語」と、それらを組み合わせて特定の概念を表現するための、枠組みや段組みといった「文法」があります。図解言語は、いわゆるパターンランゲージの一種です。

**図解言語の構成要素：**
- **単語**：図形、矢印、表、グラフなど
- **文法**：枠組み、段組みなど
- **組み合わせ（パターン）**：特定の概念を表現するルール

**活用場面：**
- **分かり易く表現する**：設計書、プレゼン資料、会議資料、提案書
- **分析のための思考支援**：マインドマップ、ロジカルシンキング、なぜなぜ分析、TOC思考プロセス、UML

### 1-4. 様々な図解言語

#### 代表的な図解言語

図解言語には様々な種類があり、目的に応じて選択して使用します。ビジネスで使用される機会の多いものをいくつかご紹介します。

| 図解言語 | 目的 | 概要 |
|---------|------|------|
| マインドマップ | 分析 | ブレインストーミングなどで役立つ |
| フローチャート | 分析、表現 | 業務フローや処理フローなど、一連のプロセスの流れを表記する言語。記法や文法の異なるいくつかの種類がある |
| ER図 | 分析、表現 | リレーショナルモデルの分析や設計のための図。記法や文法の異なるいくつかの種類がある |
| UML | 分析、表現 | 特にシステム/ソフトウェアの分析や設計のための統一言語 |
| BPMN | 分析、表現 | ビジネスプロセスモデリング専用言語 |
| 自由形式の図 | 分析、表現 | 自由に描く絵。他の図解言語の文法を利用して、分かり易いイラスト等で描く。いわゆる「ポンチ絵」 |
| スタック図 | 表現 | ソフトウェアスタック（構成）を表現する時などに良く利用される図 |
| 組織関係図 | 表現 | いわゆる組織図や体制図 |

#### マインドマップ（Mind Map/心の地図）

マインドマップとは、概念の中心となるキーワードやイメージを中心に置き、そこから放射状にキーワードやイメージを記述して行く事で、自由に、かつ関係性を捉えながら発想を延ばしていく図解表現です。

自由な発想で整理してゆくと思わぬ観点が見つかったりします。ブレインストーミングや、自分自身の思考整理に便利な図解言語です。

#### 自由形式の図（Free Form）

スコット・アンブラーは著書「アジャイルモデリング」にて、「自由形式の図」をUMLスケッチの一種として提示しています。自由形式の図とは、**UMLの単語や文法を意識しつつも、自由な発想で記述する図**であり、打ち合わせの際に、その場の必要に応じてホワイトボード等に描く図の事です。

UML配置図を基本に置きつつも形式に拘らず、今認識したい内容（この例では配置、主要コンポーネント、レイヤ、関係性など）を自由に描いたものです。

自由形式での図解は実は最も難しい図解です。その場のニーズに即した図解をすぐに出来る事も、アーキテクトに求められる重要なスキルです。

---

## 2. UML

UMLは現代のシステム開発において必須となった設計図の統一表記法です。

基本的なUML記法を知っておく事で、開発のあらゆるシーンでコミュニケーションが円滑になります。

また、オフショア開発を始めとする、多国籍メンバーによるグローバルな開発を進める際の強力なツールの一つです。

### 2-1. UMLとは？

#### UMLの誕生

オブジェクト指向創成期である1996年当時は、分析・設計用に各社各様の様々な図解言語が提唱され、同じモデルを表現する場合でも現場ごとに記法が異なるという状況が発生していました。

この解決のため、国際コンソーシアムにより1996年に生み出された、分析/設計（モデリング）のための統一言語が **UML（Unified Modeling Language/統一モデリング言語）**です。

**UMLの14種類の図：**

| 構造 | 振る舞い |
|------|----------|
| クラス図 | アクティビティ図 |
| 複合構造図 | ユースケース図 |
| コンポーネント図 | ステートマシン図 |
| 配置図 | シーケンス図 |
| オブジェクト図 | コミュニケーション図 |
| パッケージ図 | 相互作用概観図 |
| プロファイル図 | タイミング図 |

#### 「モデリング/設計」者の見果てぬ夢

UMLは非常にメジャーにはなりましたが、初期の提唱者が夢見たような「全てのモデリング言語をUMLの元に統一する」という状況には未だ至っていません。この主な原因は：

- 「あらゆるモデリングニーズに対応」を目指した結果**UML自体が複雑化**
- 記法であるUMLとは別にモデリング技法自体が進化し、UMLでは対応出来ない状況が原理的に発生した
- DOA採用の現場におけるERモデルなど、現在の記法を敢えて捨てるメリットが少ない場合も多い
- オブジェクト指向「のみ」で開発されるプロジェクトばかりではなく、古典的な図解言語が消え去るわけではない

**結論：**
- UML「のみ」に完全に統一される事は無い
- しかしそれでも、図解方法に迷うようなら**UMLを採用すべき**

### 2-2. 厳密記法とスケッチ記法

#### モデリングも「アジャイルに行こう！」

UMLは便利ですが、先に挙げたようにいくつかの課題を持ちます。

そこでオブジェクト指向界の巨人、スコット・アンブラー（Scott W. Ambler）やマーチン・ファウラー（Martin Fowler）が提唱したのが「アジャイル・モデリング（Agile Modeling）」や「UMLスケッチ記法（UML as sketch）」です。

**スコット・アンブラーの提言：**
> アジャイルな（機敏な）モデリングとは、最も簡単な道具や記法を採用し、素早く、変化を受け入れ、少しずつ変更を加え、そして一時的なモデルは捨てる事だ。

**マーチン・ファウラーの提言：**
> モデリングにおいてはUMLはスケッチとして使うべきであり、設計の詳細化に踏み込むべきでない。

また、初期のUML設計者の一人であるイバー・ヤコブソン（Ivar Jacobson）も「複雑化したUMLを救わなければならない」と発言しています。本セミナーでは彼ら巨人の肩の上に立ち、より実用的なUMLスケッチ記法を紹介してゆきます。

#### 「最も簡単な道具」を使おう！

「モデリング」は開発/製造/テストのあらゆるシーンで必要になる作業です。また、ちょっとした打ち合わせの場でも、コミュニケーション効率を向上させる重要なスキルです。

モデリングとは頻繁に必要になる「行為」であって、成果物を作成するための作図作業の事ではありません。従って、最も頻繁に使用する道具は**紙とペン**です。

**モデリングの活用場面：**
- 要件の整理
- お客様の企画コンセプトの理解
- 業務理解
- 市場分析
- 会議の議事記録・整理
- 皆に分かり易い図解
- 自分自身の思考整理
- 仕様や設計のための分析

十分作図に慣れているなら、パワーポイントもオススメです。道具よりも「常に図解する習慣をつける」事の方が重要です。

### 2-3. 実用的なUML図

#### UML図の適用シナリオ例

以後紹介するUML図の適用シナリオ例は以下の通りです（全て当社で実績あり）。

**EXE標準工程モデル適用例：**

| 工程 | 企画提案 | 要件定義 | 基本設計 | 詳細設計 | 製造+UT | 機能単体テスト |
|------|----------|----------|----------|----------|----------|----------------|
| 配置図 | システム全体 | システム全体 | コンポーネント | | | |
| コンポーネント図 | | | ミドルウェア | ソフトウェア | | |
| ロバストネス図 | ドメイン分析 | ロバストネス分析 | レイヤ設計 | | | |
| クラス図 | | 分析クラスモデル | フレームワーク | コミュニケーション | | |
| シーケンス図 | | ビジネスシーケンス/システムシーケンス | 処理シーケンス設計 | メッセージシーケンス | コミュニケーション | |

UMLはこのように、**同じ記法で別のもの（目的）を表現する事が多々あります**。つまりUMLは文房具と同じような「ツール」であり、図解言語の一種なのです。

#### 配置図（Deployment Diagram）

配置図はシステムの物理的な構成（ハードウェア構成や通信経路など）を表現するための図です。

ほとんどの場合、企画・提案や要件定義といったプロジェクト序盤で作成する図です。

**主要な記法／意味：**

- **デバイス**：`<<device>>` デバイス名（プロパティ名=値）
  - サーバ機等の物理的デバイス
  - プロパティ内には多くの場合機種名やメーカー名を書く

- **実行環境**：`<<executionEnvironment>>` 実行環境名（プロパティ名=値）
  - OS、DB、Webサーバ、APサーバ等を含む実行環境名
  - ステレオタイプが長すぎて実際に使われている所を見たことが無い
  - ステレオタイプを独自定義する事で、より分かり易い表記を行う事が多い

**典型的なシステム構成例：**

```
<<Cloud>> インスタンス01 (AWS)
├── <<device>> クライアントPC (Windows 10)
│   └── ブラウザ (Edge)
├── <<device>> サーバ (RHEL)
│   ├── リバースプロキシ (Apache HTTP Server)
│   ├── APサーバ (Tomcat)
│   └── hoge <<application>> (Java)
└── <<device>> DBサーバ (RHEL)
    └── hoge DB <<database>> (Oracle 19c)
```

昨今はパブリック/マネージドプライベート/ハイブリッドクラウド等、物理構成が極めて複雑化しているため、最初にきちんとした配置図を描き、アプリケーションやコンポーネントの配置先を検討・計画すべきです。

#### コンポーネント図（Component Diagram）

コンポーネント図は、様々なレベルの「コンポーネント」の関係性（インターフェースやプロトコル）を表現するための図です。ただし、システム構成レベルでは前述の配置図が、論理的なオブジェクトの関係性は後述のクラス図（等を用いたドメインモデル）で表現する事が多いため、その中間に当たる**アプリケーションコンポーネントの関係性表現**に使用される事が多い図です。

**主要な記法／意味：**

- **コンポーネント**：コンポーネント名 `<<ステレオタイプ>>` （プロパティ名=値）
  - ステレオタイプで「どんなコンポーネントなのか」を表現
  - 右上のアイコンがチャームポイント（※実はUML1時代の記法の名残）

- **提供インターフェース**：コンポーネントに定義された、データ提供インターフェース（「ボール」と呼ぶ）

- **要求インターフェース**：コンポーネントに定義された、データ要求インターフェース（「ソケット」と呼ぶ）

- **依存関係**：データ交換を行わない場合の「使う」関係線

**SPA（Single-page application）のコンポーネントモデル例：**

```
hoge アプリ <<SPA>> (Angular)
├── 企業情報 API <<Web API>> (Node/Express)
│   └── 企業情報 DB <<database>> (PostgreSQL)
├── カレンダー情報 API <<Web API>> (ASP.NET Web API)
│   └── カレンダー情報 DB <<database>> (SQL Server)
├── 認証サービス <<Web service>> (Spring Boot)
│   └── ユーザー情報 DB <<database>> (Oracle DB)
└── PDFリーダー <<native>> (Acrobat Reader DC)
```

#### ロバストネス図（Robustness Diagram）

ロバストネス図はUMLコミュニケーション図を単純化したものであり、元々はロバストネス（頑健性）分析のために考案された図です。

OMGが管理する公式なUML記法ではありませんが、そのシンプルさと有用さからモデリングの世界では広く利用されています。

**主要な記法／意味：**

- **バウンダリ（Boundary）**：主に画面や帳票
- **コントロール（Control）**：いわゆる処理（機能）
- **エンティティ（Entity）**：いわゆるデータ

**関係性：**
- バウンダリ「が」コントロールを使用する
- コントロール「が」エンティティを使用する

これ以外にも「アクター」「ユースケース」などが提示されていますが、基本的には上記三種類を押さえておけばほとんどのシーンに適用可能です。

#### ロバストネス図でユースケースを表現する

ロバストネス図の一般的な使用方法は、**ユースケース記述等を視覚化し、プログラム構造のロバストネス分析（頑健性分析）を実施する事**です。

**ユースケース記述例：**
1. 顧客は書籍販売システムで書籍を検索する
2. 書籍販売システムは検索された書籍の在庫状況を確認する
3. 書籍販売システムは書籍の在庫情報と、仮発注の結果を顧客に表示する
4. 顧客は仮発注の情報を確認し、承認を行なう
5. 書籍販売システムは発注処理を行う

**STEP1：ユースケース記述をロバストネス記法で表現**  
**STEP2：ロバストネス分析により頑健性を実現**

#### クラス図（Class Diagram）

クラス（class）とは、**データと振る舞いをパッケージしたオブジェクト（object）の定義**の事です。

クラス図とは、クラスの定義とその関係性を記述するUML図です。

概念・論理レベルの分析目的で使用する場合と、物理レベルの設計目的で使用される場合がありますが、今回は物理設計向けの記法だけを紹介します。

**主要な記法／意味：**

```
申請書
--------------------------
- 申請番号：int
- タイトル：String
- 申請種別：String
--------------------------
+ 新規申請()：void
+ 申請書を取得()：申請書
## 申請番号を取得()：int
```

- **名前**：いわゆるクラス名に対応
- **属性**：いわゆるプロパティ（フィールド）に対応
- **操作**：いわゆる振る舞い（メソッド）に対応

**可視性（アクセス制限）：**
- `+`：public：全てのクラスから参照可能
- `#`：protected：自身および自身から派生したサブクラスからのみ参照可能
- `~`：package：自身と同一パッケージ内のクラスからのみ参照可能
- `-`：private：自身のみ参照可能

※UMLの定義であり、必ずしもプログラミング言語の定義とは一致しない

**抽象クラスとインターフェース：**

- **抽象クラス**：`<<abstract>>` または斜体字で記述
  - 複数のクラスの共通的な特徴だけを抜き出したもの
  - 非常に小さな単位でのグループだと考えても良い

- **インターフェース**：`<<interface>>`
  - 属性を持たず、抽象操作のみを持つ
  - インターフェースを具象化するためには、クラスを実装しなければならない

**関係性：**
- **汎化（継承）**：スーパークラスとサブクラスの関係
- **実装**：インターフェースをクラスが実装する関係
- **依存**：あるクラスが他のクラスを所有する関係

クラス図は概念/論理モデルの分析にも使用出来ます。特に、データモデルを含め全てオブジェクト指向で分析する際には、ここで紹介したよりももっと多くの（複雑な）関係性記法を知る必要があります。

#### クラス図でアーキテクチャを表現する

当社が推奨する開発プロセスでは階層化設計を行い、それを実現（表現）するための開発フレームワークを作成する事を強く推奨しています。この方針で設計する場合、全てのクラスは特定のデザインパターンに従った同一構造（≒関係性）を持つため、全てをクラス図で表現する必要はありません。

**階層化構造だけを表現するクラス図**を作成する事で、アプリケーション全体のアーキテクチャを表現可能です。

**アーキテクチャ表現例：**
```
HogePage <<HTML>>
    ↓ <<HTTP>>
HogeController ← コントローラ抽象基底クラス <<abstract>>
    ↓ DI
HogeService ← ドメイン抽象基底クラス <<abstract>>
    ↓ DI ↑ ViewDTO <<interface>>
HogeDAO ← DAO抽象基底クラス <<abstract>>
    ↓ Entity <<interface>>
HogeEntity
```

#### シーケンス図（Sequence Diagram）

シーケンス図は処理の順序（sequence）を表現するためのUML図です。

システム/ネットワークコンポーネント、アプリケーションコンポーネント、オブジェクト等、様々なレベルの記述に使用でき、オブジェクトのライフサイクルや交換されるメッセージの分析・設計に使用されます。

**主要な記法／意味：**

- **ライフライン**：下に伸びた破線がオブジェクトの時間軸を示す
- **アクティベーション**：メッセージを受け取り、オブジェクトが活性化する期間を細長い箱で示す
- **メッセージ**：
  - **同期メッセージ**：実線矢印
  - **非同期メッセージ**：破線矢印
  - **戻り値メッセージ**：破線戻り矢印

また、公式なUML定義ではありませんが、実用的にはシーケンス図の記述にロバストネス図の記法を併用すると便利です。

**電子メール受信のシーケンス例：**

```
ユーザー → 電子メールクライアント：受信ボタンクリック！
電子メールクライアント → POP：ユーザー名
POP → 電子メールクライアント：OK
電子メールクライアント → POP：パスワード
POP → 電子メールクライアント：OK
電子メールクライアント → POP：STAT
POP → 電子メールクライアント：OK
電子メールクライアント → POP：LIST
POP → 電子メールクライアント：メールリスト
ユーザー → 電子メールクライアント：受信メール選択
電子メールクライアント → POP：メール番号
POP → 電子メールクライアント：メールデータ
電子メールクライアント → POP：QUIT
POP → 電子メールクライアント：OK
```

### 2-4. モデリングとUML

#### モデリング ─ UMLを分析ツールとして使う

システムやアプリケーションといった「抽象的」で「数が多い」複雑な対象を分析・整理するために有効な手段がモデリングです。

モデリング手法にも色々ありますが、今回はロバストネス図による**ロバストネス分析（頑健性分析）**の例をご紹介します。

#### ロバストネス分析 ─ ユースケース記述をロバストネス記法で表現

**ユースケース記述例：**
1. 顧客は書籍販売システムで書籍を検索する
2. 書籍販売システムは検索された書籍の在庫状況を確認する
3. 書籍販売システムは書籍の在庫情報と、仮発注の結果を顧客に表示する
4. 顧客は仮発注の情報を確認し、承認を行なう
5. 書籍販売システムは発注処理を行う

**分析手順：**
1. **ごちゃごちゃしていて「美しく無い」**状態から開始
2. **コントロールの重複を無くす**（丸を減らす）
3. **各コントロールから共通化出来るコントロールを分離する**（丸が増えるが美しくなる）
4. **「目的語」の側にコントロールを寄せて整理する**（上下左右に丸を移動する）

**分析結果：**
- **「パターン」の発見**
- **データドメインの発見**
- **「レイヤ」の発見**
- **頑健性が低い箇所も発見**
- **処理の重複が無くなる**

この分析により、システム全体の構造を整理し、より頑健なアーキテクチャを構築することができます。

---

## 3. データモデリング

現代のデータ設計は、一般的には**DOA（Data Oriented Approach/データ中心アプローチ）**ベースで進めます。

DOAではデータ構造の分析・設計のため、いわゆるデータモデリングを行います。

我々が通常行うエンタープライズ向け開発では、リレーショナルモデルが最も多く採用されます。ここでは、リレーショナルモデルを構築するためのモデリング手法の基礎を概観します。

### 3-1. DBシステム？APデータストア？

#### 「DBを使っているシステム」には２種類ある

普段良く目にする「データベースを使っているシステム」は、大きく２種類のシステムタイプに分類出来ます。このタイプによって、採用すべきデータモデルが異なります。

**データベースシステム：**
- データベースの構築そのものがシステムの目的であるタイプ
- アプリケーションはDBを操作するためのクライアントとして作成される
- バッチ処理もこのひとつである
- **DBが無いとアプリケーションも動作しない**
- **リレーショナルモデルの採用が多い**

**アプリケーションデータストア：**
- アプリケーションの構築がシステムの目的であるタイプ
- DBはあくまでもアプリケーションが扱うデータの保持先（データストア）であり、必要に応じて複数のストアがあっても良い
- **DBが無くてもアプリケーションは動作する**
- **オブジェクトモデルが採用される場合も**

今回はデータベースシステム寄りの話題を扱います。

### 3-2. リレーショナルモデル

#### リレーショナルモデルを読み解く ─ ERモデル

現在の「データベース」の多くがリレーショナルモデル（関係モデル）を採用しています。このモデルを理論的な基礎とし、現実のデータに対するモデリングを行う手法が**ERモデル（entity-relationship model/実体関連モデル）**です。

**ERモデルの基本構成：**
- **リレーショナルモデル（理論）**
- **「現実の世界は実体と関連から構成される」（アイディア）**
- **ERモデル（モデリング手法）**

**重要な注意点：**
> リレーショナルモデル/ERモデルは、実のところ、**現実世界のモデリングにはあまり向いていません**！
> 通常は他のモデリング手法と併用する必要があります。

ERモデルは、現実の世界を「実体」「属性」「関連」の三種類の構成要素で表現する手法です。

これをクラス図（オブジェクトモデル）で表現すると：
- **実体は表現されている**
- **属性も表現されている**
- **関連も表現されている**
- **しかし振る舞いが無い**
- **この実体が、実体であるべきか、属性であるべきかを判断する基準が無い**

従ってDOAでは、ERモデリングを重視しながらも現実の世界（≒ユーザー業務や業務フロー）のモデリングには他の手法（構造化手法やPOA、OOA）を併用する必要があります。

#### ER図

ERモデルを図解したものを**ER図**と呼びます。ER図は、UML出現以前に生まれた図解言語ですので、複数の企業やコミュニティによって様々な記法が生み出されています。

**主要なER図記法：**
- Peter Chen記法
- Barker's記法
- バックマン線図
- EXPRESS言語
- Crow's Foot記法（カラスの足記法）
- IE表記法
- IDEF1X
- UMLクラス図

ちなみにCrow's Foot記法は、OracleのCASEツールが採用していた製品独自モデルです。Oracle人気の高まりとともに、この記法を採用する人が増えました。

どの記法を選んでも別段問題ありません。比較的採用例を多く見るのはIDEF1XとIE表記法ですが、それも現場毎にカスタマイズされて使われる事がほとんどです。

### 3-3. 概念、論理、物理

#### 「データ」をモデリングする

現実問題として、データだけをモデリングするというのは無理があります。データはシステムの一要素であり、システム全体構造の一断面に過ぎません。そこで今回は、**全体のモデリングにはUMLを使用し、最終的なリレーショナルモデルの定義にERモデルを使用する**、という流れをご紹介します。

**モデリングの段階：**

| 概念モデル | 論理モデル | 物理モデル |
|------------|------------|------------|
| 概念DFD | 論理DFD | 物理DFD |
| ロバストネス図（オブジェクトモデル） | ↓ | ↓ |
| 概念ER | 論理ER | 物理ER |

それぞれのモデルをいつ分析・作成するかはプロジェクトによって異なりますが、一般的には**企画～要件定義で概念モデル**を、**基本設計で論理モデル**を、**詳細設計で物理モデル**を作成します。

#### 見る人を意識して図解する

モデリングと図解は、常に「モデルを見る人は誰か」を意識して行う必要があります。

読み手にわかりやすく表現する事がモデリングの目的の一つです。「より良い図解（モデリング）」のためには、お客様やプロジェクトの状況によって柔軟に記法を選ばなければなりません。

**記法の選択指針：**

| イラスト/自由形式 ← UML → 専門の設計言語 |
|------------------------------------------|
| **主にお客様が見る** | **お客様も技術者も見る** | **主に技術者が見る** |
| 概念モデル | 論理モデル | 物理モデル |
| 自由形式の図（概念DFD、概念ER） | DFD（論理）、ER図（論理ER） | DFD（物理）、ER図（物理ER） |
| ロバストネス図（オブジェクトモデル） | ↑ | ↑ |

### 3-4. データモデルとUML

#### はじめの一歩

データモデリングには、基本的に２種類のアプローチがあります。

**アプローチ１：現在の（業務）データを洗い出す**
- 古典的なアプローチ
- お客様が対象業務で使用している（申込書等の）書類、帳票、管理表、メモ等「データ」が記録されている全てのモノを分析
- データモデリングを行う
- **データのライフサイクルを知るため、業務フローが非常に重要**
- **構造化手法 + POAの手法**

```
書類・帳票等 → 項目定義書 → 概念ER → ER図（論理ER）
                    ↓         ↓
                概念DFD → DFD（論理）
```

**アプローチ２：「あるべき姿」を先に見つける（DOA）**
- 最初の分析対象として「機能」の本質を分析
- 本質とは、その機能の意味や目的、事業や業務における文脈など、いわゆるコンセプトに当たるもの
- ドメインという考え方を使用
- **「機能」に本来要求される「あるべき姿」を概念レベル（つまり抽象レベル）で定義**
- 帳票（物理実体）とも業務フロー（現状プロセス）といった詳細（つまり具象レベル）とは独立したデータモデルを構築

```
機能 → ドメインモデル → 概念ER → ER図（論理ER）
   ↓         ↓           ↓
項目定義書   概念DFD → DFD（論理）
```

このアプローチによりシステム全体で、将来に渡る頑健性を手に入れる事が出来ます。

#### ロバストネス図を用いたドメイン分析

オブジェクト指向における分析手法の一つにドメイン分析があります。

「ドメイン」とは日本語では「問題領域」と翻訳されます。責務、所有、支配の観点で他と独立していると考えられる特定領域 ─ つまりは一定の「くくり」の事です。

今回は**機能を分析する事でエンティティとデータドメインを発見する手順**を見てみます。

**ユースケース記述例：**
1. **顧客**は書籍販売システムで**書籍**を検索する
2. 書籍販売システムは検索された**書籍**の**在庫状況**を確認する
3. 書籍販売システムは**書籍**の**在庫情報**と、**仮発注**の結果を**顧客**に表示する
4. **顧客**は**仮発注**の情報を確認し、承認を行なう
5. 書籍販売システムは**発注処理**を行う

**STEP0：主に目的語に着目する事で、概念的なエンティティを分析する**

**分析結果：**
- **データドメインの発見**
- **原始的なERモデル**
- **不足していたエンティティの発見**

余談ですが、品質管理セクションによる超概算見積もりでは、このように得られたエンティティに対しNESMA法を適用しています。

#### データフローダイアグラム

ERモデルはデータフローを表現する事が出来ないため、**システム/アプリケーション全体を俯瞰する概念/論理データフローダイアグラム（DFD）は作成必須**のモデルです。

先程のドメイン分析で洗い出したエンティティをデータフローの観点だけで図解します。

**概念モデル例：**
```
顧客情報 → 書籍情報 → 書籍在庫情報 → 仮発注情報 → 発注情報
```

概念DFDモデルはこのような円筒形で表現される事が（伝統的に）多いようです。これは恐らくフローチャート記法の影響です。

概念モデルの段階では非常に大雑把なデータフローが分かれば良いだけなのでこの程度の記述で構いません。

**論理モデルの記法例（UMLのDFD記法）：**

これは日本IBM等がDOAを実践する際に使用している記法です。

```
書籍管理システム
    ↓
1.0 書籍を検索し在庫を確認 [参照]
    ↓
D1 顧客情報
D2 書籍情報
D3 書籍在庫情報
    ↓
2.0 仮発注 [追加・更新]
    ↓
D4 仮発注情報
    ↓
3.0 発注 [追加・更新]
    ↓
D5 発注情報
```

今回は敢えてDOA風に「システムのプロセス」という文脈でプロセスを記述しました。ロバストネス図による振る舞いの記述とは視点が異なっています。これこそがインピーダンスミスマッチ（後述）の発生を示しています。

これはUMLなので、同じ記号と記法を物理ERに使用する事も出来ます。簡単な記法ですので詳細設計書で使用される事も多い図解です。

#### IDEF1XによるERモデル

今回は**IDEF1X（あいでふワンエックス）記法によるERモデル**をご紹介します。IDEF1Xをご紹介する理由はただ一つ、**EXCELでも無理なく描けるから**です。

※アジャイルモデリング的観点では意外と重要な判断基準です。「最も簡単な道具を採用すべき（スコット・アンブラー）」

**主要な記法／意味：**

- **非依存実体**：四角形で表現
- **依存実体**：角の丸い四角形で表現
- **属性**：実体内にリスト形式で記述
- **主キー**：上部の区切り線より上に記述

**カーディナリティ：**

| 記号 | 意味 |
|------|------|
| なし（エンティティを直線で結ぶ） | 1 対 1 |
| ● | 1 対 0 以上 |
| ● P | 1 対 1 以上 |
| ● Z | 1 対 0 または 1 |
| ● N | 1 対 N（例：● 10） |
| ● N-M | N 対 M（例：● 1-10） |
| ◇ | 1 対 0 または 1 ※非依存リレーションでのみ使用 |

**論理モデル例：**

```
顧客情報
├─ 顧客番号
└─ 顧客名

書籍情報
├─ ISBN-13
└─ 書籍名

書籍在庫情報
├─ ISBN-13
├─ 倉庫番号
├─ 倉庫名
└─ 在庫数

仮発注情報
├─ 仮発注番号
├─ ISBN-13 (FK)
├─ 倉庫番号 (FK)
└─ 顧客番号 (FK)

発注情報
├─ 発注番号
├─ ISBN-13 (FK)
├─ 倉庫番号 (FK)
├─ 顧客番号 (FK)
└─ 仮発注番号 (FK)
```

書籍情報の登録と同時に在庫情報が生まれるモデル（在庫数0冊はあるが、nullレコードは無い）。顧客が仮発注するまではレコードも無い。

この図はあくまでも論理モデルとして描いているので、実際にはこのようなビジネスコードを物理のプライマリキーに使う事は推奨しません。→適切なサロゲートキーを導入しましょう。

IDEF1Xはモデリングツールとして定義されているので、カーディナリティの表記によってある程度はデータのライフサイクルが示せるようになっています。

### 3-5. インピーダンスミスマッチ

#### 採用モデルの違いによるインピーダンスミスマッチ

第一回目セミナーでも見たように、現在のSI業界におけるシステム開発では複数のモデル（リレーショナルモデル、オブジェクトモデル）によって分析・設計が行われています。その結果として、設計モデル自体に「不整合」が生じ、そのモデル境界で多くの課題が発生します。

※工学的には、通信形式の不整合を指します

このようなモデル不整合を、電気工学用語で**インピーダンスミスマッチ**と呼びます。

**電気回路でのインピーダンスミスマッチ：**
- 交流回路Aと交流回路Bでインピーダンス（電気抵抗に似たもの）が異なる
- 交流回路の設計モデルが異なる事で、波長や周波数が異なってしまう
- 左右の回路でインピーダンスが異なるため電気信号（メッセージ）が上手く伝わらない

#### 開発プロジェクトにおけるインピーダンスミスマッチ

**EXE標準工程モデルでの問題：**

| 要件定義 | 基本設計 | 詳細設計 | 製造+UT |
|----------|----------|----------|----------|
| **構造化手法** | **構造化手法** | **構造化手法** | **構造化手法** |
| • 機能一覧を作成 | • 機能単位で基本設計を実施 | • 基本設計書の機能を分割して詳細設計書を作成 | |
| • WBSを作成 | • CRUD表を作成 | | |
| **POA** | | | |
| • 業務フローを作成・分析 | | | |
| **DOA** | **DOA** | **DOA** | |
| • データモデリングを実施 | • 概念ER → 論理ER → 物理ERを作成 | • 業務プロセスとは独立してデータモデルを設計 | |

**問題点：**
- 分析・設計モデルが異なる場合、それぞれの境界でインピーダンスミスマッチが発生する
- 結果として、境界を越えるメッセージが正常に伝わらない
- 開発プロジェクトにおけるメッセージとは仕様書/設計書の事
- これが、上流工程の設計が不足する大きな原因

**対策：UMLによるラッピング**

一つの対策は、各領域でUMLモデリングを採用する事で各設計モデルをラップする事です。

つまり**UMLをメッセージング（仕様書や設計書の伝達）のためのプロトコル**として利用する事で、これを軽減する事が出来ます。

**より良い解決策：OOAの採用**

```
<構造化手法>
<OOA>
• ドメイン分析を実施
• ドメインモデル → オブジェクトモデル → クラスモデルを作成
• (分析から詳細設計までモデルの構造が変わらない)
• ロバストネス分析(凝集度/結合度を下げる)
• 設計書は「機能」単位ではなくオブジェクト単位で作成

<DOA>
• データモデリングを実施
• 概念ER → 論理ER → 物理ERを作成
• 業務プロセスとは独立してデータモデルを設計
```

**実装レベルでの対策：**
Data Mapper、ActiveRecord等のパターンを使用してOOAとDOAの境界での不整合を軽減します。

---

## まとめ

- **人間同士が「抽象的で」「数が多い」ものについてコミュニケーションするためには図解が必須！**

- **図解言語はパターンランゲージ。基本的な「単語」と「文法」を学ぼう。**

- **図解言語/UMLは「分析のためのツール」でもある。記法とは別に「分析手法」を学ぼう。**

- **モデリングはいつでもどこでも必要。最も簡単なツールを使おう。**

- **ER図だけではデータモデリングは出来ない。他のモデリング手法を併用しよう。**

- **UMLは分析・設計モデルのインピーダンスミスマッチを軽減する。**

---

## 参考文献

- 『Mind Hacks ―実験で知る脳と心のシステム』（オライリージャパン）
- 『頭がよくなる「図解思考」の技術』（中経出版）
- 『UML モデリングのエッセンス 第3版』（翔泳社）
- 『アジャイルモデリング―XPと統一プロセスを補完するプラクティス』（翔泳社）
- 『アジャイルモデルのエッセンス: アジャイルに作れる成果物』（Webサイト/和訳：オージス総研）  
  https://www.ogis-ri.co.jp/otc/swec/process/am-res/am/artifacts/index.html
- 『ビジネス環境の変化に強いデータベース設計―仕様変更なんて恐くない!』（ソシム）

---

## 【QM】見積もり・提案教育・第二回v1.7.md

## 第二回 見積もり分析・PJ計画検証

## 目次

1. 見積もりの分析
   - 1-1. 勘と経験
   - 1-2. オブジェクトポイント法
   - 1-3. NESMA法

2. PJ計画と検証
   - 2-1. EXE標準工程モデル
   - 2-2. 工程のテーラリング
   - 2-3. 統計から見る工期・工数

3. 部門長向け見積もり検証シートで見る工期・工数
   - 3-1. 最適工期
   - 3-2. 工期・工数配分

まとめ

参考文献

## 1. 見積もりの分析

### 1-1. 勘と経験

#### それは「勘と経験」です

「見積もり」を依頼すると、多くの人が「作業項目を細かく分解し、それぞれのタスクに何時間（何人日）かかるか考える」という事をやり始めます。これは非常に基礎的な見積もりアプローチですが、本質的には、**見積もる人の勘と経験に基づいた手法**です。

よりシステマチックにするため、対象機能を何段階かの「難易度」に分類し、決まった係数をかける場合もありますが、この難易度判定も、やはり勘と経験によるものです。また、その係数も、統計的な分析を行っていないのであれば、係数自体が勘と経験に依存した数値です。つまり一見システマチックに見えても、勘と経験による判断手続きを複雑化しているだけで、特に正確度や精度に影響する事はありません。

> ※ 極めて限定的、かつ同じ条件下で繰り返し行った場合は精度が高まりますが、少し条件が変わっただけで全く役に立たなくなります。これは原理的なものなので回避が出来ません。

**重要なポイント：**
- 「勘と経験」は、本質的にはギャンブル
- 「過去のデータ」が役に立つのは、前提条件が同じ場合だけ（同じ馬、同じレース場、同じ天気、等…）
- どんなに細かく分けて考えても、正確度が上がったりしません

#### 勘と経験に頼らず、基本原則を守る

しかし、見積もりに熟練した人の中には、ほとんど瞬間的に案件の総工数や金額を、ほぼ正確に予測出来る人もいます。このような人は、様々なタイプ（開発対象、契約、ユーザーや開発メンバーのレベル、その他様々な違い）の案件を数多く見積もった経験があり、対象の「案件」に関するなんらかのモデルを瞬時に頭の中に構築出来る人です。ですが、これは熟練者の、しかもごく一部が身につける特殊能力であり、誰もが身につけられる能力ではありません。従って、**勘と経験に依拠する見積もり手法・技法"だけを"採用する事は推奨出来ません**。

その上で「見積もり」は、以下の基本原則を守る必要があります。

**基本原則1：見積もりは、常に複数の技法を併用する**

**基本原則2：見積もり時期の不確実性に合った技法を選択する**

**基本原則3：個人の経験に頼る技法の場合、必ず複数人で見積もる**

### 1-2. オブジェクトポイント法

#### オブジェクトポイント法は妥当なのか

画面数や帳票数などを数え、一定の生産性係数を掛けて見積もるのが、いわゆる**オブジェクトポイント法**です。オブジェクトポイント法には様々なバリエーションがありますが、実際に超概算見積もりが出来るかどうか、日本情報システム・ユーザー協会（JUAS）による調査が行われています。以下にその調査結果に基づく計算式を紹介します。

しかしながら、調査の結論としてはオブジェクトポイント法はそれほどの精度は出ない事が分かっています。従って、実際に使用する場合は、あくまでも見積もりの「桁」の検証目的程度に留めるのが正解です。

> ※ 何故精度が出ないのか、この後で紹介するNESMAのデータを見れば、その理由がわかります。

**JUAS 2007年調査**
```
工数（人月） = 画面数 × 1.55
```

**参考値**
```
工数（人月） = 0.1 × テーブル/ファイル数 + 1.3 × 画面数 + 0.3 × バッチ数
```

> 品質管理セクションの検証では、画面数を「画面＋帳票数」で計算すると、概ね超概算見積もりとして妥当な範囲に入る事が分かっています。

#### 見積もり検証の「ものさし」

本セミナーでは、見積もり検証の「ものさし」という概念が良く出てきます。不確実性が大きい段階では見積もりの正確度の議論には意味が無く、精度だけが評価可能な度合いです。ここで言う「ものさし」とは、精度を例えた表現です。

「精度」とは「複数回の測定で近い値が得られる度合い」の事です。なので、見積もり精度を評価するために複数の見積もり技法を使用する必要があります。（→ 勘と経験に頼るなら必ず複数人で見積もる必要がある）

### 1-3. NESMA法

#### 「システムの規模」は何で決まるのか？

オランダソフトウェア計測協会（NESMA）によるファンクションポイント法に関する調査によると、システムの規模というのは、概ねそのシステムが扱う**データ構造の複雑さに依存する**事が分かっています。この事実は、ファンクションポイント法の簡易手法であるNESMA法の調査によって明らかになりました。

**NESMA法の構成：**
- **FP試算法**：データモデル（論理エンティティと外部I/Fファイル）だけでFPを試算可能か？→ 最大で±50％程度の誤差
- **FP概算法**：複雑度とFP値への変換を簡易化（レベル分けしない）して概算可能か？→ ±10％程度の誤差

データモデルの評価だけで、初期の分析向けなら十分な期待精度が出ることが分かります。

#### FP試算法

NESMAの調査データを基にした、ファンクションポイントの簡易計算技法「FP試算法」は、以下の計算式で定義されています。期待精度が最も低い手法ですが、それでも**±50％の精度**が期待出来ます。

```
FP = 論理エンティティ数 × 35 + 外部I/Fファイル数 × 15
```

**説明：**
- **論理エンティティの数**：対象機能の説明があれば、データモデリングによりかなり序盤でも導出可能
- **外部I/Fファイル数**：アプリケーション境界外から入力・参照する（=IN）ファイルやテーブル

> ※ ファンクションポイント（FP）は、システム規模を表現するためのグローバルスタンダードな単位です。日本ではLOCや「工数」といった単位で表現する事が多いですが、いずれもデメリットが多いので、内部的な規模計測にはFPを使用する事を推奨します。

#### 「工数」によるソフトウェア規模表現

企業向けシステムの実際の提案では、古来（1970年代）からの習慣に従い、今でもソフトウェア規模を「工数」という単位で表現します。つまり、請負契約の見積もりにおいては、工数とは本来の意味とは異なる、便宜的な表現です。

**工数の2つの意味：**
1. **本来の意味（時間契約）**：作業量 = 作業時間 × 作業人数
2. **請負契約用**：ソフトウェア規模 = ソフトウェア規模（FP） × 工数変換係数

普段、準委任契約による保守開発の案件に従事している方や、SES契約により客先常駐している方が行う「見積もり」は、基本的には「作業時間の見積もり」であり、その場合に使う「工数」は本来の語義通りの「工数」です。しかしながら、全く同じ対象を見積もる場合でも、請負契約の場合の見積もりは「規模 or 金額見積もり」であり「工数」という言葉の意味は異なります。

#### 実際の計算例と「工数ものさし」

開発対象システムの規模を「工数」で表現するためには、先程導いたファンクションポイント（FP）を「工数」単位に変換する係数が必要です。このような係数を生産性数値（或いは生産性係数）と呼ぶ事があります。

> ※つまり「どのくらいの時間でどのくらいのソフトウェア規模を生産出来るか」を意味した数字です。

ここでは日本ファンクションポイントユーザ会（JFPUG）の調査データを用い、期待精度±50％の工数検証用ものさしを得る計算をご紹介します。

```
工数（人日） = FP × 1.29
```

> ※ JFPUG資料「FP法による開発データ分析～経済調査会殿調査データに基づく～」の生産性数値（中央値）

**工数（規模）ものさしの使い方：**
- 下限である50％に近付けば近づく程リスクが大きい → 見積もりの見直しや生産性を向上させる施策が必要
- 上限である150％に近付けば近づく程リスクが低下し利益が大きい

#### 期待精度と妥当性

ここで紹介した計算から得られる期待精度は、引用した係数等の期待精度に従い、概ねP75（75％ile）程度が期待されます。つまり、日本国内のソフトウェア開発プロジェクトのうち75％は、この「工数ものさし」の範囲内に収まると考えられます。

合わせて、このものさしによる当社内での実際の見積もり評価実績から、以下のように考えてください。

**適用範囲と注意点：**
- ここで紹介した見積もり工数は要件定義～ユーザーテスト、管理工数、及びデータ移行を含む総工数検証用です
  - ※1 3,000万円未満程度の小規模案件に限ります
  - ※2 ごくシンプルな単純移行の場合に限ります
- インフラ構築費用は含みません
- パッケージカスタマイズ案件や、ローコード/ノーコード案件の場合は、生産性を考慮してこの80％程度で試算してください
- この範囲に入らない案件は国内実績的に特殊な案件だと認識する
- 繰り返しになりますが、この計算で導かれる「工数」はソフトウェア規模であって、本来の意味での工数とは異なる値です

## 2. PJ計画と検証

### 2-1. EXE標準工程モデル

#### 見積もりとプロジェクト計画の関係

さて、ここまでで見てきたように、請負契約のプロジェクトにおいては、その価格を決定するための「見積もり」と、プロジェクト計画（必要な人数や必要な開発期間）のための「見積もり」は全く別のものであり、分けて考えなければなりません。

また（例えば企画や提案のような）不確実性が高い時期に、高い正確度の作業時間見積もりを得る事は原理的に不可能なので、見積もりを前提として計画を行うという考え方自体に問題があります。

これらの問題を解決するため、様々な産業団体でソフトウェア規模と工期の関係や、工期や工数の配分比率などの調査が行われて来ました。これらの知見を組み合わせる事で、ソフトウェア規模見積もりの結果から、素早く大まかなプロジェクト計画を行う事が出来るようになりました。

**従来の問題点：**
- 初期の見積もり → 計画：見積もりが原理的に不正確なので、計画も不正確になる

**統計データの活用：**
- 統計データ → 計画：統計データを基に、規模や工期、工期や工数の配分を決めた方が「成功する」可能性が高くなる

ただし、統計を計画に活かすためには、統計データ側と同じ工程・プロセスを採用する必要があります。→「標準モデル」の必要性

#### 「工程の業界標準」は存在しない

プロジェクト計画の基礎は工程表の作成にあります。しかしながら、いわゆる「工程の業界標準」は存在しません。歴史的経緯により、様々な現場で様々な工程定義が用いられているという現実があり、汎用的な計画検証手段を考える際には、なんらかの標準工程モデルを定める必要があります。

**良く見るパターンの工程モデル：**

1. **エンドユーザー向け（ユーザー視点習慣的モデル）**
   ```
   要件定義 → 基本設計 → 詳細設計 → 製造+UT → 単体テスト → 結合テスト → システムテスト → ユーザーテスト
   ```

2. **ITベンダー向け（共通フレーム2007以降モデル）**
   ```
   要件定義 → 基本設計 → 詳細設計 → 製造+単体テスト → 結合テスト → システムテスト → ユーザー受入テスト
   ```

3. **古典的モデルを採用したユーザー向け（共通フレーム98以前モデル）**
   ```
   基本設計 → 詳細設計 → 製造 → 単体テスト → 結合テスト → 総合テスト → 運用テスト
   ```

> 古典的モデルには「要件定義」が存在しないが、当時は現在の要件定義と基本設計を合わせた工程をまとめて「基本設計工程」と呼んでいた。現在でもこの定義を用いている顧客がいるので注意が必要である。

#### システムエグゼ標準工程モデル

当社では、各種社内標準の策定に当たり、IPAの共通フレーム98をベースとしたシステムエグゼ標準工程モデル（EXE標準工程モデル）を定義しています。このモデルを使用する事により、IPAやJUASといった国内団体が公開する様々な調査・統計数値を利用する事が可能になります。

**EXE標準工程モデル：**
```
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト
```

| 工程名 | 説明 |
|--------|------|
| 要件定義 | 機能要件/非機能要件を確定するユーザー工程。顧客の要件定義書作成を支援する |
| 基本設計 | 機能/非機能に関する論理設計を行う工程。論理レベルでの処理設計やデータ構造の設計を行う |
| 詳細設計 | 論理設計をもとに具体的なモジュール構造やデータ型などの物理設計を行う工程 |
| 製造+UT | プログラミング及び自動ユニットテスト（単体テスト/ホワイトボックステスト） |
| 機能単体テスト | 画面や機能といったユーザー機能単体に対するブラックボックステスト。いわゆるモジュール間結合テスト |
| 結合テスト | 機能間の協調を確認するブラックボックステスト。いわゆる機能間結合テスト |
| システムテスト | 業務シナリオベースで機能の実現状況をテストするブラックボックステスト。非機能観点でも最終テスト |
| ユーザーテスト | いわゆるUAT。顧客観点では検収テスト/運用テストとも呼ばれるユーザー工程。顧客のテストを支援する |

### 2-2. 工程のテーラリング

#### EXE標準工程モデルへのマッピング

当社で独自に工程表を作成・提示出来る場合は、EXE標準工程モデルを採用すれば、以後のプロジェクト計画用メトリクスがそのまま使用出来るので便利です。一方、顧客から工程定義が提示された場合は、EXE標準工程モデルへのマッピングを行う事で、同モデルを経由した検証を行う事が出来ます。

> ※ 「システム開発プロジェクト」は本来は顧客のものですので、先方から提示される事がままあります。

**マッピング例：**

1. **ITベンダー向け（共通フレーム2007以降モデル）** - 現在のIPA標準に従ったベンダー顧客の場合、このモデルを採用する事が多い
2. **古典的モデルを採用したユーザー（共通フレーム98以前モデル）** - 古くから内製を行なっているユーザー企業の場合、現在もこのモデルの場合がある
3. **品質に問題がある習慣的モデル（業界一部に存在する）** - 手動テストのみ、つまり実質的に単体テストを行なわないユーザー。品質リスクが高い

#### 一部工程のみ受託の場合

ユーザー企業に内製体制がある場合や、二次請け案件などでは、開発工程の一部だけを請け負う場合もあります。そのような場合でも、EXE標準工程モデルを用いて全体工数や工期のシミュレーションを行う事で、対象工程だけの工数や工期を導く事が出来ます。

> ※ ちなみに、IT業界で言う「二次請け」とは、世間一般で言う「一次請け」の事です。普通は、お客様 → 元請け → 一次請け → 二次請け → ・・・ → n次請け、と数えます。

**重要な注意点：**
前提として、請負契約には成果物の完成責任があるので、V字モデルを意識し、原理的に品質保証が出来ない受託の仕方はしてはいけません。例えば詳細設計～結合テストという範囲での受託は、原理的には出来ません。

### 2-3. 統計から見る工期・工数

#### まずは基礎的な統計データの紹介

プロジェクト計画の作成は、非常に専門性が高く難易度が高い作業です。本セミナーでは、あくまでも「提案時における計画作成」のみに焦点を当て、**簡易に素早くそれなりの**計画を作成する方法を紹介します。

> ※ 具体的なプロジェクトマネジメント方法論に関しては、別途『プロジェクトガイドライン（ExecTORA）』等をご参照ください。

紹介する統計データは、以下の各種情報産業団体が公表しているデータを基にしています：
- 情報処理推進機構（IPA）
- 日本情報システム・ユーザー協会（JUAS）
- 国際ファンクションポイントユーザー会（IFPUG）/日本ファンクションポイントユーザー会（JFPUG）
- オランダソフトウェア計測協会（NESMA）

なお、当然の事ながら、これらの統計データは調査の度に若干異なる値をとります。しかしながら、本セミナーが想定する不確実性が高い段階では誤差の範囲ですので、どうしても最新データを利用しなければならない、という事はありません。

#### 総工数から工期を得る － 最適工期

JUASが公開するデータに、プロジェクトの総工数と工期、プロジェクトの成功・失敗の関係を分析したものがあります。

その分析結果から以下のような計算式と、この計算で得られた値よりも30％以上短い工期だと、プロジェクトの失敗リスクが極端に増大する（端的に言えば炎上する）という傾向が提示されています。

```
最適工期 = ∛(総工数（人月）) × 2.4
```

> ※ 2014年のJUAS資料より。最新資料ではもう少し大きな数字になっているが、当社実績工期と比較すると長くなりすぎるため、今回はこの数字を紹介。

> ちなみにEXCELでこの計算をする場合は、=【開発投入人月】^(1/3)*2.4

工期が長過ぎればプロジェクト管理費が増大（=コスト高になる）し、短すぎれば炎上の可能性が高まります。採用すべきは「最適な」工期であり、この値をベースに、プロジェクト固有の事情に合わせて微調整するのが望ましいです。

#### 典型的な工期配分

総工期が手に入ったら、次は工程毎の工期配分のデータを利用します。やはりJUASが公開するデータに、日本国内のITプロジェクトにおける典型的な工期配分の調査結果もあります。

ただし、この調査では、プロジェクト毎の工程定義の違いを無視するため（つまり調査と分析を簡単にするため）に、大きく3つの時期（「要件定義～基本設計」「詳細設計～製造+UT」「結合テスト～ユーザーテスト」）に分けて工期の比率を評価しています。

**典型的な工期配分比率：**
- 要件定義～基本設計：**3**
- 詳細設計～製造+UT：**3**
- 結合テスト～ユーザーテスト：**4**

> ★JUASはユーザー団体なので、調査対象にユーザー工程（要件定義、ユーザーテスト）も含まれている。

#### 典型的な工数配分

総工数から、各工程に対する工数配分を決めます。

ただし請負契約の場合、顧客に対し、工程毎の工数の情報を提示する必要は（本来は）ありません。ここはお客様側にもベンダー側にも誤解している人が非常に多いポイントで、予定工数や単価といった情報は見積もりとして提示する必要が無く、むしろ法的には提示しない方が望ましい情報です。このような工数配分は、あくまでも内部での管理目的のものです。

> ※ 顧客がこのような数字の要求すると、偽装請負が疑われる原因となります。また、無意味な単価交渉の材料になりかねないので、ベンダー側にも提示メリットがありません。

**典型的な工数配分比率（ベンダー工程のみ）：**
- 基本設計：**17**%
- 詳細設計：**17**%
- 製造+単体テスト：**35**%
- 結合テスト：**17**%
- システムテスト：**14**%

> ★IPAは主にベンダーに対して調査を行っているため、ベンダー工程だけのデータになっている。なお、この数字はP75データなので、国内のITプロジェクトの75％がこの配分を採用していると考えて良い。

> システム規模が大きい場合は、工期と同様にシステムテスト工数をもっと大きく取る必要がある。

#### 「単体テストを実施しないプロジェクト」？の場合

「単体テスト」と呼びながらも手動のブラックボックステストしか行わないプロジェクトが、2020年頃まで当社内でも散見されました。これは事実上、単体テストを実施しないプロジェクトであり、品質管理上大きな問題を抱えたプロジェクトですが、現実問題としてSI業界では散見されるプロジェクトです。

> ※ただし国内のITプロジェクト全体で見れば、25％より少ない比率でしか存在しないレアケースです。

このようなプロジェクトでは、当然各種団体の調査データのメトリクスが適用出来ません。以下は当社内の実績データをもとにした、そのような変則プロジェクトにおける比率を示す、参考データです。このような計画は当然非推奨ですが、何か特殊な事情があって採用せざるを得ない場合は、参考にしてください。

**品質に問題がある習慣的モデルの工数配分：**
- 要件定義：**17**%
- 基本設計：**17**%
- 詳細設計：**16**%
- 製造：**35**%（単体テストなし）
- 結合テスト：**15**%

**問題点：**
- 一般的な開発プロジェクトに対し結合テストの工数がほぼ倍
- 単体テスト未実施のまま結合テストを開始するので、結合テストでの欠陥率が（統計値に比べ）異常に高い
- 欠陥検出がプロジェクトの後方時期にずれるので、手戻りが大きく回帰テストの工数も膨大に（※そのため、回帰テストを十分実施しないプロジェクトも多い）
- 原理的に低品質・ハイリスク・高コストなプロジェクト計画

## 3. 部門長向け見積もり検証シートで見る工期・工数

### 3-1. 最適工期

#### 最適工期「から」逆算する

お客様が提示してくる最も基本的な数字は「スケジュール感」です。なので「部門長向け見積もり検証シート」では、一番最初にスケジュールから、可能な限りの情報を引き出せるよう設計されています。

以下のような案件情報があった場合、最適工期という観点から、どのような情報が引き出せるかを見てみましょう。

**案件例：**
- a. 既存システムの更改を企画中
- b. 現在の仮スケジュールでは、再来月の7月にRFP発行、8月にコンペ、10月から要件定義を開始して、来年の6月末リリースを予定している
- c. 既存システムの画面数25、テーブル数は18、バッチ処理数5、他シス連携数（I/F数）2
- d. 現行機能は踏襲しつつ、各機能の改善は行う。改善要望については現在ユーザーヒアリング実施中。新たに2システム（全てSaaS）と連携する事は確定している

### 3-2. 工期・工数配分

#### 工期の配分や、工数の配分は？

「部門長向け見積もり検証シート」では、本日紹介した様々なデータに基づき、工期や工数の配分も参考値として計算します。

ここで計算される工期や工数配分は、あくまでも統計データを元にした参考値です。しかも請負契約においては、お客様に提示する工数と内部工数が一致している必要が全く無いので、お客様が企画の参考にするとか、内部でプロジェクト計画の参考（検証値）にするとか、そのような目的だけに使用します。

> ※そもそもお客様に作業工数を提示する必要すらありません。

## まとめ

- **請負契約の提案の時は、簡単な技法を複数使って総工数を概算しよう**
- **請負契約の提案の時の「工数」は、作業量ではなく、ソフトウェア規模表現**
- **EXE標準工程モデルを理解して、IPAやJUASの統計データを利用しよう**
- **統計データから、総工数→最適工期→工期配分→工数配分、まで自動計算**
- **（単体テストと回帰テストはちゃんと計画しましょうね…）**
- **最適工期計算から、様々な事が分析出来るし工数計画にも役立つ**
- **工期配分はプロジェクトの状況や暦に応じて微妙に変える必要がある**
- **工数配分も、工期配分等を見ながらプロジェクト毎に調整。ただしこの工数は実際に必要な実工数ではないので注意**

## 参考文献

- 『ITユーザとベンダのための定量的見積りの勧め』（IPA）
- 『ソフトウェア開発見積りガイドブック』（IPA）
- 『ソフトウェアメトリックス調査2014』（JUAS）
- 『プロジェクトガイドライン』（ExecTORA/株式会社システムエグゼ）
- IFPUG https://www.ifpug.org/?lang=ja
- JFPUG http://www.jfpug.gr.jp/app-def/S-102/wp/ （※当社はJFPUGの会員です）
- NESMA https://nesma.org/

---

## 【QM】【2024】アーキテクト教育・第三回v10.5.md

## 第三回 業界動向/エコシステム/先端技術 アーキテクト教育セミナー

**日時**: 2024/06/04  
**講師**: 相田一英  
**主催**: SystemEXE Inc.

## 目次

1. **エコシステム**
   - 1-1. 「エコシステム」とは？
   - 1-2. ニッチ
   - 1-3. 進化論
   - 1-4. OSS

2. **先端技術のライフサイクル**
   - 2-1. キャズム
   - 2-2. ガートナーハイプサイクル
   - 2-3. ペースレイヤリング
   - 2-4. スピードとアジリティ

3. **IT業界最新動向-2024/06**
   - 3-1. P.A.I. 襲来！

4. **まとめ**

5. **参考文献**

---

## 1. エコシステム

IT技術は短期間に数多く現れては消えてゆきます。結果としてデファクトスタンダードの座を占め、長期間生き残る技術はほんの一握りであり、どの技術がそのような成功を収めるか予測するのは困難です。

短期的にでも、技術や方法論のトレンドを理解し予測するためには、その技術のエコシステム（生態系）を知っておかなければなりません。

### 1-1. 「エコシステム」とは？

#### 技術やサービスの「生態系」

エコシステム（ecosystem）とは、日本語では「生態系」を意味する言葉です。生態系とは、生物とその群れ、そしてそれらが生きる背景環境全体を一つの系（system）として表現した言葉です。

転じて、マーケティング用語としてのエコシステムは、企業や財団、そのグループやOSSコミュニティ、そしてそれらが経済活動を成す背景環境としての市場全体を一つの系とみなしたものです。

IT技術やサービスは、ITエコシステム中に存在し、日々生存競争を行っています。

生物には、生態系内での関係性（食物連鎖）や地域的な分布（セグメント）があります。技術やサービスでは、どのような関係性があるのでしょうか？

#### 技術やサービスのエコシステムを調べる

特定の技術やサービスが、「市場」という背景環境において今後「（数が）増える/減る」「（分布を）広げる/狭まる」「生き残る/滅びる」のかを知るためには、技術やサービスそのものではなく、**そのエコシステムを知らなければなりません**。

エコシステム分析では以下の観点から調査します：

- **コンシューマ市場向け？エンタープライズ市場向け？**
- **OSSコミュニティ？財団？アライアンス？**
- **参加企業の企業戦略、対象市場、競合技術**
- **主催/スポンサー企業の戦略**
- **採用企業のセグメント**

この分析には、3C分析や5F分析などのコンサルティングフレームワークが活用できます。

### 1-2. ニッチ

#### 生物は「生存可能な場所」で生きる

エコシステム（生態系）におけるニッチ（生態的地位）とは「その生物が生存するのに適した場所」という意味です。この言葉もマーケティング用語として用いられます。

どれほど素晴らしい技術やサービスも「生存するのに適した場所」が無ければ生き残る事が出来ません。例えば虎をアフリカの平原に連れて行っても（例え1対1なら虎のほうが強くても）現在ニッチを占めているライオンやチーターと競合して生き残れるかどうかは不明です。

#### ニッチの発生と生存競争

ニッチが発生する要因：
- **既存技術のサポートやサービスの終了**（既存生物の絶滅）
- **市場ニーズの変化**（環境の急激な変化）
- **新市場の発見**（新大陸など未踏環境への進出）
- **新生物の出現**（競争力のある突然変異種の出現）

ニッチを巡る生存競争では以下が起こります：
- 新技術、代替技術、新サービス、新ビジネスの登場
- 現環境の塩漬けニーズへの対応
- 既存技術の値下げ、市場放棄

**ニッチを見極めれば、生き残る技術やサービスを予測できます。**

### 1-3. 進化論

#### 進化＝ニッチに対応するものだけが生き残る

エコシステムやニッチと、そこで繰り広げられる生物の生存戦略を理解するために「進化論」の正しい意味をご紹介します。進化とは、あるシステム（例えば生物）を長期間継続させるための強力な戦略です。

進化のメカニズムは以下の通りです：
1. ニッチ（環境）が存在する
2. 突然変異が発生する
3. 不適応な個体は淘汰される
4. ニッチに適応した突然変異種が生き残る
5. 環境変化により新たなニッチが生まれる
6. このサイクルが繰り返される

#### 進化＝既存生物の99％の死

「生き残る」の事を逆の視点で見ると、進化とは変化しなかった既存の種の絶滅である、とも言えます。

このモデルでは、生態的地位が2回変動した事でわずか5世代の内に3つの種が滅び、ただ1種だけが生き残っています。明確な事実は、**変化し続けなかった種は全て滅びる**という事です。

#### 技術/サービスではなくニッチを知る

進化とは、何かが高度化してゆく事ではなく、ニッチに対して最適化されてゆくプロセスです。

技術やサービスも、この原理に基づき「市場」というエコシステム内で「ニーズ」というニッチの変動に晒され、進化してゆきます。

つまり、技術やサービス自体をどれほど掘り下げても、それらが実際に市場で受け入れられるかは分かりません。それを予測するためには、**その技術やサービスの背景となるエコシステムやニッチそのものを理解する必要があります**。

#### 【閑話】ベンチャー/スタートアップの生存率

ベンチャー企業とは、新技術により新事業を起こし投資企業より融資を受けた中小企業の事です。いわゆる「○億円調達しました！」系の企業の事です。

**日本企業の生存率（％）**
- 0年目：企業一般 100%、ベンチャー企業 100%
- 5年目：企業一般 82%、ベンチャー企業 15%
- 10年目：企業一般 70%、ベンチャー企業 6.3%
- 20年目：企業一般 52%、ベンチャー企業 0.3%

この「進化」の果てにGAFAM等があります。

### 1-4. OSS

#### ソフトウェア進化の坩堝 ─ OSS

ここ30年、技術やサービスのエコシステムを非常にダイナミックに変化させた原因の一つがオープンソースソフトウェア（OSS）の出現です。

その始まりは1980年代のリチャード・ストールマン（Richard Stallman）によるフリー（自由）ソフトウェア運動にあります。

**ストールマンの思想**：
「プロプライエタリな（非公開な商用）ソフトウェアがフリーソフトウェアで置き換えられ、結果私達の社会がより良いものになることを望む」

→ ソースコードを公開する事でその進化が加速し、進化したソフトウェアを自由に使用する事で社会全体がその恩恵を受けられる、という思想

#### OSSエコシステム

OSSは、志を持つプログラマコミュニティ（と、ごく僅かなスポンサー企業）という形からスタートしましたが、Linux, Eclipse, Apacheといった多くの成功事例によりその市場価値が増し、以下のような展開を見せました：

1. **コミュニティの財団化**
2. **事実上のスポンサー企業主導コミュニティの出現**
3. **GoogleやIBMによる市場創出のためのOSS戦略**
4. **企業間/国家間での「技術標準」を巡る競争**

これらにより、OSSは（当初の理想とは異なる）巨大なITエコシステムの一部となりました。

主役はプログラマ（コミュニティ）から企業が主導するOSSへと変化し、現在は以下の特徴を持ちます：
- 企業が主導するOSS
- フリー（無償）ミアム戦略
- 言語の多様化による個々のコミュニティの弱体化

→ 企業が主役となったためOSSは「オープンコア」（≒製品の1形態）と呼ばれるものへ

#### 例1：JavaScriptのエコシステム（2022）

現在でも多くのOSSが世に送り出されていますが、その一例として現在ホットな領域であるJavaScriptのエコシステムを見てみましょう。

**主要な構成要素**：
- **ECMAScript** (標準仕様) - Ecma International
- **JavaScript** (実装)
- **TypeScript** (Microsoft製スーパーセット)
- **Node.js** (サーバサイドJS) - OpenJS財団
- **Deno** (Node.js競合) - Deno Company
- **React, Vue, Svelte** (SPA向けフレームワーク)
- **Angular** (Google製SPAフレームワーク)
- **Marko, Qwik** (MPA向けフレームワーク)

エコシステムを見ると大手ベンダの注目ポイントや戦略が見えてきます。これによりメインストリーム化が予測できます。

#### 例2：JVMのエコシステム（2022）

この例では「Java」の現状と将来を見るために、JVMのエコシステムを見てみます。

**主要エコシステム**：
- **Oracle系**：Oracle Java VM, HotSpot JVM, Jrockit JVM
- **IBM系**：Eclipse OpenJ9, Eclipse財団
- **Google系**：Android, Dalvik, Android Runtime, Kotlin
- **その他**：GraalVM, LLVM, WebAssembly

各エコシステム間で競合と協調の関係が見られます。

#### 例3：LLMのエコシステム（2024/06/04）

現在ホットな「AI」の今後の動向を予測するために、LLM（大規模言語モデル）のエコシステムも見てみます。

**主要プレイヤーとサービス**：
- **OpenAI系**：ChatGPT, GPT-n
- **Microsoft系**：Microsoft Copilot, Azure OpenAI Service, Microsoft 365 Copilot
- **Google系**：Gemini, Google Cloud Vertex AI
- **Amazon系**：Amazon Q, Amazon Bedrock, Amazon Titan
- **Meta系**：Llama n（オープンソース）
- **Anthropic系**：Claude AI, Claude n
- **その他**：IBM watsonx, Red Hat RHEL AI, Hugging Face

戦略的提携や敵対的関係が複雑に絡み合った構造となっています。

---

## 2. 先端技術のライフサイクル

IT技術は、その背景環境であるマーケットの影響を受け一定のライフサイクルを持ちます。技術の現在のステージを知り、その価値や将来性を評価するためにはマーケティングに関する基礎知識が必要です。

ここでは基本的なマーケティング理論と、代表的な市場分析レポートを紹介します。

### 2-1. キャズム

#### 技術/サービスの「一生」における「深い溝」

ここまで見てきたように、新しい技術やサービスの「一生」は、背景環境である市場（マーケット）の影響を強く受けます。この「市場」の分析に焦点を当てた専門分野をマーケティングと呼びます。

マーケティングの知識は、技術/サービスの動向を知る上で非常に重要です。その基礎として、まずは非常に有名なマーケティング理論である「キャズム理論」を紹介します。

#### キャズム理論が提唱する顧客構造

キャズム理論では、イノベーション普及において顧客を5つのセグメントに分類します：

1. **革新者（Innovators）** - 2.5%
   - 自社の競争優位のためにリスクを取って採用する顧客

2. **早期採用者（Early Adopters）** - 13.5%
   - リスクを理解しつつも先行事例を重視して採用する顧客

3. **実利主義者（Early Majority）** - 34%
   - リスクを取らず、先行事例を重視して採用する顧客
   - **利益率が高い顧客**

4. **消極的消費者（Late Majority）** - 34%
   - **売上に貢献する顧客**

5. **保守的消費者（Laggards）** - 16%

**キャズム（深い溝）**は早期採用者と実利主義者の間にあり、ここを乗り越え、利益率が高い顧客に販売する状態に持ち込むのが最も難しいとされています。ここで成功しないとビジネス的な成功とならない「メインストリーム市場」への参入が決まります。

#### 「クラウド」はキャズムを越えるのか？（2018）

キャズムのモデルを理解するため「クラウド」に関する分析モデルを見てみましょう。

**2018年時点の市場データ**：
- 国内SI市場規模：約14.9兆円（2017）
- 国内クラウドSI市場規模：約1.5兆円（2017）

キャズムのモデルで見ると、2018年はクラウドがキャズムを越える際にあたり、本格的な準備が必要な時期でした。

コンシューマ市場とエンタープライズ市場の境界で、2018年時点のクラウドビジネスは、特にアーリーマジョリティへの対策が重要となっていました。

#### 「クラウド」は日本国内におけるキャズムを超えた（2019）

市場レポートがまだ出揃っていない時期の分析でしたが、以下のような予測をしていました：

**予測データ**：
- 国内SI市場規模：約15兆円（2018予測）
- 国内クラウドSI市場規模：約3.1兆円（2018予測）

SI市場全体の約20％がクラウドSI市場となり、非クラウド利用のSI市場が約10％縮小しました。非クラウド利用のSI市場の25％が今後急速に縮小する可能性が高いと予測していました。

#### 「クラウド」はキャズムを越え・・・て？（2021）

では実際には現在どうなっているでしょうか？

**実際のデータ**：
- 国内SI市場規模：約19兆円（2021/日経予測）
- 国内クラウドSI市場規模：約1.7兆円（2021/推定）

市場構成を見るとむしろクラウドSI市場規模は相対的には後退している状況でした。

**要因分析**：
- クラウドSI市場の伸びは予測より遅い
- COVID-19の影響でオンプレミス及び従来型プロダクト（非SaaS）が延びた可能性
- 不況の影響
- 日本国内でもクラウドブーメランの兆候あり。HCI系ソリューションがじわりと伸びる

クラウド市場の延びよりSI市場の伸び率が上回る結果となりました。

#### アーリーマジョリティ（実利主義者）

2019年からの数年、エンタープライズ市場で急速にクラウド採用を進める顧客タイプはアーリーマジョリティ（Early Majority/前期追随者）であると考えられます。

**アーリーマジョリティの特徴**：
- 市場全体の34％
- 先行事例を重視
- 差別化に対する恐怖
- 実利主義

ソリューション、プロダクト、プロモーションを行う上での勘案が必要だと考えられます。

### 2-2. ガートナーハイプサイクル

#### テクノロジのライフサイクル

今度は個々のテクノロジ（技術/サービス）に着目し、そのライフサイクルモデルを見てゆきます。

非常に有名なモデルとして、ガートナーが公開するガートナー・ハイプ・サイクルがあります。ライフサイクルを示すハイプカーブは、特定のテクノロジが市場からどの程度の期待を寄せられるかを分析したモデルです。

#### ハイプサイクルの5段階

1. **黎明期（Innovation Trigger）**
   - テクノロジが話題に上がり始める時期

2. **『過度な期待』のピーク期（Peak of Inflated Expectations）**
   - 顧客がそのテクノロジに過度な期待を抱き、問合せが非常に増える時期

3. **幻滅期（Trough of Disillusionment）**
   - そのテクノロジへの幻想が無くなり、顧客が幻滅する時期

4. **啓蒙活動期（Slope of Enlightenment）**
   - ベンダがそのテクノロジは「実はこういうものだ」という現実を啓蒙する時期

5. **生産性の安定期（Plateau of Productivity）**
   - ベンダの正しい説明と顧客の理解が噛み合い、そのテクノロジが商材として安定する時期

恐らく幻滅期と啓蒙活動期の間がキャズムにあたると考えられます。

#### ハイプサイクル2022 ─ グローバル

実際に2022年のハイプサイクルを見てみましょう。まずはグローバル版です。

**注目ポイント**：
- **Web3、スーパーアプリ、ファウンデーションモデル（=大規模言語モデル）**は過度な期待のピーク期
  → 今後キャズムが控える
- **データファブリック、従業員コミュニケーション・アプリケーション、コンポーザブル・アプリケーション等**は幻滅期へ
- **黎明期のテクノロジの中に、次のビジネスチャンスが**

#### ハイプサイクル2022 ─ 日本国内版

今度は日本におけるインフラ系技術ハイプサイクルです。

**注目ポイント**：
- **メタバース、量子コンピューティング、デジタルツイン、NFT、エッジコンピューティング**などが過度な期待のピーク期
  → 2021年と同じものが残る。動きが止まっている？
- **ブロックチェーン/トークン化、IoT、スマートワークスペース等**は幻滅期に
- **密かに人工知能が生産性の安定期に入ると予測されていた**
  → 実はGPTではなく、IBMがWatsonのプロモーションを実施中...

#### テクノロジー重要度マトリクス（ガートナー/日本市場）

ガートナーの予測による、テクノロジが日本市場において主流化する時期の予測：

| 期間 | 革新的技術 | 貢献度（高） | 貢献度（中） |
|------|------------|--------------|--------------|
| ～2018 | オペレーショナル・インメモリデータベース<br>アナリティカル・インメモリデータベース<br>**クラウドコンピューティング** | モバイル・データ・プロテクション<br>**コンテナ型仮想化** | CRM顧客エンゲージドセンター(クラウド)<br>プライバシー・ソーシャル・アナリティクス<br>**生体認証** |
| 2018～2022年 | **AIOpsプラットフォーム**<br>**デジタルビジネスプラットフォーム**<br>**仮想パーソナルアシスタント**<br>WebスケールIT<br>オフショア・デジタル・イノベーション<br>**IoTプラットフォーム**<br>ポストモダンERP<br>デジタル・ビジネス・コンサルティング・サービス<br>**ブロックチェーン**<br>**人工知能**<br>**セキュリティ・インテリジェンス**<br>**IoT**<br>**OTとITの融合** | プレディレクティブ・サポート<br>**RPA**<br>ウェアラブルデバイス<br>**モバイルコンピューティング**<br>**レガシーアプリケーションの近代化**<br>ベンダー管理オフィス(VMO)<br>レガシーマイグレーション(メインフレーム)<br>コラボレーティブ・ワーク・マネジメント<br>**ペースレイヤリング**<br>モバイルアプリ開発プラットフォーム<br>**DevOps**<br>サービスとしての統合プラットフォーム<br>**ビッグデータ** | クラウドソーシング(アプリケーション開発) |
| 2022～2027年 | ヒューリスティック・オートメーション<br>コグニティブ・テクノロジを駆使したサービス<br>IoTセキュリティ<br>**データサイエンス** | コラボレーティブ・ワーク・マネジメント<br>ペースレイヤリング<br>モバイルアプリ開発プラットフォーム<br>**DevOps**<br>サービスとしての統合プラットフォーム | **ビッグデータ** |

2023年05月時点で良く耳にするテクノロジを太字で示しました。2023年時点で見ると勝率5割くらいでしょうか。

### 2-3. ペースレイヤリング

#### 企業内システムのライフサイクル

今度は企業内システムのライフサイクルについて、ガートナーが提唱したペースレイヤリングというアプローチを通して見てみます。

ペースレイヤリングは2011年に提唱されたもので、先程のハイプサイクルにも現れています。

ペースレイヤリングは**システムをその変更のペースに応じ三層のレイヤモデルで分類し、その性質に応じた管理と統制（ガバナンス）のプロセスを定義するべき**、という考え方です。

#### ペースレイヤリングの3レイヤ

| レイヤ | 変化の頻度 | 事業要求 | ITガバナンス |
|--------|------------|----------|--------------|
| **レイヤ1** | システムの更改ペース4年以上<br>システム自体はほぼ永続的に使用 | 企業の基幹システムとして長期の使用を前提とする<br>これを「**記録システム**」と呼称<br>コスト効率、信頼性、安定性を要求 | • 長期安定した技術基盤<br>• コストより性能や品質を優先して開発<br>• 堅実な開発プロセス |
| **レイヤ2** | システムの更改ペース1～3年程度 | ビジネス上の戦略的ニーズに応じた柔軟な使用を前提とする<br>これを「**差別化システム**」と呼称<br>競合他社との差別化を実現するための俊敏性を要求 | • 中期安定した技術基盤<br>• コストに応じた性能や品質で開発<br>• WFやアジャイル等、最適な開発プロセス |
| **レイヤ3** | システムの更改or廃棄のペース1年以下<br>試行的なものも含む | ビジネスチャンスの補足、新たな戦略の試行のため、即時・短期の使用を前提とする<br>これを「**革新システム**」と呼称<br>時機を逃さない機敏性を要求 | • 最新の技術基盤<br>• 性能や品質よりもアジリティを重視<br>• アジャイル等の柔軟な開発プロセス |

#### 「モノリシック」から「分割されたサービス」へ

ペースレイヤリングを採用する事で、企業がシステムから得るメリットとそれにかけるコストを最適化する事が出来ます。この考え方は**システム側の構成もこのレイヤモデルに応じ分割する必要がある**、という事を示唆しています。

これまでの我々のシステム開発は、「機能」の観点で論理的に分割されたモノリシック（一枚岩）なアプリケーションを開発していましたが、**今後はライフサイクルの観点を加えた分析・設計ニーズが増してゆく可能性があります**。

**モノリシックアーキテクチャ（従来型）** → **ペースレイヤリング**

従来のシステム構成では、全てのサブシステムが一つのシステム内に統合されていましたが、ペースレイヤリングでは各レイヤごとに分離し、レイヤ間はメッセージングで連携します。

分割システムのメッセージングが技術的課題となり、非同期分散システムへの対応が必要になります。

#### 技術/サービスが持つ「モード」

ガートナーがペースレイヤリングの考え方をさらに進め、システムの「モード（≒特性）」に合わせてテクノロジを選択する、というアイディアが**バイモーダルIT**です。バイモーダルITとは、企業システムにおいて**2つの流儀（＝2種類のガバナンス）を持つべき**というアイディアです。

| モード | 特性 | テクノロジ |
|--------|------|------------|
| **モード1** | 変化が少ない、スピード、確実性、正確性、高品質 | メインフレーム、基幹システム、ERP、ITIL... |
| **モード2** | 変化が速い、アジリティ、低コスト、低品質を許容 | 3rd Platform（第三のプラットフォーム）、クラウド（IaaS, PaaS...）、アジャイル、DevOps... |

企業における投資判断や予算計画、優先事項等のガバナンスが異なります。

#### ペースレイヤリングとバイモーダルIT

ペースレイヤリングにおけるレイヤとバイモーダルITのモードの関係は、以下のようになります：

- **レイヤ1（記録システム）** → 主に **モード1**
- **レイヤ2（差別化システム）** → **モード1** と **モード2** の中間
- **レイヤ3（革新システム）** → 主に **モード2**

システムの機能（基幹系機能、情報系機能、顧客サービス機能、新サービス用Apps）をレイヤとモードで分類し、適切なアーキテクチャと開発モデルを採用します。

### 2-4. スピードとアジリティ

#### 「アジリティ」が勝負を決める"新しい世界"

現代のIT市場（特にコンシューマ市場）は、数限りないベンチャー/スタートアップが多様・多彩なプロダクトで鎬を削る**全く新しい世界**です。かつての巨大IT企業がGAFAに代表されるベンチャー企業に敗北を繰り返す、新たな戦略の時代を迎えています。

**「巨大IT企業」の年間売上高比較**：
- **Apple**：3,832億$（2023）
- **Google（Alphabet）**：3,056億$（2023）
- **Amazon**：5,747億$（2023）
- **Microsoft**：2,119億$（2023）
- **Meta**：401億$（2021）
- IBM：618億$（2023）
- Oracle：500億$（2023）
- Dell：1,016億$（2023）
- **トヨタ自動車**：2,393億$（2023、円建てをドル換算）
- **テスラ**：967億$（2023）
- NTTデータ+NRI+SCSK+CTC+TIS+NSSOL+富士ソフト：360億$（2017）

#### スピードではなくアジリティ ─ 先んずれば人を制す

**「スピード」**とは、定めたゴールにいかに速くに辿り着くかを示す概念です。つまり、一般的には効率の概念を示す言葉です。

対して**「アジリティ」**とは、ゴールを定める事が出来ない状況で、いかに早く・機敏に軌道修正が出来るかを示す概念です。急変を繰り返す現代のIT市場においては、スピードではなくアジリティを実現するソリューションが求められます。

**スピード vs アジリティ**：
- **スピード**：ここをいかに短くするかが課題（スタート→ゴール）
- **アジリティ**：不確実性が高く、原理的に予測が難しい事が課題 → 素早く方向を変える（アジャイル開発が要求される領域）

---

## 3. IT業界最新動向-2024/06

今回は技術に関するエコシステムの観点とライフサイクルの観点を学びました。

ここからは、マーケティングの観点から今後重要度を増すと思われ、かつ我々のビジネスへの影響が大きいと思われる技術トレンドを紹介します。

### 3-1. P.A.I. 襲来！

#### LLMは急速に応用段階へ

2022年～2023年頃から急激に普及が進んでいるLLM（大規模言語モデル）ですが、2024年も全くその勢いは衰えず、各Big Techがコンシューマ向けのサービスを競って展開し続けています。

それらサービスを表す象徴的な名称が「**Copilot（コパイロット/副操縦士）**」であり、我々の普段の生活から仕事まで、様々な活動を支援する、**P.A.I.（Personal Artificial Intelligence/パーソナル人工知能）**と総称されるソフトウェアです。

**主要なP.A.I.サービス**：

- **Microsoft系**：
  - ChatGPT（OpenAI技術使用）
  - Microsoft Copilot
  - Microsoft 365 Copilot
  - GitHub Copilot
  - → **Windowsユーザー市場に向けて**（事実上の企業ユーザー市場でもある）

- **Google系**：
  - Google Gemini
  - → **Android/Chromeユーザー市場に向けて**（コンシューマ市場の半分近い）

- **Apple系**：
  - 2024/05時点では自社技術が追いつかず、他社技術の導入を検討
  - → **iPhone/Macユーザー市場に向けて**（コンシューマ市場の半分近いが...）

#### クリティカルマスを超えるのはどこか？

コンシューマ市場の規模をユーザー数で表現すると、P.A.I.のクリティカルマスは9億人ほどではないかと推定されます。それに対し、先に挙げたBig Tech 3社は、それぞれクリティカルマスを凌ぐ市場を持っており、最終的にキャズムを超えるのがどの陣営になるかは、現時点ではまだ予想する事が出来ません。

**市場規模（ユーザー数）**：
- **Microsoft/ChatGPT**：26億人市場
- **Google**：33億人+α市場
- **Apple**：10億人+α市場

世界のインターネットユーザー（53億人/2021推定）に対して、クリティカルマス（約9億人）を上回る規模を各社が持っています。

どこがクリティカルマスを取り、キャズムを超えるのか、まだ予想出来ません（伏兵が出現する可能性もゼロではない）。

#### 労働の「機械化」

例えば、肉体労働に関しては、古来から「移動」「回転運動」「往復運動」のような単純かつ繰り返しの作業は、風力や水力と歯車等の機構により機械化されて来ました。個人を支援（assist）する道具の代表が「自転車」や「洗濯機」「旋盤」等の道具です。

**肉体労働の機械化要素**：
- 移動、回転運動、往復運動、上下運動
- 熱伝導、位置エネルギー蓄積
- → 単純かつ何度も繰り返す作業は、小さな工学的要素の組み合わせで機械化できる

**知的労働の機械化要素**：
- データ入力（転記）、帳票出力、情報検索、作図
- 思い出す、連想、記憶、記録
- 翻訳（直訳）、要約、まとめ、校正
- スケジュールチェック、管理シート
- → 何をどう組み合わせて、どんな道具が出現する？

P.A.I.により、知的労働の一部を機械化する事が可能になりました。これまでの肉体労働と同じように、比較的単純かつ繰り返しの作業については、急激に機械化される事が予想されます。やがては機械化された状態での作業が日常になり、**その道具（P.A.I.）無しの「作業」など考えられない状況になるでしょう**。

#### 支援（assist）か、拡張（augment）か

ただし道具（機械）には、人の「足りない能力を支援（assist）する」という側面と「能力を拡張（augment）する」という2つの側面があります。

**例**：
- **支援の場合**：「英語が苦手な人が英文を読む事を補助する」
- **拡張の場合**：「元々英語が得意な人が英文を読むことを補助する」→ 直訳では読み取れない暗喩や文化的背景、より高度で抽象的な概念の理解を助ける

この違いは、非常に重要な違いです。何故ならば、前者の場合、**道具への依存が発生しやすく、日常的に支援を受け続けると人の能力がさらに低下するリスク**があります（車ばかり使っていると、運動不足で筋力が低下するのと全く同じですね）。

対して後者は、**むしろ利用者の能力をさらに向上させ得る使用法**です。

従って、P.A.I.による支援が日常になった場合でも、**やはり継続研鑽の重要性は変わりません**。

#### AI Coding Assistants

当社コアビジネスにおける比較的単純かつ繰り返しの作業の一つが、**コーディング**です。
（※ 設計を含む「プログラミング」ではなく、概ね詳細設計済みの状態で行う、いわゆる製造作業の事）

コーディング支援を行うP.A.I.は**AI Coding Assistants（AIコーディングアシスタント）**と呼ばれ、こちらも各Big Techが、今まさに激しい競争を行っています。

**主要なAI Coding Assistants**：
- GitHub Copilot
- JetBrains AI Assistant
- Oracle Code Assist
- Gemini Code Assist
- Codiumate
- Coding-Agent

AI Coding Assistantsによる生成コードの品質は、現時点で既に、**日本のトッププログラマの方々の感想で「6割～8割程度の品質」**と評される程です。比較的複雑さが無い業務システム向けのコード品質としては十二分である可能性があります。

我々が現在行っている「システム開発」における知的作業は、将来どこが機械化され、どこが人の作業として残るでしょうか。そしてその時、あなたの「筋力」は低下しているでしょうか？それとも拡張（augmented）されているでしょうか？

次の段階は、**"AI-Augmented Software Engineering（AISE）"**かもしれません......

---

## まとめ

- **技術/サービスを知る事は、エコシステム/ニッチを知る事**

- **マーケティングの知識**（キャズム理論やガートナーハイプサイクルなど）を知る事で、技術/サービスの**ライフサイクルを理解する事が出来る**

- **ニッチは一つではない**。ペースレイヤリングやバイモーダルITのアイディアは、様々なニッチと適した技術/サービスを知る手がかりになる

- **スピードとアジリティの違いを理解しないと正しい顧客ニーズが理解出来ない**

- **単純かつ繰り返しの作業は機械化されてきた**。**知的作業も今後加速度的に機械化されてゆく**

- **機械による支援に依存するか、自分の能力の拡張か、選ぶ時がやがて来る**......かもしれない

---

## 参考文献

- 『盲目の時計職人』（リチャード・ドーキンス）
- 『キャズム Ver.2 増補改訂版 新商品をブレイクさせる「超」マーケティング理論』（ジェフリー・ムーア）
- 『OODA Loop』（チェット・リチャーズ）
- ガートナー ジャパン株式会社（公式サイト）：https://www.gartner.co.jp/ja
- infoQ：https://www.infoq.com/jp/
- Publickey：https://www.publickey1.jp/
- @IT：https://atmarkit.itmedia.co.jp/
- SystemEXE Wiki：https://revo.system-exe.co.jp/secure/wiki/?FrontPage

---

*Copyright(c) 2019-2024 SystemEXE Inc. All rights reserved.*

---

## 【QM】見積もり・提案教育・第三回v2.0.md

## 第三回 見積もりと提案

見積もり・提案教育セミナー

相田一英 2023/05/24

## 目次

1. **契約と見積もり**
   - 1-1. PJ計画と契約
   - 1-2. 管理費と予備費
   - 1-3. 工数・工期削減/値下げ

2. **見積もりと提案**
   - 2-1. 見積もりと提案の違い
   - 2-2. 提案フロー
   - 2-3. 見積もり/提案のレビュー

3. **部門長向け見積もり検証シートで提案計画**
   - 3-1. 最初の30分で案件規模把握
   - 3-2. 最初のQAで勝負価格帯判断

4. **まとめ**

5. **参考文献**

## 1. 契約と見積もり

### 1-1. PJ計画と契約

#### 開発工程と契約

開発工程ごとに適用すべき契約は異なります。これは、その工程の成果物に対して完成責任を負うことが可能かどうかによって決まるもので、原理的なものです。このため、原則として**ユーザー工程の作業は請負契約で受託する事が出来ません**。

**EXE標準工程モデル**

| 要件定義 | 基本設計 | 詳細設計 | 製造+UT | 機能単体テスト | 結合テスト | システムテスト | ユーザーテスト |
|---------|----------|----------|---------|----------------|------------|----------------|----------------|

**契約形態の適用範囲**

- **準委任契約などが望ましい工程（要件定義）**
  - 要件定義書は発注文書なので、受注側が作成するという事自体に矛盾がある
  - ここで行うのはあくまでも「作成支援作業」のみ

- **請負契約が可能な工程（基本設計～システムテスト）**
  - 成果物の完成責任を負う事ができる

- **準委任契約などが望ましい工程（ユーザーテスト）**
  - ユーザーテストとはいわゆる「検収」なので、作った側が実施したら無意味になってしまう
  - 「ご注文の品はこれですか？」と自分で聞いて自分で回答する店員はいない

**つまり、普通は顧客と複数種類の契約を結ぶ**

#### 「一部工程だけ受託」ができる範囲/できない範囲

請負契約が可能な基本設計～システムテストの範囲でも、工程の受注範囲次第では成果物責任がとれない場合があります。

工程成果物同士には、いわゆるV字モデルと呼ばれる対応関係があります。原理的には、この関係が成立していないと成果物責任をとる事ができません。

**対応関係**
- 要件定義書 ⇔ システムテスト
- 基本設計書 ⇔ 結合テスト
- 詳細設計 ⇔ 機能単体テスト

**受注可能な範囲**
- 工程の対応関係が成立しない範囲では成果物責任がとれない
- 自分で行っていない作業や決定の責任はとれない

#### 「一部工程だけ受注」の場合の見積もり検証

一部工程だけ受注する場合、IPAやJUASの統計データを用いた検証には、少し工夫が必要になります。

**検証手順**
1. 「部門長向け見積もり検証シート」で検証し、全体の工数/工期を定める
2. それを元に「プロジェクト計画シミュレータ」で各工程の工数と工期をシミュレーション
3. 受注工程部分だけ数字を取り出して積算する

**注意点**
- プロジェクトがマルチベンダーで実施される場合、結合テストが内部結合（ベンダーテスト）/外部結合（ユーザー受け入れ）と分割される場合がある
- これは開発プロセス設計次第で異なる

### 1-2. 管理費と予備費

#### 「管理費」とは何か？

一般的には、管理費には以下が含まれます：
- **プロジェクト管理コスト**
- **品質管理コスト**
- **会議などのコミュニケーションコスト**

つまり管理費は、**プロジェクトの工期と体制に依存して変動**します。特にコミュニケーションコストはチーム数/階層や開発工期の影響を大きく受けるため、管理費の計算のためにはシミュレーションが必要です。

**会議コストの例**

| 内外 | 会議 | 参加者 | 頻度 | 資料作成含む時間 |
|------|------|--------|------|------------------|
| 外部 | ステアリングコミッティ | PM, PL, PMO | 3ヶ月に1回 | 3時間（会議1時間） |
| 外部 | PJ全体会議 | PM, PL, PMO | 隔週 | 2時間（会議1時間） |
| 外部 | サブ別定例会議 | PM, PL, PMO, TL, SL | 毎週 | 2時間（会議1時間） |
| 内部 | PMO会議 | PM, PL, PMO | 毎週 | 1.5時間（会議1時間） |
| 内部 | リーダー会議 | PM, PL, PMO, TL, SL | 毎週 | 1.5時間（会議1時間） |
| 内部 | チーム会議 | TL, SL, メンバー | 毎週 | 1.5時間（会議1時間） |
| 内部 | 品質レビュー会議 | PM, PL, 品質管理室 | 隔週 | 1.2時間（会議1時間） |

**計算方法**
参加人数×頻度×時間 ＝ 管理工数

この計算からわかる通り：
- 体制の階層を深くする/チーム数を増やすと参加人数が増え会議頻度も増加
- 工期が伸びれば会議等の実施回数が増える

従って、プロジェクト体制は予算に見合った適切な（シンプルな）体制が望ましく、工期も過剰に長過ぎない最適工期が望ましいと言えます。

#### 「予備費」とは何か？

予備費（いわゆるリスク対策費用）については、多くの人が根本的な勘違いをしています。PMBOKでは、リスクに備える費用として二種類の「予備費」を定義しています。

**PMBOK予備費の種類**

| 予備費の種類 | 説明 | 特徴 |
|-------------|------|------|
| **マネジメント予備** | 事前認識出来ないリスク（地震のような災害など）に備える費用 | ・一種の保険であり、リスク事象が発生しなければ使用されない<br>・定量化が難しいので工数に係数をかけて計算する<br>・通常はお客様内部の予算に積まれる<br>・**通常、我々の見積もりには含まれない** |
| **コンティジェンシー予備** | 事前認識出来るリスク（難易度や体制的なリスクなど）に備える費用 | ・プロジェクト経費であり、リスク対策に使用される<br>・リスクアセスメントを行い、リスク事象毎に個別に定量的な見積もりを実施する<br>・通常は当社（受託開発側）の予算に積まれる<br>・**我々の見積もりに含むのはこちら** |

**重要なポイント**
- 我々の見積もりに含む予備費は係数で算出するようなものではなく、**リスク分析作業が必要**

### 1-3. 工数・工期削減/値下げ

#### そもそも現状、値下げ余地がほぼ無い

当社の粗利率はだいたい25％前後で、これは一般的には利益が少ないと問題提起されるべき水準です。

**業界比較**
- 建設業界の粗利率：約14％～34％（平均20％前後）
- SI大手の営業利益目標：10％超、20％を目標
- 当社の営業利益実績：5％台半ば

**つまり、そもそも安く売っているので値下げの余地無い**

**見積もり期待精度とリスク**
- 提案時の見積もりの期待精度：-10～+50％（PMBOK期待精度）
- もしも10％値引きすると、最悪の場合利益が20％以上足りなくなる可能性
- 粗利で見てもほぼ無くなり、営業利益では明確な赤字になる

#### 他社より値段を下げるのは「差別化」ではない

大前提として、同じ品質のものの値段を他社より下げる行為は「差別化」ではありません。

**競争優位の戦略**
- **コストリーダーシップ戦略**：原価を下げつつ同等の品質を実現する事
- 他社には真似できない調達経路や製造のノウハウなどにより競争優位を実現
- **無根拠な値下げを行う事ではない**

**見積もり金額を少なくする場合の選択肢**

1. **期待精度的に高い見積もりを提示しておき、後から安全範囲分だけ下げて見せる**

2. **実現化範囲（≒機能数）を減らす「提案」をする**
   - つまり工数（売るもの）を減らす

3. **他社には真似できない製品の調達（オフショア含む）を行う**

4. **保守契約の受注を確約した上で、保守契約料金を上げて後から回収する**
   - 社内においては本部長以上に了承をとる事と、回収計画の策定が必須
   - 基本的には短期的に赤字を出すため、事業計画系資料への記載も必須

#### 工数の削減（案）

前述の通り、見積もり金額を下げるために工数を削減する場合、**全体の品質を下げない事が制約条件**です。

**アンチパターン（やってはいけない）**
- 設計や製造の効率向上
- 作成するドキュメントを減らす
- 機能数はそのままで画面数を減らす
- **テストを減らす（最悪、絶対にやってはいけない）**
- 本来ベンダー側で行うべき作業の一部をお客様に作業してもらう

**工数削減の提案案**

1. **機能分析を細やかに行い、パッケージやSaaSで置き換え可能な機能は置き換える**

2. **機能の重要度を評価し、重要度が低い機能を実現化範囲から除く**

3. **機能の優先度を評価し、優先度が低い機能は実現を先送り（次フェーズ送り）する**

基本的には、このように**プロジェクトの企画を変更する以外の方法はありません**。

**注意事項**
- 「提案」とは、お客様が提示してきた企画内容に対し「こう変更しませんか」とベンダー側の意見を提示する事
- クラウドネイティブな開発では、ペースレイヤリング分析を行う事で、アプリケーションを実装するプラットフォームそのものを変更する提案もある

#### 工期の削減（案）

工期の削減は、生産管理上の様々な課題があり、非常に難しい課題です。

**重要な原則**
**100人月のプロジェクトは、人を100人揃えれば一ヶ月で終わるわけではない**

常に最適工期を意識しつつ、実際に効果がある工期削減策を講じなければなりません。

**工期削減の具体策**

1. **仕様や論理設計の現行踏襲など、前方工程が不要になる方針をとる**
   - 要件定義～基本設計の工期を最大40％程度減らせる（全体工期の12％程度）

2. **製造～モジュール間結合テストの自動化**
   - 製造～モジュール間結合テストの工期を最大50％程度減らせる可能性がある（全体工期の15％程度）

   **⚠️ この時点で減らせて最大30％未満であり、これ以上の削減は統計上危険であり、やってはいけない**

3. **実現化範囲（≒機能数）を減らす**
   - システム規模が小さくなれば最適工期も小さくなる（都度最適工期計算が必要）

4. **プロジェクトを相互に独立した複数のプロジェクトに分割する**
   - これは最後の手段であり、通常は分割した他プロジェクトは他社に担当させなければならない

**重要な注意点**
工期が短くなると、原理的にリスクに対する耐性は低くなり、予備費が増大するため、**見積もり金額は減らず、むしろ増える**ので注意が必要です。

## 2. 見積もりと提案

### 2-1. 見積もりと提案の違い

#### 「提案」とは？

「提案」という言葉を辞書で引くと：
- 「議案や意見を提出すること。また、その議案や意見」
- 「ある問題に対する主張・考え、心に思うところ」
- 「自分の思うところを述べて、人の過ちをいさめること」

**つまり我々にとっての提案とは**
> 「お客様の企画に対し、プロとしての意見や主張を提示し、場合によっては企画の過ちをいさめること」

お客様の企画（RFP）に対し、ただ漫然と見積もり情報を記述する事は「提案」ではありません。

**提案のプロセス**
```
お客様の企画(RFP) → 当社によるRFPの分析、独自のソリューション構築 → 提案書(ソリューション)
   ↓(問題・課題・誤り・不足)                                        ↑
                                                        受注のためには独自性(差別化)が重要！
```

お客様の企画に誤りや不足があったら正さなければならない。

#### 期待値コントロール ─ 我々はセールスをしている

また「提案」は、我々のプロダクトやサービスをお客様に買っていただくための**セールス**でもあります。

**顧客満足（Customer satisfaction/CS）**
「お客様がサービスを受ける前に抱いている事前期待を、サービスを受けた後の実績評価が上回ったときに得られるもの」

**満足度と受注の関係**

| 事前期待 vs 実績評価 | 結果 | 受注可能性 |
|---------------------|------|------------|
| 事前期待 ＜ 実績評価 | 満足 | 受注 |
| 事前期待 ≒ 実績評価 | 競合に負ける可能性 | 微妙 |
| 事前期待 ＞ 実績評価 | 失注 | 失注 |

**「期待通り」ではなく「期待を上回る」必要がある**

#### 「見積もり資料」と「提案書」

**見積もり資料の特徴**
- お客様の要求に忠実に応え、製品と価格（見積もり）を並べた資料
- 各社変わり映え無くモノだけ違う
- 顧客にとってコスト以外比べる所が無い

**例：RFPへの対応**
```
【RFP】
1. 機能A
2. 機能B  
3. 機能C
4. 非機能

【各社の提案】
A社: クラウドAを提案します
B社: クラウドBを提案します  
C社: クラウドCを提案します
```

**提案書の特徴**
- お客様の要求（期待）を上回り、明確に他社と差別化されたソリューションが記載された資料
- 顧客の期待を上回り、他社との差別化ポイントも明らか

**例：真の提案**
```
【提案】
1. 機能Aを実現します
2. 機能Bは不要です
3. 機能Cは外部プロダクトを利用します  
4. Microsoft 365 だけで実現します
5. 今後○○システムとの連携を企画すべきなので、今回は連携を踏まえたアーキテクチャを選定しました
```

資料の体裁は全く関係ありません。その内容が根本的に異なるのです。

### 2-2. 提案フロー

#### プロポーザルマネジメント（提案管理）

「提案」に対する方法論として有名なのが、アメリカのAssociation of Proposal Management Professionals（APMP）が提唱する「プロポーザルマネジメント」です。

**提案をベンダー側のフローで見た場合のモデル**

```
プロポーザル(提案)マネジメント
ベンダープロセス: 戦略策定 → 提案計画 → RFP受領 → 骨格作成 → 提案書作成 → 提案書
```

**重要なポイント**
- RFP受領までは、まだ「見積書/提案書」作成が始まっていない
- ただし引き合い自体は事前に検知し、「提案」の作成には着手している段階
- 「提案書」作成は開発プロジェクトにおける製造以降の工程
- それ以前の要件定義（分析）や設計（「提案」作成）と分けて考えないと駄目

#### 「見積もり」は分析ツール

プロポーザルマネジメント全体で見れば、「見積もり」という行為はその序盤から開始される**案件分析のためのツール**だと言えます。

**見積もりの活用**
- 担当営業が引き合いを検知した瞬間から、見積もりは何度も何度も行う
- 見積もりによってお客様の企画内容を分析
- お客様の企画体制や状況、予算感を推測
- 競合他社の戦略や戦術の予測を行う

**価格帯の設定**
```
見積もり → 価格帯予測
         ↓
    辞退価格帯
    標準価格
    勝負価格帯  
    最低価格
```

そもそも、勝負価格帯で実現するソリューションが作れなかったのなら、提案する意味が無い。

#### 現在の当社の提案フロー（2023/06時点）

**全社フローの現状**
- 戦略策定～提案計画の部分が未整備
- なんとなく担当営業がPpM的な役割も兼任する
- PjM以下は、たまたま担当する本部の本部長・部・次長がPpMとPjMを兼ねるような役割を果たしている

**整備されている部分**
- 提案書ドラフト作成後のフローはかなり整備されている
- 推進プロジェクトが存在する顧客に関しては、プロポーザルマネジメントの初期活動に近い活動が行われている

**課題**
- 現状辞退判断が遅れるため、無駄な提案コストの発生は十分には抑止されていない

### 2-3. 見積もり/提案のレビュー

#### 「レビュー」はテストプロセス

そもそも「レビュー」とは、**テストプロセスの一種**です。ただ集まって漫然と見積もり数字や提案資料を眺めるのではなく、その時々に応じた観点で、それらに対する一種のテストであると意識して、レビューを実施しなければなりません。

**レビューとテストの対応関係**

| レビュー | テスト | 内容 |
|----------|--------|------|
| セルフレビュー | 単体テスト | 担当営業や担当者が、部門長向け見積もり検証シートや各種ツールを使用し「自分の意図通りに計画できたか」を確認 |
| ウォークスルー | 結合テスト | 見積もりや提案チーム内で、分担分を持ち寄り、全体を結合して矛盾が無いかを確認 |
| ピアレビュー | システムテスト | 完成した見積もり資料や提案書を、部長や本部長を交えて内部確認 |
| インスペクション | ユーザーテスト | 管掌役員によるレビューや、品質管理レビュー、経営会議への付議など、統制や監査の観点での最終確認 |

#### 提案・見積もりに関する社内手続き（2022～）

当社内のインスペクションモデルを示します。見積もり/提案作成は、最後にこのような手続きが入る事を踏まえ、十分余裕を持って計画する必要があります。

**手続きフロー**

```
提案
↓
金額による分岐: 3千万円未満 / 3千万円以上 / 5千万円以上 / 1億円以上
↓
品質管理レビュー (1～3営業日)
↓
役員レビュー (※社長決裁を兼ねる) (2～4営業日)
↓
経営会議への付議 (毎週木曜日)
↓
お客様に提出
```

**請負発注（再委託）がある場合**
```
発注先与信 → PJ計画レビュー (各本部/ExecTORA) → 発注
```

**重要なポイント**
- 2021～2022年に、新たに追加された手続き
- 大きな修正に備えると、最大で2週間は必要
- 5億円を超えると、さらに取締役会の決裁が必要になる

## 3. 部門長向け見積もり検証シートで提案計画

### 3-1. 最初の30分で案件規模把握

#### 最初に「提案計画」が必要だ

**提案期間の制約**
- 提案依頼書（RFP）の発行から提案書提出まで：概ね一ヶ月～三ヶ月程度
- 当社では、その大半が一ヶ月程度
- それ以下の場合は、提案書ではなく見積もり資料提示の引き合い

**限られた時間での作業**

RFP発行前からプロポーザルマネジメントを開始出来ていない場合、わずかな期間だけで以下を行わなければなりません：
- 戦略策定
- 計画策定  
- RFP受領と分析
- 提案の骨格作成
- 提案書作成
- 社内決裁手続き

**一ヶ月（営業日で約20日間）のスケジュール例**

| 第一週 | 第二週 | 第三週 | 第四週 |
|--------|--------|--------|--------|
| 情報収集・分析<br>戦略策定<br>提案計画 | 骨格作成 | 提案書作成 | 社内決裁手続き |
| RFP受領 | | | (品質管理レビュー、役員レビュー、経営会議、取締役会) |

**もしも本当に一ヶ月しか無い場合、QAから提案計画策定まで、5日未満しか無い**

RFP受領後、ほとんど即座に対象案件の規模を判断出来ないと、本来提案活動に使わなければならない貴重な時間を失ってしまい、工夫のない、ありきたりな提案内容を体裁だけ整えて提出するような状況になりかねない。

#### 最初の30分で規模を判断

RFP受領後（或いは受領前に案件の概要を把握後）の、**最初の30分間で案件規模を概ね把握出来るように**なりましょう。

**判断基準**
- この時の予想規模は、間違っていても全然構わない
- 当社の場合、大雑把には30人月超の可能性があるかどうかだけ、判断出来れば良い
- あくまでも「早く計画する／早く手配する」事が目的
- 見積もりの期待精度など全く不要

**判断フロー**
```
引き合いのメトリクス(RFP等) 
↓
最悪、開発期間だけでも → 最適工期逆算で工数予測
RFPか概要で機能数を → 不明な場合は画面数でも、ネットワークコンポーネント数でも何でも良い
↓
ツールで工数予測
```

**活用ツール**
「部門長向け見積もり検証シート」等のツールを使用し、即時判断し、速やかに提案活動に着手しましょう。

**重要なポイント**
- これは営業の見積もり技術
- 「設計書を作る単位」に見立てられるなら、何を数えても概算見積もりは出来る
- ここまで30分で十分可能（実際に品質管理レビュー担当者は、そのくらいの時間で予測している）
- ここで品質管理レビューが必要、役員レビューが必要、経営会議等への付議が必要だと判断出来れば、その日の内に社内手配と提案作成のスケジュールが組める

### 3-2. 最初のQAで勝負価格帯判断

#### 「適正な価格」とは

大型「提案」の場合、見積もり金額を低く抑えたからといって、受注しやすくなるという事はありません。

しかしながら、やはり「適正な価格」というものは存在します。

**適正な価格の決定要因**

```
要求 → 一般的な解決策 ↘
お客様企業の種類 → 妥当なIT予算 → 適正な価格
お客様企業の年間売上 ↗
```

**重要な考え方**
- ここで言う「予算」とは、システム開発予算の事ではなく、**特定の課題を解決するための予算**の事
- 「適正な価格」とは、我々の提案内容の見積もりの結果得られるものではなく、**お客様の課題と妥当なIT予算額から得られるもの**
- 案件概要或いはRFPにより要求を把握した時点で、直ちに予測出来なければならない

**参考情報**
- 業界毎の、売上に対する概ねのIT予算比率に関し、調査データが公開されている
- 「普通は製品を買って解決する」ならば、それを基準に予算を考えるもの

**プロセス**
最初にこれを予測し、それに合わせて提案内容（当社が提供する解決策）を検討する。
（その後の見積もりというのは「答え合わせ」なのです）

#### 勝負価格帯

適切なプロポーザルマネジメント活動が出来ていればRFP受領の十分以前に、もしも活動が出来ていなければ**RFP受領から3日以内**に、適正な価格を見極め、情報収集やQAにより分析を行い、提案で目標とする**勝負価格帯を決定**します。

**決定プロセス**
担当営業と担当PMは、最優先で勝負価格帯を割り出し、合意、その後提案チーム内でも共有しなければなりません。

**重要性**
我々はこの価格帯内で「提案」しなければならず：
- それより安ければ利益が出ず（リスクも増し）
- それより高ければ失注か、場合によっては競合に対するただの当て馬になってしまう

**スケジュール内での位置づけ**

| 第一週 | 第二週 | 第三週 | 第四週 |
|--------|--------|--------|--------|
| 情報収集・分析<br>戦略策定<br>提案計画 | 骨格作成 | 提案書作成 | 社内決裁手続き |
| **ここで勝負価格帯を合意**<br>RFP受領後2～3日以内 | | | |

**以後の流れ**
それに合わせて戦略策定し、戦略に基づいて提案計画。
受注可能性の無い提案に時間かけるのは単なる損失なので、当然回避しなければならない。

## まとめ

- **原則、ユーザー工程は準委任契約、ベンダー工程は請負契約。**

- **一部の工程を自由に請負契約で受託出来るわけではない。**

- **管理費は工期と体制依存。ちゃんとシミュレーションしないと計算出来ない。**

- **予備費は二種類あり、ベンダーが見積もる予備費は係数で計算出来ない。**

- **安く売る事は美徳ではないし、他社より値段を下げるのは差別化ではない。**

- **「提案」は「見積もり」とは全く異なるし、プロポーザルマネジメントは一つの専門領域。**

- **提案の社内フローを意識して、無駄の無い、余裕のある提案を。**

- **まず要求を分析し、無理のある要求だったら速やかに情報収集と対策検討を。**

## 参考文献

- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』（ダイヤモンド社）
- 『J.D.パワー 顧客満足のすべて』（ダイヤモンド社）
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』（早川書房）
- 『システムを作らせる技術 エンジニアではないあなたへ』（日本経済新聞出版）
- 『ITユーザとベンダのための定量的見積りの勧め』（IPA）
- 『ソフトウェア開発見積りガイドブック』（IPA）
- 『ソフトウェアメトリックス調査2014』（JUAS）
- 『プロジェクトガイドライン』（ExecTORA/株式会社システムエグゼ）
- IFPUG https://www.ifpug.org/?lang=ja
- JFPUG http://www.jfpug.gr.jp/app-def/S-102/wp/ (※当社はJFPUGの会員です)
- NESMA https://nesma.org/

---

## 【QM】アーキテクト教育・第四回v5.9.md

## 第四回 フィジビリティスタディ/ソリューション構築/コンサルティング アーキテクト教育セミナー

## 目次

### 1. フィジビリティスタディ
- 1-1. 「フィジビリティ」とは？
- 1-2. 技術調査
- 1-3. 概念実証(PoC)
- 1-4. フィジビリティテスト

### 2. ソリューション構築
- 2-1. 「ソリューション」とは？
- 2-2. 顧客満足度の定義
- 2-3. お客様の「真なる課題」
- 2-4. ソリューションを「構築」する

### 3. コンサルティング
- 3-1. 「コンサルティング」とは？
- 3-2. SIビジネスの終焉
- 3-3. 我々のお客様は誰なのか？
- 3-4. コンサルティングフレームワーク

### まとめ

### 参考文献

---

## 1. フィジビリティスタディ

全てのITプロジェクトは、その前段階としての企画プロセス、要件定義プロセスを経て実施されます。逆に、企画～要件定義で実現性が無いと判断されればITプロジェクトは開始されません。

我々はフィジビリティ(実現可能性)のある提案をしなければならず、フィジビリティのある機能/非機能要件を定義しなければなりません。

### 1-1. 「フィジビリティ」とは？

#### 「実現可能性」とは？

フィジビリティ(feasibility)は、日本語では「実現可能性」を意味する言葉です。ITプロジェクトの企画プロセス(当社にとっては提案時)では、その企画が実現するのかどうかを検証する必要があります。当然ですが、実現可能性の低い企画は中止されます。

実現可能性を判断するためには、企画を複数の視点から検証する必要があります。

**実現可能性の評価要素：**
- **技術的実現可能性**: 技術の有無、難易度、ライフサイクル
- **経済的実現可能性**: 予算、経営状況
- **時間的実現可能性**: スケジュール、業務余力
- **運用的実現可能性**: 運用体制、運用コスト
- **法的実現可能性**: 関係法令、内部統制

#### フィジビリティスタディ

フィジビリティ(実現可能性)を検証・研究する事をフィジビリティスタディ(feasibility study)と呼びます。いわゆる企画プロセスの一部であり、我々SIベンダーにとっては提案の際に行うものです。

ユーザー要求を分析・整理し、それに対してどのような解決策(ソリューション)があるのか調査、検討、研究、テストする一連の行為がフィジビリティスタディです。

**フィジビリティスタディの構成要素：**

| プロセス | 内容例 |
|---------|--------|
| 分析・整理 | コンセプト、前提条件、制約条件 |
| 調査・検討 | 市場調査、事例/統計調査、**技術調査** |
| 研究 | 市場分析/研究、専門分野研究、技術研究 |
| テスト | **概念実証(PoC)**、A/Bテスト、**フィジビリティテスト** |

### 1-2. 技術調査

#### 技術調査

フィジビリティスタディにおける「技術調査」とは、特定の技術を調査する事ではなく、企画を実現し得る様々な技術を様々な観点(技術、運用、経済、時間、法律、etc...)から調査する事です。

企画・提案の際は、システム/アプリケーション開発以外の手段も含め、お客様の課題を解決し得る(出来る限りの)技術的手段を知る必要があります。

その(複数の)手段に対し、様々な観点から評価を行っておく事で、その後の実現可能性検証の材料とする事が出来ます。

**技術調査の評価観点：**
- 技術的難易度
- コスト
- 時間
- 人材
- 実績
- エコシステム
- セキュリティ
- 法律・統制
- メリット・デメリット
- 技術以外での解決手段

#### 事前の/普段の「勉強」の重要性

技術調査の品質は、アーキテクトが普段行っている「勉強」の品質に大きく左右されます。

「勉強」とは、普段業務で扱っている技術や知識とは異なるものを学ぶ事を言います。普段業務で扱っている技術や知識を学ぶのは単なる「訓練」です。

全く知らないものを、その概念を一から調べ・学ぶ事には大きなコストがかかります。特に我々のビジネスにおいては「提案」はロスコストですので、瞬間的に膨大なコストがかからないよう、普段から備えておく必要があります。

**「勉強」と「訓練」の違い：**

| 訓練 | 勉強 |
|------|------|
| 生業・普段扱う技術・仕事 | 将来への備え |
| やるのが当然 | 技術者の付加価値 |
| 集中投資 | 長期的投資 |
| 実践で学ぶ | 概念を学ぶ |

### 1-3. 概念実証(PoC)

#### 概念(コンセプト)実証(証明)の重要性

概念実証(Proof of Concept/PoC)とは、企画・提案のコンセプト(概念)が成立する事を証明する事です。PoCは「これまで無かった新しいコンセプト」が成立する事を証明するため、様々な論理的証明やテストを行います。

企画・提案において最も重要なものの一つがコンセプトです。コンセプトが成立していない企画は実施する価値が無く、コンセプトが曖昧な提案はお客様の評価を得られません。

**概念の構成要素：**
- 本質的な「意味」は？
- 本質的な「価値」は？
- 論理的に成立？
- ひとことで言うと？
- 実際に証明出来る？

#### PoCの実践

PoCとは企画や提案の核となるコンセプトが論理的に成立し、かつ有効なものである事を、実際に証明する事です。

「証明」とは数学/論理学における課題であり、実践する側が論理的思考力を持つ事が極めて重要です。

PoCを実践するためには、その概念を論理的に実証可能な計画を立てなければなりません。

**PoCの要素：**
- **前提**: 事実？妥当？根拠は？原理は？最適？論理的？本質的？
- **仮定**: 
- **予測**: 
- **不確実性**: 測定(テスト)
- **論理的整合性**: 分析、統計値、実績
- **何をすればコンセプトを証明出来るのか？** → 実際にテストせずに証明しても良い

### 1-4. フィジビリティテスト

#### 実現可能性をテストする

PoC実施の上、調査・研究を行ったとしても、最新の要素技術や新規なアーキテクチャの場合、実現可能性が判断出来ない事も多々あります。そんな場合はフィジビリティテスト(feasibility test/実現可能性テスト)を実施する必要があります。

フィジビリティテストは、フィジビリティ検証における研究の一環として実施される事も、要件定義や基本設計におけるアーキテクチャの実現可能性検証として実施される事もある、正規のテストプロセスです。

**フィジビリティテストの例：**
- 製品の試用
- 性能テスト
- リバースエンジニアリング
- A/Bテスト
- プロトタイピング

**テストが必要になるケース：**
- 製品情報が少なく妥当性が判断出来ない
- 要素技術がブラックボックス
- スペックシート通りの性能が本当に出るのか
- アルゴリズムは妥当なのか

#### それ、テストする必要ある？

フィジビリティテストは、あくまでも技術調査を行っても不確実性が排除出来ないため、実際にテスト(シミュレーション)をする事で不確実性を減らす事が目的です。つまり、それ以外に方法が無いため、やむなく試してみる、という側面が強いテストです。

間違ってはいけないのは、単にあなたが知らないから(知識不足、技術調査不足)とりあえず試してみる、というものではないという事です。企画や提案はあなたの知識や経験を「使う」場であり、あなたが「勉強」する場ではありません。

**無駄なフィジビリティテストの例：**
- お客様の「Webアプリケーション側で、送信元クライアントのIPアドレスを知りたい」という要求を受け、自分のPC上でJSPに存在する送信元IPアドレス取得メソッドを実行し、IPアドレスが取得出来るかどうかテストした
  → IPやHTTPといったプロトコルの知識不足。テストにもその結果にも全く意味が無い
- お客様の「Oracle DBのSQLでナノ秒精度のタイムスタンプを取得したい」という要求を受け、とりあえずSQL関数でナノ秒精度の指定をして値が取得出来るか試してみた
  → 取り扱い可能な時間精度はハードウェア依存、という知識不足。手早い確認作業という意味では良いが、事前の勉強・事後の調査が足りない

---

## 2. ソリューション構築

当社はSIベンダー(SIer)を標榜する企業であり、つまりはコンサルティングから設計、開発、保守に至るまで一貫したサービスを元請として行う企業です。

つまり我々はお客様に対してソリューション(課題の解決策)を提供する仕事をしているのであって、システムやアプリケーションはその構成要素の一部に過ぎません。

### 2-1. 「ソリューション」とは？

#### 我々が提供するサービスは「課題の解決策」

我々はSIベンダーであり、お客様に提供するのは課題の解決策(ソリューション/solution)です。

お客様の企画プロセス(≒当社の提案時)において、我々はソリューションを構築し提供しなければなりません。「提案書」とはお客様に対して我々が考える「解決策」を提示するものであり、単なる「見積資料」とは全く異なるものです。

**ソリューションの構成要素：**
- アプリケーション
- インフラ
- 業務改善
- サービス
- ナレッジ
- コスト削減策

### 2-2. 顧客満足度の定義

#### 「満足」してくれないと買って貰えない

人が商品を買うのは、その商品に「満足」するからです。我々の「商品」であるソリューションも、お客様の「満足」が得られなければ買って貰えません。

顧客満足度(Customer satisfaction/CS)は「お客様がサービスを受ける前に抱いている事前期待を、サービスを受けた後の実績評価が上回ったときに得られるもの」と定義されています。

**顧客満足度の公式：**
- 事前期待 < 実績評価 → **満足** → **受注**
- 事前期待 ≒ 実績評価 → 競合に負ける可能性
- 事前期待 > 実績評価 → **失注**

「期待通り」ではなく「期待を上回る」必要があります。

#### どうすれば期待を上回れるのか？

では、どうすればお客様の期待を上回る事が出来るのでしょうか？

顧客満足度を向上させる基本的な手法として、期待値コントロールがあります。期待値コントロールとは、基本的には以下の３点を心がける、というものです。

**期待値コントロールの3つのポイント：**

1. **お客様の要求レベルを正しく把握し、そのレベルに関し具体的に合意しておくこと**
   - 何よりも重要なのはお客様の要求を、我々も、そしてお客様自身も正しく知る事です

2. **出来ない可能性がある事を「出来る」と言わないこと**
   - 当然ですがフィジビリティが無い・不明な提案をしてはいけません。過剰な値下げもこれに含まれます

3. **不得意な案件は極力回避すること**
   - 営業常識として、無理な提案をして失注するよりも提案を辞退した方が良いと言われています。その方が営業的には先に繋がります

「頑張る」「コストを下げる」といった手段よりも、これらを守る事の方が、結果的には顧客満足度を向上させます。

### 2-3. お客様の「真なる課題」

#### 「顧客はドリルが欲しいんじゃない。穴をあけたいのだ」(セオドア・レビット)

顧客満足度の要は、お客様の要求レベルを「正しく」把握する事です。では、お客様の要求レベルはどうしたら「正しく」把握出来るのでしょうか？まず大前提としなければならないのは、お客様は自身の要求を「正しく」伝える事が出来ないという現実です。

多くの場合、お客様は素人であり、我々がプロ(専門家)です。お客様が提示する要望、要求、企画の妥当性やフィジビリティを検証するのは我々プロの仕事です。

**真なる課題を発見するための質問例：**
- 何に使う？
- そもそも穴を開ける目的は？
- 何故頑丈なものが欲しい？
- そもそも何故その板はそんなに固い？
- 何故ドリル以外は駄目？

**発見される可能性のある真なる課題：**
- 壁自体を建て替えたほうが安い？そうすればもっと他のものも提案出来る？
- 壁の頑丈さには理由がある。たくさん穴をあけると建築法違反？
- 換気扇で通気を良くしては？
- ドリルでなくても良かった！

#### 「真なる課題」を発見し「事前期待」を上回る

お客様から提案依頼を受けた際には、依頼内容の徹底的な分析(＝「何故？」)により、裏に隠れた「真なる課題」を発見する必要があります。「真なる課題」を発見し、その解決策(ソリューション)を提示する事で、初めてお客様の事前期待を上回れる可能性が出てきます。

逆に言えば、お客様の予想範囲内の提案では、原理的に顧客満足を得られず、競合他社に負ける可能性を排除出来ません。

**「モノ」を売るベンダー vs 「ソリューション」ベンダー：**

| 「モノ」を売るベンダー | 「ソリューション」ベンダー |
|-------------------|----------------------|
| 同じ「モノ」で種類が違うだけ | 真なる課題提示 + 当社の提案 |
| 大きな機能差が無く価格競争になりがち | 完全に差別化され、お客様のアイディアを上回る |
| 差別化が難しい上に顧客満足も小さい | 顧客満足の大きい提案 |

#### 差別化

機能要件は競合している全ての会社が満たして来るので、そこで差別化は出来ません。要件(機能/非機能)への回答だけでは、価格以外比べる所が無い提案になりがちです。しかし、ビジネスの基本は良いものを高く売る事です。

受注のためには差別化したソリューションを創り上げる事が最重要であり、価格競争は最後の(そしてあまり望ましくない)手段です。

**差別化の実例：**

**RFPの例：**
1. 機能A
2. 機能B
3. 機能C
4. 非機能

**各社の提案：**
- A社提案: 1.機能Aを実現します 2.機能Bを実現します 3.機能Cを実現します 4.クラウドAを提案します
- B社提案: 1.機能Aを実現します 2.機能Bを実現します 3.機能Cを実現します 4.クラウドBを提案します
- C社提案: 1.機能Aを実現します 2.機能Bを実現します 3.機能Cを実現します 4.クラウドCを提案します

→ **見積もり資料**: 各社変わり映え無くモノだけ違う。顧客にとってコスト以外比べる所が無い → **失注**

**差別化された提案例：**
1. 機能Aを実現します
2. 機能Bは不要です
3. 機能Cは外部プロダクトを利用します
4. Microsoft 365だけで実現します
5. 今後○○システムとの連携を企画すべきなので、今回は連携を踏まえたアーキテクチャを選定しました

→ **提案書**: 顧客の期待を上回り、他社との差別化ポイントも明らか

#### 【閑話】一を聞いて十を知ってはいけない

お客様の真なる課題を発見するためには、一を聞いて十を知ってはいけません。

一を聞いて十を知る事が出来るのは、お客様よりもお客様の業務に詳しく、幅広い業界知識/技術的知識を持ち、それらを用いた課題解決の経験が豊富で、かつ非常に高度な論理的思考力を持つ人物だけです。自分がそのような超人であると考えてはいけません。あらゆることに予断を持たず、徹底的にQAをしなければなりません。

**起こりがちな問題：**
- 予断
- 誤読・間違い
- 知識不足
- 経験不足
- 推測
- 誤解

これらが起きてしまうのは人間なら自然な事です。しっかりと自覚し、情報収集・調査・分析・改めての確認といったサイクルを実践しましょう。

### 2-4. ソリューションを「構築」する

#### 「提案」の基本的な流れ

さて、それでは実際の「提案」を題材としてソリューションの構築作業を見てゆきます。お客様側の企画プロセスの詳細は割愛し当社のようなソリューションベンダーがいつ、どのように関わるかを見てみます。

**提案プロセス：**

| お客様 | 企画 → フィジビリティ → 企画成立 → 要件定義 |
|--------|-------------------------------------------|
| 当社 | 引合 → 営業対応 → 提案 → 受注 |

**各段階での成果物：**
- 情報提供依頼書(RFI) → 情報提供
- 技術公開依頼書(RFT) → 技術公開、超概算見積もり
- 提案依頼(RFP) → 提案書、予算見積もり

この期間は実質的にはコンサルティング期間です。（※実は、この期間でほぼ勝負がついてしまう）

#### 提案依頼書(RFP)の分析(1/2)

お客様側の企画プロセスが正常に進む場合、可能であれば提案依頼書(RFP)が出る以前に期待値コントロールや真なる課題の分析、フィジビリティスタディを済ませておくべきです。

ただし新規のお客様の場合、最初に貰うのがRFPで(かつ、提出まで期限が無い)事も少なくありません。従ってRFPの速やかな分析は、いずれにせよ重要です。

**RFP分析のプロセス(機能面)：**
1. **機能分析** → 概念モデル作成
2. **論理エンティティ数計測** → NESMA試算
3. **その他オブジェクト数計測** → NESMA概算
4. **周辺システム・I/F分析**
5. **機能構造分析** → 機能構造分析・整理 → **機能論理モデル提示**
6. **工数見積もり**

#### 提案依頼書(RFP)の分析(2/2)

RFPへの記載の有無に関わらず、非機能要求の分析も重要です。特に現在では、クラウドを含めたインフラ基盤選択肢、アプリケーションアーキテクチャ選択肢も多様化しているため、きちんとした分析が必要です。

**RFP分析のプロセス(非機能面)：**
1. **非機能分析**
   - ペースレイヤリング → ガートナーモード分析 → **システム構成モデル提示**
   - システムメッセージング分析 → **ソフトウェアアーキテクチャモデル提示**
   - 品質特性分析 → 非機能要求グレード → 運用・性能モデル分析 → **運用・統制・セキュリティソリューション**
2. **見積もり**
   - **HW/MW等見積もり**
   - **開発環境見積もり**
   - **ソリューション見積もり**

#### ソリューションの「コンセプト」と「ストーリー」

提案書は、当社が提示するソリューション(解決策)を分かりやすく、論理的、かつ検証可能なように記述しなければいけません。

提案書作成/ソリューション構築に関わる全てのメンバーが提案/ソリューションの「コンセプト」と提案書全体の「ストーリー」を共有する必要があります。

アーキテクトはソリューションのアイディアを元に、提案チームのリーダーとコンセプトについて話し合い、それを元にして全体のストーリーを作成します。

**提案に必要な要素：**
- 明確なコンセプト
- 興味深いストーリー
- 論理的・明確な根拠
- 課題に対する網羅性
- 事前期待を上回る

コンセプトとストーリーは非常に重要です。コンセプトが明確で興味を惹かれるストーリーがあって、初めてお客様に真剣に読んで貰える提案書になります。

#### ソリューション設計(1/4)

ソリューションとはシステムやアプリケーションそのものの事ではなく、お客様の、真なる課題を解決するための「あらゆる手段」を検討し適切に組み合わせたものです。

ここで言う「あらゆる手段」とは、場合によってはお客様側の現在の企画内容(RFPの内容)自体の変更を迫る事もあり得ますし、或いは「何もしない」という手段すらあり得ます。

ソリューション設計には、常にゼロベース思考が求められます。

**思考の違い：**

| 「御用聞き」の思考(狭い視野) | ゼロベース思考(広い視野) |
|-------------------------|----------------------|
| RFPの範囲内で考える | 業務改善、新技術、別視点のアイディアを含む |
| 前提条件、現在の環境、現在の業務 | 想定を超える発想 |
| 想定内 | 想定を超える |

#### ソリューション設計(2/4)

ソリューションの設計は、まずは「コト」の検討から入り、それを実現するための「モノ」の検討に移ります。

この順序が逆だと、どうしても「自分はこれを使いたい」というバイアスがかかり、手前勝手なソリューションを構築してしまいます。

**正しい設計プロセス：**

課題 → 何故それが必要なのか？ → 真なる課題 → 必要な「コト」は何か？ → 必要な「モノ」は何か？ → ソリューション

**検討すべき要素：**
- **コト**: 業務改善、機能統廃合、外部委託、実は不要？、コスト
- **モノ**: 製品、サービス、インフラ、アプリケーション

#### ソリューション設計(3/4)

ソリューションは、そのアイディア全体が論理的に成立していなければなりません。

そのためには、ソリューション構築全体を把握し、コントロールするリーダーが必ず必要です。業務機能、アプリケーション(アーキテクチャ)、インフラ(アーキテクチャ)の構成案をバラバラに検討する事は出来ません。

バラバラに検討出来るのは、既に作るものも調達するものも決まっていて、後は見積もりを取るのみ、という場合だけです。それは提案ではなく単なる見積もりです。

**相互影響の例：**
- 業務改善アイディアはアプリケーションと相互に影響
- サービスとアプリケーションは相互に影響
- インフラは(特にクラウドだと)サービスやアプリケーションと相互に影響
- コスト削減策はあらゆる要素と相互に影響

#### ソリューション設計(4/4)

そして、ソリューションにはフィジビリティが必要です。我々はビジネスとしてシステム開発を行っていますので、コストが適切である事はシステムを実現する上での必須条件です。

本来的には、システム開発に必要となるコストを担保するのはお客様の責務です。もちろん、お客様の予算感に合ったソリューションを提示出来るのが理想ですが、それが無理な場合は提案を辞退するか、お客様に支払い方を「提案」する必要があります。

**コスト適正性の判断フロー：**

1. **当社がそのコストで実現可能** → 受注戦略に応じて値引き？ → 値引き分は保守か次回案件で回収（この場合はきちんとした計画が必須）

2. **当社がそのコストで実現不可能**
   - 他社は可能 → 他のアイディアは？ → 独自の斬新なソリューション
   - 他社も不可能 → 提案辞退 or お客様の企画が成立していない → 企画見直しを前提としたソリューション

#### 提案書の「設計」

提案書にも「設計」が必要です。提案書は、お客様に好印象を抱いて貰う必要がある文書ですので、読みやすく、分かりやすく、(要求への対応状況が)確認しやすくなければいけません。

提案書は「RFPに対する回答」ですので、原則として目次立てはRFPに準じる構成とします。また、RFPが無い場合や記載に不足がある場合はIPAのソフトウェア品質特性モデル(JIS-X 0129-1)やJUASの非機能要求仕様定義ガイドラインに準じた目次立てを行います。

**提案書設計の原則：**
- 「RFPに対する回答」を確認しやすいよう、RFPの目次と一致させる
- 少しでも事前期待を上回るよう、お客様の要件に不足があれば追加

---

## 3. コンサルティング

コンサルティングとは、顧客の抱えるビジネス上の課題を把握・分析し、そのためのソリューションを提案し、その提案の導入・運用・実施支援を行う事です。我々が顧客に行う提案も、基本的にはコンサルティングでなければいけません。

SIベンダーの一員として、コンサルティングは重要なスキルです。

### 3-1. 「コンサルティング」とは？

#### 白髪の紳士 Vs ファクト

コンサルティングには基本的に２通りのアプローチがあります。

一つは**グレイヘアアプローチ**(白髪の紳士のアプローチ)と呼ばれます。多くの経験と、幅広い業界知識に基づき、課題の解決策を提示するアプローチです。

もう一つが**ファクトアプローチ**(事実の積み重ねによるアプローチ)と呼ばれるものです。定量化・定性化された指標や目標に対し、純然たる事実(fact)である様々な数値(統計値など)を積み重ね、その指標・目標を改善するための解決策を提示するアプローチです。

**アプローチの比較：**

| グレイヘアアプローチ | ファクトアプローチ |
|------------------|-----------------|
| 白髪？、課題解決経験、業務知識 | 事実、定量化、定性化、指標、目標 |
| こちらは無理なので... | こちらで行きましょう！ |

#### 「事実」を積み重ねる

ファクトアプローチは大きく二つのプロセスからなります。

**ファクトアプローチの構成：**

1. **ソリューション構築(企画プロセス)**
   - 課題のヒアリング
   - 背景・原因・利害関係者・等の整理
   - 解決策(ソリューション)構築

2. **プロジェクト推進(要件定義プロセス～)**
   - 解決策(ソリューション)提示
   - プロジェクト計画
   - プロジェクト推進

**必要なスキル：**

| ソリューション構築段階 | プロジェクト推進段階 |
|-------------------|------------------|
| ヒアリング/インタビュースキル | プレゼンテーションスキル |
| 業務/ITに関する広汎な知識 | コミュニケーション/ファシリテーション能力 |
| 論理的思考力 | リーダーシップ |
| 戦略思考力/仮説思考力 | プロジェクトマネジメントスキル |
| ドキュメンテーション/図解スキル | エンジニアリングスキル |

#### コンセプチュアルスキル

「事実」を積み重ねるためには、企画の段階で多くの知識や情報を体系的に組み合わせ、複雑な事象としての全体を抽象化・概念化し、その本質を把握する必要があります。

この際に必要になるスキルをコンセプチュアルスキル(conceptual skill/概念化スキル)と総称します。

**コンセプチュアルスキルの要素：**

| 要素 | 具体的スキル |
|------|-------------|
| 情報収集 | 広汎な知識、多面的視野、俯瞰力、洞察力 |
| 課題発見 | 批判的思考、好奇心、探究心、先見性 |
| 課題解決 | 論理的思考、水平思考、批判的思考、応用力、直感力 |
| 解決策評価 | 批判的思考、先見性、定量化 |

#### 「提案」も一種のコンサルティング

ここまで見てきたように、企画/ソリューション構築において非常に重要なのがコンサルティングスキルです。

我々の現在のビジネスでは、「提案」は企画プロセスに含まれます。つまり我々が「提案」を行うためには、基本的なコンサルティングスキルが要求される、という事です。

**コンサルティングスキルが特に重要な領域：**
お客様の要求 → 何故？ → お客様の真なる課題 → 解決策(solution) → 満足 → 受注

受注後が、エンジニアリングスキルの比率が上がる領域

※逆にいえば「提案力」とは、コンサルティングに必要な技能・能力の集合だと言う事。普段から多彩な勉強をしている人は提案力が高い。

### 3-2. SIビジネスの終焉

#### 旧来型のSIビジネス

我々が普段受託するのは要件定義以降の工程です。これは旧来型のSIビジネスであり、SIベンダーが本来目指すべきビジネスではありません。このようなビジネスはしばしば「御用聞きビジネス」と揶揄されるように、お客様の期待にいかに応えるか「のみ」を重視したビジネスであり、非常に生産性が低いビジネスです。

**旧来型SIビジネスの問題：**

お客様の期待 → なるべく応える → 事前期待以下 → 顧客満足が得られない
           → 安く応える → 儲からない
           → 期待以上に応える → 無償でサービス向上 → 売上が増えても利益が増えない → 将来への投資出来ない

#### 本物の「SIベンダー」

本物のSIベンダーが行うべきビジネスは、企画プロセスを含む「総合的な」ITサービスであるべきです。

**本物のSIベンダーのビジネスモデル：**

お客様の期待 → 事前期待を上回る → 顧客満足を得る → 高い付加価値 → 利益が増える → 将来への投資により企業成長
           → 無償でサービスしない → コンサルビジネス
           → 適切なコストで提案 → 売上は増える？減る？

恐らく、現在のビジネスの現実の課題はここになってしまっている。お客様のコスト課題の解決のため、当社のコストを付ける、では本質的解決にならない。

#### 高付加価値ビジネスへのシフト

当社がソフトウェアハウスではなくSIベンダーであろうとする理由は、その軸足を高付加価値/高生産性ビジネスへシフトさせなければいけないからです。そのために、まずは現在のビジネスにおける高付加価値領域(=利益の大きい領域)での実力を増して行かなければなりません。

**SIベンダーの戦略：**

| 領域 | 目的 | 効果 |
|------|------|------|
| コンサルティング | より高い生産性を実現 | 売上増大、利益率向上 |
| 設計・開発 | より高い生産性を実現 | 利益率向上 |
| 保守 | サービス拡充と営業戦略連携 | ストックビジネス化 |

- コンサルティングは重要領域
- 工数(労働力)売りや、値引き戦略からの脱却
- 経営(売上)の安定

### 3-3. 我々のお客様は誰なのか？

#### お客様にとっての「付加価値」

我々の「お客様」は情シスの担当者様ではありません。お客様の業務部門の皆様であり、利益部門の皆様であり、或いはその背後にいる経営者の方々です。

SIベンダーの「提案」は、そのソリューションによってお客様のビジネスに新たな価値が付加され、お客様の利益が向上するものでなければいけません。RFPに書かれていない、お客様の真なる課題を分析するためには、コンサルティングスキルが必須です。

**真の分析対象：**
- 経営
- 利益部門  
- 業務部門・情シス ← RFPの作成者
- 企業システム

真なる分析対象は経営～利益部門(ビジネスモデル) → コンサルティングの領域

### 3-4. コンサルティングフレームワーク

#### コンサルティングの「基本言語」

コンサルティングにおける基礎的スキルは何と言ってもロジカルシンキング(論理的思考)です。

また、ロジカルシンキングを行う上で最も基礎的な図解言語がロジックツリーです。ただしロジックツリーは図解言語としてはシンプルすぎる(単語が一つ、構文が一つしか無い)ため、図そのものではなく図解してゆくためのノウハウ自体が重要です。

**ロジックツリーの構造：**
```
最上位命題
├── 第一階層
│   ├── 第二階層
│   │   └── 第三階層
│   └── 第二階層
├── 第一階層
└── 第一階層
```

各階層内で「同一の『レベル』で」「重複無く」「漏れなく」項目を挙げてゆく事自体が難しい。

ちなみに「重複無く」「漏れなく」という条件をMECE(ミーシー)と呼ぶ。これは数学用語が元。経営・コンサルティング業界におけるjargon。

ロジカルシンキングのトレーニングツールとして触れておきたい。

#### コンサルティングの「デザインパターン」

実際にコンサルティングを行う上では、ロジカルシンキング/ロジックツリーというツールを手にしつつ、それを使いこなすためのいくつかのテクニックがあります。有名なものには、戦略思考と仮説思考があり、これらは一種のデザインパターンです。

**戦略思考 (変化が遅く不確実性が低い場合)**
- ファクトアプローチの基本
- 十分な情報収集や分析が重要
- ソリューション構築に十分な時間を必要とする

プロセス: 命題 → 情報収集・分析 → ソリューション構築 → 実施 → 結果分析 → フィードバック

**仮説思考 (変化が速く不確実性が高い場合)**
- 少ない情報と限られた時間の中で速やかにソリューションを構築しなければならない場合
- 失敗を恐れず、素早く試行錯誤を繰り返す

プロセス: 仮説 → ソリューション構築 → 実施 → 結果分析 → フィードバック

#### コンサルティングの「フレームワーク」

最後に、コンサルティングにおける代表的な分析フレームワークを紹介します。これらのフレームワークは、それぞれの目的に応じてMECEな分析が出来るよう、提唱されているものです。

**フレームワークの分類：**

| 分析対象 | フレームワーク |
|----------|---------------|
| 総合的な分析 | PEST分析、SWOT分析 |
| 競合他社を分析 | 3C分析、5F分析 |
| 市場・お客様を分析 | 4P分析 |
| 自社を分析 | PPM分析、7S分析、BSC分析 |

いわゆる「ビジネスフレームワーク」とは、目的に応じて多様な種類が存在する。ここで挙げるものはあくまでも基礎的なもののみ。

#### 3C分析(さんシーぶんせき)

3C分析とは、市場(Customer)、競合(Competitor)、自社(Company)の三つの視点から行う分析です。戦略の方向性や市場動向の把握に向いています。

**3C分析の構成：**
- **Customer (市場・顧客)**: 自社の顧客分析、生活者分類変数、市場動向、ターゲット市場
- **Competitor (競合)**: ポジショニング
- **Company (自社の実力)**: 社内資源、強みと弱みを活かした事業機会など

**4C分析への拡張：**
卸や代理店など流通チャネル構造が重要な意味を持つ場合、Channel(流通・物流)を加え4C分析と呼ぶ。

#### 4P分析(フォーピーぶんせき)

4P分析は、製品(Product)、場所(Place)、価格(Price)、販売方法(Promotion)の観点から分析します。個別の企業や製品に対する、より具体的な分析に利用されるもので、3C分析の結果 → 4P分析へ、という風に組み合わせて使用される事が多い手法です。

**4P分析の要素 (売り手の視点):**
- **Product (製品)**: 品質・機能、スタイル・ブランド、サービス・保証など
- **Price (価格)**: 定価・値引き・利益幅・支払い条件など
- **Place (場所,流通)**: 流通経路・販売領域・立地条件・在庫・配送など
- **Promotion (販売方法)**: 広告・販売促進・広報・人的販売など

**4C分析への転換 (買い手の視点):**
必要に応じ、視点を買い手側に移して4C(マーケティングミックス)分析フレームワークを改めて適用する事もある。
- **Customer Value (価値)**
- **Cost (コスト)**
- **Convenience (利便性)**
- **Communication (コミュニケーション)**

#### 5F分析(ファイブフォースぶんせき)

5F分析は、買い手の交渉力、供給企業の交渉力、新規参入業者の脅威、代替品の脅威、競争企業間の敵対関係、という５種類の「力(Force)」の視点から分析するフレームワークです。業界構造など、よりマクロな視点で分析するためのものです。

**5F分析の構造：**
```
        新規参入の脅威
             ↓
供給者の ← 業界内の → 買い手の
交渉力      競争の激しさ    交渉力
             ↑
     代替品・サービスの脅威
```

#### SWOT分析(スワットぶんせき)

SWOT分析とは、その組織が持つ強み(Strengths)と弱み(Weaknesses)を、組織の外的環境に潜む機会(Opportunities)、脅威(Threats)を検討・考慮した上で分析するフレームワークです。

経営戦略の策定やマーケティング計画、BSC、ISO等のマネジメントシステム構築などに利用されます。

**SWOT分析のマトリックス：**

|  | 好影響 | 悪影響 |
|--|--------|--------|
| 内部環境 | 強み | 弱み |
| 外部環境 | 機会 | 脅威 |

**注意点：**
- 非常に良く使われる整理法で、メリデメ表などにも応用される
- ただし、そもそも「強み」⇔「弱み」、「機会」⇔「脅威」に単純化可能？視点によって強みと弱みが逆転するのでは？という問題も
- 最終的な整理・図解としては直観的で分かりやすいが、分析手法としてはバイアスを引き起こしやすい
- 戦術レベルで使用する場合は、視点毎に複数作成しなければならない

---

## まとめ

- ITプロジェクトの企画プロセスではフィジビリティスタディ(実現可能性の検証・研究)を実施する必要がある。

- フィジビリティスタディは実際のモノを作る前に行うので、『実証』のためには広汎な知識と論理の構築能力が必要。

- 我々SIベンダーはシステムでもアプリケーションでもなく「ソリューション」を売る。

- ソリューションを構築するためには真なる課題を発見するための分析と、お客様に興味を持ってもらうための顧客満足の実現が必要。

- コンサルティングスキルは(実は)SIベンダーの技術者にとっても必須スキル。

- 白髪の紳士になるまで待っていてはビジネスにならないので、コンセプチュアルスキルを向上させよう。

---

## 参考文献

- 『J.D.パワー 顧客満足のすべて』（ダイヤモンド社）
- 『ビジネスで一番、大切なこと 消費者のこころを学ぶ授業』（ダイヤモンド社）
- 『問題発見プロフェッショナル―「構想力と分析力」』（ダイヤモンド社）
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』（早川書房）
- 『新版 コンサルタントのフレームワーク』（同友館）
- キャリア別研修：コンサルティング基礎研修（株式会社システムエグゼ）

---

## 【QM】見積もり・提案教育・第四回 番外編v1.5.md

## 第四回【番外編】要求分析～詳細設計：上流工程基礎

## 目次

1. **要件定義**
   - 1-1. 「プロジェクト」の全体像
   - 1-2. 要求の分析
   - 1-3. 要件の定義

2. **基本設計**
   - 2-1. 「設計」とは何か
   - 2-2. 概念設計
   - 2-3. 論理設計

3. **詳細設計**
   - 3-1. 物理設計
   - 3-2. 「システム」の設計
   - 3-3. 詳細設計とプログラミング

4. **まとめ**

5. **参考文献**

---

## 1. 要件定義

### 1-1. 「プロジェクト」の全体像

#### 「ITプロジェクト」の持ち主はお客様

我々のコアビジネスは、企業向けITシステムの受託開発です。つまり、ITシステムの持ち主はお客様であり、その開発主体は本質的にはお客様です。つまり、ITプロジェクトの持ち主はお客様であり、我々はその一部を受託しています。

**ユーザーにとってのITプロジェクトは企画から始まり、対象システムが廃棄されるまで終了しない。**

**ベンダーにとってのITプロジェクトは、システムライフサイクルのごく一部である。**

EXE標準工程モデルでは以下のように構成されています：

```
企画 → 要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト → 運用・保守 → 廃棄
```

- **プロジェクトマネジメント/ベンダーマネジメント**（全体）
- **システム開発（外部委託部分）**
- **プロジェクトマネジメント（受託部分のみ）**

#### 「要件定義」はユーザー工程

従って、要件定義はいわゆる「ユーザー工程」であり、ユーザーが主体で行うプロセスです。「要件」とは、我々ベンダーに発注する際の発注要件の事であり、実現すべき「仕様」を定める工程です。

要件定義の前にあるのが企画工程/企画プロセスであり、ユーザーはここで自社内の「要望」を集め、それを整理して「要求」をとりまとめます。この「要求」が我々ベンダーに対する最初の入力となり、一般的には**提案依頼書（RFP）**という文書として提示されます。

**ユーザーにとって非常に重要な工程**です。どのようなシステムが必要で、どのような予算とスケジュールで発注するかをここで決めます。

ただし、非常に難しい工程なので、多くの場合外部のコンサルタントや業務SEに支援を依頼します。

#### 企画と要求

理想的には、RFPが出る前の企画プロセスで、お客様の内部で要望や要求の収集や分析、要件（候補）の検討が行われます。ただし、企画プロセスに関する十分なノウハウを持たないユーザーも多く、要件定義の一部としてベンダーの支援を受けようとする事も多いのが現実です。

このため、要件定義を担当するSEには、要求分析等の企画プロセス向けのスキルも要求されます。

「要件定義」の期間が顧客によって大きく異なるのはこれが原因で、単純な比較が難しいです。

一つの判断基準として「RFPの完成度」があります。JUASの研究ではRFPの完成度を四段階に分けて定義しているので、興味のある方は是非研究してみてください。

**特に初めての取引の際に注意。そもそもユーザー工程という概念が無い、丸投げ体質のお客様も多い……**

#### 事業要求 → 業務要求 → 機能要求

我々は、多くRFPという「最終的な要求文書」を起点に仕事をする事が多いので、最も枝葉末節に当たる機能要求に目が向きがちです。しかしながら、機能要求は業務要求から発生し制約され、業務要求は事業要求から発生し制約されるものです。従って「ユーザーの要求を理解する」という事は、そのコンセプトとなる事業要求を理解する事です。

| ロール | 要求 |
|--------|------|
| 経営層 | 事業要求 |
| 業務部門 | 業務要求 |
| 情報システム部門 | 機能要求 |
| ベンダー（我々） | - |

当然だが、最も重要な「要求」は事業要求であり、そのプロジェクトに対して、お客様の経営層が何を要求しているのか、という点である。

しかしながら、多くの要求文書にはこの点が明記されておらず、営業による情報収集やSEによるヒアリングによって引き出さなければならない事が多い。

繰り返すが、事業要求が最重要であり、事業要求を満たすためには、要求文書内に示されている業務要求や機能要求を変更する「提案」をすべきシーンも多い。

### 1-2. 要求の分析

#### 要望・要求・要件

まず最初に気をつけなければいけないのは、我々のビジネスにおいて「要件」というのは専門用語であり、（国語辞典で説明されているような）一般用語ではないという点です。また「要望」「要求」についても、ビジネス用語としては区別されるのが一般的です。このような区分けは、お客様側もうまく認識出来ていない事がままあるので、我々がしっかりと意識しておく必要があります。

**企画プロセス** → **ユーザープロセス** → **ベンダープロセス**

- **要望**：「こうなったらいいな」という、未検討の望み
- **要求**：「こういう理由でこうして欲しい」という求め
- **要件**：要求を実現する範囲と内容を定義した契約条件

もしも（実質的に）企画プロセスからなら、要望の収集から始める必要がある。

#### 勘違いしてはいけない ─ それは要件ではなく要求です

稀に「自分たちだけで要件定義を行った」とするお客様がいます。それ自体は間違っておらず、ITコンサル等が入って本格的な要件定義書が取りまとめられている事もあります。

しかしながら、もしそれが請負契約前提の引き合いだった場合、お客様が提示する「要件定義書」の内容は「要件」ではありません。当社との契約が存在しない限りそれはただの「要求」です。基本設計以降を受注する場合でも、請負契約であるならば、原則として「要件定義」「要件確認」（及び再見積もりイベント）といった、当社受託範囲/レベルを明確に定める工程を設けるべきです。

#### 要求分析

我々の最初の仕事は、お客様の要望・要求を分析し、お客様が言語化出来ていない真なる課題を発見する事です。

**お客様は自身の要求を正しく伝える事が出来ません。**我々はプロとして、お客様の言葉に振り回されず、お客様への質問やインタビューを通し、その要求の裏に隠れたお客様の真なる課題を分析します。

**要件とは、要求から生まれるものではなく、真なる課題から生まれるもの。**

つまり、RFPに提示された案と、提案書に提示するソリューションは必ずしも一致しない。それどころか、違った方が有利になる場合がある…

#### 「真なる課題」とは？

要求分析に当たっては、その要求が機能要求なのか、業務要求なのか、それとも事業要求なのかを見極める必要があります。お客様の「真なる課題」とは、究極的には事業要求の事であり、これが見極められないと要求そのものの良し悪しが評価出来ません。

※この評価を行わずに漫然と機能要求を受け入れると、その後仕様変更が頻発する事がままあります。

優れた要件定義者は、常に経営の視点を持ち、より本質的な事業要求を見極める事ができる。

最優先なのは事業要求を満たす事で、その結果業務要求や機能要求が覆る事もしばしば。

お客様の担当者から出てくる要求は、多くが機能要求。我々はついついここを起点にしようとしてしまう。→「御用聞き」と揶揄される振る舞い。

機能要求の裏に隠れている業務要求が見極められれば、一人前のSEだと言われる。ただし、優れたSEになるためにはもう一歩。

#### お客様から真なる課題を「引き出す」

大原則として、ビジネス上の要求というのは、事業要求が満たされる事が最重要です。そして、その結果発生する機能要求はあくまでも副次的な課題だという事です。

事業要求の理解と、その対策立案（つまり真なる課題を立てる事）は非常に難しく、お客様の担当者自身も事業要求を良く理解していない事が多くあります。つまり、**お客様が提示する機能要求が正しいとは限りません。**

機能 → 業務 → 事業と、質問やインタビューを通して得た情報を分析し、遡っていく。

例えば：
- **事業要求**：「日々の生活のため食料品や生活用品を買う必要がある」「年に一度は母方の両親に会いに行く必要がある」という要求。これが満たせれば手段は何でも良い。（自動車でなくても全く問題無い）
- **業務要求**：「週末の買い物と、故郷への帰省に使う交通手段が必要」つまり「週末に買い物をする」と「帰省する」という業務が定義されている。
- **機能要求**：「買い物や帰省の荷物を積めて、家族全員が乗れる自動車が必要」これはあくまでも、お客様担当者によるいちアイディアに過ぎない。

#### 具体的な「要求分析」作業とは

要求分析とは、お客様が提示した「要求」は"実はどのような要求なのか"を、必要に応じて調査を行いつつ、業務知識を元に分類・定義付けする作業です。

例えば「要求一覧表」といったような資料に、要望・要求・要件といった分類や、業務レベル・事業レベルのドメイン分け、見極めた真なる課題、実現優先度を書き添えるような作業になるでしょう。また、要求を明確化するために業務フローを作成したり、プロジェクト用語集の作成なども行います。

**RFP等初期資料** → **要求分析**（業務知識・調査） → **要求一覧表**、**業務フロー（AsIs/ToBe）**、**プロジェクト用語集**

これらが、その後の要件定義における要件や、項目定義に対するインプットになる。

### 1-3. 要件の定義

#### 「要件を定義する」とはどういう事か？

要求分析によって顧客要求が理解可能かつ採用/不採の判断可能になったら、いよいよ「要件」の定義に移ります。

要件とは、具体的には、お客様のどの要求を受託しどの要求を受託しないか、必要に応じ不採用の要求の代替案、要求を満たすための具体的な施策内容、その品質レベル、などの事です。要件定義とはそれらの内容を文書化し、お客様と共有し、合意します。かつ、それらを実現するのに必要な作業の見積もりを行い、実際に受託する「要件」の範囲をお客様と調整する事で、受託開発における最終的な「要件」が確定します。

**分析後の「要求」** → **要件記述**、**代替案**、**見積もり** → **実現範囲調整** → **要件定義**

いわゆる「鉄の三角形」の調整。

最後に決定（定義）されたものが「要件」であり、受託契約条件。

#### 【閑話】鉄の三角形（Scope, Time and Cost）

プロジェクトマネジメント上の制約をモデル化したものが「鉄の三角形」と呼ばれるモデルです。プロジェクトマネージャーが最も注意しなければならないのは、実現化範囲（Scope）、時間（Time）、費用（Cost）の三要素です。

一般的な請負契約による受託開発の場合、原理的に、契約時点で実現化範囲が固定されます。このため、請負契約以前の要件定義の段階で、時間と費用（Time and Cost）を繰り返し見積もりながら、実現化範囲（Scope≒受託範囲）を決定します。

```
    実現化範囲
   /         \
時間 -------- 費用
```

- **実現化範囲を固定**：請負契約は、対象の「完成」状態及び成果物を定義して、そのための作業を一定の費用で受託する契約
- **見積もり**：要求内容を基に時間と費用を見積もり、その結果を元に改めて契約対象範囲（実現化範囲）を調整する

#### 非機能要件の定義 ─ サービスレベルの合意が重要

非機能要件定義に当っては、IPA或いはJUASが公開する非機能要求定義用のフレームワークの使用を推奨します。

- **非機能要求グレード**：NTTデータ等のベンダー団体からのアプローチ。後にIPAに寄贈された
- **非機能要求ガイドライン**：JUASによるユーザー団体からのアプローチ

ただし注意していただきたいのは、これらは非機能「要求」を整理するためのフレームワークであって、各項目の「やる/やらない」のチェックをするだけでは、要件定義としては不十分だという点です。非機能要件定義は、先に挙げた事業要求の分析後に実施しなければならず、受託範囲内の項目については「どのようなレベルで実施するか」を定義し、ユーザーと合意（＝品質レベルの合意）をしなければなりません。

**非機能要件定義：具体的に「どのような品質レベルで、どのように実現するか」を決め、それらを合意する事で「要件」となる。**

#### 要求の「レベル」を必ず定義する

非機能要求の「レベルの合意」は、費用に直結する事も多いので必ず具体的に決めなければならない。それを怠ると、以下のような事が起こる。

**例：セキュリティ診断の場合**

- **【要求定義】**：Webアプリケーションに対してセキュリティ診断を実施する。
- **【要件定義】**：〃を実施する。（← これしか決めていなかったのが問題）
- **【実施方式】**：当社が提案したセキュリティテストツールを使用し、指摘された個所を相談の上修正する。（← 一見問題無いように見えるが・・・）

**【問題】セキュリティ品質レベルの合意が無い。**

そのツールでお客様の望む品質が実現できる事を、当社が保証していると捉えられかねない。

つまり、もしも実際にサイバー攻撃等を受け、ツールでは見逃されていた欠陥によりセキュリティ侵害が発生した場合、「そのような侵害が発生しない対策を要求したが、実施された対策が不十分であり、要件が満たされなかった」と判断されうる（民法における契約不適合責任）。

**【やるべきだった事】品質レベル（品質目標）の合意を取る。**

品質目標として「（選定した）セキュリティテストツールでテスト可能な項目」を列挙し、それを目標とする事にユーザーが合意した証跡を取る事。

理想は、実際の調達ラインがどうであっても「テストに使用するツールはユーザーが選定し指定した」という形をとること。

※本来の理想は「外部の専門企業に委託させる」（当社が責務を持たない）

---

## 2. 基本設計

### 2-1. 「設計」とは何か

#### そもそも「設計」とは？

ユーザー工程である要件定義が完了し、ユーザーの発注内容（範囲とレベル）が決定すれば、請負契約を締結可能な前提条件が整います。その上で、無事当社が受注する事が出来れば、やっと我々が主体のベンダー工程が開始されます。

設計とは、定められた仕様に基づき、対象の構造や形状を（分析・検討し、最終的に）文書や図面などに表す事です。

**ユーザー語の領域** → **システム語の領域**

**要件（確定）仕様** → **設計** → **具象化されたシステム**

#### そもそも「設計作業」とは？

では、そもそも「設計する」とは、具体的には「何をする」事でしょうか？

多くの人が「設計とは文書や図面を作成する事」だと勘違いしています。文書や図面の作成は設計結果の最終出力作業であり、設計作業のごく一部でしかありません。

設計作業の大部分は、その設計結果を導くために行う仕様の分析作業と、その仕様をどうやって実現するかについての検討および試行錯誤です。

**要件仕様** → **仕様分析** → **検討・試行錯誤**（必要に応じて繰り返す）→ **設計結果** → **設計書作成**（いわゆる清書）

- → 設計書を書くなんて簡単。誰でもできる。
- 難しいのは「設計」。ここで何をするかを誰も説明してくれないから「設計は難しい」というイメージが！

#### 大前提：抽象/具象とは？

この後の「設計とは何か」の理解に、絶対に必要になる概念が「抽象と具象」です。或いは「抽象度が高い/低い」という概念ですが、それがどういう概念か、皆さん明確に理解されていますか？良くあるのが「概要と詳細」との混同です。この違いを、明確に区別出来ますか？

例えば「映画」を題材に取ると：

**詳細化**：もう何を作るか決まっている状態で、細部を決めていく事
- 概要：映画のあらすじ
- 詳細：映画の登場人物設定、背景、特定のシーンの解説など
- さらに細かく…

**具象化**：何を作るかをより具体的にしていく事。その過程で詳細化「も」するが、かなり後でやる事（でないと手戻りが大きい）
- 抽象：映画のジャンル（ロマンス、アクション、ホラー）やテーマ
- 具象：映画のタイトル、ストーリーなど
- さらに具象的に…

**詳細化とは、具象化が終わった後でやる事。**

要件定義（概念）→ 基本設計（論理）→ 詳細設計（物理）

### 2-2. 概念設計

#### 概念 → 論理 → 物理

設計作業は、より抽象度が高い（ハイレベル）設計から開始し、概念レベル → 論理レベル → 物理レベルと、段階的に具象度を上げて（抽象度を下げて）行きます。

一般的に、基本設計では、概念レベルから論理レベルまでの設計を行います。このステップを細かく分けてみると以下のようになります。

※通常はこのステップをいくつかまとめてやってしまうため、初学者にとっては、逆に難易度が上がってしまいます

**要件仕様** → **仕様文章をシステム語に翻訳** → **仕様を図解** → **図解した仕様をシステム語に翻訳** → **図上で具体的な構造や形状を検討（図の変形・加工を繰り返す）** → **シーケンスやロバスト性等、検証したい特性に応じ複数の図を作成** → **仕様・品質を満たすかどうかのレビューをクリア** → **設計書にロジックを記述** → **ロジックの説明に必要な図を清書** → **基本設計書完成**

この辺が例えばUMLモデリング。

#### 概念モデルの作成

概念設計とは、概念モデルを作成する事です。ユーザー語で、仕様として定義された内容を、システム語に翻訳しつつ、それを図解してゆく作業です。いわゆるハイレベルなシステム構成図やDFD或いはサブシステムを表現するソフトウェアスタック図などを作成します。

- ※1 「サーバ」「ロードバランサ」「ここを冗長化」といった抽象度が高いレベルでの構成図
- ※2 円筒形に「（概念的な）テーブル名」を書いて矢印でつなぐ、という素朴なモデルを良く作図すると思います
- ※3 サブシステム名を書いた四角を積み木のように積み重ねる図を良く書きますよね。あれがソフトウェアスタック図です

概念モデル：
- システム構成概念図
- 概念DFD
- ソフトウェアスタック図
- 等...

この時概念レベルで描いた図を、次の段階では論理レベルで、より具象度を高めて描く。

### 2-3. 論理設計

#### 論理設計のための「試行錯誤」

概念設計から論理設計に至るまでに行う、試行錯誤こそが「設計作業」の本質です。設計を学ぶというのは、この部分をどう行うかについての方法論を学ぶ事であり、表の形式や作図法などはそれを行うための単なるツールです。

従って、設計作業では、設計書には書かれない大量の作図を行うのが一般的です。

※なので「設計書のサンプル」やテンプレートを貰っても設計は全く楽にならないのです

例えば「UMLモデリング」という設計方法論では：

- UMLという記法で図解する
- 概念モデルを、様々な次元断面で分析するため、様々なUML図を作図する
- 分析の結果概念モデルに問題が発見されれば、この段階で仕様を修正する事もある
- 分析結果から論理モデルを作図する → これが最終成果物としての「基本設計書」に出力されるもの
- 通常は、分析が終わり論理モデルが確定したものから、文章によるシステムユースケース記述を行う

#### 論理モデルの作成

分析と試行錯誤の結果、論理モデルが完成するので、それを最終的に出力（＝清書）したものがいわゆる「基本設計書」です。

ちなみに昨今はDOAが採用される事が多いと思いますので、機能設計とは別にデータ設計を行うと思いますが、そちらでもやる事は同じです。

※この例のUMLモデリングが、ERモデリングに変わるだけです

論理モデル：
- 論理データモデル
- ドメイン図
- システムユースケース記述
- システムシーケンス図
- ロバストネス図
- システムコンポーネント配置図
- 等...

普通は論理データモデルの方が少し先んじて実施される。→ その方が用語統一しやすい。

必要な図"だけ"清書

---

## 3. 詳細設計

### 3-1. 物理設計

#### 改めて、概念 → 論理 → 物理

「論理設計」と「物理設計」の概念の違いが良くわからない、という声を多く聞きます。この原因は、そもそもシステムやソフトウェアは、コンピューターの中にだけ存在する論理的な存在だからかもしれません。とは言え、我々がやっているのは哲学ではなく工学ですので、以下のように切り分けて考えていただければ良いと思います。

| | 概念設計 | 論理設計 | 物理設計 |
|---|----------|----------|----------|
| 特徴 | 「なんかこんな感じ？」と言いながらホワイトボードに描く絵のイメージ | 「普段こう呼ぶよね」という名前で書いた、業務処理や業務のルール | 「このDB/言語だとこういう命名」という名前で書いた、システム内の実際の名前 |
| 記法 | 自由形式 | UML等 | 場合によってはコードそのもの |
| 例 | - | 「会社マスタ」 | 「MTS_COMPANY」 |

#### 物理設計とは

物理設計とは、論理設計の結果を受け、その具象化に向け物理的な詳細を決める作業です。対象が論理的なオブジェクトから物理的な実体（例えば特定メーカー/機種のハードウェアや、特定ベンダーのRDBMS製品など）に変わるため、物理的な制約を勘案しながら、その構成を試行錯誤する必要があります。

**論理モデル（基本設計書）** → **論理的な名前や方式を、物理的な名前に変換** → **図上で実際の構造や構成を検討（図の変形・加工を繰り返す）** → **実際のHW/SWの仕様を確認したり、実際に仮組みもする** → **設計書に物理名や物理構成を記述** → **物理モデル（詳細設計書完成）**

ここで言う「論理名」は、DB製品やプログラミング言語に依存しない。

ここで言う「物理名」は、実際にコード中に出現する文字列そのもの。

ここでもUMLモデリングが使える。試しにコードを書く人もいる。

ここでも言う「物理名」は、実際にコード中に出現する文字列そのもの。

### 3-2. 「システム」の設計

#### 「アプリケーション開発」ではなく「システム開発」の場合

余程小規模なアプリケーション開発でない限り、当社が受託する開発の多くはシステム開発です。従って、システムを構成するミドルウェアコンポーネントやアプリケーションコンポーネントの物理名も、詳細設計で決める必要があります。

- ※1 インフラ、或いはミドルウェアの構成までがお客様の担当で、当社はアプリケーション作成だけを受託する場合
- ※2 ミドルウェア構成、或いはインフラ構築まで全てが当社の担当範囲の場合。大型案件は大抵そうなる
- ※3 通常、ミドルウェア設計はアプリケーション開発担当者の責務範囲。また、昨今はアプリケーションを複数に分割する事も多いので、その物理設計が必要

ただし、ネットワークやインフラ、ミドルウェアを含めたシステム設計は、アプリケーション設計に先行して実施される事が多いので、物理名の設計を先んじて行う事もあります。その場合、アプリケーション設計の詳細設計工程では、非機能要件に応じた、名前以外の各種物理設計を行います。

**EXE標準工程モデル**

| | 要件定義 | 基本設計 | 詳細設計 | 製造+UT | ... |
|---|----------|----------|----------|----------|-----|
| システム開発プロセス | 概念 | 論理 | 物理 | | |
| アプリケーション開発プロセス | 概念 | 論理 | 物理 | | |

← システム開発プロセスが先行される例

※DOAの場合、アプリケーション設計プロセスに先行し「データ設計プロセス」も実施されるが、ここでは割愛している

#### システムレベル名/非機能の物理設計

システム開発プロセスが先行しない場合、詳細設計においてはシステムレベルの物理名設計や、非機能要件に応じた様々な物理設計も行います。具体的には、各アプリケーションコンポーネントのネットワーク上での物理名や、URLのような名前空間上での物理名、サブシステムの物理名/アプリケーションの物理名を定義し、その関係性を具体的に図解します。

※これらの名称は多くURLの一部やディレクトリ名、場合によってはサーバ名に使用されます

また、非機能要件に定められた性能目標や品質目標に応じ、ミドルウェアやJVMのような仮想マシン環境の具体的な設定や、アプリケーションフレームワークやライブラリ向けの、HTTPセッションの設定やDBコネクションプールの具体的な設定などです。

要件定義時の項目定義書及びプロジェクト用語集で英訳を行っている筈なので、それを元に英語で命名するのが一般的。その名前を使い：

- システム物理構成図
- システムコンポーネント配置図
- 各システムコンポーネントのソフトウェアアーキテクチャ
- 物理データモデル（ERやDFD）
- URL（名前空間）設計
- 各種設定定義書

など一式作成し、それを「システムアーキテクチャ設計書」などと呼ぶ事がある。非常に大型システムの場合はサブシステム毎に作成される事も。

### 3-3. 詳細設計とプログラミング

#### アプリケーションの構造設計

アプリケーションはシステムコンポーネントの一つであり、一般的にはシステム内に複数存在します。従って、アプリケーション設計は個々のアプリケーション毎に行います。2023年現在の典型的なアプリケーションとしては、SPA、Webアプリケーション、Web Service、Web API、バッチアプリケーション、（DB）ストアードプロシージャ、などがあります。

※当社が取り扱う、比較的小規模な案件でもこのような構成が典型的で、詳細設計書の種類が5種類程度になるという事

個々のアプリケーション毎に、それぞれのアプリケーションアーキテクチャに応じた構造設計を行います。

個別のアプリケーションに関してもそれぞれ：

- ミドルウェア設計
- ビルド/パッケージング設計（デプロイ用）
- 名前空間設計
- ソフトウェアスタック設計（OSSフレームワーク等）
- モジュール構造設計（レイヤードアーキテクチャ等）
- 主要クラス設計（主要なドメインのみ）
- 主要メソッド設計（メソッド名とシグニチャ）
- 他コンポーネントとのメッセージング設計（I/F等）
- UIの物理コンポーネント/項目設計
- DBの物理テーブル/項目設計

など作成し文書化。この際、図解の代わりに実際のソースコードを仮作成し試行錯誤する事もある。設計ツールが無い場合などは、不便だが使えない事は無い。

#### 機能設計 ─ クラスコメントやメソッドコメントに全て書ける？

昨今は「詳細設計書」というドキュメントを作成せず、メソッドレベルの機能設計はクラスコメントやメソッドコメントに記述する（そしてそこからHTMLドキュメントとして出力する）という進め方が採用される事が増えました。当然、構造設計部分はコメントに記述というわけにはいきませんので、その部分だけを「詳細設計書」或いは「アーキテクチャ設計書」といったドキュメントに記述します。

この方針自体には特に問題無いのですが、この方針を採用した場合、設計プロセスを勘違いする人が後を絶ちません。機能設計をクラス/メソッドコメントに書くという事は、詳細設計をしないという意味ではありませんのでご注意ください。

**EXE標準工程モデル**

| ... | 詳細設計 | 製造+UT | ... |
|-----|----------|----------|-----|
| 基本設計書を書く | アーキテクチャ設計書を書く（※並行してフレームワーク開発） | 使う | |
| | クラスコメントを書く | コードを書く（※TODO埋める） | |
| | メソッドコメントを書く | テストを書く（※コードより先でも良い） | |

クラス名やメソッド名（つまり物理名）を定義しながら、モジュール定義や処理記述をコメントとして書く。

（同時にTODOコメントを書いておくと、製造時の進捗管理が楽）

コーディング開始時には、主要クラスや主要メソッドは全て定義済みでI/Oも確定しており、PGはTODOコメントに従ってコードを書いてテストするだけ、が正しい。

#### さあ、製造へ！

ここまでの準備が終わり「詳細設計」が完了すれば、後は設計に合わせてインフラやミドルウェア構成やプログラムの製造を行うだけです。

ここまでがいわゆる「SE」の仕事の領域であり、この後の作業がいわゆる「PG」の仕事です。

※詳細設計の別名は「プログラム設計」ですよね

一般的には、基本設計（論理設計）の段階で仕様凍結され、顧客にその仕様を承認（検収）して貰います。これ以降は原則として仕様変更は無く、結果として設計上の変更も発生しません。安心して協力会社（BP）やオフショアに作業委託出来るわけです。

**準備完了！さあ製造へ！**

---

## まとめ

- **企画～要件定義はユーザー工程。要求分析と要件定義。**

- **事業要求（要件）→ 業務要求（要件）→ 機能要求（要件）の順に重要。ヒアリングや分析で、お客様から真なる課題を引き出す。**

- **ベンダー工程は設計から。概念設計 → 論理設計 → 物理設計と、徐々に具象度を上げていく。**（※詳細化ではなく、抽象度を下げていく作業）

- **「設計」とは、分析と試行錯誤の事。設計書作成はオマケ。最後にちょろっとやれば良い。**

- **基本設計で論理設計まで、詳細設計で物理設計を。**

- **詳細設計の機能設計をクラス/メソッドコメントに書いてもいいけど、コーディングと混同しないように。**

---

## 参考文献

- 『システム開発の体系―JIS X0160・共通フレーム98対応』（東京電機大学出版局）
- 『SECBOOKS 共通フレーム2013』（独立行政法人情報処理推進機構）
  - Kindle版は550円で買えるので、是非皆さん全員買っておきましょう（´∀｀）
- 『ソフトウェア要求 第3版』（日経BP）
- 『システム設計のセオリー --ユーザー要求を正しく実装へつなぐ』（リックテレコム）
- 『図解標準最新オブジェクト指向開発マスタリングハンドブック』（秀和システム）
- 『ユースケース駆動開発実践ガイド』（翔泳社）
- 『リーン開発の本質』（日経BP）

---

## 【QM】アーキテクト教育・第五回v5.9.md

## 第五回 ドメイン分析/非機能要件定義 アーキテクト教育セミナー

**相田一英 2024/07/23**

## 目次

### 1. 要求分析/要件定義
- 1-1. 「要求」と「要件」
- 1-2. 「業務」「機能」「非機能」要件
- 1-3. 要件の管理とテスト
- 1-4. 2020年民法改正

### 2. ドメイン分析
- 2-1. 「ドメイン」とは？
- 2-2. 関心事の分離(SOC)
- 2-3. コンテキスト境界
- 2-4. ドメインの分析

### 3. 非機能要件定義
- 3-1. 非機能要求
- 3-2. ソフトウェア品質特性
- 3-3. JUASガイドライン
- 3-4. 非機能要求グレード

### まとめ
### 参考文献

---

## 1. 要求分析/要件定義

お客様の要求の分析と、その結果を受けての要件定義は、我々SIベンダのビジネス起点であり、ITプロジェクトにおける非常に重要なプロセスです。

いずれも基本的にはユーザープロセスであり、我々にとっては、エンジニアリングスキルだけではなく、コンサルティングスキルも要求されるプロセスです。

### 1-1. 「要求」と「要件」

#### 「要望」「要求」「要件」

まずは最も基本的な知識として、お客様が提示する「要望」「要求」と、開発プロジェクトの起点となる「要件」との違いを知る必要があります。

**コンサルティングの領域**

- **要望**：「こうなったらいいな」という、未検討の望み
- **要求**：「こういう理由でこうして欲しい」という求め
- **要件**：要求を実現する範囲と内容を定義した契約条件

「要件」は、共通フレーム2007で初登場しました（つまりそれ以前は公式には未定義でした）。

#### 不確実性コーンと「要求」「要件」

プロジェクト規模の不確実性コーンと「要求」「要件」の関係は以下のようになります。

- **超概算見積もり**（要望段階）
- **予算見積もり**（要求段階）
- **確定見積もり**（要件段階）
- **計画見積もり**

我々のビジネスにおいて、限界の精度で出せる見積もりは原理的に「要件定義後再見積もり」となります。それでも不確定性が大きいため、原理的に（赤字回避のため）割高に提示せざるを得ません。

FP法等の見積もり技法が適用出来るのは、原理的に基本設計以後となります。

### 1-2. 「業務」「機能」「非機能」要件

#### 要求分析

我々の最初の仕事は、お客様の要望・要求を分析し、お客様が言語化出来ていない真なる課題を発見する事です。

一般に、お客様は自身の要求を正しく伝える事が出来ません。お客様の言葉に振り回されず、お客様への質問やインタビューを通し、その要求の裏に隠れたお客様の真なる課題を分析・発見する事を、要求分析と呼びます。

**要件とは要求から生まれるものではなく、真なる課題から生まれるもの。**

つまり、RFPに提示された案と、提案書に提示するソリューションは必ずしも一致しません。それどころか、違った方が提案は有利になります。

#### 三種類の「要件」

今度は「要件」について細かく見ていきます。我々が実現しなければならない「要件」は大きく三種類に分類出来ます。

1. **業務要件**：実現しなければならないお客様の「ビジネス」の要件
   - 例：「週末の買い物と、故郷への帰省に使う交通手段が必要」

2. **機能要件**：業務要件を実現するために必要な「機能」の要件
   - 例：「買い物や帰省の荷物を積めて、家族全員が乗れる自動車が必要」

3. **非機能要件**：機能要件を実現するために必要な「業務・機能以外の」要件
   - 例：「5人乗りでワゴンタイプで長距離走行が安定していて燃費がこのくらい...」

#### 重要なのは「業務要件」

業務要件は、お客様のビジネスの成否を左右するものであり、お客様の売上や利益に直接影響するものです。従って、提案や要件定義の際には、必ず業務要件を確認し明文化しなければなりません。

業務要件 = お客様の「真なる目的」

ここから依頼してくるお客様もいますが、ちゃんと業務要件を分析する必要があります。可能ならば事業要件まで分析しましょう。

#### 業務要件を明確にする重要性

機能要件と非機能要件は、業務要件に応じて決まるものです。逆に言えば、業務要件が明確にならない限り、機能/非機能ともに要件を定義する事が出来ません。

例：「週末の買い物と、故郷への帰省に使う交通手段が必要」

この業務要件から：
- 使用頻度が低い？ → 投資対効果(ROI)を考え... → 電車と宅配便の組み合わせ？
- 使用頻度が高い？ → コストが十分ある？ → レンタカー？都度タクシー？

「自家用車を購入する」は自明の機能要件では無い。たとえお客様が「自動車を購入したい」と発言していても、しっかりと分析し確認する必要があります。

#### 「機能要件」と「非機能要件」

業務要件が明確になれば、機能要件と非機能要件は自動的に定まります。

この時、業務要件を機能要件に変換する知識を**業務知識（ドメイン知識）**と呼び、機能要件を非機能要件に変換するスキルを**エンジニアリングスキル**と呼びます。

- **業務知識**：お客様のビジネスに関する知識や業務/実務に関する知識、法律・統制などの知識
- **エンジニアリングスキル**：製品やサービス、お客様の業務/実務に対する経験や実績の知識、法律・統制への対応

### 1-3. 要件の管理とテスト

#### 要件トレーサビリティ

要件とは、要求を実現する範囲と内容を定義した契約条件です。我々はお客様に対し、我々のソリューションが要件を満たした事を証明しなければなりません。

この証明のため、各要件が抜け・漏れなく設計に反映され、全てが実装され、テストされる事を追跡・監視する必要があり、そのためのアイディアの一つが要件トレーサビリティです。

**トレーサビリティマトリクス(TM)**のような管理表を作成し：
- 個々の要件に対し「要件ID」を付与する
- 個々の要件が抜け・漏れなくテストされた事を確認可能とする

#### 要件とテストの関係

要件トレーサビリティで示した通り、全ての要件は抜け・漏れなくテストされ、その証跡をお客様に示す事が出来なければいけません。各要件と各テストケースを紐付けて管理する必要があります。

**テストの種類と対応要件：**

- **機能要件**
  - 機能テスト（モジュール間結合テスト）
  - 機能間結合テスト
  - 機能テスト（シナリオテスト）

- **非機能要件**
  - GUIテスト
  - 性能テスト
  - 連続稼働テスト
  - セキュリティ診断/テスト
  - 障害復旧テスト

- **業務要件**
  - 運用テスト（検収）

お客様が行うのは「要件が実現しているか」の検収です。

### 1-4. 2020年民法改正

#### 2020年「瑕疵」が無くなった！？

2017年の国会で民法の改正が可決され2020年4月1日に施行されました。この改正により、旧来の瑕疵担保責任は、新たに契約不適合責任という考え方に変更されました。

**【2019年まで】**
- 「瑕疵」とは、契約で予定されていた品質や性能を欠くこと
- 瑕疵担保責任の権利行使期間は、システムの引き渡し時から1年

**【施行後・現在】**
- 契約の内容に適合しない仕事の目的物に対し損害賠償請求が可能
- 損害賠償請求権が行使可能な期間は、対象の目的物を発見してから1年

しかしながら、ITシステム（ソフトウェア）開発には契約不適合責任はそぐわないため、一般的には、実際に取り交わされる契約書に以前と同じ瑕疵担保責任の記述を行い、従来通りの契約条件としています。

逆に言えば、見積書や提案書の前提条件、契約書の内容について気をつけなければならないという事です。**お客様が提示した契約書をそのまま受け入れてはいけません。**

---

## 2. ドメイン分析

オブジェクト指向における機能分析手法の一つがドメイン分析です。「処理とデータの関係」をモデリングしていた構造化分析とは異なり、より上流から、お客様の「用語」を分析する事で、速やかにお客様のビジネスと、必要となる「機能/データの関係」を導く事が出来ます。

### 2-1. 「ドメイン」とは？

#### 機能(Function)の前にドメイン(Domain)を見極めよう

古典的なシステム分析アプローチ（構造化分析手法）は、その分析の起点を機能要件に置いています。これは、システム開発と言えば基本設計以降を指していた当時の状況に合わせたもので、現代の状況とは乖離しています。

現代的なオブジェクト指向分析アプローチでは、分析の起点を業務要件（或いは事業要件）に置いており、このレベルの分析観点として、**ドメイン（Domain/問題領域）**という概念が提示されています。

- **構造化手法における古典的な分析範囲**：「機能」の集合
- **オブジェクト指向における現代の分析範囲**：「ドメイン」の集合

#### ドメイン(問題領域)とは？

ドメイン分析では事業/業務要件の領域におけるドメインを洗い出します。

ドメインとは、一言で言えば**「ビジネス上の問題や課題を、その意味によって分けたグループ」**の事です。ドメイン分析は日本語で「用語分析」と訳される事もあり、事業/業務要件の記述をその「用語」に着目して分析します。

**例：「週末の買い物と、故郷への帰省に使う交通手段が必要」**

1. **用語を分析**（必要に応じて用語を足す）
   - 週末、買い物、故郷、帰省、交通手段、実家、連休、ペット、毎週、食品、複数の店

2. **ドメインを整理**（含まれる問題が異なる領域）
   - 家族旅行ドメイン
   - 買い物ドメイン

ドメインを整理する事は、それぞれが抱える問題や課題が異なる、複数の領域（ドメイン）を発見し、論理的・物理的な切り分けを行う事（及び適切な命名を行う事）です。

個々のドメインは、領域として相互に独立し、優先度や前提条件/制約条件、ライフサイクルが異なります。

**家族旅行ドメイン：**
- 【前提条件】年に1,2回、連休の時（ROIが低い）、家族4人全員で移動、父の実家は遠方
- 【制約条件】ペットの猫も一緒、最大3泊分の旅行荷物（スーツケース4つ+α）、高速な移動

**買い物ドメイン：**
- 【前提条件】毎週末（ROIが高い）、主に母子3人で移動、目的地は近所の3店、速度は要求しない
- 【制約条件】安売りの際は最大ダンボール3個、かつ子供も一緒

本当に自動車の購入が望ましいのか、ドメインによって答えが異なります。

#### ドメインと「オブジェクト」と機能

ドメインと機能の関係は、多くの場合現実のモデルと一致します。

業務システムの場合、業務の意味によってわけられたグループとして会社組織（ドメイン）が定義され、組織ごとに業務機能（機能）を持つ、と見立てる事が出来ます。つまり、**ドメインモデルは多くの場合、対象業務の組織構造に似ます**。

ドメインの構造はオブジェクト指向における「オブジェクト」として表現され、各機能はそのオブジェクトに実装される「振る舞い（メソッド）」として表現されます。結果として、システム/ソフトウェアのモジュール構造も組織に似る事があります。

### 2-2. 関心事の分離(SOC)

#### 敵は小分けにして各個撃破すべし

ドメイン分析の基本にあるのは、**関心事の分離（Separation Of Concerns/SOC）**という考え方です。

SOCは、複雑な対象を、小さな「関心事」毎に分離し、その分離された多数の要素で全体を構築するというアイディアです。その目的は（孫子の兵法にも語られる）**「敵を十に分散させ、一対一で戦える状況を作り、各個撃破を手段とする」**戦略です。

例えばMVCモデルやBCEモデルとして知られるコンポーネントモデルは、非機能における「関心」毎にコンポーネントを分離する、SOCの実装です。

- **Model**：データ操作の事だけに関心を持つ領域
- **Controller**：処理フローだけに関心を持つ領域
- **View**：画面表示の事だけに関心を持つ領域

各領域担当者は「知るべき事が少ない」ので楽！ → **認知負荷（cognitive load）の軽減**

#### お客様の「関心事」を分析する

ドメイン分析は、お客様の「関心事」を分析し、領域を分割します。

現実世界では、我々は自然にSOCを行っています。例えば会社組織における「部門」は一種のドメインであり、「ビジネス上の問題や課題を、その意味によって分けたグループ」です。

**例：経理部ドメインと営業部ドメイン**

- **経理部ドメイン**：簿記、経理処理、資金繰り、給与振込など
  - 基本、経理関係の事だけ考えれば良い

- **営業部ドメイン**：営業行為、顧客管理、引き合い、契約処理、協力会社など
  - 基本、営業関係の事だけ考えれば良い

社員は、経理関係の事は経理ドメインに任せ、営業関係の事は営業ドメインに任せています。つまり、問題や課題、振る舞い（処理）、データを社員自身から分離出来ています。

### 2-3. コンテキスト境界

#### 「用語」は語る

ドメイン分析の分析対象は「用語」です。用語とは「特定の領域で特に使われる語や句の事」です。用語を分析する事で、その用語が所属する「特定の領域」を見つける事が出来ます。

用語分析で最も難しい点は、同じお客様が使う「用語」にもいくつかの種類があり、それらをどのように区別すれば良いのか、という点です。

**用語の種類：**
- 専門用語
- IT用語
- 業界用語
- 学術用語
- **jargon**（お客様の会社、職場独自の用語）

特にやっかいなのがjargonです。jargonは一般的な辞書やWebで調べても分からない。さらには、辞書に載っている言葉を別の意味で使っている場合すらあります。

例：「バッチ処理」= Windowsバッチ？PL/SQL？ロングトランザクション処理？非GUI処理全部？

**各プロジェクトでは必ず独自の用語集を作成する必要がある。**
認識齟齬の可能性がある場合、必ずお客様と用語レベルの確認を行う必要があります。

#### 「用語」を冗長に表現する

ドメイン分析（用語分析）の基本は、対象の用語を**必要十分に冗長に定義する事**です。

例えば「システム日付」という用語が良く使用されますが、この用語が何を指しているのかは非常に曖昧です。きちんと冗長に表現する事により「ナニ用語なのか」を知る事が出来ます。

「システム日付」から派生する用語例：
- APサーバシステム日付
- DBサーバシステム日付
- NTPシステム日付
- ○○システム独自システム日付

#### 「文脈」の境界

その用語が「ナニ用語なのか」という分析は、裏返せば「ナニ」という領域を知る事です。このような「言葉の領域」の事を日本語で「文脈」、英語で「コンテキスト」と呼びます。

例えば同じ「システム日付」と言う言葉でも：
- プログラム言語の文脈では実行環境（OS）の日付
- DBの文脈ではDBサーバの日付
- ネットワークの文脈ではNTPにより取得出来る日付
- 業務の文脈では特定システムに永続化されている（実際の時刻とは独立した）日付
- グローバルの文脈では（JSTではなく）UTC或いはGMT或いはUT

**コンテキスト境界**によって、同じ用語でも意味が異なることを理解することが重要です。

### 2-4. ドメインの分析

#### コンテキスト境界 ≒ ドメインの境界

コンテキスト境界を意識する事は、ドメイン分析のためだけでなく、お客様との円滑なコミュニケーションのためにも、極めて重要です。

お客様の会社内にも様々なコンテキスト境界があります。多くの場合、このコンテキスト境界がドメインの境界になります。

用語を分析し、コンテキスト境界を発見し、その境界で分けられる「領域」を発見する事がドメイン分析の基本です。

**ドメイン分析のプロセス：**

1. **用語分析**
   - 用語ひとつひとつを冗長に定義
   - 曖昧さを排除し「厳密な名前」を付ける
   - 用語定義をお客様と共有する

2. **コンテキスト境界を発見**
   - 用語集を元に図解して分析
   - 冗長表現とともに主語、述語、目的語を意識する

3. **ドメインの発見**
   - コンテキスト境界をもとに用語をいくつかの領域に分ける
   - ドメインモデルを構築。このドメインがシステム設計上分離して扱うべき領域

#### UMLドメインモデリング

数多くのドメイン分析手法が提唱されていますが、有名なのが**UMLを用いたドメインモデリング**です。

UMLドメインモデリングには、クラス図を使用し「名前」を分析する手法や、分析対象に振る舞いを含めるためユースケース図を使用する手法などがあります。

**給与管理システムの例：**
- 社員情報ドメイン：社員、社員番号、社員名、給与振込口座
- 金融機関ドメイン：銀行口座、郵便局口座、金融機関名、金融機関支店名、金融機関口座番号、金融機関口座名義人
- 経理ドメイン：経理部、給与情報、経費情報

#### ロバストネス図記法で行こう！

クラス図によるモデリングでは「振る舞い」の表現が難しく、ユースケース図によるモデリングでは「用語」の粒度を小さくすると非常に見難い図になりがちです。それに対して、**ロバストネス図記法**を用いると、振る舞い視点かつ粒度の細かいモデリングが可能です。

**ロバストネス図の要素：**
- アクター（緑色の丸）：給与振込口座申請、経費計算、給与計算
- コントロール（白色の丸）：給与振込口座を申請する、社員毎の月の経費を計算する、等
- エンティティ（黄色の丸）：社員情報、金融機関情報、給与情報、等

各ドメインを境界線で囲み、ドメイン間の関係を明確にできます。

#### 非機能ドメイン/コンテキスト境界の例

非機能の観点では、ドメインを分割する事で「問題」の幅を狭める、というアプローチが広く用いられています。

**古典的な例：OSI参照層**
- ネットワークを「層」に分割する事で、層ごとに関心事を分離
- 分離すると問題解決が楽になる

**最近の例：ペースレイヤリング/バイモーダルIT**
- システムのライフサイクルやビジネス要求の違いに応じて「層」に分割し、関心事を分離
- 逆に混ざった状態だと問題解決が難しい

**非機能ドメインは「どのコンテキストで分離するか」が重要な知識であり、スキルです。**

---

## 3. 非機能要件定義

一般的なお客様は「非機能」に関する知見を持たず、正しく要求する事や、自ら要件を定義する事は困難です。だからこそ、非機能要件定義はITプロフェッショナルの能力が最も期待される領域であり、顧客満足度向上や、契約上のトラブルを抑制するためにも、非常に重要な領域です。

### 3-1. 非機能要求

#### ユーザーの「要求」

共通フレーム2007より前の時代では、機能/非機能ともに基本設計への入力はユーザーの「要求」でした。しかし、特に非機能要求に関しては、ユーザー自身が正しく要求を提示する事が難しく、当時から非機能要求はITプロジェクトにおける大きな課題でした。

**非機能要求の課題：**
- 「非機能」とは何か、どんな事を要求すれば良いのか？
- 要求が曖昧に
- 誤った要求
- 要求自体が出ない
- ベンダーまかせ
- 非現実的な要求

これらは、システムの使い勝手の悪さや性能の不足、追加対応によるコストの肥大（初期見積もりの不足）などトラブルの原因となり、ユーザーにとっても大きな課題でした。

#### 非機能要求のフレームワーク

非機能要求における課題を解決するため、様々なフレームワーク及び標準化のアプローチが採られています。多くはユーザー向けのものですが、我々ベンダーにとっても、要件定義におけるユーザー支援の際に利用出来る、非常に重要なナレッジです。

**主要なフレームワーク：**

1. **JIS-X 0129-1 ソフトウェア品質特性モデル**
   - JIS規格。経済産業省による国家標準のアプローチ

2. **非機能要求グレード**
   - NTTデータ等のベンダー企業団体からのアプローチ。後にIPAに寄贈された

3. **非機能要求ガイドライン**
   - JUASによる、ユーザー企業団体からのアプローチ

#### 複数の非機能要求セット ─ クラウドインテグレーションの時代

現代はクラウドインテグレーションの時代であり、昔とは異なり、比較的小規模なシステムであっても分散システムとして設計される事がままある時代です。これは特にITガバナンス要求が異なる複数の事業/業務要求に起因するものであり、つまりは**一つのシステムが複数の非機能要求セットを持つ**という事です。

**ペースレイヤ分析の例：**
- **レイヤ3**：ノーコードやアジャイルを基本に考える、コンシューマ向けに近い非機能要求
- **レイヤ2**：PaaSやローコードを用いた、一部外部公開するような非機能要求
- **レイヤ1**：従来通りオンプレミス或いはIaaSで社内システム前提の非機能要求

企画・提案段階で、ペースレイヤやケイパビリティに応じた複数のITガバナンス要求/非機能要求セットを適切に見極め、それに応じてそれぞれの（異なった・細やかな）非機能要件定義を行いましょう。

### 3-2. ソフトウェア品質特性

#### JIS-X 0129-1：ソフトウェア品質特性モデル

JIS-X 0129-1は、ソフトウェア製品の品質を定めたJIS規格（日本の標準規格）で、概ね以下のような品質特性モデルとして表現されます。**品質が良い/悪いとは、この規格をどの程度満たしているかによって決まります。**

**品質特性の構造：**

**外部・内部品質：**
- **機能性**：ソフトウェアが、指定された条件の下で利用されるときに、明示的及び暗示的必要性に合致する機能を提供するソフトウェア製品の能力
- **信頼性**：指定された条件下で利用するとき、指定された達成水準を維持するソフトウェア製品の能力
- **使用性**：指定された条件の下で利用するとき、理解、習得、利用でき、利用者にとって魅力的であるソフトウェア製品の能力
- **効率性**：明示的な条件の下で、使用する資源の量に対比して適切な性能を提供するソフトウェア製品の能力
- **保守性**：修正のしやすさに関するソフトウェア製品の能力
- **移植性**：ある環境から他の環境に移すためのソフトウェア製品の能力

**利用時の品質：**
- **有効性**：利用者が指定された利用の状況で、正確かつ安全に、指定された目標を達成できるソフトウェア製品の能力
- **生産性**：利用者が指定された利用の状況で、達成すべき有効性に対応して、適切な量の資源を使う事ができるソフトウェア製品の能力
- **安全性**：利用者が指定された利用の状況で、人、事業、ソフトウェア、財産又は環境への害に対して、容認できるリスクの水準を達成するためのソフトウェア製品の能力
- **満足度**：指定された利用の状況で、利用者を満足させるソフトウェア製品の能力

このモデルに示したものは「品質特性」のみ。この下に細かく「副特性」が定義されており、実際の品質定義はそのレベルで行います。

### 3-3. JUASガイドライン

#### JUAS『非機能要求仕様定義ガイドライン』

日本情報システム・ユーザー協会（JUAS）は、ユーザー企業の情報システム部門の方々を中心としたユーザー団体で、当社も加盟しています。JUASではJIS-X 0129-1をもとにしつつも、より実践的な非機能要求のためのガイドラインを策定しています。

**JUASモデル独自の特性：**
- 障害抑止性
- 技術要件
- 運用性

より情報システム部門のニーズに合った特性が追加されているのが分かります。

#### 非機能要求指標

非機能要求仕様定義ガイドラインの付属資料に「非機能要求指標」があります。これらの情報はJUAS会員のユーザー企業に公開されています（JUASからの有償購入も可能です）。

特に大型提案の場合、お客様や関わっているコンサル、そして競合他社はこの指標を知っていると考えて対策すべきでしょう。

### 3-4. 非機能要求グレード

#### 非機能要求グレード

行政やユーザー団体とは別に、我々ベンダー側からアプローチした例が、NTTデータを幹事として組織された**非機能要求グレード検討会**が策定した「非機能要求グレード」です。

非機能要求グレードは現在IPAに寄贈され、IPAの標準資料のひとつに位置づけられています。

基本的には、**企画～要件定義におけるコンサルティング目的**で策定されたもので、現在、我々は提案～要件定義で使用しています。或いは将来のコンサルビジネスに向けてです。

#### 非機能要求グレード活用シート

非機能要求グレードに含まれる「活用シート」は、非機能要求項目とその解説、要求のレベルが定義された一覧表です。

ユーザーは、これをベースに非機能要求を取りまとめる事が出来ます。我々ベンダーは、これを元に非機能要件を定義してゆく事が出来ます。

活用シートには以下の項目が含まれます：
- 項目（大項目、中項目、小項目、小項目詳細）
- 重要度
- レベル（0-5段階）
- 備考

#### 非機能要求グレード2018

2018年に、非機能要求グレードが8年ぶりに改定されました。**非機能要求グレードの最新版は、IPAのWebサイトから、誰でも自由にダウンロード可能です。**

**非機能要求グレード2018の構成：**
- 概説
- 検討編
- グレード表
- 活用シート
- 利用ガイド（新設編）
- 利用ガイド（利用編）

---

## まとめ

- **要望、要求、要件の違いを意識し、実現可能な要件を定義する。**

- **要件は「業務要件」「機能要件」「非機能要件」に分けれられる。区別しないと分析出来ない。**

- **複雑な対象を分析して「ドメイン」に分ける。敵を十分に分散させ、一対一で戦える状況を作り出し、各個撃破を手段とする。**

- **用語分析とUMLによる図解により、システマティックにドメインモデリング。**

- **非機能要件定義は抜け・漏れが無いように、JIS規格や各種ガイドラインを参考にしよう。**

---

## 参考文献

- 『共通フレーム2007』（IPA SEC）
- 『共通フレーム2013』（IPA SEC）
- 『ユースケース駆動開発実践ガイド』（翔泳社）
- 『エリック・エヴァンスのドメイン駆動設計』（翔泳社）
- 『JIS-X 0129-1』（日本工業標準調査会）
  - https://www.jisc.go.jp/app/jis/general/GnrJISSearch.html
- 『非機能要求仕様定義ガイドライン(UVCプロジェクトII)』（JUAS）
- 『非機能要求グレード2018』（IPA）
  - https://www.ipa.go.jp/sec/reports/20180425.html

---

## 【QM】見積もり・提案教育・第五回v2.1.md

## 第五回 プロジェクトリスクマネジメント - 見積もり・提案教育セミナー

## 目次

1. **リスクマネジメント序論**
   - 1-1. リスクと見積もり
   - 1-2. 予備費
   - 1-3. IPAリスク事象ドライバ

2. **プロジェクトリスクマネジメント**
   - 2-1. リスクドライバの把握と定量化
   - 2-2. リスクコントロール
   - 2-3. プロジェクトリスクマネジメント

3. **リスクドライバ評価シート（試用中）**
   - 3-1. リスクドライバ評価シート
   - 3-2. リスク値の評価
   - 3-3. リスク対策サイクル

4. **まとめ**

5. **参考文献**

---

## 1. リスクマネジメント序論

### 1-1. リスクと見積もり

#### プロジェクトマネジメントにおける「リスク」とは

PMBOK第5版では、リスクとは**「それが発生すれば少なくともスコープ、スケジュール、コスト、品質といったプロジェクト目標に影響を与える不確実な事象・状態」**と定義されています。この場合の影響にはプラスの影響もマイナスの影響両方を含むとされているので、つまりPMBOKにおけるリスクとは、概ね不確実性そのものを示しています。

我々が通常行うITプロジェクトにおいては、リスク事象が発生したら、スケジュール或いはコストの調整を行う必要があります。このため、プロジェクトマネージャーは常にプロジェクトの不確実性を把握・監視し、その影響をコントロールしなければなりません。これを**リスクマネジメント**と呼びます。

> **重要なポイント**: リスク（不確実性）は把握・監視・コントロールしなければならない。

#### 本セミナーにおける「リスク」の定義と「リスク対策」

前述のように、プロジェクトに対してプラスの影響があるものもリスクと呼びます。しかし、当社が行っている受託開発の場合、契約時点でスケジュールもコストも固定されるため、プラスの影響が発生した場合はそれを無視できます。

従って、本セミナーで**「リスク」と言った場合は、プロジェクトに対してマイナスの影響があるものに限る**ものとします。

見積もり・提案～プロジェクト実施に至るまで、必要とされるリスク対策は、**プロジェクトにマイナスの影響を与えるリスク事象の発生を抑止する事**です。この意味においては、「リスク分」と称して見積もりに金額を積み増すのはリスク対策ではありません。使い道が決まっていない現金をいくら積んでも、リスク事象の発生を抑止する事は出来ません。

> **重要なポイント**: 必要なのは現金（コスト）ではなく武器（対策）

#### プロジェクト予算に現れるリスク対策費

プロジェクト予算の観点で見た場合、リスク対策費はいわゆる**「予備費」**という費目で計画されます。ただし、我々は通常受託開発を行っているため、予備費の考え方は少々複雑です。

プロジェクト予算は以下のような構造になっています：

```
プロジェクト予算（お客様の予算全体）
├── ベンダーへの委託費用（当社の予算）
│   └── 予備費（リスク対策費用）
├── 予備費（リスク対策費用）
└── 予備費（自然災害等、不測の事態への備え）← 全社で積んでいる
```

### 1-2. 予備費

#### 二種類の「予備費」

PMBOKでは、リスクに備える費用として二種類の「予備費」が定義されています。これらはプロジェクトの企画中、お客様の予算取りの段階で、全体予算として計画されます。

| 予備費の種類 | 説明 |
|------------|------|
| **マネジメント予備** | • 事前認識出来ないリスク（地震のような災害など）に備える費用<br>• 一種の保険であり、リスク事象が発生しなければ使用されない<br>• 定量化が難しいので工数に係数をかけて計算する事も多い<br>• 通常はお客様内部の予算に積まれる<br>→ つまり、当社の見積もりには含まれない |
| **コンティンジェンシー予備** | • 事前認識出来るリスク（難易度や、能力不足やメンバー離脱といった体制的なリスクなど）に備える費用<br>• プロジェクト経費であり、リスク対策に使用される<br>• リスクアセスメントを行い、リスク対策毎に個別に定量的な見積もりを実施する<br>• 通常は当社の見積もりに含むが、対策の内容によってはお客様側の予算に付くものもある（ツールの調達費用など） |

**通常、我々の見積もりに必要なのはコンティンジェンシー予備費。**
従って、リスク分の費用を係数で表現するのは間違いであり、それが原因で様々な問題が発生する。

#### コンティンジェンシー予備費の見積もり

当然ですが「リスクがあるから対策費を見積もりに積んでおこう」と考えた時点で、それは事前認識出来るリスクだという事です。従って、我々が提案時に見積もるのはほとんどの場合コンティンジェンシー予備費であり、規模見積もりとは別に費用を算出しなければなりません。

一般的なコンティンジェンシー予備費の見積もり方は、プロジェクトリスク登録簿を準備し、対象プロジェクトのワークパッケージ毎に起こりうるリスク事象を洗い出し、個々の対策を検討し、その対策費用を見積もって積算する、という手順で行います。

```
リスク事象洗い出し → リスク登録簿に登録 → 対策立案 → 対策費用見積もり → 対策費用積算
```

従ってコンティンジェンシー予備費の費目は、開発ツールの費用やPMO等の人件費、スケジュールの冗長に応じた管理費増分などの形で、具体的に見積もりに盛り込まれます。

#### 「提案」段階でのコンティンジェンシー予備費見積もりは大変！

実際の提案期間はかなり短く、また提案作業に割ける工数もかなり過小です。このため、本来は必要なリスク分析や、リスク対策の立案・その見積もりを行う時間がとれない事がほとんどです。

そのせいで、やむなく工数に対して係数をかけるといった誤った方法が、しばしば採用されます。しかしながら、この方法は誤っているだけではなく、**リスク対策不足を誘発する上に、利益率を低下させ、場合によっては総予算不足を引き起こす原因**にもなります。

このようなアンチパターン回避のため、本セミナーでは、リスクドライバの評価に基づく、簡易な代替手法をご案内します。

**代替案のアプローチ:**
- 事象ではなく原因を評価（事象よりも原因の方が数が少ない）
- 登録簿の代わりにチェックシート
- 見積もり可能なものは見積もり
- 見積もり期待精度を調整（社内実績データを元に）

#### 【閑話】見積もりアンチパターン

何故「工数に係数をかけてリスク対策コストを見積もる」のがアンチパターンなのでしょうか？
その理由は計算式にあるのではなく、**見積もりのプロセス**にあります。

1. 実際にリスク対策をとらなければならないのに、**リスク対策を立案する機会が受注後にずれ込む**
2. その結果、本来必要だったリスク対策が見逃され、**リスク対策費用不足の原因**となる事がある
3. 見積もり・提案時に分析・検討されたリスク要素やリスク対策が文書化されず、WBS項目にも現れないため、**受注後のプロジェクト担当者に申し送りされない**事がある
4. プロジェクト開始直後には特別なリスク対策が無いため、**要件定義時のリスクに無対策で臨まなければならない**
5. リスク対策費用と、粗利益目標である「バッファ」が混同され、**適切な利益が得られない**事が多い

いずれも、当社でも実際に事例が発生している事象です。誤ったプロセスの採用は、それ自体が一つのリスクドライバです。

### 1-3. IPAリスク事象ドライバ

#### 「リスク」を知る

コンティンジェンシー予備費（リスク対策費）の見積もりのためには「リスク」を挙げなければなりませんが、リスクとは具体的にはどのようなものでしょうか。

実際に思いつく限りにリスクを挙げてみるとわかりますが、リスクというのはありとあらゆる可能性の事なので、膨大な数が列挙されます。そのような（一般的な）アプローチの場合、列挙したリスクに対する整理・分析や、リスクの原因分析、それに応じたリスク対策の立案、そして最終的なリスク対策費の見積もりに至るまでに、長い時間と大きな工数が必要になってしまいます。

提案時には、リスク度合いの評価精度も（見積もりの期待精度同様）低いため、もっと簡易な評価手法でも十分です。そこで本セミナーでは、IPAが提示する「リスク事象ドライバ」の研究事例をご紹介します。

> **重要なポイント**: リスクは不確実性なので、提案時にはそもそも期待精度が低い。リスクそのものを見るのではなく、一般的なリスクの原因と対策を元に考えた方が早い。

#### 「リスク事象」と「リスク事象ドライバ」

IPA研究『ITプロジェクトのリスク予防への実践的アプローチ』では、プロジェクトで実際に発生する障害事象の事を**「リスク事象」**と呼び、その原因の事を**「リスク事象ドライバ」**と呼びます。

リスクそのものではなくリスクを生み出す一般的な要因を把握・監視し対策する事で、リスク事象の発生そのものを防ぐ事を目的とした研究です。

ITプロジェクトにおけるリスクドライバには、個別のプロジェクトの事情に依らない、普遍的なものも多くあります。この研究ではそのようなリスクドライバを挙げ、そこから発生するリスク事象や、リスク事象の発生防止方法をまとめています。リスクマネジメントを行う上で参考になる資料です。

```
リスク事象洗い出し → リスクドライバ洗い出し
（PJ開始前（提案時）には難しい、PJ毎に異なる事象、結果ではなく原因に対策すべき） → （普遍的な内容なのでチェックリスト化が可能）
```

---

## 2. プロジェクトリスクマネジメント

### 2-1. リスクドライバの把握と定量化

#### リスクドライバの把握

リスクドライバとは、対象案件を実施する組織に内在する問題点、或いは対象案件に発生している状況的な問題点です。

従って、引き合いが発生した段階（可能ならばそれ以前）から、顧客組織に関する情報や、対象プロジェクトの企画状況に関しても、可能な限りの情報収集を行う必要があります。

**◆ 顧客組織に関する情報**
顧客の経営状況や経営者の志向、組織構造や組織間のパワーストラクチャ、情報システム部門の（企画立案力を含めた）能力レベル、他システムに関する運用状況・課題など、対象システムの情報以外も可能な限り細かく収集します。

**◆ 企画の状況**
企画の経緯（既存システムであれば前回の開発経緯も）や関係した組織・外部ベンダーの情報、現在の企画段階、企画担当者の企画プロセスに対する理解など、過去と現在の状況を可能な限り細かく収集します。

> **注意点**:
> - システムの機能仕様以外の様々な情報の収集は、基本的には営業或いは（顧客応答を行っている）PMの仕事です
> - このような情報収集を行うためには顧客と十分な雑談時間を確保する事が重要です。雑談力を含めたソフトスキルを向上させましょう
> - 収集した情報は案件WikiやCRMなどに記録し、顧客及び案件ナレッジとして管理する必要があります。会議資料や議事録にしか記載しない情報では役に立ちません

#### リスクドライバの可視化

もちろん現在の当社でも、提案担当者によるリスクの把握や対策検討は行われています。しかしながら、**受注前に具体的な対策が計画されていない**、**リスク情報や対策が提案書に記載されていない/顧客と共有されていない**、**見積もりに具体的な対策費用が盛り込まれない**、**受注後に担当した（提案者とは別の）プロジェクトマネージャー（PM）或いはプロジェクトリーダー（PL）にその内容が十分伝わっていない**、といった状況が散見されます。

その結果、事前に予測されていたリスク事象が発生し、プロジェクトが失敗する、という事例が実際に起きています。リスクドライバの分析結果は、ただ記録するだけでは駄目で、**必ず可視化しなければなりません**。

**可視化のチェックポイント:**
- これら全てがプロジェクト計画書或いはプロジェクト資料として文書化されているか
- 営業、提案・見積担当者からPM/PLに適切に引き継ぎされているか
- 本来の規模見積から得られる予算ではなく、お客様に提示した（値引きした）金額を予算にしてしまっていないか
- プロジェクトの各局面で繰り返し再評価＆対策実施されるか

#### リスクドライバの定量化

可視化されたリスクドライバの情報をリスクマネジメントに活かすためには、個々の**リスクドライバによるリスク発生可能性を定量的に評価**し、**リスク対策の優先順位付け**を行う必要があります。

リスク対策には費用がかかりますので、優先度を付け、より重要なものから順に予算を配分すべきです。

また、リスクドライバの定量的評価を行う事で、引き合い初期の見積もりにおける、リスク対策費用の見積もりと、リスク対策戦略の立案に活かす事が出来ます。また、その後のリスクマネジメントにも役立つデータセットが得られます。

```
リスクドライバ可視化 → 定量化・優先順位付け → 戦略立案 → 対策費用見積もり + 見積もり期待精度を調整
```

- **対策費用見積もり**: 個別項目として見積もり可能なものは見積もり。多くマネジメント人材の増員や対策のための製品購入等につながるため、意外と見積もりに大きく影響する
- **見積もり期待精度を調整**: 多くの人がいわゆる「バッファ」と呼ぶ調整パラメータ。無根拠な係数とは異なり、可視化されたリスクドライバ情報と優先順位情報とセットの数字なので、本当の意味でリスクマネジメントに役立つ

### 2-2. リスクコントロール

#### 定量的プロジェクトマネジメント

本セミナーで解説するリスクマネジメントは、いわゆる**定量的プロジェクトマネジメント**手法に基づくものです。即ち、リスクドライバの定量評価から得られる値は、プロジェクト進行中、継続的に測定し続けなければなりません。

リスクドライバの定量評価は、**プロジェクト計画時（≒提案時）、受注後の各工程の開始、終了時**に実施します。或いは、不確実性が大きなプロジェクトの場合は、特定のタイミングによらず何らかのイベントに応じ**リアルタイムに測定し続ける**のが理想的です。

このように可視化されたリスクドライバに応じ、必要な時に必要な分のリスク対策を実施する事で、リスク事象の発生を抑止します。

**プロジェクト進行におけるリスクドライバの変化例:**

| 工程 | 主なリスクドライバ |
|------|-------------------|
| 企画 | PM変更、お客様担当者変更、お客様経営者変更 |
| 要件定義 | PM変更、お客様担当者変更、お客様経営者変更 |
| 基本設計～製造+UT | メンバー離脱、仕様変更要求 |
| 結合テスト～システムテスト | 運用要件見落とし発覚 |

> **注意**: 普通はこのようなリスクドライバは時間とともに減っていくが、発生した場合は即時の評価と対策が必要。

#### 継続的かつ複数人による監視

リスクドライバの定量評価は継続的に行い、**リスク値の変化をグラフ化・可視化しプロジェクト内で共有**するのが理想的です。

また、プロジェクト内に複数のチームがある場合は、各チームリーダーがそれぞれ本ツールによる評価を行う（場合によっては全員が行う）など、**監視のメッシュを細かくする**事も良い方策です。こうする事で、リスク発生の可能性を常に可視化でき、またPM一人では認識できない隠れたリスクドライバを検出できます。

**リスク値変動の可視化例:**
- PMはリスクドライバを認識していなかったが、可視化によりこの段階での事前対策の可能性が生まれる
- くり返しになるが、リスク対策というのは、**リスク事象が発生する前に行うもの**である

#### リスクドライバ対策（予防策）

個々のリスクドライバに対する予防策を、IPA資料『ITプロジェクトのリスク予防への実践的アプローチ』を参考にしつつ策定します。

この時問題になるのが、**リスクドライバの多くは顧客側に存在する**ので、直接コントロールする事が難しいという事です。

従って、リスクドライバの把握と定量化、対策の検討は**顧客と一緒に行う事が理想的**です。

とは言え、それが難しい場合が多いのが現実で、どうしても間接的な対策になりがちです。リスク対策費用は有限ですので、場合によってはそのリスクドライバは放置し、代わりに他のリスクドライバを大きく抑制するなど、**柔軟な対策を行う事で、リスク値の合計値を下げる工夫**が重要です。

> **重要なポイント**: リスク対策とは、みんなで協力して実施する、リスク事象発生の予防策。

### 2-3. プロジェクトリスクマネジメント

#### プロジェクトリスク登録簿（PMBOK）

リスクマネジメントの具体的な進め方に話を移します。一般的には、PMBOKに提示されるような、**プロジェクトリスク登録簿**を作成し、顧客と共有、対策の立案やリスク監視、対策の評価などを行います。

プロジェクトリスク登録簿には以下のような項目を設け、プロジェクトの企画～計画時に想定されるリスクを挙げて記載します。

| No | 項目 | 内容 |
|----|------|------|
| 1 | リスク事象 | 実際のリスク事象。例えば「ハードウェア納品が遅延」や「SE要員が確保出来ない」など |
| 2 | リスク発生原因 | リスク事象の発生原因となるもの。前述の「リスク事象ドライバ」とはこの事 |
| 3 | 発生確率 | 厳密な値でなくとも良いが、どの程度か話し合う事が重要 |
| 4 | 対策優先度 | 対策を実際に実施するかどうかの優先度。「高・中・低」で示す等。例えば発生確率が高い品質リスクに対して、対策が「専用のテストをする」ならば、優先度は「高」。この項目を「プロジェクトへの影響度」とし、優先度を間接的に表現する例もある |
| 5 | リスク対策 | 具体的な対策。ここに上がった施策の一部はプロジェクト計画書に記載される |

大型案件の場合は、このような登録簿をサブシステム単位、或いは機能単位に作成し、固有のリスクに備えます。また、対策分類を設け「マネジメント予備」「コンティンジェンシー予備」の分類をする事で、**プロジェクトオーナーが予算で担保すべきリスクか、プロジェクトマネージャーが管理すべきリスクかを明示**するのも有効です。

#### リスク発生原因 → リスク事象

リスク事象の洗い出しには様々な方法がありますが、ここでは前節で紹介した、IPA資料『ITプロジェクトのリスク予防への実践的アプローチ』を元に、**リスクの発生原因（=リスクドライバ）から、リスク事象を挙げてゆく流れ**を紹介します。

```
リスクドライバ評価 → リスク事象を挙げる → リスク事象を評価 → リスク対策を立案
```

**対策の分類:**
- **【開発メンバー】**: プロジェクトの管理プロセスへの追加や、コンティンジェンシー予備費を使用した対策を
- **【お客様】**: コントロール不能なリスクに対してはマネジメント予備費を準備する

> **注意**: ここで紹介するプロジェクトリスク登録簿はあくまでもPMBOKが定義するものを事例として紹介するもので、後述の『リスクドライバ定量評価ツール』とは別のものです。『リスクドライバ定量評価ツール』は、簡易に継続的なリスク監視を行う事を目的に設計されており、比較的小規模なプロジェクトで手早く、簡易にリスク管理を行う場合に適しています。プロジェクトリスク管理簿のサンプルは、非常に大型のプロジェクトで、顧客とともに実施する本格的なリスクマネジメントに適しています。

#### リスク対策の立案

一口に「リスク対策」と言っても、何を目的とし何を対象にするかによって、様々な対策があり得ます。

大きくは以下の3つの種類にわかれるでしょう：

1. **リスク事象発生の予防的措置**
   - プロジェクトマネジメント上のプロセスとして定義するなど、事前に計画可能な対策
   - アウトプット先はプロジェクト計画書など
   - 対策としてツールの購入等があれば予算計画にも影響する

2. **リスク事象発生後のコントロール**
   - 例えば仕様変更やバグの発生、メンバーの急病など、発生確率が極めて高いリスクは発生を前提として対策を計画しておく
   - 影響を許容可能なリスク事象に対する対策であり、影響評価の結果によっては対策③へ移行する

3. **リスク影響評価と計画変更判断**
   - リスク事象に対し事前評価が可能なもの、及び発生してからの影響度評価が必要なものがある
   - 影響度がごく小さい場合は②で対策可能なので、ここではプロジェクト計画の見直しや追加の予算手当、場合によってはプロジェクトの停止判断などについてその手続を事前に取り決めを行う

**非常に規模が大きな案件の場合は、リスク登録簿だけでなくリスクマネジメント計画書を作成する。**

---

## 3. リスクドライバ評価シート（試用中）

### 3-1. リスクドライバ評価シート

#### 「リスクの度合い」は定量的に評価可能か？

プロジェクトリスクというのは、プロジェクトの背景（事業状況や場合によっては市場状況）や体制、地理（地震や水害などの発生しやすさや、地政学的リスク）、契約上の利益相反、採用した技術スタックなど、様々な要因からの影響を受け、しかもそれらの影響により、**相対的にリスク度合いも大きく変化**します。ソフトウェア規模の影響も受けますが、それだけで決まるものでは無く、**工数に係数を掛けるだけで定量化する事は出来ません**。リスク対策費用は、むしろ管理費に近いものであり、個別にシミュレーションする必要があります。

また、ここまでで示した通り、リスクそのものの度合いを測る事には、プロジェクトマネジメント上の意味合いはほとんどありません。重要なのは、**リスク事象はどうやったら抑制出来るかであり、そのための費用はどのくらいかかるのか**、という点です。

**【仮説】**: リスク対策に必要なのは、リスク情報ではなく、リスクドライバ情報では？

#### リスクドライバ定量評価のメリット

リスク事象ではなくリスクドライバ（つまりリスク事象の発生原因）の定量評価を行う事には、以下のようなメリットがあります。

- **基本的なリスクドライバは、プロジェクト固有ではなく普遍的なものが多い**
  （企画品質や体制上の問題など、どのプロジェクト/組織においても普遍的な問題というものは多い）

- **リスク事象は、実際には発生しないものも多いが、リスクドライバはどのプロジェクトにも存在する**

- **プロジェクトや関係組織の、事情や状況の可視化につながる**
  （本来は提案書やプロジェクト計画書に記載すべきとされているが、実際問題として、管理資料としては機能不足である）

- **これまでPMやマネージャーの「勘」でしかなかった「案件の危険さ」を定量的に表現する事で、他の案件や過去の案件とも数字を元にした比較が可能になり、組織としての対応戦略が立てやすい**
  （いわゆるプログラムマネジメントに役立つ。プロジェクトマネジメントの上位概念）

これらの実現に向け、品質管理セクションにて試用中のものが、ここで紹介するリスクドライバ評価シートです。

チェックシート（ツール）による定量化と、社内の既存案件の分析結果に基づいた、リスク度合いの自動判定、及びそれらを元にした（簡易な）リスクマネジメントフローをご紹介します。

#### リスクドライバ評価シートの構造

プロジェクトリスクドライバ評価シートは、以下のような構造のツールになっています。個々のリスクドライバに対し「リスクドライバ値」を評価し、その合計からプロジェクト全体のリスク評価を行います。

また、リスク対策の立案と、その試行後に再評価を行う事で、リスク対策の有効性を可視化・評価する事が出来ます。

**シートの構成要素:**
- **リスクドライバとその説明**: 評価基準や、想定されるリスク事象等を解説。IPA研究ベース
- **評価理由を記載**: 無対策時のリスクドライバ値を選択
- **リスクドライバ対策を記述**: 対策後のリスクドライバ値を選択
- **リスク評価結果**: 無対策時のリスク評価結果、対策後のリスク評価結果。この比較により、対策を評価する

#### リスクドライバ評価モデル

本研究では、プロジェクトに対してマイナスの影響を与えるものだけを「リスク」と定義し、負の要因だけを分析します。従って、**リスクドライバは原則として悲観的に評価する**ものとします。

リスクドライバ評価シートでは、実際にリスク事象を発生させる可能性を**10段階で評価**します。悲観的な評価原則に則り、**情報不足で評価出来ない項目や、他と比較しても普通の（平均的な）水準だと思われる場合は「5」と評価**します。

**悲観的に評価し、用心深く対策を立案する事で、プロジェクトのリスク（つまり不確実性）のコントロールを試みます。**

**評価基準表:**

| RD値 | 評価基準 | 備考 |
|------|----------|------|
| 1 | 「ありえない程理想的」「当初不能が程好条件」 | 4以下の数字が付く条件は, といい組織, PMに実科に, 謹われている等があ, 全て兼ね备えている上で+αルファといった理想之合わない場々の者字 |
| 2 | 理想的な状況. 教科書に書いてある事例 | そそもリスク管理上, 良い要素ばかりもあれば良いのも無い（その理理科は，リスクの可要です） |
| 3 | 誰もが参る良い状況. 幸運に恵まれる | |
| 4 | 他案件と比べて明らかに条件が良い | |
| 5 | 「いつもと同じ感じ」「または状況不明」「対象外」 | いわゆる「普通」なお「この案件でこの項目は評価対象外」の場合もこれ. リスクドライバ値情報, 確からも, その分だけリスクが小さくなるわけではなく, 他のリスクドライバの影響が大きくなるだけ「仕相対評価) |
| 6 | 少し感がある | 直接・間接で少しでも不安が出られれ、「状況的にごうも可能性がある」て, この數字を付ける |
| 7 | 複教の疑念がある. 何か対策が欲しいかも？ | 疑念が二つ以上あったこと |
| 8 | 明らかな問題がある. 対策が必要 | 事前に問題があるとわかっていたこと「絶対に科学員」かかっていしたりこうした事か要部""が強いためそも予算を免ない |
| 9 | 明らかな問題が複数ある. 対策も難しい | 問題が二つ以上あったこと, 対象が難しい, 問細があったこと |
| 10 | 「考える限り最悪」「既患悪条件を満たしている」 | 既に問題が起きてしまっている, 重大な配慮不足や手順ミスが処々（それを管理に起こる人がいないと, このところ基ない事にもをと, , , ）の場合コ口ー高い人と遥って「赤い旗設立」ては（生時特評価） |

### 3-2. リスク値の評価

#### リスク値合計値の評価研究

当社の、実際のプロジェクトに対しリスクドライバ評価シートを適用し、2年間で約100件の事例を蓄積し、リスク値の合計と、実際に発生するリスク事象の傾向分析を行いました。その研究結果を紹介しますので、実際の案件リスク評価の際の参考にしていただければと思います。

この評価は、お客様から引き合いを貰った直後から開始する事が出来ます。また、本チェックシートを試用する事で、引き合い初期にお客様からどのような情報を引き出さなければならないのか、その参考にもなります。

> **注意事項**:
> - 本ツールの「リスク値」とその合計、そしてその評価の妥当性は、あくまでも2023年現在までのデータを元にした参考情報です。従って、数値そのものよりも、リスクドライバとその対策を可視化し、それを継続的に監視する事そのものの方が重要です
> - 対象案件は見積もり規模3,000万円以上のもので、受注に至らず失注・辞退したものもデータとして含んでいます
> - リスク値の評価は人によって当然その基準が異なってくるので、可能であれば一人ではなく、複数人で評価するのが望ましいです
> - 可能であればリスクドライバの評価結果を品質管理セクションにフィードバックし、定量評価研究への貢献をお願いいたします

#### リスク値の合計とリスク状況（2021～2024/07 社内実績ベース）

リスクドライバ評価シートによるリスク値の合計と、対象プロジェクトに発生したリスク事象との関係を分析した所、以下のような傾向が見られる事がわかってきました。現時点ではあくまでも参考データですが、リスク対策の立案・検討の一助としてください。

| リスク値合計 | リスク評価レベル | 解説（要約） |
|-------------|------------------|--------------|
| 130以上 ～ 200 | **【危険】厳重な対策必須** | 厳重かつ全社的な対策が無いと、**80％程度の確率で、炎上やプロジェクト失敗といった重大なリスク事象が発生する** |
| 120以上 ～ 130未満 | **【危険】対策必須** | 具体的かつ組織的な対策が無いと、**30％程度の確率で、炎上やプロジェクト失敗といった重大なリスク事象が発生する** |
| 115以上 ～ 120未満 | **【要監視】** | 具体的な対策を怠ると、提案の失注や辞退、受注後の炎上など、様々なリスク事象が発生する可能性がある |
| 101以上 ～ 115未満 | **【通常】** | 通常の対策をとっていれば、特別なリスク事象が発生する可能性は低い。ただし、企画のみで提案に至らない案件も多く、提案に至っても、対策を怠ると失注する可能性が高まる |
| 20以上 ～ 100以下 | **【安全】** | リスクドライバに対し適切な対策がとられている。プロジェクトが成功し、お客様からも高い評価をいただく可能性が極めて高い |

#### リスク評価レベルと社内実績の傾向（2021～2024/07社内実績ベース）

リスク評価レベル毎の案件数は以下のようになっています。現時点では要監視以上の案件が多く、リスクマネジメントの改善が求められます。

**リスク評価レベル別案件数（2021～2024/07）**

- **【危険】厳重な対策必須**: 12%
- **【危険】対策必須**: 22%
- **【要監視】**: 18%
- **【通常】**: 43%
- **【安全】**: 5%

**各レベルの特徴:**

- **【安全】と評価される案件数は非常に少ないのが現状**。ほとんどがインフラ/DB/パッケージ販売+役務の案件で、アプリケーション開発を伴うSI案件はごく稀

- **【通常】と評価される案件数が最多だが、提案に至らない事も多い**ため、リスク対策の改善を含めた提案内容の改善が必要だと思われる

- **【要監視】と評価される案件は、リスク対策の不足に加え、不適切な見積もりが原因になっている事が多い**。ほぼ間違いなく品質管理レビューで指摘が行われているので、改善が求められる

- **【危険】と評価される案件が全体の四割弱を占めているのが現状であり、改善が必要**である。品質管理レビュー（役員レビュー）での指摘を受けているにも関わらず、適切な対策がとられず、リスク事象が発生している案件が多い

### 3-3. リスク対策サイクル

#### リスクドライバ評価シートを見積もり・提案に活かす

リスクドライバの認識と定量化は、引き合い初期から開始し、継続的に再評価を行うべきです。他社に先駆け潜在的なリスクドライバを把握し、対策を立案する事が出来れば、**提案における差別化**につながります。

**プロジェクトライフサイクルでのリスクドライバ評価:**

```
【お客様】企画 → フィジビリティ → 企画成立 → 要件定義
【当社】   情報提供依頼書(RFI) → 技術公開依頼書(RFT) → 提案依頼(RFP)
           引合 → 営業対応 → 情報公開 → 超概算見積もり → 提案 → 提案書予算見積もり → 受注
```

各段階でリスクドライバ評価シートを活用することで、**十分な期間をかけて、リスク対策の立案や、差別化ポイントを作り出す準備が出来る**。

#### リスク評価レベルを超概算見積もりに活かす

我々の見積もりに要求される「リスク対策費用」は通常コンティンジェンシー予備費であり、工数に対して係数をかけるような計算では得られない事は、本セミナーの序盤でお話しました。しかしながら、極めて短時間での超概算見積もりの場合は、どうしても具体的なリスク対策を立案（及び見積もり）する事が難しい場合もあります。

そこで、あくまでも、**具体化可能な対策は立案（及び見積もり）した上で**、かつ（無根拠な個人の勘によらない）**リスク評価レベルに応じた期待精度の調整**によって、リスク対策費用を超概算見積もりに盛り込む方法を紹介します。

```
リスクドライバチェックシート → 対策立案 → 対策費用見積もり + 見積もり期待精度を調整
```

**推奨される期待精度:**

| リスク評価レベル | 推奨される期待精度 |
|------------------|-------------------|
| **【危険】厳重な対策必須** | **+30～50%**: ほぼ確実にリスク事象が発生するので、十分な対策費を確保する必要がある |
| **【危険】対策必須** | **+10～30%**: このレベルではもう値引き等の余地は無い |
| **【要監視】** | **±0%**: 当セミナーで紹介した手法で見積もっている場合、既に標準的なリスク対策費用は盛り込まれている |
| **【通常】** | **±0%**: 同上 |
| **【安全】** | **±0%**: 同上 |

> **注意**: 当然だが、後の予算見積もりの段階ではきちんと具体的なリスク対策費用として改めて見積もるべき。もしもやむなく係数的な利用をする場合でも、個人の経験によらない定量的基準なので、将来に向けたデータ蓄積の意味でも、この方法の方が望ましい。

#### プロジェクトマネジメントに活かす

本セミナーのスコープ外ではありますが、リスクドライバ評価シートは、本来はプロジェクトにおけるリスクマネジメント用のツールです。プロジェクトの各局面にて、その時の最新状況に応じてリスクドライバの再評価を行い、**リスク値をプロジェクトメトリクスの一つとして利用**します。

次工程におけるリスク対策の立案や、場合によってはスケジュール変更や計画変更の判断材料として利用可能な、普遍的かつ定量的な数値として利用可能です。

**プロジェクト各工程でのリスクドライバ評価:**

```
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト
   ↓         ↓         ↓         ↓           ↓            ↓          ↓
リスクドライバ評価シート（各工程で実施）
```

**活用のポイント:**
- チームリーダー全員に実施して貰う事で、きめ細かいリスク監視が可能に
- 定量的な数値により、プロジェクトのリスク状況についてメンバー全員が共通の認識を持てる
- 可能ならば顧客も含めこの数字を共有し、積極的な協力の姿勢を誘導する。また、ステアリングコミッティ等の高次判断の材料として貰う

---

## まとめ

◆ **リスク対策とは予算を積む事ではなく、具体的な対策立案と、それにかかる見積もりの事。**

◆ **マネジメント予備費とコンティンジェンシー予備費は別のもの。コンティンジェンシー予備費（≒リスク対策費用）は係数では算出できない。**

◆ **当社でも、適切なリスクマネジメントが行われない事が原因で、プロジェクトに問題が発生している事例が多い。**

◆ **リスク事象ではなくリスクドライバ（原因）を分析する手法を紹介した。人の勘によらない、定量化した分析手法。**

◆ **皆さん是非、リスクドライバ評価シートを試してみてください。見積もり・提案もプロジェクトマネジメントもご安全に…**

---

## 参考文献

◆ 『熊とワルツを - リスクを愉しむプロジェクト管理』（日経BP）

◆ 『曖昧性との共存』（翔泳社）

◆ 『実践ソフトウェアエンジニアリング（第9版）』（オーム社）

◆ 『図解即戦力 PMBOK第6版の知識と手法がこれ1冊でしっかりわかる教科書』（技術評論社）

◆ 『ITプロジェクトのリスク予防への実践的アプローチ』（IPA）
   https://www.ipa.go.jp/archive/digital/iot-en-ci/risk-prevention.html

◆ 『プロジェクトガイドライン』（システムエグゼ プロジェクト品質保証委員会）

---

*Copyright(c) 2023-2024 SystemEXE Inc. All rights reserved.*
*相田一英 2024/07/04*

---

## 【QM】アーキテクト教育・第六回v4.5.md

## 第六回 見積もり/プロジェクト計画 アーキテクト教育セミナー

## 目次

### 1. 見積もり概論
- 1-1. 規模？工数？金額？
- 1-2. 見積もりの不確実性
- 1-3. 見積もり技法
- 1-4. FP法

### 2. 見積もり実践
- 2-1. JUAS統計による超概算
- 2-2. NESMA法
- 2-3. JFPUG公表値による超概算
- 2-4. 超概算見積もり実践

### 3. プロジェクト計画
- 3-1. EXE標準工程モデル
- 3-2. 最適工期/工期配分
- 3-3. 工数配分
- 3-4. プロセスフローの設計

### まとめ
### 参考文献

---

## 1. 見積もり概論

「見積もり」とは「物事のあらましを考え計算して予測を立て、概算する事」です。システム開発の見積もりは、対象が抽象的かつ不確実性が大きいモノであるため、非常に難しいテーマです。

アーキテクトも、提案におけるフィジビリティの判断や開発・製造プロセスの設計のため、見積もりのスキルを持つ必要があります。

### 1-1. 規模？工数？金額？

#### 見積もりの「対象」は契約ごとに異なる

見積もりを難しくしている原因の一つは、契約が異なれば見積もるべき対象も異なる事です。契約種類が異なるという事は、作業としては同じソフトウェア開発であっても、実際には「売っているモノ」が異なるという事です。

| 契約種類 | 売る「モノ」 | 見積もり対象 |
|----------|-------------|-------------|
| 派遣契約 | 労働力 | 提供する人の人件費（人月単価×期間） |
| SES契約 | 専門性＋労働力 | 提供する人の人件費＋付加価値（人月単価×期間） |
| 請負契約 | 完成したシステム/アプリケーション | システム/アプリケーションの価値（価値とは？） |

**請負契約とは基本的には「完成品」を提供する物販の契約モデルです。**
システムは一品物（F1カー等と同じ）であり値付けが非常に難しい。そのため実際に開発・製造にかかる費用＋利益を、その価値の代用とする事が多い。

#### 「実際に開発・製造にかかる費用」を見積もる

では、請負契約の場合に見積もらなければならない「実際に開発・製造にかかる費用」は、どのように概算すれば良いのでしょうか。大まかには以下のようなモデルで計算されます。

**開発・製造費用 = 材料費 + 作業費用 + 管理費**

- **材料費**
  - ハードウェア製品
  - ミドルウェア製品
  - 統合開発環境（IDE）
  - その他製品

- **作業費用**
  - 設計作業
  - 構成管理作業
  - 製造作業
  - テスト作業
  
  作業量に左右されるため、システムの「規模」を知る必要がある。

- **管理費**
  - 会議費
  - 品質管理費
  - プロジェクト管理費
  - 管理ツール等諸経費
  
  作業期間に左右されるため、プロジェクト全体の「期間」を知る必要がある。

**これに利益を上乗せすれば見積もり金額となる。**

#### 因みに準委任契約では？

因みに準委任契約での見積もりと比較すると、モデル上このような違いがあります。

成果物の完成義務を含め、提供するサービス内容がそもそも少ないので、同じ規模のシステムを請負契約で受注する時に比べ、かなり見積もりが小さく（=見積額が安く）なります。

- **材料費**：通常は顧客が準備する。そうでない場合は環境維持費等の名目で別途請求して良い。
- **作業費用**：基本的には「作業」以外の見積もり要素が無い。
- **管理費**：プロジェクト管理はお客様の仕事。コミュニケーション費用は発生するが小さい。

基本的には間接費を、ほぼ含まない単純な作業費用が主である。

#### 規模 → 工数？ → 金額

最終的な金額見積もりを得るためにはシステム規模を見積もり、規模から何らかの係数を用いて金額を導き出す必要があります。この係数には伝統的に生産性数値が用いられ、規模を「工数」に変換し、工数から人件費を計算します。

**見積もりには、ソフトウェア規模、生産性数値、プロジェクト期間の三要素が必要となる。**

#### システムの「規模」を見積もる

システムは「抽象的なモノ」なので、その「規模」を見積もるというのは本質的に難しい行為です。規模見積もりとは抽象的で複雑なものに対する分析であり、見積もり技法とは本質的にはモデリング技法です。

また、実際のITプロジェクトには必ず不確実性が存在し、さらに見積もりの難易度を増大させます。これまで様々な見積もり技法が提唱され、その妥当性が検証されて来ました。

### 1-2. 見積もりの不確実性

#### 規模見積もりの「予測」の難しさ

ITプロジェクトの不確実性は、以下のような不確実性コーンモデルで表現されます。

我々SIベンダーにとって難しいのは、ビジネスの都合上、不確実性が大きい段階で見積もりを行い、基本的にはその金額で契約しなければならないという点です。

プロジェクトの進行とともに不確実性は減少し、見積もりの精度は向上します：

- **超概算見積もり**：企画段階（4.0x）
- **予算見積もり**：要件定義段階（2x～1.5x）
- **確定見積もり**：基本設計段階（1.25x～0.8x）
- **計画見積もり**：詳細設計以降（1.0x前後）

**【予算見積もり】**  
通常我々は、この段階で見積もりを出さなければならない。

**【確定見積もり】**  
我々のビジネスでは、通常、限界の精度で出せる見積もりが要件定義後再見積もりである。それでも不確実性が大きいため、原理的に（赤字回避のため）割高に提示せざるを得ない。

**【計画見積もり】**  
FP法等の見積もり技法が適用出来るのは、原理的に基本設計以後となる。

#### 我々のビジネスにおける「見積もり」

我々のビジネスモデルでは、不確実性（≒リスク）を避け確実に利益を出すためには、見積もりを高めに出さざるを得ない、という事です。逆に言えば、この水準より小さな見積もりを提示する場合は、規模を小さくするかロスコストを削減するかの（実現可能な）対策を、事前に計画する必要があります。

見積もりの構造：
- 正式な契約金額
- 予定する最低利益
- 最終的な利益
- ロスコスト（損失）

**これが増えると利益が減る：**
- 仕様変更/手戻り
- 結合テスト以降のバグ
- 計画外管理費 etc…

**予定していた最低利益と同じか上回れば、ビジネスの成功。**

#### 見積もりに期待される精度

PMBOKが提示する、不確実性コーンに対する見積もり期待精度：

| 見積もり段階 | PMBOK期待精度 |
|-------------|--------------|
| 超概算 | -50～+100％ |
| 予算 | -10～+50％ |
| 確定 | -5～+10％ |

見積もりの「精度」を出すためには、可能な限りお客様の情報収集、要求分析、プロジェクト計画の具体化により不確実性コーンの上端を見極めなければなりません。

PM（或いはコンサルティング）のスキルにより、不確実性が抑制され、原理的な正確度を上回る期待精度が得られる。**見積もり方法論はPM方法論でもある。**

#### 【閑話】大幅に値下げしたい？

システム開発において、お客様が期待するコスト（予算）感とSIベンダー側の金額見積もりが大きく乖離する場合があります。そのような場合、多数の前提条件をつけて個々の機能の規模見積もりを削減し始める人がいますが、当セクションの見積もり・提案研究の結果では、これは逆に受注率を下げるか、受注出来た場合でも、ほぼ確実にトラブルの原因になる事が分かっています。

また、後ほど解説しますが、工期はシステム規模に依存する、ほぼ固定のパラメータなため、人件費の抑制のため、工期を減らすという事も出来ません。そもそも人件費は、大きく削減する事が難しいパラメータです。

従って「大幅に値下げしたい」場合は、お客様の要求内容を一部変更する、或いはシステムアーキテクチャを変更するなどして、**作る量（=スクラッチ開発の量）を減らすしかありません。**

フルスクラッチをやめ、一部にプロダクトやノーコード/ローコードプラットフォームを導入する、必要なサーバ数やハードウェア性能を落とすなどの、様々な工夫が必要です。

### 1-3. 見積もり技法

#### 様々な見積もり技法

規模見積もりの技法には様々ありますが、その違いは「ソフトウェアをどのような技法でモデリングし、定量的モデルを得るか」という部分にあります。つまり、**見積もり技法の違いとは、本質的にはモデリング技法の違い**です。

従って、優れた見積もり能力を身につけるためには、多彩な分析・モデリングスキルを身につける必要があります。

見積もり技法とモデリング種類の関係：

- **総合的なモデリング**
  - 標準値法
  - 標準タスク法（WBS法）
  - COCOMO/COCOMO Ⅱ

- **UIモデリング**
  - オブジェクトポイント法

- **データモデリング**
  - FP試算法（NESMA）

- **オブジェクトモデリング**
  - IFPUG法/FP概算法（NESMA）
  - ユースケースポイント法

#### 見積もり技法と適用時期

プロジェクトの早い段階では確定情報が少なく、使用可能なモデリング手段が限られます。このため、**時期によって使用可能な見積もり技法は異なります。**

適用時期と技法：
- **超概算見積もり段階**：オブジェクトポイント法、FP試算法（NESMA）
- **予算見積もり段階**：FP概算法（NESMA）、標準値法、ユースケースポイント法
- **確定見積もり段階**：IFPUG法、標準値法
- **計画見積もり段階**：COCOMO Ⅱ（プロジェクト開始後の進捗管理が目的）

#### 見積もりの「鉄則」

見積もりの鉄則は、どの段階での見積もりにせよ、**見積もり手法は単独で使用してはいけない**、です。

良く見積もりの精度（precision）という表現を目にしますが、精度という言葉の意味は、複数回/複数の方法で観測した場合でも近い値が出るという意味です。従って、**見積もりの精度を追求する場合には、複数人で複数の見積もり技法を使って見積もる必要**があります。

見積もり技法とは、それぞれ種類の異なるものさしのようなもの。複数のものさしで複数回測らないと精度は上がらない。

#### 見積もりの精度/妥当性

高い精度で見積もるためには、正確かつ詳細なモデルが必要です。しかし原理的に、プロジェクト開始前或いは序盤に「正確かつ詳細なモデル」を得る事は不可能です。つまり、**プロジェクト開始前や序盤に高精度の見積もりを得る事は不可能**です。

従って、見積もりの妥当性は、その精度ではなく、その時々における「見積もり」に対するお客様の期待をどの程度満たすかによって決まります。

見積もり段階別の期待内容：

**ユーザーの要求**
- 超概算見積もり：フィジビリティ、お客様側での円滑な企画推進
- 予算見積もり：予算確保、社内稟議、最適なソリューション選定、低コスト化
- 確定見積もり：開発コスト確定、予算管理、ベンダ評価

**ベンダーの要求**
- 超概算見積もり：提案機会
- 予算見積もり：受注、プロジェクトリスク回避、適切な利益
- 確定見積もり：予算管理、進捗管理、リスク予測

### 1-4. FP法

#### ファンクションポイント法のメリット

ファンクションポイント法（FP法）は世界的に最も有名な見積もり技法の一つです。

FP法のメリットは採用事例が多く、統計的なデータが揃っている事や、簡易技法と併せれば、超概算見積もりから計画見積もりまで全ての時期をカバー出来る事です。

従って、**主たる見積もり技法としてFP法を採用し、適切な時期に適切な他技法を組み合わせて見積もりを検証する**、というのが現実的なソリューションです。

| 見積もり | 期待精度（PMBOK） | FP法 | 期待精度（統計実績ベース） |
|----------|------------------|------|--------------------------|
| 超概算 | -50～+100％ | FP試算法（NESMA法） | ±50％ |
| 予算 | -10～+50％ | FP概算法（NESMA法） | ±10％ |
| 確定 | -5～+10％ | IFPUG法 | ±5％ |

#### IFPUG法が採用するモデル（1/3）

いわゆるFP法とは「FP値を算出するための手法の総称」であり、ISOで定められている呼称です。具体的な手法はIFPUGという団体が定義しており、その技法をIFPUG法と呼称します。

IFPUG法では、アプリケーション規模を計測するためのモデルを以下のように定義しています。

**データファンクション**
- **ILF（Internal Logical File）**：追加・更新・削除など操作対象となるデータ ≒テーブル数
- **EIF（External Interface File）**：参照するだけ（更新なし）の別システムのデータ ≒インターフェース数（IN）

**トランザクションファンクション**
- **EI（External Input）**：データ入力を受け、１つ以上のILFの追加・修正・削除、またはシステムの動きを変えるもの
- **EO（External Output）**：データの加工や、１つ以上のILFの追加・修正・削除を伴うデータ出力
- **EQ（External inQuiry）**：データの加工や、１つ以上のILFの追加・修正・削除を伴わないデータ出力

**複雑度**
- **DET（Data Element Type）**：≒データ項目数（≠カラム数）。例えば「生年月日」は年、月、日で1DET。
- **RET（Record Element Type）**：論理エンティティ内のサブグループ数 ≒物理テーブル数
- **FTR（File Type Reference）**：関係するILF、EIFの数

#### IFPUG法が採用するモデル（2/3）

大雑把にはデータモデルと機能モデルに分類します。データモデルに対しては、論理的に分割した個々の「ファイル」に対しデータ項目数とレコードの種類数を使って定量化します。機能モデルに対しては、その機能が取り扱うデータ項目数と、機能（処理）に関係する「ファイル」の数で定量化します。

- **データファンクション**：データモデルを定量的に測定
- **トランザクションファンクション**：機能モデルを（データ観点で）定量的に測定

複雑度の構成要素：
- 対象機能が取り扱うデータ項目数
- 対象ファイル内のレコード種別数
- 対象機能に関係する論理エンティティ及び外部I/Fファイル数

#### IFPUG法が採用するモデル（3/3）

各測定値を、変換テーブルを用いてFP値に変換する、という手順で数値化します。

複雑度判定と FP値変換表：

| 難易度 | ILF | EIF | EI | EO | EQ |
|--------|-----|-----|----|----|---- |
| 低 | 7 | 5 | 3 | 4 | 3 |
| 中 | 10 | 7 | 4 | 5 | 4 |
| 高 | 15 | 10 | 6 | 7 | 6 |

※調整係数省略

#### FP法による見積もり

得られたFP値は、どのような種類のアプリケーションでも普遍的/共通的な「規模」を示す数値になっていると（理論的には）考えられます。従って、各プロジェクトのFP値を測定し、それと併せて工数や金額の実績値のデータを蓄積してゆけば（理論的には）FP値からの工数/金額予測が可能になります。

見積もりの計算構造：
- 「規模」をFP値で捉える（機械的なので、誰が測定しても同じ…？）
- データを蓄積すれば、いずれ生産性係数が分かる…？
- 期間はどう考えれば良い…？

---

## 2. 見積もり実践

お客様が期待する見積もりとは、安価な見積もりではなく信頼出来る見積もりです。見積もりの信頼性は、個人の技芸や見積もり作業にかかったコストで担保するものではなく、合理的な根拠によって担保されなければなりません。

また、見積もりは我々の収益に直結するものであり、我々自身も合理的な根拠をもって実施する必要があります。

### 2-1. JUAS統計による超概算

#### オブジェクトポイント法は妥当なのか

画面数や帳票数などを数え、一定の生産性係数を掛けて見積もるのが、いわゆるオブジェクトポイント法です。オブジェクトポイント法には様々なバリエーションがありますが、実際に超概算見積もりが出来るかどうか、日本情報システム・ユーザー協会（JUAS）による調査が行われています。

以下にその調査結果に基づく計算式を紹介します。

**JUAS 2007年調査**
```
工数（人月） = 画面数 × 1.55
```

**同、参考値**
```
工数（人月） = 0.1 × テーブル/ファイル数 + 1.3 × 画面数 + 0.3 × バッチ数
```

品質管理セクションの検証では、画面数を「画面＋帳票数」で計算すると、概ね超概算見積もりとして妥当な範囲に入る事が分かっています。

しかしながら、調査の結論としてはオブジェクトポイント法はそれほどの精度は出ない事が分かっています。従って、実際に使用する場合は、あくまでも見積もりの「桁」の検証目的程度に留めるのが正解です。

### 2-2. NESMA法

#### 簡易FP分析 ── NESMA法

NESMA（オランダソフトウェア計測協会）がFP法の一種として提唱し、統計調査を行ったのが、簡易FP分析（通称NESMA法）です。NESMA法には2種類あり、IFPUG法との比較調査が行われています。

**NESMA法の種類：**

1. **FP試算法**
   - データモデル（論理エンティティと外部I/Fファイル）だけでFPを試算可能か？
   - 最大で±50％程度の誤差

2. **FP概算法**
   - 複雑度とFP値への変換を簡易化（レベル分けしない）して概算可能か？
   - ±10％程度の誤差

データモデルの評価だけで、初期分析向けなら十分な期待精度が出る。

#### FP試算法

NESMAの調査データを基にした、ファンクションポイントの簡易計算技法「FP試算法」は、以下の計算式で定義されています。

期待精度が最も低い手法ですが、それでも**±50％の精度が期待出来ます。**

```
FP = 論理エンティティ数 × 35 + 外部I/Fファイル数 × 15
```

- **論理エンティティの数**：対象機能の説明があれば、データモデリングによりかなり序盤でも導出可能
- **アプリケーション境界外から入力・参照する（=IN）ファイルやテーブル**

※ファンクションポイント（FP）は、システム規模を表現するためのグローバルスタンダードな単位です。日本ではLOCや「工数」といった単位で表現する事が多いですが、いずれもデメリットが多いので、内部的な規模計測にはFPを使用する事を推奨します。

#### FP概算法

NESMA法の一つFP概算法は、IFPUG法の詳細な複雑度評価を省略した簡易手法です。

**期待精度は±10％程度**ですので、要件定義前の予算見積もりから、要件定義後の確定見積もりまで適用可能です。

FP概算法では以下のようなモデルを採用します：

| 要素 | 複雑度 | FP値 |
|------|--------|------|
| **データファンクション** | | |
| ILF（Internal Logical File） | 全て「低」とする | 7 |
| EIF（External Interface File） | 全て「低」とする | 5 |
| **トランザクションファンクション** | | |
| EI（External Input） | 全て「中」とする | 4 |
| EO（External Output） | 全て「中」とする | 5 |
| EQ（External inQuiry） | 全て「中」とする | 4 |

物理テーブル数、物理I/Fファイル数でも（期待精度は下がるが）代用は可能。

『機能』を入力・編集機能（EI）、データの一括加工処理の結果出力機能（EO）、単純なデータ出力機能（EQ）に分類する。1画面内に複数機能が有る場合（≒複数のボタンがある場合）は、それぞれ別の『機能』としてカウントする。

### 2-3. JFPUG公表値による超概算

#### 実際の計算例と「工数ものさし」

開発対象システムの規模を「工数」で表現するためには、先程導いたファンクションポイント（FP）を「工数」単位に変換する係数が必要です。このような係数を生産性数値（或いは生産性係数）と呼ぶ事があります。

ここでは日本ファンクションポイントユーザ会（JFPUG）の調査データを用い、期待精度±50％の工数検証用ものさしを得る計算をご紹介します。

```
FP × 1.29※ = 工数（人日）
```

※ JFPUG資料「FP法による開発データ分析～経済調査会殿調査データに基づく～」の生産性数値（中央値）

**工数ものさしの解釈：**
- **下限である50％**に近付けば近づく程リスクが大きい → 見積もりの見直しや生産性を向上させる施策が必要
- **上限である150％**に近付けば近づく程リスクが低下し利益が大きい

#### 実践例：RFPから高速に超概算見積もりを得る

FP試算法とドメイン分析を組み合わせる事で、提案依頼書（RFP）などの初期資料から、極めて高速に超概算見積もりを得る事が出来ます。以下がその見積もりフローです。

```
RFP → ドメイン分析 → 論理エンティティ数/外部I/Fファイル数 → FP試算法 → FP試算値 → ×生産性数値 → 工数（人日）の幅（工数×0.5 ～ 工数×1.5）
```

ロバストネス図記法におけるエンティティのみに着目すれば良いので簡単。

システム規模にもよりますが、概ね数十分で妥当な工数の『幅』が計算出来ます。他の見積もり手法による結果をこの『幅』と比較し**見積もりの妥当性及びリスクを評価**します。

---

## 3. プロジェクト計画

プロジェクト計画の立案はプロジェクトマネージャーの責務ですが、アーキテクトは、主にエンジニアリングの観点からそれを補佐しなければなりません。

ここでは、プロジェクト計画の概要と、統計値を元にした安全な計画の立案、及びエンジニアリング観点でのプロセスフロー設計の基礎を解説します。

### 3-1. EXE標準工程モデル

#### 「標準的な工程の定義」は存在するか？

IT業界では古くから、製造業に倣い、工期を「工程（フェーズ）」によって区切って来ました。

しかし個々の工程の意味や定義は現場毎にバラバラで、初期のIEEE基準やその後のIPA共通フレーム基準の影響がありつつも、今でも標準化されていないのが実情です。

**典型的な工程モデルの例：**

1. **エンドユーザー向け（ユーザー視点習慣的モデル）**
   - 要件定義 → 基本設計 → 詳細設計 → 製造+UT → 単体テスト → 結合テスト → システムテスト → ユーザーテスト

2. **ITベンダー向け（共通フレーム2007以降モデル）**
   - 要件定義 → 基本設計 → 詳細設計 → 製造+単体テスト → 結合テスト → システムテスト → ユーザー受入テスト

3. **古典的モデルを採用したユーザー向け（共通フレーム98以前モデル）**
   - 基本設計 → 詳細設計 → 製造 → 単体テスト → 結合テスト → 総合テスト → 運用テスト

#### システムエグゼ標準工程モデル

当社では、社内向けの各種開発ガイドライン/開発標準策定に当たり、ドキュメント内での呼称を統一するため、**システムエグゼ標準工程モデル（EXE標準工程モデル）**を作成しています。

**EXE標準工程モデル**
```
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト
```

必要に応じて各現場の工程モデルと読み替えて使用します。

#### EXE標準工程モデルは「ユーザー指向」

EXE標準工程モデルには、一箇所特徴的な工程定義があります。それは、結合テストの第一段階であるモジュール間結合テストを「**機能単体テスト**」と呼称している点です。

これは、特にユーザーによるテスト定義の理解に配慮したもので、**結合テストを二段階に分けて表現**したものです。（お客様が認識しやすい「1画面/1機能」単位での結合テストを明示したもの）

手動で画面を操作して行うテストは結合テストですが、ユーザ観点だと、テスト対象単位が「単体の機能」である事が多いため、モジュール間結合テストの事を「単体テスト」と呼ぶユーザーが意外と多い。

#### EXE標準工程モデルと開発プロセス（1/2）

EXE標準工程モデルに定義する工程は、その期間に以下のような開発プロセスを実施する事を想定しています。

**各工程で実施するプロセス：**

- **要件定義**
  - 機能要件定義プロセス
  - 非機能要件定義プロセス
  - 画面・データ概念モデル定義プロセス
  - 項目定義（用語定義）

- **基本設計**
  - 機能設計プロセス
  - 非機能設計プロセス
  - 画面・データ論理設計プロセス

- **詳細設計**
  - 機能詳細設計プロセス
  - 非機能詳細設計プロセス
  - 画面・データ物理設計プロセス

- **製造**
  - プログラミングプロセス
  - 自動ユニットテスト

概念（コンセプト）モデル：いわゆる仕様の定義（システムにとっては概念）
論理（ロジック）モデル：いわゆる論理設計
物理（フィジカル）モデル：いわゆる物理設計

#### EXE標準工程モデルと開発プロセス（2/2）

続いてテストプロセスです。

**テストプロセス：**

- **自動ユニットテスト**（ホワイトボックステスト）
  - 制御フロー確認プロセス
  - ユニット機能確認プロセス

- **機能単体テスト**（ブラックボックステスト）
  - 機能確認プロセス
  - GUIテストプロセス

- **結合テスト**（ブラックボックステスト）
  - 状態遷移確認プロセス
  - 機能間/サブシステム間連携確認プロセス
  - 環境確認プロセス

- **システムテスト**（ブラックボックステスト）
  - シナリオテストプロセス
  - パフォーマンステストプロセス
  - インターフェーステストプロセス

**ホワイトボックステスト**：コードの内部構造の検証目的のテスト
**ブラックボックステスト**：仕様書や設計書を元にし、入力と出力の観点で行うテスト

### 3-2. 最適工期/工期配分

#### 総工数から工期を得る ── 最適工期

JUASが公開するデータに、プロジェクトの総工数と工期と、プロジェクトの成功・失敗の関係を分析したものがあります。

その分析結果から以下のような計算式と、この計算で得られた値よりも**30％以上短い工期だと、プロジェクトの失敗リスクが極端に増大する**（端的に言えば炎上する）という傾向が提示されています。

```
最適工期 = ∛(総工数（人月)) × 2.4※
```

※ 2014年のJUAS資料より。最新資料ではもう少し大きな数字になっているが、当社実績工期と比較すると長くなりすぎるため、今回はこの数字を紹介。

ちなみにEXCELでこの計算をする場合は：
```
=【開発投入人月】^(1/3)*2.4
```

**工期が長過ぎればプロジェクト管理費が増大（=コスト高になる）し、短すぎれば炎上の可能性が高まる。採用すべきは「最適な」工期であり、この値をベースに、プロジェクト固有の事情に合わせて微調整するのが望ましい。**

#### 典型的な工期配分

総工期が手に入ったら、次は工程毎の工期配分のデータを利用します。やはりJUASが公開するデータに、日本国内のITプロジェクトにおける典型的な工期配分の調査結果もあります。

ただし、この調査では、プロジェクト毎の工程定義の違いを無視するため（つまり調査と分析を簡単にするため）に、大きく3つの時期（「要件定義～基本設計」「詳細設計～製造＋UT」「結合テスト～ユーザーテスト」）に分けて工期の比率を評価しています。

**JUAS工期配分比率：3：3：4**

★JUASはユーザー団体なので、調査対象にユーザー工程（要件定義、ユーザーテスト）も含まれている。

#### 工期の配分（IPA）

IPAのデータでは以下のような比率が公開されています。JUASのデータと重ねてみても概ね妥当な比率だと思われますので参考にしてください。

**IPA工期配分比率：23：60：17**

- 要件定義～基本設計：23％
- 詳細設計～製造＋単体テスト：60％
- 結合テスト～ユーザー受入テスト：17％

※注）時折、JUAS/IPAの比率を大きく超えた長期間の要件定義工程を設けるお客様がいます。しかしこれは、実は要件定義工程が長いのではなく、それ以前の企画プロセスを含めて「要件定義」と呼んでいる可能性が高いお客様です。そのような場合、お客様が要求しているのは要件定義支援だけではなく企画支援コンサルですので、提供するサービスが不足しないようご注意ください。

### 3-3. 工数配分

#### 典型的な工数配分

総工数から、各工程に対する工数配分を決めます。

ただし請負契約の場合、顧客に対し、工程毎の工数の情報を提示する必要は（本来は）ありません。ここはお客様側にもベンダー側にも誤解している人が非常に多いポイントで、予定工数や単価といった情報は見積もりとして提示する必要が無く、むしろ法的には提示しない方が望ましい情報です。このような工数配分は、あくまでも内部での管理目的のものです。

**IPA工数配分比率（P75データ）：**
- 要件定義：17％
- 基本設計：17％
- 詳細設計：35％
- 結合テスト：17％
- システムテスト：14％

★IPAは主にベンダーに対して調査を行っているため、ベンダー工程だけのデータになっている。なお、この数字はP75データなので、国内のITプロジェクトの75％がこの配分を採用していると考えて良い。

システム規模が大きい場合は、工期と同様にシステムテスト工数をもっと大きく取る必要がある。

#### 「単体テストを実施しないプロジェクト」？の場合

「単体テスト」と呼びながらも手動のブラックボックステストしか行わないプロジェクトが、2020年頃まで当社内でも散見されました。

これは事実上、**単体テストを実施しないプロジェクト**であり、品質管理上大きな問題を抱えたプロジェクトですが、現実問題としてSI業界では散見されます。（ただし、国内のITプロジェクトでは25％より少ない比率でしか存在しないレアケースです）

このようなプロジェクトでは、当然各種団体の調査データのメトリクスが適用出来ません。以下は当社内の実績データをもとにした、そのような変則プロジェクトにおける比率を示す参考データです。**このような計画は当然非推奨**ですが、何か特殊な事情があって採用せざるを得ない場合は、参考にしてください。

**品質に問題がある習慣的モデルの工数配分：**
```
要件定義：17％ → 基本設計：17％ → 詳細設計：16％ → 製造：単体テスト（モジュール間結合テスト）：35％ → 結合テスト（機能間結合テスト）：15％ → システムテスト → ユーザー受入テスト
```

**このモデルの問題点：**
- 一般的な開発プロジェクトに対し結合テストの工数がほぼ倍
- 単体テスト未実施のまま結合テストを開始するので、結合テストでの欠陥率が（統計値に比べ）異常に高い
- 欠陥検出がプロジェクトの後方時期にずれるので、手戻りが大きく回帰テストの工数も膨大に（そのため、回帰テストを十分実施しないプロジェクトも多い）
- **原理的に低品質・ハイリスク・高コストなプロジェクト計画**

#### 「管理費」とは何か？

一般的には、管理費には**プロジェクト管理コスト、品質管理コスト、会議などのコミュニケーションコスト**が含まれます。つまり管理費は、プロジェクトの工期と体制に依存して変動します。特にコミュニケーションコストはチーム数/階層や開発工期の影響を大きく受けるため、管理費の計算のためにはシミュレーションが必要です。

**会議体の例：**

| 内外 | 会議 | 参加者 | 頻度 | 資料作成含む時間 |
|------|------|--------|------|-----------------|
| 外部 | ステアリングコミッティ | PM, PL, PMO | 3ヶ月に1回 | 3時間（会議1時間） |
| 外部 | PJ全体会議 | PM, PL, PMO | 隔週 | 2時間（会議1時間） |
| 外部 | サブ別定例会議 | PM, PL, PMO, TL, SL | 毎週 | 2時間（会議1時間） |
| 内部 | PMO会議 | PM, PL, PMO | 毎週 | 1.5時間（会議1時間） |
| 内部 | リーダー会議 | PM, PL, PMO, TL, SL | 毎週 | 1.5時間（会議1時間） |
| 内部 | チーム会議 | TL, SL, メンバー | 毎週 | 1.5時間（会議1時間） |
| 内部 | 品質レビュー会議 | PM, PL, 品質管理室 | 隔週 | 1.2時間（会議1時間） |

**参加人数×頻度×時間 ＝ 管理工数**、という計算（シミュレーション）を行います。この計算からわかる通り、体制の階層を深くする/チーム数を増やすと参加人数が増え会議頻度も増加しますし、工期が伸びれば会議等の実施回数が増えます。

従って、**プロジェクト体制は予算に見合った適切な（シンプルな）体制が望ましく、工期も過剰に長過ぎない最適工期が望ましい**と言えます。

### 3-4. プロセスフローの設計

#### 工程表の設計

工程表は単に「スケジュール」とも呼ばれるように、各工程の大まかなマイルストーンを計画するための表です。別の言い方では、工程成果物の作成完了日を定める表です。

請負契約における、一般的なウォーターフォール型開発では、基本、**工程同士を重ねてはいけません**。必ず前工程が完了してから次の工程が開始されるよう表現します。

（※重なるのはプロセスで、フェーズではありません。契約上の工程と、実作業のスケジュールを混同しないようにしてください）

**工程表作成のポイント：**
- 「工程（フェーズ）」と「プロセス」を混同してはいけない
- プロセスには、必ず準備プロセスが入るので前方工程中に開始される
- テストプロセスは「回帰テスト」として以後も継続
- プロセスの準備作業の多くがPM/PMO/PL、そしてアーキテクトのタスク
- **原則、開発・製造タスクを持ってはいけない**

#### データ移行などとの同期

既存システムの更改の場合、システム開発ウォーターフォールの他に、**データ移行ウォーターフォール**が存在します。このような場合、ウォーターフォール同士の同期がとれるよう、工程設計を行う必要があります。

**同期が必要な作業例：**
- **データ移行**：機能間結合テストには移行データを使用する
- **開発フレームワーク構築**：詳細設計前に完了
- **インフラ構築**：開発環境準備と同期
- **他ベンダーによる周辺システム開発**：システムテストのタイミング同期

データ移行以外にも、これらの作業を工程設計の際に勘案する必要があります。

---

## まとめ

- **見積もりは時期と期待値に応じ、複数の手法を使い分け。**
- **ファンクションポイント法とその簡易手法の組み合わせで、我々のビジネスシーンは概ねカバー。**
- **NESMA法でサクサク試算・検証し、リスク評価の上安心して金額提示。**
- **EXE標準工程モデル/プロセスを軸に、様々なお客様の工程/プロセスを理解する。**
- **最適工期、工数配分は調査・統計値をベースに検証する。**
- **最初にきちんと工程設計。**
- **本格的な業務として見積もりと提案を行う人は、是非『見積もり・提案教育セミナー』を受講しましょう！**

---

## 参考文献

- 『ITユーザとベンダのための定量的見積りの勧め』（IPA）
- 『ソフトウェア開発見積りガイドブック』（IPA）
- 『ソフトウェアメトリックス調査2014』（JUAS）
- 『ソフトウェア開発データ白書2014-2015/2016-2017』（IPA）

---

## 【QM】見積もり・提案教育・第六回v2.2.md

## 第六回「提案」その前に 見積もり・提案教育セミナー

## 目次

1. **我々は「何を売っている」のか？**
   - 1-1. システム開発企業の業態
   - 1-2. 我々の「商品」とは
   - 1-3. 何を売るべきか？

2. **「提案」とは？**
   - 2-1. 「見積もり」とは？（振り返り）
   - 2-2. 「見積もり」と「提案」の違い
   - 2-3. ソリューション構築

3. **プロポーザルマネジメント**
   - 3-1. 「提案管理」のフェーズ/プロセス
   - 3-2. 「提案管理」の体制/役割
   - 3-3. 当社の社内フロー

4. **まとめ**

5. **参考文献**

---

## 1. 我々は「何を売っている」のか？

### 1-1. システム開発企業の業態

#### 「我々はどこにいる」？

我々は日本の産業界の中のどこに位置しているのでしょうか？

日本標準産業分類では、当社は恐らく情報通信業（大分類 G）─情報サービス業（中分類 39）─ソフトウェア業（391）に分類されます。しかし、この分類にはあまり馴染みがないかもしれません。

日常会話等でもう少し馴染みのある「業界」という区分で考えてみると、一般的には「IT業界」「SI業界」などと呼ばれることが多いでしょう。

※「業界」は、なんらかの規格により厳密に定義された用語ではないので、曖昧な部分が残る区分です。

**業界の位置づけ：**
- **IT業界**：IT機器を製造するハードウェアメーカーやソフトウェアプロダクト/サービスベンダー、その他諸々が含まれる
- **SI業界**：特に企業向けにITに関するコンサルティングや受託開発、パッケージの提供などを行っている企業が含まれる
- **当社の位置**：恐らく当社はSI業界のソフトウェア業・受託開発ソフトウェア業に分類される

#### 「システム開発企業」色々

企業向けシステム開発サービスを提供している企業には、提供サービスとその業態の呼称として、日本国内のIT業界内で習慣的に行われている区分があります：

**主な業態分類：**
- **SIer（システムインテグレーター）**：当社は現在これを標榜している
  - システム開発
  - アプリケーション開発
  - ネットワーク構築
  - システム保守・運用

- **コンサルティングファーム**：当社は元々はこれだった
  - コンサルティング
  - ※日本国内のコンサルティングファームは、外資の場合でも、概ね半分程度は通常のSI事業を行っている

- **独立系ISV**
  - プロダクト開発

- **SES企業**
  - システム人材派遣

- **ソフトウェアハウス/NIer**
  - システム保守・運用

### 1-2. 我々の「商品」とは

#### SIerとは

当社は「SIer」を標榜する企業です。SIerとは「お客様に対してコンサルティングから設計・開発・保守に至るまで一貫したサービスを元請として行う企業」のことです。

従って、お客様は当社にこれら全ての提供を期待します。また、当社の経営計画を見ても、経営戦略上、SIer足るための各サービス要素を網羅しようとしているのがわかります。

**経営戦略における事業領域：**
- 営業
- 海外
- プロダクト
- SI
- アプリ受託
- データ
- インフラ
- クラウド
- **＋コンサルティング**

コンサルティング能力に関しては、まずは3年後を目処に組織の整備や、各領域でのコンサルティングスキル向上を目標として設定している。

**重要なポイント：我々は組織として、これら一貫したサービスを❝売らなければならない❞**

#### 【閑話】当社は「元請け」？「一次請け」？

SIerとは元請けの企業のことですが、実はこの下請けに対する呼び方が、何故かIT業界だけが世間一般の呼び方とずれています。

**世間一般の呼び方：**
```
お客様
 ↓
元請け（プライム）
 ↓
一次請け（下請けのトップ）
 ↓
二次請け（孫請け）
```

**IT業界の呼び方：**
```
お客様
 ↓
元請け（プライム）= 一次請け？？？
 ↓
二次請け（下請けのトップを「二次請け」と呼んでいる）
 ↓
三次請け（孫請け）
```

この業界の内部にいると気付かないのですが、この点を知っておかないと、契約や法律関係の文章を読んだ時に大きく勘違いしてしまう可能性があります。

#### 「契約」の観点で見てみると

我々がお客様に売っているものを、どのような契約を行っているかという観点で見てみます：

| 契約 | 売るもの | 説明 |
|------|----------|------|
| 請負契約 | 完成したシステム | 基本的には「モノ」を売る契約。ベンダー側にモノの完成責任があり、ITプロジェクトの場合はプロジェクト管理義務もある |
| 委任契約 | 事前に業務内容を取り決めた役務 | 請け負う業務内容を契約書に定義し、それを遂行する契約 |
| 準委任契約 | 事前に作業内容が決まっていない役務 | 請け負う業務内容を特に定めずに、様々な業務を遂行する契約 |
| 派遣契約 | 社員では出来ない特殊な業務 | 就労先の社員では出来ない、専門技能が必要な特殊な業務の遂行を引き受ける契約 |
| サブスクリプション契約 | 商品やサービスの利用権 | いわゆる製品のライセンス契約の例。一定期間での、製品の利用権を売る契約 |

#### 売っているのは「モノ」だけ？

実際の状況を見ると、当社で最も多い「商品」は「システム開発の受託」です。

この時の販売単位を、我々は普段「案件」と呼び、受注後は「プロジェクト」と呼びます。プロジェクトは複数種類の契約から成り、その中で様々な「商品」を売ります：

- お客様の業務の支援
- プロジェクト管理などの管理作業
- 「完成したシステム」の物販
- 機器やプロダクト等の物販
- サブスクリプション

これら全体を考えた場合、我々が売っているものとは何なのでしょうか？

**疑問点：**
- 「システム」って何？
- 「要件定義」って何を売ってるの？
- ドキュメントとかソースコードも売ってる？
- 実際の所、お客様は何を買おうとしてる？

#### 我々が売るものは「ソリューション（解決策）」

つまり、我々が売っているものは、ソフトウェアやハードウェア、ドキュメントやソースコードのような資源一式だけではなく、様々なサービスや、更には、それらをどう組み合わせ、お客様の問題・課題を解決するためのアイディアを売っているのだとも言えます。

※これらが全てお客様側で検討・策定済みの場合、その案件は実質的には労働力を売る案件であり、請負契約ではなく準委任契約を行うべき案件です

**つまり我々は実際には「モノ」ではなく、お客様に対して「ソリューション（解決策）」を売っているのです。**

**ソリューションの構成要素：**
- S/W, H/W, その設計ノウハウや知見
- ドキュメントやソースコード等の運用資源一式
- お客様の問題・課題の解決策やその計画
- プロジェクトマネジメントを含め、ソリューション一式

### 1-3. 何を売るべきか？

#### お客様にとって最大の付加価値を持つ課題は？

企業が抱える課題のうち、その解決策に対し、お客様が最も大きな付加価値を見出すものはなんでしょうか？それは**事業課題**であり、つまりは経営者の皆さんが抱えている課題です。

**課題の優先順位：**
1. **事業課題**の解決が最優先（最も価値が高い）
2. **業務課題**の解決
3. **機能課題**の解決（最も価値が低い）

我々の「お客様」は情シスの担当者様ではありません。お客様の業務部門の皆様であり、利益部門の皆様であり、或いはその背後にいる経営者の方々です。

**企業組織と課題の関係：**
```
経営
 ↓
利益部門  ← 真なる課題
 ↓
業務部門・情シス  ← お客様の要求
 ↓
企業システム
```

RFPに対する要求分析の目的は、真なる課題である事業課題の発見です。

#### 我々は「事業課題の解決策」を売るべき

従って、我々は、モノでもサービスでもなく、常に事業課題の解決策（ソリューション）を売るべきです。それが最も付加価値が高く、それが最も利益の出る「商品」です。

**現在の当社の商品展開：**

当社の経営戦略において：
- **設計・開発** → 売上増大：「今よりも多く売る」なら売上は常に増える
- **保守** → ストックビジネス化：単年度で見た場合の利益が徐々に向上する。売上も安定する
- **サブスクリプション** → ストックビジネス化
- **コンサルティング** → 利益率向上：高付加価値商品なので利益率が向上する

**今の当社に足りないものは？** → コンサルティング能力の強化

#### 課題解決策＝ソリューション

当社がソフトウェアハウスだった頃は、主に「システム開発」とSES契約による「システム人材の派遣」を売っていました。

しかしながら、現在の当社はSIerであり、経営目標として利益率（粗利）の向上を掲げています。もちろん従業員である我々も、会社員である限りは、利益を追求し多くの報酬を手に入れたいと願うのが自然なことです。

※会社というのは、その定義からして、人が集まり力を合わせて利益を追求するための団体です

従って、我々は経営課題の解決策を売るべきであり、「提案」では、**経営課題の解決策を「提案」すべき**です。システムやプロダクトやサービスは、あくまでもその素材であり、最も重要なのは「ソリューション」です。

**優れたソリューションは、プレゼンテーションで輝く。**

---

## 2. 「提案」とは？

### 2-1. 「見積もり」とは？（振り返り）

#### 「見積もり」とは一種のツールである

本格的な「提案」の話に入る前に、一度「見積もり」とは何かの振り返りをしておきます。

まず第一に、「見積もり」とは**分析ツール**であり、お客様からの引き合いが発生直後から、何度も何度も繰り返し行うものです。特に不確実性が高い段階では、見積もりとはシステム規模の取り得る幅を知るためのものであり、一種のものさしです。

**期待精度の幅：**
見積もりの目的は、この「幅」を知ること。特定の値を「当てる」ことではない。（そんなことは原理的に出来ない）

```
50人月 ●--------● 100人月
       ↑        ↑
   リスクが大きい  利益が大きい
     可能性      可能性
```

#### 「見積もり」には様々な種類がある

一口に「見積もり」と言っても、案件の様々な段階に応じ、様々な種類のものがあります。種類によって、見積書の目的や、法的な意味合いも全く違ってきます。

**お客様側のフェーズと見積もりの種類：**

```
【お客様】
企画 → フィジビリティ → 企画成立 → 要件定義 → 要件定義後
                           ↑提案
```

**契約前提ではない見積もり：**
- 超概算～概算見積？（一般用語）
- 参考見積書（官公需用語）
- 下見積書（官公需用語）
- 超概算～概算見積（PMBOK）

**契約前提の見積もり：**
- 予算見積（PMBOK）
- 確定見積（PMBOK）

契約を前提とし、法的に有効な見積もり。契約書の一部とみなされるため、厳密な前提条件や有効期限などを明記しなければならない。

#### 見積もりには「期待精度」がある

見積もりには、案件の不確実性に応じて、何段階かの期待精度があります。原理的には、不確実性が高い段階では見積もりが「当たる」ことはありません。

| 見積もり | 期待精度（PMBOK） | FP法 | 期待精度（統計実績ベース） |
|----------|-------------------|------|---------------------------|
| 超概算 | -50～+100% | FP試算法（NESMA法） | ±50% |
| 予算 | -10～+50% | | |
| 確定 | -5～+10% | FP概算法（NESMA法） | ±10% |
| 計画 | | IFPUG法 | ±5% |

**我々が「提案」するのは予算見積のタイミング。なので、最も良い状態でも±50%幅の誤差が出る。**

#### 「見積もり技法」には適用時期がある

見積もり技法には、それぞれに原理的な期待精度があり、適用すべき時期が異なっています。従って、時期に応じて適切な技法を使用する必要があります。

**技法と適用時期：**
- **企画段階**：オブジェクトポイント法、FP試算法（NESMA）
- **要件定義段階**：FP概算法（NESMA）、標準値法、ユースケースポイント法
- **基本設計段階**：IFPUG法、標準値法
- **詳細設計以降**：COCOMO II（プロジェクト開始後の進捗管理が目的の技法）

### 2-2. 「見積もり」と「提案」の違い

#### 「提案」とは？

「提案」という言葉を辞書で引くと「議案や意見を提出すること。また、その議案や意見」及び「ある問題に対する主張・考え、心に思うところ」「自分の思うところを述べて、人の過ちをいさめること」とあります。

つまり我々にとっての提案とは、
**「お客様の企画に対し、プロとしての意見や主張を提示し、場合によっては企画の過ちをいさめること」**

です。お客様の企画（RFP）に対し、ただ漫然と見積もり情報を記述することは「提案」ではありません。

**提案のプロセス：**
```
お客様の企画（RFP）
（問題・課題・誤り・不足）
        ↓
当社によるRFPの分析、独自のソリューション構築
        ↓
提案書（ソリューション）
```

- 受注のためには独自性（差別化）が重要！
- お客様の企画に誤りや不足があったら正さなければならない

#### 「見積もり」はお客様の期待通り、「提案」は期待を上回る

つまり、行為としての「見積もり」はお客様の期待通りに、その費用を算出することです。なので、当然ですが安い方が喜ばれます。

対して「提案」は、お客様の期待を上回るアイディア（意見や主張）を提示することです。なので、より付加価値が高い提案が喜ばれ、金額が安いかどうかはあまり関係しません。

**「提案」という名の「見積もり」の例：**

お客様の要求【RFP】：
1. 機能A
2. 機能B
3. 機能C
4. 非機能

**各社の提案（実際には見積もり）：**
- A社提案：1. 機能Aを実現します 2. 機能Bを実現します 3. 機能Cを実現します 4. クラウドAを提案します
- B社提案：1. 機能Aを実現します 2. 機能Bを実現します 3. 機能Cを実現します 4. クラウドBを提案します
- C社提案：1. 機能Aを実現します 2. 機能Bを実現します 3. 機能Cを実現します 4. クラウドCを提案します

→ 各社大きな違いは無い。普通は全ての会社が「要求は全て満たします」と回答してくる → それだけでは差別化要素は無い。

**真の「提案」の例：**

要求分析後の提案：
1. 機能Aを実現します
2. 機能Bは不要です
3. 機能Cは外部プロダクトを利用します
4. Microsoft 365 だけで実現します
5. 今後○○システムとの連携を企画すべきなので、今回は連携を踏まえたアーキテクチャを選定しました

→ 必要に応じてお客様のアイディアを否定し、より良いアイディアを提示。お客様の見落としも解決 → 他社との差別化。

#### 「ソリューション」ベンダー

つまり当社は、ソフトウェアでもサービスでもない「ソリューション」を提案するベンダーになるべきであり、明確に他社とは異なる、差別化された提案を行う「ソリューション」ベンダーであるべきです。

**お客様の要求「壁に穴を開けるためドリルが欲しい」に対し…**

**「モノ」を売るベンダー：**
- A社提案：（電動ドリルの画像）
- B社提案：（別の電動ドリルの画像）
- C社提案：（大型掘削機の画像）

→ これらは全て「ドリルの見積もり資料」

**「ソリューション」ベンダー：**
- 真なる課題提示 ＋ 当社の提案（エアコンの画像）

→ 完全に差別化され、お客様のアイディアを上回る、顧客満足の大きい提案

### 2-3. ソリューション構築

#### ソリューションとは

我々がお客様に提示する「ソリューション」とは、お客様の真なる課題の解決のため、業務改善アイディアからサービス、ナレッジ、そしてインフラやアプリケーションから構成されるシステムまで、SIerが提供出来るあらゆるものを組み合わせた解決策のことです。

そしてそれはビジネスである限りは、顧客満足を得るものでなければならず、明確に受注を狙って構築されなければなりません。

**ソリューション構築のフロー：**
```
お客様の要求 → 何故？ → お客様の真なる課題 → 満足 → 受注
                    ↑
               解決策 solution
            （業務改善、サービス、ナレッジ、
             コスト削減策、アプリケーション、インフラ）
```

#### 顧客満足を「創る」

商品を確実に売るためには顧客満足を創らなければなりません。そして顧客満足とは、事前期待と実績評価の比率をコントロールする期待値コントロールと、明確に差別化されたソリューションの２つの要素が揃って初めて得られるものであり、戦略・作戦・戦術をもって創り上げるものです。

**顧客満足の法則：**
- 事前期待 ＜ 実績評価 → **満足** → **受注**
- 事前期待 ≒ 実績評価 → 競合に負ける可能性
- 事前期待 ＞ 実績評価 → **失注**

**顧客満足を、明確に狙い、意図して、この状況とソリューションを創り上げなければならない。**

#### 「差別化」とは

差別化とは、競合他社と同じ商品に対し、他社には無い付加価値を持たせることです。提案においては、他社が提示出来ない、高い付加価値を持ったソリューションを創り上げることで、お客様がそれを選択せざるを得ない状況を作り出し、より高い金額での受注を目指すことです。

**差別化の要素：**
- **値下げは差別化ではない**
- 他社とは別のものを売る
- 顧客にとっての付加価値とは何を売るか？
- システムではなくソリューション
- 顧客の予想を上回る

**このような、差別化されたソリューションを創り上げる力を「提案力」と呼ぶ。**

---

## 3. プロポーザルマネジメント

### 3-1. 「提案管理」のフェーズ/プロセス

#### APMPプロポーザルマネジメント

ここまで示して来た通り、特に大型案件での提案（ソリューション）構築というのは、長い期間と多くの手間暇、広範な知見が必要なもので、それ自体が小さなシステム開発プロジェクトにも匹敵します。そのため、本格的な提案には、ITプロジェクトにおけるプロジェクトマネジメント同様の「プロポーザルマネジメント（提案マネジメント）」という活動が必要になります。

今後本セミナーでは、国際団体であるAPMP（Association of Proposal Management Professionals）が提唱するマネジメント体系をベースに、当社向けにテーラリングした例を紹介して行きます。

**参考：**
- APMP日本支部：https://www.apmp.jp/
- 書籍「受注を勝ち取るための外資系「提案」の技術」

#### プロポーザルマネジメントの「フェーズ」

プロポーザルマネジメントの「フェーズ」は、我々から見た場合、お客様側のフェーズに対応して定義されます。この期間に実施されるプロセスが、共通フレーム2013における企画プロセスであり、いわゆる超上流と呼ばれる活動です。

**フェーズ対応図：**
```
【企画モデル】                      【EXE標準工程モデル】
ユーザープロセス                     ベンダープロセス
課題認識 → 情報収集 → 要望固め → 提案依頼 → 要件定義 → 基本設計 → ...
    ↓      ↓        ↓        ↓
   RFI    RFT      RFP     提案書
                              ↓
                         開発プロジェクト

【超上流】
ベンダープロセス：戦略策定 → 提案計画 → RFP受領 → 骨格作成 → 提案書作成
```

この期間におけるベンダー側の活動を定義したものがプロポーザルマネジメント。

**重要な注意点：**
本格的なプロポーザルマネジメントにおいては、RFP発行後に提案に取り組む、というのは失敗事例に分類されます。つまり、大型提案においては、そのはるか以前から顧客へのアプローチや適切な社内リソースの割当を、計画的に行う必要があるということです。

#### プロポーザルマネジメントの「プロセス」

各フェーズにおける実行プロセスはこのようになります。全体マネジメントはPpMの責務で、ソリューション作成はPjMの責務です。

**プロセス詳細：**

1. **戦略策定**
   - 担当営業、プロポーザルマネージャー（PpM）による顧客PJの情報収集、理解と自社優位性の導出
   - 場合によっては担当営業がPpMなので責任重大！
   - この段階で技術や製品の有識者にも相談すると良い

2. **提案計画**
   - PpMによるプロジェクトマネージャー（PjM）の選任と体制、役割分担、提案スケジュールの作成

3. **キックオフミーティング**
   - まずは提案計画の共有
   - 提案メンバーのスケジュールも確保

4. **骨格作成**
   - PpM、PjM等によるストーリーボーディング（提案骨格作成）、及びメンバー周知
   - 自社優位性（コンセプト）に基づき提案の骨格（ストーリー）を作成
   - ここまでが「提案力」で最も重要な部分

5. **提案書作成**
   - ドラフト作成、レビュー、内部承認手続き
   - コンセプトとストーリーが決まれば、あとはメンバーで分担して提案書を作成
   - 内容にはPjMが責任を持ち、提案書として全体をまとめるのがPpM

### 3-2. 「提案管理」の体制/役割

#### プロポーザルマネジメントに必要な役割（ロール）

提案においてプロポーザルマネジメントを実施するためには、最低限以下3つの役割（ロール）を担当する人がいなくてはいけません。以下のロールは、プロジェクトマネジメント同様、基本的には兼任すべきではありません。それぞれの責務を持つ人を、適切に確保する必要があります。

| 役割（ロール） | 果たすべき責務 |
|----------------|----------------|
| **担当営業** | その顧客に対する複数の提案活動の最高責任者。企画の速やかな検知、お客様からの情報収集、対象顧客に対する自社の競争優位の確立や差別化要素の明確化。それらをもとにした期待値コントロールの実行。顧客に対する当社の営業活動全体に責任を負う。<br/>※加えて、実務的には文書品質に対する責任も負う。技術者は往々にしてビジネス文書の作成が苦手である |
| **プロポーザルマネージャー** | 特定の提案における提案活動のリーダー。提案スケジュールの作成や体制構築、提案メンバーのアサインなど「提案プロジェクトにおけるプロジェクトマネージャー」的な活動全般を行う。その提案活動の円滑な実施の責任を負う。<br/>※担当営業やラインマネージャーが兼任する場合もある |
| **プロジェクトマネージャー** | その案件を実際に受注した場合のプロジェクトマネージャー。提案内容に応じて最適な人材をアサインする。機能・非機能（つまり業務にも技術にも）精通した人材である必要があり、提案内容（品質）に対する責任を負う。<br/>※プロポーザルマネージャーが兼任する場合もあるが、通常は望ましくない |

#### プロポーザルマネジメントの体制

必要な役割を踏まえ、特定の提案の際に必要な体制例を以下に示します。

提案活動全体を統括するプロポーザルマネージャー（PpM）が置かれ、提案計画と提案活動全体をマネジメントします。その配下に、エンジニアリングの観点も備えながらソリューション及びプロジェクト計画を「開発」するプロジェクトマネージャー（PjM）が配置されます。

※つまり、役割で見た場合、開発プロジェクトにおけるプロジェクトマネージャー役がプロポーザルマネージャーであり、開発リーダー（エンジニア）役がプロジェクトマネージャーです

**体制図：**
```
担当営業
    ↓
プロポーザルマネージャー（PpM）
    ↓
プロジェクトマネージャー（PjM）
    ↓
提案作成に必要な各専門家
├── 業務機能担当    ├── プロダクト担当
├── インフラ担当    ├── ミドルウェア担当
└── 保守担当
```

**役割説明：**
- **提案活動の最高責任者は担当営業**（対象顧客に対する永続的な窓口）
- **PpMは担当営業が兼ねる場合もある**。提案活動におけるプロマネ
- **PjMは提案時には専門家のリーダー**。原則として、受注後のPjM
- **専門家メンバー**：通常はPjMと同組織のメンバーを中心にして集め、受注後も実際に担当するメンバー。ただし、提案のストーリーボード次第ではPpMが他組織から専門家を招集することもある

### 3-3. 当社の社内フロー

#### 現在の当社内の提案フロー（2024/07）

現在、当社内でも、提案に関する社内フローが徐々に整備されています。それをプロポーザルマネジメントの観点で見ると、概ね以下のようになっています。それぞれのプロセスの価値を理解するとともに、不足しているプロセスに関しては各組織独自に補完する必要があります。

**当社の提案フロー：**
```
プロポーザル（提案）マネジメント
├── 戦略策定 → 提案計画 → RFP受領 → 骨格作成 → 提案書作成
├── APS【各本部】
├── APS【推進プロジェクト】
├── 局面レビュー【各本部】
├── 品質管理レビュー【品質管理セクション】
├── 役員レビュー【社長・管掌役員】
├── 経営会議付議【経営会議】
└── 取締役会決裁【取締役会】
```

**現状の課題と特徴：**
- **時間不足により、初期分析～骨格作成が明示的に行われない案件が多い**
- 戦略策定～提案計画の活動が特に定義されておらず、なんとなく担当営業がPpM的な役割も兼任する
- PjM以下提案メンバーは、特にルールは無いが、たまたま提案担当する本部の本部長・部長・次長級がPpMとPjMを兼ねるような役割を果たしている様子
- 推進プロジェクトが存在する顧客に関しては、プロポーザルマネジメントの初期活動に近い活動が行われている
- 提案書ドラフト作成後のフローはかなり整備されている。ただし、現状辞退判断が遅れるため、無駄な提案コストの発生は十分には抑止されていない
- 1億円以上で経営会議、5億円以上で取締役会に諮る必要が出てくる（詳しくは『職務権限規程』を参照）

#### 提案・見積もりに関する社内手続き（2022～）

当社内のインスペクションモデルを示します。見積もり/提案作成は、最後にこのような手続きが入る事を踏まえ、十分余裕を持って計画する必要があります。

**手続きフロー：**
```
提案
├── 3千万円未満 → お客様に提出
├── 3千万円以上 → 品質管理レビュー（1～3営業日）→ お客様に提出
├── 5千万円以上 → 品質管理レビュー → 役員レビュー（2～4営業日）→ お客様に提出
└── 1億円以上 → 品質管理レビュー → 役員レビュー → 経営会議への付議（毎週木曜日）→ お客様に提出

請負発注（再委託）
└── PJ計画レビュー（各本部/ExecTORA）→ 発注先与信 → 発注
```

**重要な注意点：**
- 提案の一部に請負契約での再委託が含まれる場合は、発注先が作った見積もり・提案のレビューも必要
- 1億円以上で必要な経営会議は週次、5億円以上で必要な取締役会は月次で行われるので、自由にスケジュールできない
- 暦を見て、十分余裕のあるスケジュールを組む必要がある

---

## まとめ

- 当社はIT業界内の、特にSI業界と呼ばれる領域で、**SIerと呼ばれる業態を標榜**している。

- SIer が売っているのは「モノ」でも「サービス」でもなく、それらを駆使した**顧客課題の解決策（ソリューション）**である。

- **「見積もり」と「提案」は全く異なる行為**。「提案」とは**ソリューションを創る行為**である。

- 受注のため、提案の際には**期待値コントロールを実施**しなければならない。

- 受注のため、ソリューションは**他社と差別化**されたものでなければならない。

- ソリューションを創るためには、小規模なプロジェクトマネジメント同様に**プロポーザルマネジメント体制と計画が必要**である。

---

## 参考文献

- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』（ダイヤモンド社）
- 『ITエンジニアの必須スキル 顧客に響くシステム提案メソッド』（日経BP）
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』（早川書房）
- 『プロジェクトガイドライン』（システムエグゼ プロジェクト品質保証委員会）

---

## 【QM】アーキテクト教育・第七回v5.3.md

## 第七回 設計手法/技法/デザインパターン - アーキテクト教育セミナー

**Copyright(c) 2019-2024 SystemEXE Inc. All rights reserved.**  
相田一英 2024/09/05

## 目次

### 1. 「設計」とは
- 1-1. 「仕様」と「設計」の違い
- 1-2. 「機能」と「非機能」
- 1-3. 機能設計
- 1-4. 基本設計/詳細設計

### 2. 設計手法/技法
- 2-1. データ設計
- 2-2. 構造化設計とモジュール分割
- 2-3. オブジェクト指向設計
- 2-4. アプリケーションアーキテクチャ

### 3. デザインパターン
- 3-1. パターンランゲージ
- 3-2. GoF23
- 3-3. エンタープライズアーキテクチャ
- 3-4. クラウドデザインパターン

まとめ  
参考文献

---

## 1. 「設計」とは

設計とは、抽象的なアイディアを具象化するために、その形状や構造を図面等に表す事で、検証や検討を行う作業の事です。人が行う業務（機能）は抽象的なものであり、業務で扱っているデータやその流れ、ビジネスルールもまた抽象的です。我々はそれらを具象化するため、様々な手法/技法を用いて「設計」します。

### 1-1. 「仕様」と「設計」の違い

#### 仕様を定義し、仕様に基づき設計する

我々のビジネスでは、通常はユーザーによる要件定義が行われ、そこで仕様（spec）が定義されます。

仕様とはいわゆるカタログデータであり、自動車で言えば、形状や型式、素材、機能、性能など製品としての特徴を示すもので、つまり仕様書はユーザー向けのドキュメントです。

我々は定義された仕様に基づき、それを具象化するための設計を行います。

**設計の流れ:**
```
現実の業務 → 仕様 → 設計 → 具象化されたシステム
[ユーザー語の領域] [システム語の領域]
```

#### 開発工程で見る仕様と設計

仕様/設計と開発工程の関係は以下のようになります。仕様はユーザーが企画～要件定義を通して（ユーザー語で）定義します。それを元に我々ベンダーが基本設計～詳細設計を通して具象へと変換（システム語へ翻訳）します。

**EXE標準工程モデル:**
```
企画(要求定義) → 要件定義 → 基本設計 → 詳細設計 → 製造+UT → ...
```

**共通フレーム98モデル:**
```
要件定義 → 基本設計 → 詳細設計 → 製造 → 単体テスト → ...
```

### 1-2. 「機能」と「非機能」

#### 仕様や設計の対象としての「機能」と「非機能」

システムにおける仕様定義や設計の対象は、大きく「機能」と「非機能」に分けられます。

**「機能」** とはユーザー業務における業務機能の事であり、その対象は人の振る舞いです。システム化とは、人とシステムの振る舞いを一体として「業務機能」を実現する事です。

**「非機能」** とは業務とは直接関係しないシステム独自の仕組みです。つまり、機能とは直接関係しないものの、機能を実現するために備えなければならない仕組みや能力の事です。

**設計対象の分類:**

| 分類 | 仕様 | 設計 |
|------|------|------|
| 機能 | 機能仕様 | 機能設計（画面/帳票、処理フロー、処理記述 etc...） |
| 非機能 | 非機能仕様 | 非機能設計（アーキテクチャ、コンポーネント、開発フレームワーク etc...） |

#### 機能/非機能と顧客満足

機能/非機能はどちらも重要な設計対象ですが、お客様から見た重要度には違いがあります。

**機能の特徴:**
- 理解可能
- 期待値コントロール可能
- 期待を上回れば加点評価

**非機能の特徴:**
- 理解が難しい
- 期待値コントロールが難しい
- 障害が発生した時に減点評価

**重要なポイント:**
- 原理的に、機能の方が顧客満足度に貢献しやすく、重視されがち
- ただし非機能が軽んじられると、折角の加点が減点で相殺されてしまう
- **どちらも重要**

### 1-3. 機能設計

#### 「機能設計」の源流は業務フローにあり

システムが実現する「機能」とはユーザーにとっての業務機能であり、機能設計の始まりはユーザー業務の分析にあります。つまり「機能設計」の源流は業務フローにあります。

要件定義の際に、現在の業務フロー（As-Isモデル）からシステムを利用した新たな業務フロー（To-Beモデル）を作成します。**機能設計の本質は業務フロー設計**なのです。

**機能設計のプロセス:**
```
ユーザープロセス → ベンダープロセス
企画 → 要件定義 → 機能設計 → 基本設計 → 詳細設計

As-Isモデル → To-Beモデル(&機能一覧) → 機能(論理)設計 → 機能(物理)設計
```

#### 「画面から設計する」難しさ

比較的小規模な開発の場合、業務フローを作成せずいきなり画面仕様の定義から行う事があります。このようなプロセスが成立するのは業務フロー≒DFDという極めて単純・素朴な情報系システムの場合だけであり、一定規模以上の基幹システム/業務システムでは成立しません。

逆に言えば、一定の規模のシステムをきちんと設計するためには、**業務フロー作成スキルが必須**だと言う事です。

**業務のモデル化の重要性:**
- 「業務」は抽象的で複雑な対象
- お客様とのコミュニケーションのためにもモデル化（図解）によるアプローチが必要

#### アクティビティ図（Activity Diagram）

ごく簡単な業務フローであればUMLアクティビティ図で記述する、という方法もあります。

**アクティビティ図の基本要素:**
- 開始/終了
- アクティビティ
- フォーク（非同期）
- フロー
- メッセージ、データ

#### 機能設計の目的 ─ お客様の生産性向上

機能設計で最も重要な（そして忘れがちな）事は、その機能を実現する事でお客様の生産性が向上しなければならないという点です。

**「生産性」と「効率」の違い:**
- 一部の効率を向上させても全体の生産性には影響しない事も多い
- 逆に全体の生産性を低下させる場合もある
- **「局所最適化」ではなく「全体最適化」を考える必要がある**

**例:** 保険申込書の自動化
- 申込書入力が10倍高速化 → 入力オペレーター（派遣）が半数に → 人件費削減
- しかし、同じ期間で審査しなければならない保険契約が10倍に → 審査部門の担当者（正社員）数を倍に → 人件費大きく増大
- **結果：派遣社員が減って正社員が増え、全体としての人件費支出が増大 → 生産性は低下**

### 1-4. 基本設計/詳細設計

#### 工程名称の原典 ─ ADSG

ウォーターフォール型開発の工程は、現場歴史的経緯や文化に応じ様々な呼称で呼ばれます。その原典として知られるのが、IBMが策定したADSG（Application Development Standardization Guide）です。EXE標準工程モデルも、基本的にはこのアイディアを継承しています。

**工程モデルの比較:**

| EXE標準工程モデル | 要件定義 | 基本設計 | 詳細設計 | 製造+UT | 機能単体テスト | 結合テスト | システムテスト | ユーザーテスト |
|-------------------|----------|-----------|-----------|----------|----------------|------------|----------------|----------------|
| ADSG派生モデル | 基本設計 | 詳細設計 | 製造 | 単体テスト | 結合テスト | 総合テスト | 運用テスト | - |

#### 基本設計（Basic Design/BD）

基本設計工程とは、**論理レベルの機能設計**（Function Design）、**論理レベルのデータ設計**（Data Design）、そしてそれらに基づく**外部仕様**（External Specification）の定義を行う工程です。

さらに、並行して**アーキテクチャ設計**（Architecture Design）を行うのが現代では一般的です。

**基本設計の構成要素:**

| 分類 | 要素 | 説明 |
|------|------|------|
| 機能 | データ設計（DD） | システムの基本的な情報として、論理的な設計を行う |
| 機能 | 機能設計（FD） | 画面の見た目を設計する |
| 機能 | 外部仕様（ES） | 外部「仕様」という呼称は、要件定義以前の伝統的なもの |
| 非機能 | アーキテクチャ設計（AD） | 開発フレームワークの構築を行う場合はもっと前方から着手し、基本設計工程中に製造を終える方が良い |

#### 要件定義「以前」の基本設計

「要件定義」工程が誕生する以前の工程を、共通フレーム98のプロセスベースで見てみると、当時の基本設計工程は要件定義を含み、要件定義書に相当するシステム概要定義書というドキュメントを作成するとされていました。

つまり現在でも、お客様の要件定義が不足している場合は同様のプロセス設計が必要です。

**従来の基本設計プロセス:**
- システム概要定義プロセス → システム概要定義書（当時の要件定義書）
- システム設計プロセス → システム設計書（基本設計書）
- プログラム設計プロセス → プログラム設計書（詳細設計書）

#### 詳細設計（Detail Design/DD）

詳細設計では、基本設計で行った論理設計の結果を受け、実際のコンポーネント/モジュールの物理構造を決定・命名し、データストアの物理構造を決定・命名し、アプリケーション側のデータとデータストア側のデータの物理的なマッピング（及び変換）を定義します。合わせて非機能処理（DBコネクション/トランザクション制御、例外処理、ロギング等）を具体的に設計します。

**詳細設計の構成要素:**

| 分類 | 要素 | 説明 |
|------|------|------|
| 機能 | コンポーネント設計 | システムの詳細つまり物理構造を決定してゆく |
| 機能 | モジュール設計 | クラスやメソッド、DBテーブルやデータファイルの名前や物理構造を決定し文書化する |
| 機能 | DBテーブル設計 | - |
| 機能 | データファイル設計 | - |
| 機能 | データマッピング設計 | - |
| 非機能 | 非機能処理設計 | 「機能」レベルの処理記述では出てこない、DB接続制御や例外処理などの非機能処理を定義する |

#### 開発フレームワークによる詳細設計の共通化

現代では、ソフトウェアフレームワークが提供するDI/AOPの仕組みをもとに、非機能処理の高度な共通化が可能です。また、オブジェクト指向設計文化から生まれた様々なデザインパターンを適用する事で、コンポーネント/モジュール構造も共通化（パターン化）する事が出来ます。

**フレームワークによる共通化効果:**
- 開発フレームワークの構築により、共通化部分の詳細設計書記述を共通化する事ができる
- 「開発フレームワーク設計書」により詳細設計書の一部を代替可能

#### 詳細設計は省略出来る？

ごく小規模なアプリケーション開発では「詳細設計書」の作成を省略する事がありますが、それは詳細設計をやらないという意味ではありません。それは「詳細設計の結果をソースコードに書く」という事であり、やはり詳細設計は必要です。

詳細設計「書」を省略する場合は、プログラミング作業を大きく２段階に分けます：

**1. スケルトン実装**
- クラスを作成し、メソッドのシグニチャ（関数名、引数/戻り値）を定義する
- 中身が空のメソッドを書く事で、そのI/Oを決定する
- クラスコメントとメソッドコメントを記述
- これをHTML出力（Javadoc等）して詳細設計書の代わりとする

**2. 実装**
- いわゆるコーディング
- 既に主要クラスとメソッドは全て宣言されているので、中身の処理とテストコードを作成する

> **注意:** 本来「プログラミング」という用語は設計の概念を含み、この全体を意味します

#### シーケンス図の記述

Webシステムは本質的に非同期分散システムです。特にJavaScript処理が多くなった場合、非同期であるJavaScript、非同期であるHTTP、非同期であるDBコネクションで構成されるので、詳細設計の際にきちんとシーケンスの設計を行っておく必要があります。

**非同期分散システムの要素:**
- JavaScript（ajax含め非同期実行可能）
- Web Server（リバースプロキシのサーバキャッシュにデータが永続化される場合もある）
- Application（リクエストに応答するThreadは個々独立）
- DB（非接続型なのでDB接続はVisitに対して非同期）

---

## 2. 設計手法/技法

設計には様々な手法/技法が存在します。また、IT技術の急速な進化に伴い設計手法はより多様化し、個々の手法に応じた新たな技法が生まれたりしています。

ここでは設計手法の歴史を俯瞰しつつ、現在のエンタープライズ案件の状況とそれに即した手法/技法を解説します。

### 2-1. データ設計

#### システムの「データ」を設計する

昨今の企業向けシステム開発では、多くデータ中心アプローチ（DOA）が採用されています。DOAでは自然なデータモデルを実現するため、データ仕様の分析からデータ構造およびデータフローの設計を、処理（ビジネスロジック）の設計に先んじて行います。

**DOAの設計フロー:**
```
企画 → 用語集作成 → 項目定義 → 概念ER → 論理ER → 物理ER → テーブル定義
      ↓            ↓         ↓        ↓        ↓
      業務フロー   → 概念DFD → 論理DFD → 物理DFD → 論理エンティティ定義
                                              ↓
                     要件定義 → 基本設計 → 詳細設計
                     機能仕様 → 機能設計 → 処理設計
```

#### 「データストア」と「データベース」

システムがデータを保持する場所（或いは処理）をデータストア（data store）と呼びます。

**データストアの種類:**
- ファイルシステム（データファイルやプロパティファイル等）
- メッセージキュー（MQ）
- キーバリューストア（KVS）
- データベース（DB）

概念データフローの設計後、どのデータをどの時期にどのデータストアに永続化すべきかを設計（状態管理設計）します。これは基本設計におけるシステムアーキテクチャ設計への入力情報となります。

#### より自然なデータモデル

DOAに基づくデータ設計においては、より自然なデータモデルの構築を心がけなければいけません。

**モデリングのフロー:**
```
項目定義書 → 要件定義 → 基本設計
(用語集で代替する場合も) ↓        ↓
                      概念ER   → ER図
                      (自由形式) (論理ER)
                      ↓        ↓
                      概念DFD  → DFD
                      (自由形式) (論理)
                      ↓
                      ドメインモデル
                      (ユースケース図或いは
                      ロバストネス図)
```

### 2-2. 構造化設計とモジュール分割

#### 構造化設計の本質は「いかに機能を分割するか」

構造化設計とは、システムの機能を分析し分解してゆく事で、機能を階層的に「構造化」してゆく設計手法です。従って、機能（モジュール）をどのような考え方に基づいて分解（分割）するか、というのが大きなテーマとなります。そのための技法がモジュール分割技法です。

**設計における重要な課題:**
- どのような考え方・基準・方針で分割してゆくのか？
- どう分割すればソフトウェアの品質が実現出来るのか？
- このモジュール構造は他のモジュールと同じなのか、違うのか？
- 大きく違っている可能性は無いか？
- 他と重複した処理は無いか？

**目標:** 分割技法を統一し、全体構造のムラを無くしたい！

#### モジュール分割技法

構造化設計における代表的なモジュール分割技法を以下に示します。

| 分析対象 | 技法 | 解説 |
|----------|------|------|
| データフロー | STS分割 | データの流れに着目し、入力（Source）、変換（Transformation）、出力（Sink）の三種にモジュールを分割する |
| データフロー | TR分割 | トランザクション（TR）処理毎にモジュールを分割 |
| データフロー | 共通機能分割 | まず他の技法でモジュール分割し、それらに共通のデータ処理があったらモジュールを分割（そして共有）する |
| データ構造 | ジャクソン法 | 入力データ構造図、出力データ構造図を作成し、その変換処理を基本、連続（連接）、選択、反復の4つの制御構造を用いて分割し構造化してゆく |
| データ構造 | ワーニエ法 | 入力データ構造を元に、どのデータがいつどこで何回使用されるかを分析。この結果を順次（連結）、選択、繰り返しの3つの制御構造を用いて分割し構造化してゆく |

**重要なポイント:**
- 「どの技法を用いて分割（設計）するか」を意識していますか？
- 技法を統一する事で、均質かつ等品質のモジュール設計を行う事ができる

#### 何故「分割技法」が重要なのか

ソフトウェアの品質を実現するために重要かつ基礎的な考え方が、モジュール間の結合度とモジュール内の凝集度を適切に保つ事です。どのモジュール分割技法を選択するか明確にし、その方針をきちんと設計者間で共有しなければ「モジュール」の粒度や相互依存の度合いがバラバラになり、システム全体を通して結合度と凝集度を一定に保つ事が出来なくなってしまいます。

**設計原則:**
- **機能（モジュール）内の凝集度が高い**（相互の関係性が高いものだけが集まっている）事が望ましい
- **機能（モジュール）間の結合度が低い**（相互の依存性が低い）事が望ましい

**設計技法の本質:**
設計技法とは、モジュールの凝集度を上げ、結合度を下げるための技法とも言えます。

どのような技法でモジュール分割を行うか、或いはどの技法をどのように組み合わせるか、という判断によって、構造化設計におけるモジュールの全体構造が定まります。つまり、それこそが**構造化設計におけるアプリケーションアーキテクチャ**です。

#### プログラムの副作用（side effect）

結合度とは、言い換えればモジュール同士の関係の事です。モジュールは、プログラムコード上での相互呼び出しだけでなく、データストアを介しても相互に関係します。

あるモジュールを修正した場合、その修正による影響範囲は「そのモジュールを使用する他のモジュール」＋「そのモジュールが編集（Create, Update, Delete）するデータを参照（Read）する他のモジュール」になります。

このような影響を**「プログラムの副作用（side effect）」**と呼びます。

**副作用範囲の例:**
機能A-1の修正による副作用範囲 → 機能B-1, B-2の単体テスト、機能A, Bの結合テストを再度行う必要がある

**重要なポイント:**
- 副作用範囲が狭くなるように（＝モジュール同士の結合度が低くなるように）設計しなければならない
- 結合度が高いと回帰テスト工数が増大する

#### CRUD表 ─ モジュール同士の関連を把握する

構造化設計では（適切に設計書が作成されていれば）モジュール同士の直接の関係性を把握する事は容易です。しかしデータを介した関係性についてはモジュールの設計書とは別に整理しておく必要があります。このための表が**CRUD表**です。

**CRUD表の例:**

| 機能 | テーブルA | | | | テーブルB | | | |
|------|-----------|---|---|---|-----------|---|---|---|
| | C | R | U | D | C | R | U | D |
| A-1 | ○ | ○ | ○ | ○ | ─ | ○ | ─ | ─ |
| A-2 | ─ | ─ | ─ | ─ | ○ | ○ | ─ | ─ |
| B-1 | ─ | ○ | ─ | ─ | ─ | ○ | ○ | ○ |
| B-2 | ─ | ○ | ─ | ─ | ─ | ─ | ─ | ─ |

CRUD表を使用することで、例えばA-1を修正した場合の影響範囲（副作用範囲）がひと目でわかります。

### 2-3. オブジェクト指向設計

#### 構造化設計＝非機能モデル

構造化設計では、主にデータフローやデータ構造に応じてモジュールを分割していました。しかしこれはシステムの内部構造を非機能モデルに従って定義する考え方であり、ユーザーが最初に提示する機能モデルとは異なった観点で分析・設計を行うものです。

つまり、原理的にモデル変換コストが高く、機能モデルの変更に対する頑健性を高める事が非常に難しい手法です。

**構造化設計のプロセス:**
```
機能モデル → 変換 → データフロー/データ構造 → 変換(分割) → 構造化モデル → モジュール一覧
                  非機能モデル(データ観点)              分割(機能とデータの分離) + 共通化分析(重複排除) → ツリーモデル
```

#### オブジェクト指向設計＝機能モデル

これに対してオブジェクト指向設計では、ユーザーが提示した機能モデルを分析・図解し直ちにドメインモデルを構築します。このドメインモデルの構造を、ほぼそのまま「クラス（≒データと振る舞いの集合）」と呼ぶモジュール群として定義（表現）可能なプログラム言語を「オブジェクト指向言語」と言います。

オブジェクト指向とは、機能モデルに基づいてシステムの内部構造が決まるため、原理的にモデル変換コストが安く、高い頑健性（ロバストネス性）を実現出来る手法です。

**オブジェクト指向設計のプロセス:**
```
機能モデル → 変換(図解) → ドメインモデル → クラス一覧
            機能モデル(データと振る舞い観点)   関係性分析(重複排除) → ドメインモデル
```
**Simple！**

#### 分析クラスモデル

ユーザーの機能モデル、つまり業務の構造そのものをモデル化（図解）するためのツールがUMLです。

最も古典的なアプローチでは、ユーザーの機能をUMLクラス図を使用してモデル化します。クラス図はオブジェクト指向言語の内部構造を表現する図そのものですので、モデルを詳細化するだけでアプリケーションの内部構造を決定する事が出来ます。

このように機能モデル（ドメインモデル）そのままにクラスを構成した設計モデルを**分析クラスモデル**と呼びます。

**分析クラスモデルの例:**
- 経理部オブジェクト：銀行振り込み、給与振り込み、経理データ
- 人事部オブジェクト：人事評価、給与計算、人事データ
- 社員オブジェクト：申請する、自身のデータ

**設計原則の実現:**
- **機能（モジュール）内の凝集度は高い**：経理部オブジェクトには経理処理に必要な振る舞いとデータしか無い
- **機能（モジュール）間の結合度は低い**：人事処理に変更が発生しても、その影響は人事部オブジェクト内及び社員オブジェクトとのインターフェース部分に留まる

#### データとドメインの関係

オブジェクト指向設計におけるドメインオブジェクトは、データと振る舞いが一体となったものです。このアイディアを実現するため、オブジェクト指向設計において全てのデータは（基本的には）アプリケーション内で交換されるメッセージとして設計されます（メッセージパッシング）。

データストア（データベース）を直接参照するオブジェクトは、オブジェクト指向においては特別な（例外的な）オブジェクトとして位置付けます。

**オブジェクト指向設計における構造:**
- ドメインオブジェクト（ビジネスロジック）が直接データストアにアクセスする事は無い
- DTOはコピーデータを保持し、他のオブジェクトに引き渡すためのデザインパターン
- 他のドメインのデータを利用する場合はコピーを受け取る（いわゆる引数）

### 2-4. アプリケーションアーキテクチャ

#### 設計手法/技法 ≒ アプリケーションアーキテクチャ

設計手法/技法を統一する事で、機能毎に設計方針やモジュール粒度がバラバラになる事や、設計ノウハウの属人化を回避する事が出来ます。また、どの設計手法/技法を採用するかによってアプリケーションの内部構造が決まります。設計手法/技法に関する情報をすばやく共有出来れば、開発者がアプリケーションの内部構造をすばやく把握出来るという事です。

このような、アプリケーションの内部構造を決定する様々な要素を総称して**アプリケーションアーキテクチャ**と呼びます。

**アプリケーションアーキテクチャの構成要素:**
- 設計手法
- 設計技法
- デザインパターン
- ソフトウェアスタック
- フレームワーク

#### アプリケーションアーキテクチャ ≒ デザインパターン

アプリケーションアーキテクチャに関する情報を開発者全員が速やかに、しかも正しく理解する事は極めて重要です。この重要性は、構造化設計の場合でもオブジェクト指向設計の場合でも同様です。

「アーキテクチャ」を効率的に表現し共有するために発明されたのが、システムやアプリケーションの構造を表現するためのパターン言語である「デザインパターン」です。

現在では、システムやソフトウェア、或いはシステム/アプリケーション/サービス間のインテグレーション方式、そしてクラウドサービスの構成も「デザインパターン」として整理・表現されます。

> **デザインパターンは、現代の設計者にとって必須の知識です。**

---

## 3. デザインパターン

設計には、多くのソフトウェア工学知識と高度なスキル、そして業務知識と経験が要求されます。しかしながら、このような能力を揃えた設計チームを常に組織出来るわけではなく、人材教育にも長い時間と大きなコストが必要です。

そのような課題を解決するため考案されたのが、パターンランゲージであり、その実装としてのデザインパターンです。デザインパターンを用いる事により、先人の知識や経験を、設計に活かす事が出来ます。

### 3-1. パターンランゲージ

#### C・アレグザンダーの夢

パターンランゲージ（パターン言語）とは建築家のC・アレグザンダー（Christopher Alexander）が提唱したアイディアです。アレグザンダーは近代的な都市計画の中では、各国の美しい街や住まいに共通する普遍的な「パターン」が失われている事を憂い、それらのパターンを言語化したパターンランゲージにより、暗黙知化してしまっている意匠設計の知識を共有し、表現し、活用しようと訴えました。

**「美しさ」のパターン例:**
- 「小さな人だまり」
- 「座れる階段」
- 「街路を見下ろすバルコニー」

**様々な分野への応用:**
- EPISODES
- Smalltalk Best Practice Patterns
- GoF23
- Fearless Change
- etc...

**Linda Risingの言葉:**
> 「エンジニアには信じられないかもしれませんが、私たちが下すすべての決定は、まず感情が作用し、ロジックはその後なのです。だから、論理的な説明というのはまったく伝わらないことが多く、まず最初に、話をしようとしている相手の感情を大切にしないといけないのです」

### 3-2. GoF23

#### 伝説の「4人のギャング（The Gang Of Four）」

オブジェクト指向開発の黎明期、伝説の4人組エリック・ガンマ、リチャード・ヘルム、ラルフ・ジョンソン、ジョン・ブリシディースらが、パターンランゲージのアイディアをもとに、ソフトウェアアーキテクチャや設計を表現する23通りのデザインパターン「GoF23」を生み出しました。

**「デザイン・パターン」の系譜:**
```
クリストファー・アレグザンダー（建築家）
↓
建築様式（アーキテクチャ）や設計をパターン言語で表現
↓
エリック・ガンマ、リチャード・ヘルム、ラルフ・ジョンソン、ジョン・ブリシディース
↓
ソフトウェアアーキテクチャや設計をパターン言語で表現
↓
GoF23
```

#### 単語としてのGoF23

GoF23は原子的（atomic）な「ほぼ最小粒度のプログラム設計パターン」を定義したものであり、設計におけるパターン言語の「単語」に相当するものです。この「単語」を使えば設計者同士が非常に効率的にコミュニケーションを取ることが出来ますし、クラス/メソッド名に含めればプログラマがその名前を見ただけで構造や振る舞いを理解出来ます。

**GoF23の分類:**

| 分類 | パターン |
|------|----------|
| オブジェクトの生成 | Abstract Factory, Builder, Factory Method, Prototype, Singleton |
| プログラムの構造 | Adapter, Bridge, Composite, Decorator, Facade, Flyweight, Proxy |
| オブジェクトの振る舞い | Chain of Responsibility, Command, Interpreter, Iterator, Mediator, Memento, Observer, State, Strategy, Template Method, Visitor |

**効果:**
- 高速な設計
- 効率的なコミュニケーション

### 3-3. エンタープライズアーキテクチャ

#### アプリケーションコンポーネント/レイヤのデザインパターン

GoF23から始まったデザインパターンのアイディアは、さらにはプログラムのより大きな構造であるコンポーネントモデルやレイヤに対しても適用されました。その源流の一つがJ2EEデザインパターンです。

J2EEとは当時のJava技術の総称であり、規格、仕様、API などを包括的に示す呼称です。J2EEデザインパターンは、Javaによるエンタープライズ向け開発（≒大規模開発）における、設計のベストプラクティスをまとめたデザインパターンです。

**J2EEデザインパターンの例:**
- 階層化設計
- Data Access Object（DAO）
- MVC
- Data Transfer Object（DTO）
- Front Controller
- Resource Pool
- etc...

**パターンの進化:**
- 優れたパターンは言語仕様に
- ソフトウェアフレームワークへ
- 大規模システム（エンタープライズ向け）の設計パターン

#### コンポーネントモデル/レイヤアーキテクチャ

J2EEデザインパターンでも提示されたエンタープライズ向けの設計アイディアの中に、コンポーネントモデル或いはレイヤード（階層化）アーキテクチャの考え方があり、やはり「パターン」として整理されています。

このアイディアを理解する事で、それぞれのコンポーネント/レイヤに定義するクラス/メソッドの責務を正しく理解し、また全体として頑健（ロバスト）な設計を実現する事が出来ます。

**アーキテクチャパターンの進化:**

| パターン | View | Controller | Data Management |
|----------|------|------------|-----------------|
| Smalltalk MVC（1980〜） | View | Controller | Model |
| J2EE MVC2（2000〜） | View | Controller | Model (Business Logic, Entity) |
| Jacobson BCE | Boundary | Control | Entity |
| MVCS | View | Controller | Service, Model |

#### アプリケーションフレームワークへ

コンポーネントモデル/レイヤアーキテクチャの「パターン」が一般化した後、これらのパターンを実現するためのソフトウェアが出現しました。それらを総称してアプリケーションフレームワークと呼びます。

設計者は最初にアプリケーションの設計パターン（≒アーキテクチャ）を定め、次にそれを実現するためのアプリケーションフレームワークを選択します。

**設計プロセス:**
```
設計 → アーキテクチャの決定 → フレームワーク選択

レイヤード → Jakarta EE (JSF, JMS, EJB等...)
BCE/MVCS → Spring Boot (Spring MVC, Spring JDBC等...)
Web API → Quarkus (MicroProfile, Vert.x等...)
```

**重要な観点:**
ここで「アーキテクチャ」を検討するための設計知識が「エンタープライズアーキテクチャ」であり、J2EEやMicrosoft、OSSコミュニティ等が様々提唱している。

#### エンタープライズアーキテクチャ≠アプリケーションアーキテクチャ

エンタープライズ向けのアーキテクチャ（≒設計パターン）は、あくまでも企業向け・大規模システム向けアーキテクチャであり、粒度の小さなアプリケーションに向けたものではありません。企業向けの大規模システムを設計する際には、インテグレーションアーキテクチャやメッセージングアーキテクチャ（イベントアーキテクチャ）など、より上位・ハイレベルなアーキテクチャから、順次検討してゆく必要があります。

**アーキテクチャの階層:**

| レベル | アーキテクチャ | 説明 |
|--------|----------------|------|
| 最上位 | インテグレーションアーキテクチャ | システム/クラウドインテグレーション |
| ↑ | メッセージングアーキテクチャ | 非同期分散システム間の通信方式。モデルによってはイベントアーキテクチャとも |
| ↓ | システムアーキテクチャ | ネットワーク/インフラ/サーバなどシステムコンポーネントの統合 |
| ↓ | ソフトウェアアーキテクチャ | ミドルウェア/アプリケーション/プロダクトなどソフトウェアコンポーネントの統合 |
| 最下位 | アプリケーションアーキテクチャ | アプリケーション内部のアプリケーションコンポーネントの統合 |

企画・要件定義 → 詳細設計と、徐々に抽象度を下げていく。

### 3-4. クラウドデザインパターン

#### 「クラウド」は新たなプラットフォームへ

現在の「クラウド」は、Web APIというアーキテクチャの出現によりインフラ（IaaS）やアプリケーション（PaaS/SaaS）の全てが抽象化され、クラウドそれ自体がかつてのOSのようなアプリケーションプラットフォームとなっています。これまでアプリケーションの内部構造を表現していたデザインパターンは、クラウドアプリケーションの内部構造の表現にも応用されています。

**プラットフォームの進化:**
```
従来のシステム:
OS → ミドルウェア → アプリケーション
↓ (システムAPI群でインテグレーション)
他AP/他SYS

クラウドシステム:
クラウド → SaaS → クラウドアプリケーション
↓ (Web API群でインテグレーション)
他App/他Service
```

**デザインパターンの応用・進化が進む**

#### クラウドネイティブなアプリケーション

クラウドネイティブ（分散システム）におけるアプリケーションとは、従来のような単一（モノリシック）で巨大なアプリケーションではなく、必要に応じて分割された複数のアプリケーションの集合体になります。

これは「Web API」という呼称にも現れている通り、一つ一つのアプリケーションがシステム全体を構成する「部品」である、という考え方から来るものです。

**「クラウド時代」のシステム構成:**
```
ユーザーが目にするフロントエンドアプリケーションが、様々なアプリケーションやサービスと連携するアーキテクチャ

クラウド側:           オンプレミス側:
Web Service          Web フロントエンド
Web API             アプリケーション
SaaS        ←→      Web Service
                    Web API
```

#### 様々なアプリケーションアーキテクチャ（1/2）

分散システムでは必要に応じて様々な種類のアプリケーションを開発する必要があるため、様々な種類のアプリケーションアーキテクチャを知る必要があります。ここではエンタープライズ向け開発で採用される基本的なアーキテクチャをいくつか紹介します。

| アーキテクチャ | 解説 | 適用 |
|----------------|------|------|
| モノリスアプリケーション | システム全体を単一のアプリケーションとして構築する古典的アーキテクチャ。直観的にはシンプルな構成だが、全業務機能が一箇所に集約・密結合されるため機能の再利用性に劣り、機能再編に大きなコストがかかる | 小規模な基幹業務システムや（変化の少ない）業務システム本体 |
| Webアプリケーション | 3層C/Sシステム。アプリケーションの実体はサーバ側にあり、DB操作やHTMLページの生成など基本的にはサーバ側で全ての処理を行う。サーバ負荷が高く、C/S間の通信データ量も多いため性能面で劣る | - |
| Webサービス | SOAP（XML）に代表される「画面（HTML）の無いWebアプリケーション」。ajax向けや他システムに対するI/Fとして利用される。RPC型とMessaging型がある。後者をステートレスに設計したものがWeb APIの原型となった | 分散システム間I/F。なお、Webサービス/Web APIはそれぞれが単独のアプリケーションであり、モノリスアプリケーションの一部ではない |
| Web API | 特にステートレスな小粒度の機能を「API」としてアプリケーション本体とは別に開発し、他システムからの利用を含めた再利用性を向上させるもの。「HTTP経由で利用するAPI」である。REST/RESTful, Pragmatic REST, RPC型、クエリ言語型API、など様々な派生アーキテクチャがあり、目的に応じて使い分ける | - |

#### 様々なアプリケーションアーキテクチャ（2/2）

| アーキテクチャ | 解説 | 適用 |
|----------------|------|------|
| Thinサーバアーキテクチャ（TSA） | クライアント側にネイティブアプリケーションを配置、サーバ側にWebサービスを配置する事でシステム全体を構成する。UI描画等の処理はクライアント側に任せる事で、サーバ側の処理負荷を低減させる。SPAも広義ではTSAに含まれるが、最大の違いはTSAは分散システムを前提としたものではない、という点である | クライアントアプリケーション。TSAやSPAはサーバ側のWebアプリケーションの一部ではなく、独立したアプリケーション。なので、開発もテストも別となる |
| SPA | Single-page application（SPA）という名前の通り、複数のHTMLページで構成されるのが普通のWebアプリケーションと同じ技術を採用しながらも、単一のページのみでJavaScriptによるDOMの動的な組み換えによってページ外観の変更を行うもの。JavaScriptエンジンに対するネイティブアプリケーションとも表現出来る | - |
| CQRS | コマンドクエリ責務分離（Command Query Responsibility Segregation）とは、アプリケーション自体をコマンド（CUD/CRUD）とクエリ（R/CRUD）で分離し性能最適な基盤に配置する構成 | 前述のものより抽象的・一般的なアーキテクチャ |
| マイクロサービス | 全体を単一のシステムとして設計せず、極小のサービスの集合体として構築する。機能/非機能/組織など、ビジネスアジリティを最大化するために最適な単位で個々の「マイクロサービス」を定義し、全てを疎結合に保つ。一般に「モノリスシステム」とは、この「マイクロサービス以外のもの」を指す。つまり、分散システムを含め、世の中にあるほとんどのシステムは「モノリスシステム」である | （変化が極めて早い）業務システム/差別化システム、PoC、プロダクト |

#### 「クラウド」のデザインパターン？

クラウド領域におけるデザインパターンには（従来のデザインパターン同様）いくつかの階層があります。2018年時点で「クラウドデザインパターン」と言った場合、多く各クラウドプロバイダによる自社サービスの定番構成パターンを指します。

開発ベンダーの設計観点では、複数システム間連携のためのインテグレーションパターン、その一部としてのメッセージングパターンがあり、これらはクラウド特有のものではなく既存のパターンです。

**既存パターンの応用:**

**インテグレーションパターン:**
- File Transfer
- Shared Database
- Remote Procedure Invocation
- etc...

**メッセージングパターン:**
- SOAP
- REST
- Message Queue
- Message Bus
- Publish/Subscribe
- etc...

クラウドが提供する様々なサービスや仕組みを、これらのパターンを応用し組み合わせる。

#### 分散システムデザインパターン

クラウドインテグレーションの文脈では、システム全体が分散システムである事が前提であり、その設計向けのデザインパターンは**分散システムデザインパターン**と総称されるものの個別の実装となります。

**分散システムデザインパターンの位置づけ:**
```
分散システムデザインパターン
├── クラウドデザインパターン
├── マイクロサービスデザインパターン
└── Enterprise Integration Patterns（EIP）
```

古典的な設計文脈では、システム間連携パターンであるEIPの再実装とも言える。

#### 非同期分散システム

クラウドインテグレーション或いは大規模な基幹システム設計の世界では、非モノリシックな設計構成が必要になります。つまり、（モノリス）アプリケーションを複数に分割し、それぞれ性能・コスト的に最適な基盤上に配置し、アプリケーション（及びミドルウェア）間を適切なメッセージングアーキテクチャで同期或いは非同期に連携する、といった構成です。

従って、局所的な課題であるモジュール分割よりもずっと先に、基盤の物理的特性まで考慮に入れたシステム分割という課題に向き合う必要があります。

**大規模システム設計のプロセス:**
```
機能一覧 → バイモーダルITのモードやペースレイヤによる分析と分割
         （複数の非機能セットに対して分割）
         ↓
システム1, システム2, システム3の決定
├── オンプレミス/IaaSに配置（スクラッチ開発対象）
├── ローコード基盤に配置（ローコード開発対象）
└── パッケージ/SaaS採用
         ↓
ドメインやケイパビリティで分割
         ↓
メッセージングアーキテクチャの設計
         ↓
個々のシステム設計
```

**重要なポイント:**
- モノリスシステム/小規模システムの場合は個々のシステム設計から開始
- クラウドインテグレーション/大規模システムの場合はシステム分割が必要

---

## まとめ

- **「設計」とはユーザー語 → システム語 → 機械語への翻訳作業。**
- **機能設計は機能のモデル化が命。非機能設計は品質の源。**
- **基本設計は論理設計。詳細設計は物理設計。開発フレームワークは詳細設計の一部を吸収。**
- **構造化設計はとても難しい。オブジェクト指向設計は（実は）とても易しい。**
- **デザインパターンは現代設計者にとっての必須知識。**
- **クラウドインテグレーション/大規模システム開発では、機能の論理分割の前に、要求特性に応じたシステム分割が必要になる。**
- **クラウド時代の開発も、デザインパターンを通して楽々理解？いや、知っておかないと全く追いつけなくなるかも...**

---

## 参考文献

- 『システム設計のセオリー --ユーザー要求を正しく実装へつなぐ』（リックテレコム）
- 『構造化分析とシステム仕様<新装版>』（日経BP社）
- 『Head Firstオブジェクト指向分析設計 ―頭とからだで覚えるオブジェクト指向の基本』（オライリー・ジャパン）
- 『パターン、Wiki、XP ~時を超えた創造の原則』（技術評論社）
- 『J2EEデザインパターン』（オライリージャパン）
- 『Enterprise Integration Patterns』（Addison-Wesley Professional/英書）
- 『分散システムデザインパターン』（オライリージャパン）
- 『マイクロサービスパターン[実践的システムデザインのためのコード解説]』（インプレス）
- **『FROG SPAWN』（株式会社システムエグゼ）**  
  https://revo.system-exe.co.jp/secure/wiki/?FROG%20SPAWN

---

## 【QM】見積もり・提案教育・第七回v2.3.md

## 第七回 提案の基本的な流れ

見積もり・提案教育セミナー  
相田一英 2024/08/29

## 目次

### 1. 提案の流れ
- 1-1. リードから引き合いへ
- 1-2. 提案戦略策定
- 1-3. RFP受領～提案

### 2. 案件の初期分析
- 2-1. 情報収集・分析・QA
- 2-2. 案件タイプの見極め
- 2-3. 提案計画

### まとめ

### 参考文献

---

## 1. 提案の流れ

### 1-1. リードから引き合いへ

#### 「営業」から見た「案件」の流れ

「案件」に最初から最後まで関わるのが営業担当者であり、営業から見た場合の「案件」のライフサイクルは、提案よりもずっと長い期間です。そして、プロポーザルマネジメントが想定する提案活動のライフサイクルも、その期間を含んでいます。

**案件のライフサイクル：**
- **ユーザープロセス（企画）**: RFI発行 → RFT発行 → RFP発行
- **営業プロセス**: リード（見込み顧客） → 引き合い → 提案判断 → RFP受領 → 提案
- **ベンダープロセス**: 案件評価 → 案件獲得活動 → 提案計画 → 提案
  - 情報収集・分析 → 戦略策定 → 提案計画 → RFP受領 → 骨格作成 → 提案書作成

**重要なポイント：**
- この期間が数ヶ月から、長い場合は数年に渡る
- 通常は、RFP受領前には、案件の分析や提案方針の検討、提案/辞退の判断は終わっていなければならない
- 最後の仕上げ期間（提案書作成）はごく短い。ここだけで強い競合に勝利するのは、かなり難しい

#### RFI/RFT ─ 企画プロセス

情報提供依頼書（RFI）と技術公開依頼書（RFT）は、お客様が企画を行うために必要な情報収集への協力依頼です。正式にこのような文書が提示されない場合もありますが、お客様による事前の相談には、時期によってはこのような目的がある事を意識しておきましょう。

**お客様の企画プロセス：**
- **企画段階**: 「具体的にどんな企画に…どのベンダーに声をかけようか…」
- **フィジビリティ段階**: 「これ実現する…？予算どのくらい取れば安心…？」
- **企画成立段階**: 提案依頼へ

**RFI（情報提供依頼書）の特徴：**
- 比較的企画の初期に行われる情報収集
- ベンダーに対して、提案に関する戦略策定の契機を与える側面
- ベンダーの企画への参画能力を評価するという側面もある
- この観点で超概算見積もりを要求される場合もある

**RFT（技術公開依頼書）の特徴：**
- 企画が実現可能かどうか、技術面や予算面から検証するための情報収集
- この結果として予算が確保され、お客様側で企画が成立する
- この段階での超概算見積もりは十分余裕を持たせておかないと危険

#### 【閑話】RFQ（見積依頼書）について

この他に見積依頼書（RFQ）と呼ばれる文書が発行される場合もあります。これはつまり、お客様から当社への見積書の発行依頼という事ですが、当社の場合これが単独で発行される事はほとんどありません。

**RFQの特徴：**
- 実際の契約を前提とした予算見積もり或いは確定見積もり
- 超概算見積もり、参考見積もりと呼ばれる見積もりではない
- システム開発の場合は「定価」が存在しないので、通常、RFQが発行される前にRFIやRFPが発行される
- 多くの場合RFPがRFQを兼ねている

**注意点：**
- 物販（プロダクトやサービス）の場合、RFQが単独で提出される事がある
- お客様からこのような名称の文書を提示された場合には、それがどのような意味合いのものなのかをきちんと確認する
- お客様自身がわかっておられない事も多いので注意

#### 提案依頼「以前」の「見積もり」

このような提案依頼以前の時期に作成される、「見積もり」と呼ばれる資料には以下のようなものがあります：

**契約前提ではない見積もり：**
- 超概算～概算見積（一般用語）
- 参考見積書（官公需用語）
- 下見積書（官公需用語）
- 社内予算確保用の「高めの金額見積もり」

**契約前提の見積もり：**
- 超概算～概算見積（PMBOK）
- 予算見積（PMBOK）
- いわゆる「定価表」
- フィジビリティ最終確認～一次選考

**重要な注意点：**
契約を前提としない、或いは不正競争防止の観点等により前提としてはいけない場合の見積もりは、法的効力が無い資料であり、それがわかるようにする必要がある。特に「概算見積」という呼称には要注意である。

#### 企画成立までが勝負

理想的なプロポーザルマネジメントでは、提案の実質的な勝敗は、企画成立時点でついているというのが理想です。お客様が提案依頼書（RFP）を発行する前までが、提案に勝つためのキャプチャープランの策定、提供情報によるお客様企画の誘導、期待値コントロールの実施を行う期間です。

システム開発で言えば、ここまでが基本設計で、この後の提案骨格策定や提案書の記述は、詳細設計と製造に当たる作業です。つまり、この時点までに何が出来たかによって、提案の品質はほぼ決まってしまいます。

**まさに「段取り八分に仕上げ二分」**  
事前準備期間で提案品質の八割が決まってしまう。

### 1-2. 提案戦略策定

#### キャプチャープラン

提案前の早い時期、RFPが発行される数ヶ月～1年以上前から、担当営業及び担当PMによって作成するのがキャプチャープラン（Capture plan/案件獲得計画）です。

**キャプチャープランの流れ：**

```
【お客様】企画 → フィジビリティ → 企画成立 → 提案依頼へ...
                     ↓           ↓
                   RFI        RFT
【担当営業/PM】
3C分析 → エグゼクティブサマリ → 一枚企画書 → 顧客とすり合わせ
         ↓                      ↓
    顧客分析                RFI/RFT応答
    競合分析                    ↓
    自社分析               提案戦略策定 → 提案計画立案 → 提案体制構築
```

**この全体がキャプチャープランの立案と実施**  
この期間で顧客への期待値コントロール実施

#### 3C分析（さんシーぶんせき）

提案戦略の策定の際に良く用いられるのが3C分析です。市場（Customer）、競合（Competitor）、自社（Company）の三つの視点から分析を行い、戦略の方向性を定め、市場や競合の状況から採用する商材や手法を検討します。

**3C分析の構成要素：**

- **Customer（市場・顧客）**
  - 自社の顧客分析
  - 生活者分類変数
  - 市場動向
  - ターゲット市場

- **Competitor（競合）**
  - 競合他社の分析

- **Company（自社の実力）**
  - ポジショニング
  - 社内資源
  - 強みと弱みを活かした事業機会など

**4C分析：**
卸や代理店など流通チャネル構造が重要な意味を持つ場合、Channel（流通・物流）を加え4C分析と呼ぶ。

**ソリューションを売る事に特化した視点：**
- 顧客のニーズ
- 競合のソリューション
- 自社のソリューション

#### 3C分析による提案判断

3C分析による分析により、自社が提供可能な（複数の）ソリューションを評価し、提案すべきかどうかの判断を行います。提案活動はロスコストです。また、低品質な提案は顧客満足を下げ、以後の営業活動に悪影響を与えるので、提案を辞退すべきです。

逆に言えば、提案においては、必ず差別化された部分を見つけ出す/作り出さなければいけません。

**分析結果による判断：**

- **差別化された、優位性ある領域**: 顧客にとって当社のソリューションでなければならない、このような領域を見つけ出す事が3C分析の目的であり、作り出す事がソリューション構築の目的
- **競合にしか解決出来ない領域**: 当社は提案辞退すべき領域
- **提案は出来るが差別化が出来ない領域**: 勝負が困難

#### エグゼクティブサマリ

分析結果を元に、実際の「提案」の中身を作る作業に着手します。まず必要なのはエグゼクティブサマリです。この資料は、忙しい人でも短時間で提案の骨子が理解出来るよう、案件の背景や、お客様の目的・ビジョン、ホットボタンなどを要約した資料です。

案件獲得活動期には、このエグゼクティブサマリの情報を元に様々な企画を用意し、後述の一枚企画書にまとめお客様に提示し、お客様と企画内容のすり合わせを行い、そのフィードバックによって再びエグゼクティブサマリを更新します。こうしてブラッシュアップされたエグゼクティブサマリは、提案戦略の策定と、その後の提案骨格作成の、重要なインプットになります。

**エグゼクティブサマリの例：**

| No | 項目 | 内容 |
|----|------|------|
| 1 | 背景 | お客様が企画を開始した背景。現在抱えている問題や課題、組織などの情報。 |
| 2 | 目的/将来ビジョン | 「○○％のコスト削減」や「業務効率化で余剰時間を○○時間生み出す」等の、定量的な目的やビジネス的なビジョン。 |
| 3 | ホットボタン | 「来年1月に確実にリリース出来る事（営業部長）」や「低リスク（情報システム部長）」など、今回の開発で重視するポイントを、誰が/その組織が、という情報とともに挙げる。 |
| 4 | ソリューション（解決策） | 「当社製品を採用」「パートナー社のサービス利用」「既存システム利用」など、ソリューション案を全て挙げる。この案が、ブラッシュアップによって絞られたり、追加されたりする。最後に残った案のセットが、当社のソリューションである。 |
| 5 | ベネフィット（利益） | ソリューション毎に、顧客に対してどのようなベネフィットがあるかを記述。いわゆるメリット。 |
| 6 | エビデンス（証明） | ベネフィット毎のエビデンス、つまり根拠を記述。「過去の実績案件」や「製品比較情報」「研究資料」など。 |
| 7 | 他社との違い | 他社との差別化ポイントを記述。「即時提供可能」や「豊富な実績」「コスト優位性」など。 |

#### 一枚企画書による顧客との企画すり合わせ

エグゼクティブサマリの情報を元に、各ソリューション案やその組み合わせによる一枚企画書を作成し、それを打ち合わせ資料として、お客様との打ち合わせを繰り返します。この時、合わせて超概算見積もり（下見積もり）などを、参考として提示するのも良いでしょう。

この活動は、お客様からRFIやRFTが提示される前から行うのが理想です。このアプローチによって、お客様の企画プロセスを実質的に支援しつつ、その方向性をコントロールします。また、当然ですが事前に引き出せる情報量も増えるため、競合他社に対して有利な状況を作り出せます。

**期待値コントロールの重要性：**
この時期最も難しい点は、一枚企画書内に記述するソリューション案は、情報を出しすぎてはいけないという点です。この時期の目的は、あくまでもお客様の企画支援であって、当社のソリューションの売り込みではありません。案は、あくまでも「発想の提示」程度に止め、お客様のリテラシー向上やアイディアの拡大を目的とします。

これは後続のRFI/RFT応答でも同様で、最終的な提案前に、お客様の期待値を高めすぎてはいけません。これは期待値コントロールと呼ばれる技術であり、最終的な顧客満足を高めるためには必須の技術です。

**「見せるのは『まあまあ』なグラス。実際に売るのは隠した王冠。」**

#### ソリューション案を「生み出す」

1年といった長期間アプローチする大型案件の場合は、この期間中に新たなソリューション案を「生み出す」のも有効な手段です。例えば新たなアライアンスパートナーを作ったり、自社製品に新機能を追加したり、既存のプロジェクトでソリューション案の実験をしたり、提案のための実績を作ったりする活動です。

この時、そのような活動によって少なからぬ投資が発生しますので、どのような活動をするかは、以下のポイントから判断します：

1. 当社の強みを強めるポイントか
2. 当社の弱みを弱めるポイントか
3. 他社の強みを弱めるポイントか
4. 他社の弱みを強めるポイントか

全てに取り組む事は出来ないので、3C分析の結果を元に、どれに注力すべきかを判断する。

#### 提案戦略決定と提案計画

お客様とのすり合わせが進み、エグゼクティブサマリが安定してきたら、提案戦略を決定し、それに応じた提案計画を策定します。

提案戦略とは、つまりはここまでに作成してきた各資料の内容を確定し、まとめる事です。エグゼクティブサマリを軸に、サマリではない各詳細資料（APS成果物や競合の分析資料等）、3C分析資料、採用するソリューション案の一枚企画書、など一式です。

それを元に、提案計画（プロポーザルマネジメントプラン）を策定します。提案計画とは、提案チームの体制・人材・役割分担や、提案期の活動スケジュール、提案書作成メンバー向けの提案書執筆ガイドラインなどの手配や準備を行う事です。

**これまでの活動の成果をまとめる段階**  
ここからは「仕上げ」のフェーズ

### 1-3. RFP受領～提案

#### RFP受領 ─ キャプチャープランの有無による違い

このようにキャプチャープランが機能している場合、RFP受領というのは提案活動におけるかなり後半のイベントになります。

つまり、RFP受領前に、提案するかどうかの判断も終わっており、どのような提案にするのか方針も決まっていて、提案のためにどのような人材が必要かも、その確保も終わっています。ですので、RFP受領後は提案の骨格を作成し、最後の仕上げに提案書を作成するだけです。

しかしながら、RFP受領前の十分な活動が出来ない事もあります。その場合は提案の難易度が非常に上がりますので、RFP受領後に、短期間に、急いで情報収集～提案計画までの活動を行う必要があります。

**事前の活動が出来ないと、同じ事を1ヶ月程度の期間でやらなければならない**

#### 理想状態での「提案」

RFP受領後の「提案」期間は、小～中規模案件で2週間程度、大規模案件で1ヶ月程度です。提案チームのキックオフミーティングから始まり、提案の骨格（ストーリーボード）作成、役割分担、そして最後に提案書記述とレビューの繰り返しを行います。

長くても1ヶ月程度しか無く、予算見積もりの作成・取得や社内の決裁手続きを考えると、この期間で行える事はごくわずかです。

**理想的な提案期の流れ：**
- お客様とすり合わせ済みで、他社との差別化方針も、フィジビリティも全て確認済みの戦略
- 戦略を前提とした計画。スケジュールや体制、社内での人材確保など完了済み
- 提案チームキックオフ → 提案書構成を決める → 役割分担表 → ストーリーボード → 提案書記述 → レビュー
- 執筆ガイドライン準備
- 記述とレビューは繰り返し

---

## 2. 案件の初期分析

### 2-1. 情報収集・分析・QA

#### 案件評価の開始・情報収集

案件の初期分析は、顧客情報等の収集と分析から開始します。この段階では、お客様の要望や要求はさておき、対象となる問題に関係する、あらゆる情報を収集し蓄積・整理します。いわゆるAPS（アカウントプランニングセッション）のような活動がこれに相当します。

この段階では、まだお客様は企画中であり、要望や要求がどのような方向に向かうかはわかりません。この案件評価期～案件獲得活動期に、当社からの情報注入により、お客様の企画の方向性や、提案に向かっての期待値コントロールを実施します。

**活動内容：**
- 主に担当営業や、常日頃からお客様と交流のある従業員の活動
- 顧客に関するあらゆる情報を集め、整理し、分析する
- 必要に応じ、お客様へのヒアリングやアンケート、雑談などの手段を使用する

**事前活動が間に合わなかった場合：**
- 1週間以内で、大急ぎで行う
- 期間が短いのでQA以外の手段がほぼとれない
- QAにしても1、2回しか出来ない可能性が高い

#### 分析

収集した情報の分析には、前述の3C分析などのツールを使用します。

他にも様々な分析ツールがありますが、当社が対象とする典型的な案件（企業向けの基幹系システムや情報系システムの開発企画）であれば、『部門長向け見積もり検証シート』を使った「検証目的の見積もり」も有効です。概ねの案件規模感を把握出来れば、予算感の推定や、その後の案件獲得活動の方針検討や、キャプチャープランでの難易度判断にも役立ちます。

併せて『プロジェクトリスクドライバ評価シート』を使ったリスク分析・評価も有効で、同じく難易度把握に役立ちます。

**事前活動が間に合わなかった場合の制約：**
- 分析に使用するツールは同じだが、非常に期間が短いため、分析担当者の能力依存度合いが大きい
- つまり難易度が高い

#### QA

いわゆる「QA」は、正式なものはRFP受領後に、公平のために、提案ベンダー全てに公開される形で行われます。

しかしながら、キャプチャープラン中のヒアリングやアンケート、雑談なども本質的には同じ機能を持つ活動です。従って、事前に十分なコミュニケーションをとっておいた方が有利な上、差別化に関係する機微な情報を、後の「QA」時に、他ベンダーに対して隠匿する効果も期待されます。

公式なQAは他ベンダーにも公開されるので、要求理解のミスリードを誘う、必要に応じて顧客企画の不備を突く事で当社の差別化領域を作り出すなど、戦術ツールとして使用すべきです。

**QA期間の区分：**
- **他ベンダーに非公開で行える、事実上のQA期間**: この段階で情報量の差がついてしまう
- **公式なQA期間**: ここでは他ベンダーに公開されるので、QAはむしろ欺瞞工作に使用すべきである

### 2-2. 案件タイプの見極め

#### 案件タイプ → お客様の「意図」を見抜く

様々なタイプのお客様がいて、案件には様々な状況があり、それに応じてお客様は様々な「意図」をもって、当社に相談してきます。競争入札（コンペティション）の公平性のためや、それ以外のなんらかの事情で、我々ベンダーに伝える事が出来ない・伝えない情報も多くあります。そのような隠れた意図をいち早く見抜く、或いは推測する事で、提案戦略、或いは提案判断が大きく左右されます。

**お客様の隠れた意図の例：**
- 予算が無い
- 既存ベンダーと取引をやめたい
- 内部的には既に受注ベンダーを決めている
- 他のベンダーは、公正な入札に見せるための当て馬
- 丸投げしたい
- 事実上の内製をしたい
- 担当者が、自社経営向けに、改革や刷新のアピールをしたい
- 既に導入する製品を決めている
- （特に意味無く）アジャイルやマイクロサービスしたい
- 担当者が開発者で、自分の好きに開発したい

**これらを見極めるためのヒント/分析：**
- スケジュールが不自然に短い？
- 企画文書の品質がやたらと良い
- 予算感や計画期間が、統計的に不自然に妥当
- 採用製品が決定済み
- 最近のバズワードだらけ
- 企画書でもなく要求文書でもなく、設計文書ばかり
- 現在取引のあるベンダーは？
- お客様の業界状況は？
- お客様の体質・担当者の性格
- 対象システムの過去の履歴
- リスク評価有無
- お客様の期待値

#### 当社が提案『すべき』案件か？

当社は、企業向けSI事業が99％で、その大部分が小規模～中規模の業務アプリケーション開発である（つまりソフトウェアハウス事業が中心の）企業です。従って、案件が対象とする事業・業務領域の見極めは非常に重要です。当社の得意分野からあまりに離れた案件は、提案する事が難しく、競合に勝つことも難しいので、提案活動をすべきか否かの見極めが必要です。

**当社の得意領域（緑の領域）：**
- 小規模～中規模の業務アプリケーション開発
- インフラ構築案件
- データベース構築
- それらの複合案件
- 保険、不動産など、実績豊富な業務領域
- 普段見積もりや提案をしている領域

**提案可能だがノウハウが少なく難しい領域（黄色の領域）：**
- 大規模な基幹システム開発
- アプリケーション、ミドルウェア、インフラを束ねただけの案件ではなく、それらを統合して巨大なシステムを構築する案件

**見極めが重要な領域（赤の領域）：**
- コンシューマ向けISシステム（ソーシャルメディアやSNS、ゲームなど）の開発案件
- パッケージ製品やSaaSが多い業務システム開発
- 組み込み開発
- 非常に高度な科学技術が要求される開発

#### お客様の予算感や計画品質を分析 →「見積もり」による分析

「見積もり」は一種の分析ツールです。システム規模と開発期間の関係や、工期・工数の配分などを統計データと比較する事により、お客様の予算感や、計画の品質（≒お客様の計画能力）を推測する事が出来ます。

当社の場合は、PJ品質保証委員会から配布している『部門長向け見積もり検証シート』がありますので、このような分析に是非ご利用いただければと思います。

**部門長向け見積もり検証シートによる分析：**

- **工期から工数逆算 → ごく大雑把な予算感**
- **工数（規模）予測**
- **工期と工数がアンバランス？**
  - 計画能力が低い？
  - 工期が短い → 開発は想定しておらず、実はパッケージ製品/SaaS導入方針が内定している？
  - 同、内製経験が多く、品質意識が低く、予算感も小さい？
  - 工期が長過ぎる → 企画から丸投げする可能性が高い？

- **工期・工数配分**
  - あまりにも統計に近い → 実はコンサルか、SIベンダーが情シス支援に入っている
  - お客様の基本設計工期が長過ぎる → 共通フレーム98基準で、実は要件定義プロセスを含んだ工程？（+実は企画から丸投げされる可能性？）
  - 製造までの工期が短か過ぎる → 開発は想定しておらず、パッケージ製品/SaaS...
  - お客様の予算感が小さい → スクラッチ開発は想定しておらず、一部パッケージ製品/SaaS導入や、ノーコード/ローコード開発想定など？ → 受託ベンダーが内定している可能性？

#### 企業情報からの予算規模推測

見積もり技法で使用する、対象システムに対するメトリクスが入手出来ない場合でも、お客様の企業情報からおおよその予算規模を推測する事も出来ます。

様々な情報から推定は可能ですが、例えばインターネットに公開された年間売上の情報と、JUAS調査の結果から、お客様の年間IT予算を推定する事が出来ます。

**JUAS 企業IT動向調査（2014年、2015年）による業界別年間売上比：**

| 業界 | 年間売上比トリム平均 |
|------|---------------------|
| 金融 | 7.4％ |
| 建築・土木 | 0.43％ |
| 商社・流通 | 0.59％ |
| 機械製造 | 0.77％ |
| 社会インフラ | 0.98％ |

**推測の流れ：**
年間売上 → 年間IT予算（推測） → 新規投資可能予算（推測）

状況次第ではあるが、恐らく年間の新規投資額の上限は、現在のIT予算額とほぼ同じ程度。推測した額×工期（年）が、おおよその総予算。「桁」の推測くらいには使える...

#### 勝負価格帯予測の合意

案件タイプを見極めつつ、担当営業と担当PM（プロポーザルマネージャーと提案担当者）の間で勝負価格帯の予測値を合意しておきます。統計ベースでの分析や、他社の提案内容の予測などを勘案すると、お客様の予算感の「幅」が予測出来ます。当然ですが、当社が提案を行うのは、その予算枠内で、お客様が要求するものを提供できる場合で、かつ、他社が提示する費用と比較し勝負が可能な価格帯である場合のみであるべきです。

最終的な見積もり金額は、高過ぎても安過ぎても駄目で、いかに妥当な金額（※）を説得力をもって提示できるかが勝負です。

（※ 説得力が無いまま他社より安過ぎる価格を提示すると、お客様の不信感を招き、やはり失注要因になります）

**価格帯分析の流れ：**
超概算（分析）見積 → 最低価格想定/標準価格想定 → 勝負価格帯

- この価格帯に収まるソリューションを構築
- 「スクラッチ開発」や「プロダクトの提案」などの基本方針は、この制約条件のもと決まる
- 制約条件を満たせないので、提案出来ない場合は提案中止（辞退）
- 案件獲得活動を本格化。ソリューション構築案を具体化するため、お客様とのやりとり、戦略策定などを進める

#### リスク分析 → 企業情報の分析やリスクドライバの分析

お客様のあらゆる情報を集める目的の一つが、リスクの把握、つまり不確実性の早期把握です。

当社の場合は、本セミナーが参考提示している『プロジェクトリスクドライバ評価シート』があります。このツールは、リード中（案件評価期）からも利用開始できるように設計されていますので、是非早期からご利用いただければと思います。

**リスク評価レベル：**
- 【危険】厳重な対策必須
- 【危険】対策必須
- 【要監視】
- 【通常】
- 【安全】

**リスク分析の活用：**
- 情報収集の結果を随時追記し、リスクドライバを評価
- 早期に打てる対策は案件獲得活動期であっても開始し、その結果に応じて再評価

**リスク評価による制約：**
- **リスク評価が高い（悪い）場合**: 低価格の提案は出来ない、最適・高度人材確保が出来ない場合は提案出来ない、（完成責任のある）請負契約では提案出来ない、などの制約が発生する
- **リスク評価が低い（安全）場合**: 利益率を考えながら、比較的自由な提案戦略やソリューションを構築できる

#### ホットボタンの把握と期待値コントロール

さらに詳細に案件タイプを見極めつつ、案件獲得活動のため、ソリューション案の一枚企画書や、参考見積書などのツールを使用しつつ、お客様とのすり合わせを実施します。この時、情報収集項目として特に重要なのが、お客様ステークホルダーのホットボタンの情報です。ホットボタンは、提案内容の差別化のためには必須の情報です。お客様の経営陣や役職者等のホットボタンを把握する事で、いわゆる事業要求や業務要求といった、お客様の真なる課題につながる情報も把握出来ます。

ホットボタンを押すための具体的なソリューションを、この期間にお客様に提示してはいけません。この時期は、お客様の企画の方向性をコントロールする事と、当社の提案に対する事前期待を下げる事に集中しなければなりません。

**ステークホルダーのホットボタンを、最適なタイミングで押す事が出来れば...その企画は発進する！**

#### とにかく早期にプロポーザルマネジメントを開始しましょう

一連の活動を、早期に着手すればするほど、提案の無駄が無くなり勝率も向上していきます。

また、お客様との関係性もより密接になるため、対象の案件を提案辞退する場合でも、別な・次の引き合いに向かった準備に繋がっていきます。

逆に、全てをRFP受領後に、わずか１ヶ月程度で実施するというのは大変な作業です。無駄が無いように極めて効率的に進めていく必要がありますので、提案能力が高い人材（※）に担当させなければなりません。

（※ 「一ヶ月で提案を作れる人」と「一年かけて提案を作れる人」、それぞれにどんな能力レベルを期待するか、想像してみましょう...）

**理想的な取り組み vs 後手の取り組み：**
- **プロポーザルマネジメントに理想的に取り組めた場合**: 数ヶ月の時間をかけてじっくりと取り組む
- **RFP受領後に開始する場合**: 1～2週間未満で全て完了しなければならない

### 2-3. 提案計画

#### 提案計画の前に...そもそも提案、しますか？

収集した情報と分析結果から案件タイプを見極め、実現性のあるソリューション案が出揃い、十分なリスク評価も終えたなら、いよいよ実際に提案するかどうか、提案判断を行います。

当然ですが、この後の提案活動には多くのメンバーが参画し、提案内容のレビューや社内の決裁手続きに、多くのコストがかかります。受注確度が低かったり、受注出来ても損失が出る可能性が非常に高い案件だった場合は、速やかに提案辞退すべきです。

この判断はRFP受領前に行うべき（※）です。また、可能な限り早い時期に決断し、お客様にも早くお知らせすべきです。

（※ RFP受領後だと、非常に断り難いので...）

**提案判断のタイミング：**
各種分析資料、エグゼクティブサマリ、提案戦略 → 提案判断 → 提案計画、執筆ガイドライン

この先は大勢の人が関わり、大きなコストがかかる「作業」期。やるかやらないか、判断は早めに。

#### 社内の提案体制構築

提案すると判断した場合は、速やかに提案体制の構築を開始します。確定した提案戦略に応じ、必要な人材は明らかになっていますが、提案活動期のその人材のスケジュールを確保しておかなければなりません。提案作業には、少なからぬ作業時間が必要ですので、十分早い段階から社内オファーをかけておきます。この時に、案件の概要を説明するのに使うのがエクゼクティブサマリです。

（何故「エクゼクティブ」向けの「サマリ」というのか、これでわかりましたね！）

人材が確保出来たら、体制図を作成します。提案体制は、提案内容のレビュアー向けにも重要な情報ですので、必ず作成しましょう。それと並行して、役割分担表やスケジュール表、提案書執筆ガイドライン、そして情報共有のためのグループチャット等を作成します。

**体制構築の期間：**
- 体制構築等の準備期間は、数週間～１ヶ月程度
- RFP受領後に急いでやる場合、情報収集や分析と平行して、1週間以内に済ませなければならない

#### 提案期の概要

提案期のスケジュール作成に当たり、当社内の決裁手続きも合わせ、必要なプロセスと期間の概要を以下に示します。この詳細は次回以降のセミナーで詳しく解説します。

**提案期（1ヶ月の例）のスケジュール：**

| 週 | 第一週 | 第二週 | 第三週 | 第四週 |
|----|--------|--------|--------|--------|
| 主要活動 | RFP受領<br>骨格作成 | 提案書作成 | 提案書作成<br>レビュー&修正 | 社内決裁手続き |
| 詳細 | RFP分析<br>提案チームキックオフ<br>ストーリーボーディング<br>役割分担表作成 | 提案原稿作成（分担）<br>確定見積もり | 提案書統合<br>レビュー&修正（本部内） | 品質管理レビュー<br>役員レビュー<br>経営会議<br>取締役会 |

**プロポーザルマネジメント無しで、RFP受領後急いでやる場合：**
- 情報収集・分析、戦略策定、提案計画を第一週で完了
- 提案書統合以降のスケジュールは動かせないので、実質的な提案書作成期間は1週間程度...

---

## まとめ

- **大型案件のプロポーザルマネジメント活動は、RFP受領の数ヶ月～1年前から開始します。**

- **案件評価期、案件獲得活動期は、主に担当営業と、提案担当PM予定者による、情報収集・分析～提案戦略の策定期。**

- **この時期に、一枚企画書によるお客様の企画のコントロールと、期待値コントロールによる、後の提案時の顧客満足向上を図る。**

- **分析のための見積もりとリスクマネジメントは最初期から始めて継続的に。RFP受領前に提案可否を判断する。**

- **「提案書の作成」は最終段階、わずか2週間程度の作業。**

- **RFP受領後にこの全てを行うなら、極端に高い提案力が要求される。**

---

## 参考文献

- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』(ダイヤモンド社)
- 『ITエンジニアの必須スキル 顧客に響くシステム提案メソッド』(日経BP)
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』(早川書房)
- 『プロジェクトガイドライン』（システムエグゼ プロジェクト品質保証委員会）

---

## 【HPMS】アーキテクト教育・第八回v4.3.md

## 第八回 ネットワーク設計/サーバ設計 分析クラスモデリング

## 目次

1. **ネットワーク設計基礎**
   - 1-1. OSI参照モデル
   - 1-2. L2
   - 1-3. L3
   - 1-4. L7

2. **サーバ設計基礎**
   - 2-1. ○○サーバ
   - 2-2. サーバサイジング
   - 2-3. サーバ構成
   - 2-4. セキュリティ

3. **分析クラスモデリング実践**
   - 3-1. 「機能」を図解してみよう
   - 3-2. 「振る舞いを」を冗長化してみよう
   - 3-3. 「目的語」に寄せてみよう
   - 3-4. 「ドメイン」を発見してみよう

4. まとめ
5. 参考文献

---

## 1. ネットワーク設計基礎

現在のコンピューティング環境は、ネットワーク技術無しで語る事が出来ません。
古典的なLAN/WAN以外にも、無線ネットワークやそこに接続されるモバイルデバイス、クラウド上で実現する仮想ネットワークなど、ネットワークの進化に合わせてシステムアーキテクチャも進化を続けています。
ここではネットワーク設計の基礎に触れた上で、現代のネットワークとアプリケーションの関係を概観します。

### 1-1. OSI参照モデル

#### プロトコルの7つの階層

ネットワークを理解するための重要なキーワードが**通信プロトコル(communication protocol)**と**OSI参照モデル(OSI reference model)**です。OSI参照モデルとは、ネットワーク通信において推奨されるプロトコル定義上のレイヤモデルです。ただし、現在主流のTCP/IPプロトコル群はOSI参照モデルと異なるレイヤ定義を行っているので注意が必要です。

| OSI参照モデル | TCP/IPモデル | レイヤ | 解説 |
|---|---|---|---|
| アプリケーション層 | アプリケーション層 | L7 | ユーザーが直接かかわる通信サービスを規定 |
| プレゼンテーション層 |  | L6 | 圧縮方式や文字コードなどのデータ表現を規定 |
| セッション層 |  | L5 | コンピュータ間の接続や切断などの手順を規定。いわゆるセッションを確立する層 |
| トランスポート層 | トランスポート層 | L4 | 誤り訂正の方法や再送制御などの通信管理を規定。いわゆるコネクションを確立する層 |
| ネットワーク層 | インターネット層 | L3 | データの通信経路を選択する方法を規定。いわゆるルーティングを行う層 |
| データリンク層 | ネットワークインターフェース層 | L2 | 通信機器レベルの送信元と宛先を特定する方法やエラー検出方法などを規定 |
| 物理層 |  | L1 | 電気信号の変換方法を定めたり、コネクタの形状などを規定する |

#### プロトコルスタック

プロトコルの階層定義或いはその実装を**プロトコルスタック**と呼びます。また、ネットワーク通信において特にTCP/IP通信の文脈(コンテキスト)では**TCP/IPプロトコルスタック**と呼びます。

ネットワークとプロトコルの関係を記述した文章を読む場合は、どちらの文脈で書かれているか注意して読む必要があります。
※ ネットワークの基礎解説を行う場合は、本資料を含めOSI参照モデルの文脈で書かれる事が多い

| OSI参照モデル | TCP/IPモデル | レイヤ | プロトコル |
|---|---|---|---|
| アプリケーション層 | アプリケーション層 | L7 | NNTP, SIP, SSI, **DNS**, **FTP**, Gopher, **HTTP**, NFS, NTP, **DHCP**, SMPP, **SMTP**, SNMP, Telnet, RIP, BGP… |
| プレゼンテーション層 |  | L6 | **MIME**, XDR, **SSL**, **TLS**… |
| セッション層 |  | L5 | TCP Session, SIP, RTP… |
| トランスポート層 | トランスポート層 | L4 | **TCP**, **UDP**, SCTP… |
| ネットワーク層 | インターネット層 | L3 | **IP**, IPsec, ICMP, IGMP, OSPF… |
| データリンク層 | ネットワークインターフェース層 | L2 | **Ethernet**, PPP, SLIP, PPTP, L2TP, **STP**… |
| 物理層 |  | L1 | 各種コネクタ規格/ケーブル規格 |

#### そのプロトコルL3？L7？

現在のネットワークは多くTCP/IPプロトコルスタックに基づいて構成されているため、あるプロトコルがOSI参照モデルのどのレイヤに属するものなのか、厳密には表現する事が出来ません。

また、TCP/IPプロトコルスタックに属するプロトコル群は複数のOSIレイヤをまたいで動作するものも多く、その説明はより下位レイヤを含んだ形で（つまり、L2の説明をしていても暗黙的にL1の動作を含んだ形で）説明されます。読んでいる人が混乱しやすいポイントです。

例えば、DHCP（L7のプロトコル）の目的はIPアドレスの払い出しですが、IPはL3のプロトコルであるため、L3の文脈で説明される事があります。このような事を踏まえながらネットワークに関する書籍や記事を読む必要があります。

### 1-2. L2

#### データリンク層(L2)の概要

我々が普段目にするネットワーク(LAN,WAN)を構成するのが、データリンク層(L2)のプロトコルスタックです。いわゆるLANの代表的な接続方式である**Ethernet(イーサネット)**はL2で定義され（※厳密にはL1と、L2の下位層であるMAC副層によって定義される）、いわゆる**MACアドレス**や**スイッチング(L2スイッチ)**向けのプロトコルスタックを含む、ネットワークの基礎部分を構成するレイヤです。

#### L2スイッチとMACアドレス

L2のネットワークにおいて通信経路制御(スイッチング)を行うのが**L2スイッチ**です。L2スイッチはMACアドレスによる経路制御を行うネットワーク装置です。

**MACアドレス**とは、前半24bitをIEEEが管理し各ネットワーク機器ベンダーに割り当てている機器固有の48bitのIDです。L2における経路制御(スイッチング)とは、MACアドレスを元にした制御です。

L2スイッチの動作：
- **MACアドレステーブル**に宛先アドレスを探し、発見したらそのポートにフレームを送信
- 発見出来なかったら受信ポート以外の全ポートへ送信（**フラッディング**）
- MACアドレステーブルは、フレームが送信されるたびにL2スイッチが自分で学習

#### Spanning Tree Protocol(STP)

L2スイッチは、MACアドレステーブルに存在しない宛先が指定された場合（※ブロードキャストの場合はMACアドレステーブルの状態に関わらず必ずL2ループが発生）フラッディング(意図しない全ポート送信)を行います。この時、送信先のスイッチにも宛先が存在しない場合再度フラッディングが発生し、複数のスイッチ間でフレームが**無限ループ(L2ループ)**してしまいます。

このような事態を回避するためのプロトコルが**スパニングツリープロトコル(STP)**です。

STPの仕組み：
- **ルート(根)ブリッジ**を定義し、各スイッチを「枝」として転送速度などから最適経路を計算（スパニングツリーアルゴリズム）
- 最適経路ではないポートが自動的に**ブロックポート**に設定され、フレームをブロック
- ツリー(木)として定義された最適経路で通信

#### Virtual LAN(VLAN)

L2ループを抑止するもう一つの方法として、スイッチに対し**ブロードキャスト可能な範囲(ブロードキャストドメイン)**を制限するというアプローチがあります。これをL2で実現するのが**VLAN**です。

VLANは一部のL2スイッチ（※実際には、現代のL2スイッチではほぼ標準機能）或いはL3スイッチで実現出来る構成で、スイッチのポートとMACアドレスの組み合わせを論理的にグループ化します。

VLAN の種類：
- **スタティック(静的)VLAN**：MACアドレスベースで固定的に定義
- **ダイナミック(動的)VLAN**：接続するデバイスを識別し、ポートに紐づくVLANを自動切り替え
  - 実現するレイヤによってMACベース、サブネットベース(IPアドレスベース)、ユーザーベース等の構成も可能

### 1-3. L3

#### ネットワーク層(L3)の概要

我々が慣れ親しむ「ネットワーク」のもう一つがいわゆる**ザ・インターネット(the Internet)**で、その接続方式が**internet**です。internetは**ネットワーク層(L3)**のプロトコルスタックです。

このレイヤはTCP/IPプロトコルスタックの文脈では**インターネット層**と呼ばれ、**IPアドレス**によって識別される論理的なネットワーク構成の世界です。
※ WWWはTCP/IPプロトコルスタックの世界に構築されているため、Webアプリケーションの文脈では四層モデルで解説される事もあります

#### L3スイッチ/ルータとIPアドレス

L3のネットワークにおいて通信経路制御(ルーティング)を行うのが**L3スイッチ**或いは**ルータ(Router)**です。L3スイッチ/ルータはIPアドレスによる経路制御を行うネットワーク装置です。

the Internet上の**グローバルIPアドレス**はIANA(Internet Assigned Numbers Authority)により管理される一意なアドレスです。対して、Ethernet上で使用される**プライベートIPアドレス**はそれぞれのLAN/WAN管理者によって管理される一意なアドレスです。

L3スイッチ/ルータは**ARPテーブル**（IPアドレスとMACアドレスの対応表）を持ち、IPの世界とMACの世界をつなぎます。
※ちなみにL2スイッチ/L3スイッチ/ルータは、外観では区別がつかない事が多い

#### ルーティング

L3における経路制御である**ルーティング**はinternetの世界で生まれたアイディアであるため、その前提として**異なるネットワーク間で通信を行うこと**を想定しています。the Internetにおける通信は、ホストからホストへ至る際に様々なネットワークを経由し、場合によっては（※有線回線と衛星通信を併用する場合は往路と復路で経路が異なる）通信の往路と復路が異なる事さえあります。そのような条件下で(可能な限りの)最適経路を発見するため、ルーティングには様々な方式が存在します。

#### ルーティングテーブルとスタティックルーティング

L3ネットワーク上のホストやL3スイッチ/ルータは全て**ルーティングテーブル**を持っています。

ルーティングテーブルとは、パケットに含まれる宛先IPアドレスから宛先ネットワークを識別する情報(宛先ネットワークアドレス/サブネットマスク)と隣接ルータのIPアドレスを保持するテーブルです。

**スタティック(静的)ルーティング**を例に取ると、以下のような役割を果たします：
- ホスト：宛先への経路を次のルータに転送
- 中継ルータ：ネクストホップを決定してパケットを転送
- 宛先ルータ：直接接続可能なネットワークへ配送

#### ダイナミックルーティング

**スタティックルーティング**はシンプルですが、途中のルータが故障した場合通信が途絶してしまいます。

そこで、若干ネットワーク負荷は増しますが**ルータ同士が通信を行う事で動的に経路を切り替える事が出来る**（＝自動的にルーティングテーブルが作成される）**ダイナミックルーティング**という方式もあります。

ダイナミックルーティングの動作例：
1. 各ルータが自分のIPアドレスを隣接ルータに通知
2. ルーティングテーブルが更新される
3. 直接接続可能なネットワーク情報を隣接ルータに通知
4. 経路情報が段階的に伝播してルーティングテーブルが更新される

### 1-4. L7

#### アプリケーション層(L7)の概要

アプリケーション開発者にとって馴染みの深い**アプリケーション層(L7)**のプロトコルスタックです。TCP/IPプロトコルスタックの文脈では同名のアプリケーション層内にL5の一部からL7までが含まれます。Webアプリケーションが主流の現在、「L7」と表現された場合L5～L7の範囲のプロトコルスタックを全て含んだ話題であると理解して構いません。
※逆にL4は「TCP/IP」という表記が示すように、L3(IP)とL4(TCP)の話題がセットで扱われる事がほとんどです

#### L7スイッチとADC

L7のネットワークとは、つまりは**アプリケーション間通信の世界**です。L7には**IPアドレスとURL(URI)を関連付けるDNS**や、**電子メールを送信するSMTP**、**ハイパーテキストを転送するHTTP**など、様々なサービスに応じた通信プロトコルが存在します。

**L7スイッチ**とは、L2,L3に加えL7のプロトコルにも対応したスイッチであり、L7の情報(例えば電子メールの本文)を元にした経路制御を行う事も可能です。

L7スイッチの機能例：
- ロードバランサ
- SSL/TLSアクセラレータ  
- リバースプロキシ
- WAF（Web Application Firewall）
- CDN（Content Delivery Network）

Webアプリケーション向けの機能が強化されたものを特に**アプリケーションデリバリコントローラ(ADC)**と呼ぶ事もあります。

#### L7ファイアウォール

**ファイアウォール**とは通常L3の情報(IPアドレス、通信プロトコル、ポート番号等)を元にパケットを通す/遮断する仕組みの事を指します。**L7ファイアウォール**とはこれをL7まで拡張したもので、L3の情報に加えL7の情報も評価可能なものです。

ただしL7ファイアウォールを含めL7のネットワーク装置には様々な構成があり、厳密な区別が難しい状況です。

L7ファイアウォール関連技術：
- **統合型脅威管理(UTM)**
- **次世代型ファイアウォール(NGFW)**
- **L7スイッチ**
- **アプリケーションデリバリコントローラ(ADC)**

これらは機能構成がほぼ同じで、装置構成もほぼ同じです。これは、クラウドの出現により、L2/L3の世界で行っていた事をL7上で実現しようというアプローチが増えた結果です。

---

## 2. サーバ設計基礎

ネットワークコンポーネントの中でも「サーバ」は、我々にとって特に触れる機会の多いコンポーネントです。サーバ設計に関する基礎知識は、インフラ／ミドルウェアの専門家のみならずアプリケーション開発者にとっても重要な知識です。
ここではサーバ設計の基礎に触れた上で、現代のサーバとアプリケーションの関係を概観します。

### 2-1. ○○サーバ

#### 「サーバ」とは？

英語の「server」とは「給仕する人」という意味です。この意味が転じてネットワーク用語では**(何らかの)サービスを提供するコンピューター**という意味で用いられるようになりました。

提供するサービス毎に「【サービス名】＋サーバ」のように呼ばれるのが一般的で、「【WWW】サーバ」「【メール】サーバ」「【ファイル】サーバ」など様々なサーバが存在します。

かつてのネットワーク(古典的なEthernet)では、サーバはネットワークサービス自体も提供するネットワークの中心的存在でしたが、現在のinternetでは**全てのホストがフラット**なため、**どのホストも自由にサーバになれる**ようになりました。

サーバソフトウェアにより様々な目的のサーバが実現されます。
※なお、性能が要求されるサーバソフトウェア向けの専用コンピューターの事も「サーバ」と呼びますが、ここではサーバソフトウェアの事だけを意味するものとします。

#### 様々なサーバ

ネットワーク上には様々なサーバが存在します。我々が通常触れるものだけでも**フォワードプロキシサーバ**、**DNSサーバ**、**ディレクトリサーバ**、**ファイルサーバ**、**リバースプロキシサーバ**、**メールサーバ**、**WWWサーバ**、**アプリケーションサーバ**、**データベースサーバ**等があります。また、広義では前述のL7スイッチもまたサーバの一種です。

サーバはその目的に応じて様々なプロトコルスタックを使用しますが、現在では多くが**TCP/IPプロトコルスタックを採用(対応)**するようになっています。

例えばOracle DBのデフォルトはTCP/IPですが、他にもTCP/IP over TLS、名前付きパイプ、SDP等にも対応しています。

### 2-2. サーバサイジング

#### サーバスペックの「見積もり」

アプリケーション開発者であってもお客様から**サーバスペックの見積もり**を依頼される事があります。このような見積もりを**サーバサイジング**と呼びます。

サーバサイジングは、以下の要素の影響を受けるため、簡単に指標を提示する事が出来ません：

- 接続ユーザー数
- (秒間)同時アクセス数/同時リクエスト数
- データ量
- サーバ上のミドルウェア/アプリケーションのCPU/メモリ使用量
- これらの量の将来的な増大量予測
- 目標性能
- その他SLA

この領域はネットワーク設計の影響(冗長構成、仮想化、クラウド etc…)も大きく受けます。
同時にアプリケーションアーキテクチャの影響も強く受けますが、見落とされがちです。

#### アプリケーションアーキテクチャの影響

サーバサイジングに当たっては**アプリケーションアーキテクチャの影響**も勘案しなければなりません。

- **DBサーバのサイジング**では、アプリケーション側での**コネクションプーリングの仕様**によって、実質的に要求される同時接続ユーザー数が大きく上下します。

- **WWWサーバのサイジング**でも、一般的なWebアプリケーションの場合と**SPA**の場合では、想定されるアクセス数/(秒間)同時アクセス数が大きく異なります。

サーバサイジングに当たっては、**アプリケーションアーキテクトとインフラアーキテクトの緊密なコミュニケーションが必須**です。

例：ユーザー数1,000名の場合
- SPAにより、アクセス数がWeb Appsの数倍以上
- コネクションプーリングにより、DBの同時接続ユーザー数は半分以下

結果として、DBへの同時接続ユーザー数は1,000名より増える？減る？

### 2-3. サーバ構成

#### 構成するサービス/ソフトウェアスタック

サーバの目的に応じOS上に構成するサービスを決定します。**各サービスが使用する通信プロトコルやポート番号**は(一般的なサービスであれば)**決まっています**（※1 IANAが管理するシステムポート番号。旧称ウェルノウンポート）ので、特段の事情（※2 セキュリティ要求等により、システムポートではなく49152番以降のポートを割り当てる場合もある）が無ければそれを採用します。これがサービスのネットワーク設計に当たります。

次に各サービスの**ソフトウェアスタック**を決定します。**非機能要求に応じてサーバーソフトウェアやミドルウェアを選定**し、その構成を設計します。

構成例：
- **サーバ hoge1 (Windows Server 2016; 192.168.0.33)**
  - APサーバ (IIS 10.0)
  - Oracle Client (ODAC 12.0.2)
  - ODP.NET

- **サーバ hoge2 (RHEL; 192.168.0.34)**
  - リバースプロキシ (Nginx; hoge2.app1)
  - HTTP:80, HTTPS:443

この例では社内公開するURLはリバースプロキシで定義するもの、としています（ほとんどの場合この方が望ましい）。

#### サーバの冗長化

性能要求が非常に高いシステムの場合**サーバの冗長化設計**を行います（※ネットワーク構成に影響を及ぼすため、ネットワーク設計と同時に行います）。特に同時アクセス数が非常に多い事が想定される場合（＝ユーザー数が非常に多い、アプリケーションのラウンドトリップが非常に多い）、**ロードバランシング**や**クラスタリング**の採用を検討します。

ロードバランシングもクラスタリングも、まずは**どのレイヤに実装するか**を検討する必要があります。一般的には**低レイヤ(～L4)で実現した方が大きな負荷に耐えられます**。逆に**上位レイヤ(L5～L7)で実現する場合は、非常に柔軟な構成が可能**になります。

冗長化構成例：
- **L4ロードバランサ**：IPアドレスを見分けて分散
- **L7ロードバランサ/リバースプロキシ(ソフトウェアロードバランサ)**：IPアドレス以外にも評価可能な色々な条件で分散。WWWサーバで構成する事も出来る
- **APサーバの冗長化**：複数に分けた場合はHTTPセッションの同期が課題。負荷分散方式によっては配慮が不要な場合も
- **DBサーバの冗長化**：代表がOracle RAC。ストレージ共有方式のクラスタリング

※注：実際にはこんなに冗長化構成を重ねる事は普通は無い

### 2-4. セキュリティ

#### サーバのセキュリティ設計

社内向けのサーバであっても**セキュリティ設計は非常に重要**です。特に電子メールに添付されて送り込まれる**リモートアクセス型トロイの木馬(Remote Access Trojan/RAT)**に対する対策として、以下の対策が重要です：

- **特権ID管理**：サーバの特権IDを無効化し、適切な範囲の操作権限に応じたアカウントを作成する等
- **ファイアウォール機能**：iptablesやWindows Defenderファイアウォール等の利用。パケットフィルタリングにより適切な通信のみ受信。不要ポートを封じる等
- **ACLの構成**：アクセス制御リスト(ACL)によりIPアドレスやユーザーアカウント等に対するアクセス制御を行う
- **踏み台サーバの構成**：サーバへのリモートログインはこのサーバを経由しないと出来ないようにする

その他のセキュリティ対策：
- **WAF**：サーバにインストールするソフトウェア型の専用WAF
- **ウイルス対策ソフトウェア**：サーバのメモリ/ディスク上のファイルに対するウイルス対策
- **端末監視**：サーバに対する操作を監視・記録
- **ロックダウン**：サーバの運用に不要なサービスを停止し、場合によってはコマンドやシェルそのものを削除

セキュリティ要求に応じ、場合によってはロックダウン等の対策も検討します。

---

## 3. 分析クラスモデリング実践

オブジェクト指向による機能設計において、重要かつ基礎となるのが**分析クラスモデリング**です。お客様の業務機能全体をモデリングしドメインを発見、ドメイン内のオブジェクトを発見する事で、機能分析からクラス設計までシームレスに進める事が出来ます。
ここではサンプルとなるビジネスユースケースを元に、分析クラスモデリングの実践例を詳解します。

### 3-1. 「機能」を図解してみよう

#### こんなドキュメントフローを想定

ここでは、分析～設計で、以下のようなドキュメントフローを想定しています。概ね要件定義～詳細設計の流れです。

**基本設計(論理)**
- 業務フロー、アクティビティ図、ユースケース図等
- ビジネスユースケース記述
- ロバストネス図
- クラス図

**詳細設計(物理)**
- システムユースケース記述

想定される流れ：
- ビジネスユースケース記述は業務トランザクション或いはユースケース単位で記述される事を想定
- ロバストネス図の記述により全体をモデリング
- ドメイン分析の結果から全体のクラス図が記述される
- コントロール(主要メソッド)単位でシステムユースケース記述が作成される

→ この流れは**ICONIXプロセス**をベースとして設計したシンプルなフローです

#### 分析クラスモデリング

「**分析クラスモデル**」とは、一般的には**UMLドメインモデル**或いは**BCEモデル**を用いた分析により得られる「クラス」のモデルの事です。**分析クラスモデリング**とは「クラスモデル」を得るための分析行為です。

今回は**BCEモデルの表記法の一つロバストネス図記法**を用い、実際にモデリングを行ってみます。

まずは対象とするユースケース２つ（ビジネスユースケース UC002, UC003）の紹介です。

#### ロバストネス図記法による「機能」の図解

では実際に分析クラスモデリングを実践してみます。
まずは「機能」が記述された**ビジネスユースケースの内容を、そのままBCEモデル(ロバストネス図記法)で記述**します。この時気をつける事は：

- **ビジネスユースケース中の「振る舞い」が漏れないように図解する**
- **エンティティの構造を「設計」せず、言葉のままに定義する**

### 3-2. 「振る舞いを」を冗長化してみよう

#### ロバストネス図記法における主語・述語・目的語

次に、再びビジネスユースケースを見ながら**コントロールの記述を冗長化**します。まずは振る舞いの**主語、述語、目的語**をはっきりさせます。

**主語、述語、目的語をはっきりとさせると、現在のビジネスユースケース記述において欠けている点や曖昧な点が可視化されます**。それらを補完しつつ、コントロール記述を冗長化します。

### 3-3. 「目的語」に寄せてみよう

#### コントロールの移動①データドメインの発見

さて、言葉を冗長化する事で基本的なBCEモデルが得られました。**ここからが分析の本番**です。
（ここまでの流れは、ユーザー要求を仕様のレベルで記述する、という要件定義プロセスに相当します）

**振る舞いとエンティティの関係を整理するため、コントロールの位置をダイナミックに移動**します。

今回の実践では「設計」のレベルまで持ち込むため、ここで初めてシステム語の観点を持ちます。**今回はデータドメインの観点を用いてコントロールを分割**します。

#### コントロールの移動②機能の「順序」は無視する

「**頑健な設計**」とは「**美しい設計**」の事です。美しい設計は、そのモデルも美しい姿をとります。

**BCEモデルの見た目の美しさを実現するため、さらにダイナミックにコントロールを(上下に)移動**します。**線の交差を出来るだけ無くし、併せてコントロールの重複を排除**します。

この時特に意識して欲しいのは、**各機能の実行順序(≒ユースケース上の上下の順番)は無視する事**です。分析クラスモデリングの目的はあくまでも「クラス」のモデルを得る事で、処理実行順の検証ではありません。それは別にシーケンス分析などで検証します。

### 3-4. 「ドメイン」を発見してみよう

#### ドメイン/オブジェクト/メソッド

BCEモデルが概ね整理出来たので、いよいよ実際の**ドメインを発見**してみましょう。

基本的な業務システムではその目的語の多くがデータなので、どうしても**エンティティ層のデータドメインに目が行きがち**ですが、あくまでも「**絵**」のイメージから「**一体に扱うべき真の目的語**」を考えます。

**ドメインとは「仲間として扱うべき一連の振る舞い」を見定める事**です。今回の例は非常に小さなユースケースを対象としているので判断出来ない部分もありますが、最後にクラス図に変換する例を紹介します。

---

## まとめ

- **OSI参照モデルを理解すればネットワークの基本は意外とシンプル**
- **TCP/IPプロトコルスタックは4層モデルなので混乱するポイント**
- **L2,L3は物理のレイヤ。～L7は論理のレイヤ**
- **サーバ設計はネットワーク設計と切っても切り離せない**
- **分析クラスモデリングもBCEモデルなら直観的にアプローチ可能**
- **モデルの「視覚的な美しさ」を追う事で自然にモジュール分割**
- **ビジネスユースケース(要件)だけあれば、主要クラス(ドメイン)はすぐに洗い出せる**

---

## 参考文献

- 『図解 ネットワーク 仕事で使える基本の知識【改訂新版】』（技術評論社）
- 『Head Firstネットワーク―頭とからだで覚えるネットワークの基本』（オライリージャパン）
- 『Linuxサーバー構築標準教科書 Ver 3.0.2』（LPI-Japan／PDF版無料配布）
  - https://linuc.org/textbooks/server/
- 『ユースケース駆動開発実践ガイド』（翔泳社）
- 『アジャイルモデリング』（翔泳社）

---

## 【HPMS】見積もり・提案教育・第八回v1.8.md

## 第八回 提案の要素技術
## 見積もり・提案教育セミナー

相田一英 2024/10/11

---

## 目次

### 1. 提案の要素技術
- 1-1. 期待値コントロール
- 1-2. 差別化
- 1-3. マーケティング

### 2. ペースレイヤリング分析
- 2-1. ペースレイヤリング分析の目的
- 2-2. ペースレイヤリング分析
- 2-3. 提案戦略

### まとめ

### 参考文献

---

## 1. 提案の要素技術

### 1-1. 期待値コントロール

#### 提案前にやらなくてはいけない事

プロポーザルマネジメント（提案管理）において、我々ベンダーからお客様に対する働きかけは、本来そのほとんどがRFP受領前に実施されます。提案戦略を元に、様々な戦術やツールを駆使し、自社を有利にし、他社を不利にするのが提案活動です。

主にこの時期に使用する、「提案」に関わる基礎的かつ主要な要素技術をいくつか紹介します。

**ユーザープロセス（企画）とベンダープロセスの関係：**

- **ユーザープロセス：** RFI発行 → RFT発行 → RFP発行 → ...
- **ベンダープロセス：** 案件評価 → 案件獲得活動 → 提案計画 → 提案

**顧客を戦略的にコントロールする時期について：**
- 案件獲得活動～提案計画期の内に、十分な時間と戦略をもって、お客様の企画や期待値をコントロールしておく
- 提案期は非常に短いのでコントロールが難しい
- この活動により、顧客満足のコントロールが可能になる

#### 最重要ポイント！顧客満足（CS）向上！

我々がビジネスを行う上で、**顧客満足（Customer satisfaction/CS）**或いは顧客満足度を向上させる事は、なによりも重要な事です。顧客満足が低ければ、お客様は我々からモノやサービスを買ってくれません。

**「顧客満足」とは、一言で言えば「実績評価が事前期待を上回った状態」の事です。**

**昼食の例で考える顧客満足：**

店構えを見た事前期待と実際に食べた結果の関係：
- 期待「不味そう」→ 実際「美味い！」→ **満足！**
- 期待「普通」→ 実際「普通」→ **普通...**
- 期待「美味そう！」→ 実際「不味い...」→ **がっかり...**

この関係性から分かるように：
- **事前期待** → **実績評価** → **顧客満足**
- 満足した場合：「また行こう！」「高いものも食べる」「常連に」
- 普通の場合：「他に店が無い時は行こう...」
- がっかりした場合：「もう行かない...」または「安いなら我慢して行っても良い」

#### 期待値コントロール

つまり、**事前期待を下げ、実績評価を上げれば顧客満足は向上**します。この状態を意図して作り上げる技術が期待値コントロールです。

実績評価を上げるには商品の品質を上げなければなりませんが、これは比較的コントロールが難しい要素です。対して事前期待は、お客様の期待を下げれば良いわけですので、比較的容易にコントロール可能です。

**期待値コントロールの実践：**
- **案件獲得活動期～提案計画期：** 企画に対する発想（アイディア）は提示しつつ、お客様に期待を持たせるような発言は慎み、本来のソリューションは見せない
- **提案：** ソリューションやそのアピールは、提案書とプレゼンで全力で行う

#### 提案の際に気をつけるべき点

提案活動において、期待値コントロールを実現するため、以下のような点に気をつけなければなりません。

##### 1. お客様の要求レベルを正しく把握し、そのレベルに関し具体的に合意しておくこと
→ お客様の期待値を測り、そして固定する戦術です。

案件獲得活動期の一枚企画書を使ったコミュニケーションや、その後のQA等では、要求の「レベル感」を正しく把握し、どの部分で期待を上回るかを検討します。

##### 2. 出来ない可能性がある事を「出来る」と言わないこと
→ 事前に期待値を上げる行為は、提案内容のインパクトを低下させ、不利な方向にしか働きません。

提案本番までは、無駄に自分達を大きく見せる必要はありません。

##### 3. 不得意な案件は極力回避すること
→ 顧客満足の低下は、以後の営業活動にも悪影響を与えます。無理な提案をして失注するよりも、提案を辞退した方が先に繋がります。

（もちろん、無理に受注してプロジェクトに失敗するのも同様に悪影響を与えます）

**「頑張る」「コストを下げる」といった手段よりも、これらを守る事の方が結果的には顧客満足を向上させます。**

（逆に言えば、過去のコピペで作ったような「レベル感が合わない提案」は通りませんし、そもそも「出来る事」「得意な事」を増やしていかないと提案は通りません。良く考えれば普通の事ですよね）

---

### 1-2. 差別化

#### 競争優位の戦略

我々が行う提案の多くはコンペティション（competition）、つまり複数社による競争（入札）です。従って、提案では、**競合他社に対して競争優位を得るための戦略**が必要になります。

M.E. ポーターによる「競争優位の戦略」では３つの戦略が提示されています。

##### 1. コストリーダーシップ戦略
他社には真似が出来ない原価や生産性の向上により、同一品質のものをより低コストで実現する戦略。

ソフトウェア開発の世界では、原価の大部分が人件費であり、利益率（≒生産性）がかなり低いため、非常に採用し難い戦略。

##### 2. ニッチ戦略
競合他社がいない/少ない、小さな市場で相対的に優位なシェアを得る戦略。

顧客と売るモノを選択するため、市場調査や製品調査など事前の投資が重要な戦略。

##### 3. 差別化戦略
競合他社と同じ商材に対し、他社が持たない独自の特徴を持たせる事で付加価値を上げる戦略。代表的なものがブランド戦略であり、根本的には差別化によって商材の付加価値を上げ、（顧客にとって）良いものを高く販売する戦略。

**→ 当社が行う「提案」では、ほとんどの場合これ一択。**

#### コストリーダーシップ戦略

コストリーダーシップ戦略は、単なる値下げ戦略ではなく、**品質を損なわず他社よりも製造コスト（原価）を下げる戦略**です。例えば、開発生産性を向上させ、他社では100人月かかる所を80人月で製造する能力を持ち、他社の80％の価格で受注する事です。

しかしこのアイディアには大きな問題があります。生産性向上の根拠を「人材の能力」においた場合、当然高付加価値人材を使うという事ですから、実は原価は減りません。それはコストリーダーシップ戦略ではなく単なる（実質的に赤字前提の）値引きです。

コストリーダーシップを実現するならば、以下の戦術が必要となります：
- 独自の自社プロダクトを持つ
- オフショアやニアショアで低原価を実現する
- 外部のプロダクトベンダーの（強い）パートナーとなり仕切値を下げる

**いずれの方法でも競合他社を凌ぐ必要があり、事前の投資が必要**

#### ニッチ戦略

ニッチ戦略は、本質的には、**競合との対立を回避するための戦略**です。市場調査や製品調査を継続的に行い、競合が少なく、かつ自社が提供するサービスやプロダクトの価値が最大化される市場/セグメントを発見し、そこに集中してビジネスを行います。

これは、ニッチに合わせ、業態の変更を伴う戦略とも言えます。例えばSIベンダーの場合、AWS専業に切り替えたサーバーワークス社の事例などが有名です。

つまり提案におけるニッチ戦略とは、一義的には**競合が少なく当社が得意な案件だけ提案する**という事であり、**強みを持たない場合は提案しない**、という事です。

**いずれの方法でも（継続的な）事前準備が必要：**
- ニッチを探す → マーケティング
- 得意を増やす → 人材育成/投資

#### 差別化戦略

差別化とは、**競合他社が売れないモノを売るか、同じ商材/サービスに対して他社には無い付加価値を持たせる戦略**です。

例えばブランド戦略のように「ブランド価値」を付ける事で、（大きく機能が変わらない）同じ商品であっても、より高い価格で販売する事が出来ます。

提案においては、ソリューションそのものに他社が提示出来ない、ユーザーにとっての高い付加価値を持たせる事で、**ユーザーが選択せざるを得ない状況を作り出し**、より高い金額での受注を目指す戦略になります。

**差別化戦略の要素：**
- 値下げは差別化ではない
- 他社とは別のものを売る
- 顧客にとっての付加価値とは？
- 何を売るか？ → システムではなくソリューション
- 顧客の予想を上回る → 提案者/チームの努力や工夫で生み出す事が可能（**「提案力」**）

#### 最も基本の「差別化」

最も基本的な「差別化」の方法は、**当社独自の分析により、当社独自の「お客様の課題」を提示する事**です。

要求文書やヒアリング内容を分析すると、お客様の課題が列挙出来る筈です。他社との差別化のために重要なのは、その課題に**当社独自のオリジナリティ**があるか、そして**お客様にとっての優先度**を正しく評価出来るかの、二点です。この二点が、最低限差別化された提案のコンセプトになり、提案書の冒頭に示すべき「提案のポイント」です。この時点で、他社の提案と異なっていなければなりません。

**分析プロセス：**
1. 要求文書・ヒアリング内容 → お客様の課題（複数）
2. 当社独自の観点で優先度分析
3. 優先課題に対するソリューション
4. 提案のポイント

**課題はたくさんあった方が良く、出来れば当社独自の課題も発見する**
**当社独自の組み合わせが、当社独自のポイントを生む**
**優先度が低いものは評価も低いので、普通に出来れば良い**

#### SIにおける「真の差別化」

企業向けSI案件の提案では、**提案が要件を満たすのは当たり前**です。競合他社全てが要件を満たしてきますので、そこでは差別化は出来ません。RFPに示されている要件への回答だけでは、費用以外比べる所のほとんどない提案になってしまいます。

お客様の表面的な要求に応えようとするのではなく、**お客様自身も気付いていないような真なる課題を発見し、他社と比較されるのではなく、当社を選ばざるを得ないソリューションを提示する事**を目指しましょう。

なお、無意味な値下げは、多くの場合提案品質を下げるため、逆に他社に差別化されてしまう原因になりがちです。値付けというのは非常に難しいテーマであり、迂闊に行ってはいけません。

**RFPとお客様の真なる課題の関係例：**

**RFP例：**
1. 機能A
2. 機能B  
3. 機能C
4. 非機能

**従来の提案：**
各社とも「機能A/B/Cを実現します、クラウドA/B/Cを提案します」といった似たような提案になる
→ 違うのは値段だけでは？

**差別化された提案：**
「つまり○○業務が実現すれば良いということでは？」という真なる課題を発見し、
1. 機能Aを実現します
2. 機能Bは不要です
3. 機能Cは外部プロダクトを利用します
4. Microsoft 365 だけで実現します
5. 今後○○システムとの連携を企画すべきなので、今回は連携を踏まえたアーキテクチャを選定しました

**→ この「提案」を選ばざるを得ないのでは？**

---

### 1-3. マーケティング

#### 「市場」を知る、「市場」を読む

競合他社との差別化のためには、我々の商品（の一部）である技術やプロダクトの、市場における動向（トレンド）を知る必要があります。また、他社に先んじるために「予測」したり、他社から差別化されないよう対応する必要もあるため、**「市場」を知り、「市場」を読む**という行為は非常に重要です。

この時必要になるのが「マーケティング」分野の知識とノウハウです。

**マーケティングの基本的な問い：**
- 誰向けに？
- いつ？
- どこで？
- 何を売るか？

**→ これが噛み合わなければモノは売れない。**

#### キャズム理論

市場動向を理解するための有名なツールの一つが**キャズム理論**です。キャズム理論とは、特定のプロダクト/サービスに対するユーザー数の動向は以下のようなモデルに従い、そして「キャズム（深い溝）」と呼ばれる時期を乗り越える事が出来るプロダクト/サービスは非常に少ない、という理論です。

**市場セグメント（左から右へ）：**
1. **革新者（Innovators）** 2.5%
2. **早期採用者（Early Adopters）** 13.5%
3. **実利主義者（Early Majority）** 34%
4. **消極的消費者（Late Majority）** 34%
5. **保守的消費者（Laggards）** 16%

**キャズム（深い溝）：** 早期採用者から実利主義者への移行期

**特徴：**
- **利益率が高い顧客：** 実利主義者
- **売上に貢献する顧客：** 消極的消費者
- **メインストリーム市場：** 実利主義者＋消極的消費者（ここで成功しないとビジネス的な成功とならない）

**顧客の特性：**
- **革新者・早期採用者：** 自社の競争優位のためにリスクを取って採用する顧客
- **実利主義者以降：** リスクを取らず、先行事例を重視して採用する顧客

#### キャズム理論 ─ プロダクト/サービスを「いつ」「どう」売るか？

キャズムの分析によって見えてくるのは、そのプロダクト/サービスを**いつ、どう売るか？**という事です。逆の表現をすれば、同じプロダクト/サービスであっても、時期によって顧客のタイプが異なり、売り方が（つまり提案の仕方が）変わってくるという事です。

**各段階での戦略：**

**革新者・早期採用者期：**
「短期間だけ売れて以後売れなくなる」モノを「ベンチャー企業やPoCニーズがある顧客」に売る事になる

**実利主義者期：**
競争が激化する前に、利益を乗せて素早く売るべき

**消極的消費者期：**
競争が激しく利益が出ない。かつ先細りを前提で売る

**保守的消費者期：**
撤退か、売るものの転換を考える時期。もう投資する事にあまり価値は無い

**クリティカルマス：** 革新者と早期採用者の合計16％。市場シェアがこの数字を超えるか超えないかが大きなポイント

#### ガートナー・ハイプ・サイクル

テクノロジやプロダクトのライフサイクルを理解するための、有名なツールの一つが**ガートナー・ハイプ・サイクル**です。

「ハイプ」とは、直訳すれば誇大広告の事です。（誇大広告気味の）広告の活発さをモデル化し、テクノロジやプロダクトのライフサイクルを可視化した、Gartner社独自のモデルです。

**5つの段階：**

1. **黎明期：** テクノロジが話題に上がり始める時期
2. **『過度な期待』のピーク期：** 顧客がそのテクノロジに過度な期待を抱き、問合せが非常に増える時期
3. **幻滅期：** そのテクノロジへの幻想が無くなり、顧客が幻滅する時期
4. **啓蒙活動期：** ベンダがそのテクノロジは「実はこういうものだ」という現実を啓蒙する時期
5. **生産性の安定期：** ベンダの正しい説明と顧客の理解が噛み合い、そのテクノロジが商材として安定する時期

**恐らく幻滅期から啓蒙活動期がキャズム**

#### ハイプ・サイクルから見えてくる事

**黎明期から過度な期待のピーク期にあるもの：**
キャズム前のものなので、それを前提とした売り方をすべきです。大抵のものが「流行っているように見える」のはこの時期ですが、例えば**エンタープライズ系のお客様はこの時期にはあまりいません**。

**幻滅期に向かっているもの：**
徐々に（急速に）売れなくなって行くため、それを前提に考えなければいけません。

**啓蒙活動期：**
実利主義者の顧客に対し、**利益を載せて売る時期**です。この時期に行う啓蒙活動（プロモーション）によって、生産性の安定期のビジネスが左右されます。

**生産性の安定期：**
顧客数も増えますが競争相手も増えていますので、どうしてもコスト勝負になりがちです。利益を確保するためには**プロダクトそのものではなく、差別化されたソリューションで勝負する必要があります**。**エンタープライズ系のお客様はここに多くいます**。

（ものを売るだけなら簡単ですが、利益を出すのが最も難しい時期です）

#### マーケティング観点からの、企業ITガバナンスの理解

お客様の事業要求を理解する上で、**企業のITガバナンス要求を理解し、対象としているシステム（或いはシステム化企画）との関係を理解する事は極めて重要**です。システムの非機能要件というものは、ITガバナンス要求に応じて決まるものであり、我々SIベンダーが、その責務として「提案」しなければならない、非常に重要な要素です。

ここでは、先に名前が上がったGartner社が提唱する「**ペースレイヤリング**」と「**バイモーダルIT**」という二つのモデルを紹介します。

#### ペースレイヤリング

ペースレイヤリングは、Gartner社が2011年に提唱した、**企業におけるITシステムの種類とライフサイクルを整理するフレームワーク**です。システムをその変更のペースに応じ三層のレイヤモデルで分類し、その特性に応じた管理とガバナンス（統制）のプロセスを定義するべき、という考え方です。

| ペースレイヤ | 変化の頻度 | 事業要求 | ITガバナンス |
|---|---|---|---|
| **レイヤ1** | システムの更改ペース4年以上。システム自体はほぼ永続的に使用。 | 企業の基幹システムとして長期の使用を前提とする。これを「**記録システム**」と呼称。コスト効率、信頼性、安定性を要求。 | ➢ 長期安定した技術基盤<br>➢ コストより性能や品質を優先して開発<br>➢ 堅実な開発プロセス |
| **レイヤ2** | システムの更改ペース1～3年程度。 | ビジネス上の戦略的ニーズに応じた柔軟な使用を前提とする。これを「**差別化システム**」と呼称。競合他社との差別化を実現するための俊敏性を要求。 | ➢ 中期安定した技術基盤<br>➢ コストに応じた性能や品質で開発<br>➢ WFやアジャイル等、最適な開発プロセス |
| **レイヤ3** | システムの更改 or 廃棄のペース1年以下。試行的なものも含む。 | ビジネスチャンスの補足、新たな戦略の試行のため、即時・短期の使用を前提とする。これを「**革新システム**」と呼称。時機を逃さない機敏性を要求。 | ➢ 最新の技術基盤<br>➢ 性能や品質よりもアジリティを重視<br>➢ アジャイル等の柔軟な開発プロセス |

**→ その「機能」はどのようなプラットフォームに配置すべきか、どのようなガバナンスが必要かを考える。**

#### バイモーダルIT ─「２つの流儀」

Gartner社が、ペースレイヤリングの考え方をさらに進め、**企業は二種類の異なるITガバナンスを持つべき**、と提唱したものがバイモーダルITというアイディアです。システム（機能）の「モード（≒特性）」に合わせたITガバナンスを適用し、それに最適なテクノロジを選択する、というフレームワークです。

| モード | 特性 | テクノロジ |
|---|---|---|
| **モード1** | 変化が少ない、スピード、確実性、正確性、高品質。 | メインフレーム、基幹システム、ERP、ITIL・・・ |
| **モード2** | 変化が速い、アジリティ、低コスト、低品質を許容。 | 3rd Platform（第三のプラットフォーム）、クラウド（IaaS, PaaS・・・）、アジャイル、DevOps・・・ |

**企業における投資判断や予算計画、優先事項等のガバナンスが異なる。**

---

## 2. ペースレイヤリング分析

### 2-1. ペースレイヤリング分析の目的

#### 前提 ─ クラウドインテグレーションの時代

ここで紹介するペースレイヤリング分析は、**クラウドインテグレーションを前提としたシステム化提案を行う事**を目的としています。或いは、大規模基幹システムでは昔から一般的な、**非同期分散システム提案を行うためのフレームワーク**です。

現代は、一つの「システム」であっても、**個々の機能を複数のプラットフォーム上に分散して配置するのが当たり前の時代**です。プラットフォームはITガバナンス要求に応じて選択されるべきものであり、**各機能に対するITガバナンス要求の分析は必須**です。

本フレームワークにより、提案時の速やかなITガバナンス分析と、プラットフォーム選定が可能になります。

**分析プロセス例：**
```
機能一覧 → ペースレイヤリング分析 → レイヤ別機能分類
```

- **レイヤ1：** 従来通りオンプレミス或いはIaaSで社内システム前提の非機能要求。ERPやスクラッチ開発が向く？
- **レイヤ2：** PaaSやローコードを用いた、一部外部公開するような非機能要求。プロダクトが存在すればベスト。
- **レイヤ3：** ノーコードやアジャイルを基本に考える、コンシューマ向けに近い非機能要求。理想は内製なので、提案内容は一考。

#### ITガバナンス要求の分析と、要求に応じた機能の分類

個々の機能に対するITガバナンス要求を分析し、その機能が配置されるべきレイヤとモードを速やかに判別します。この結果、お客様に提案する「システム」において、どのようなプラットフォームを選定し、またどのような運用モデルを提案すべきかを、機械的に導く事が出来ます。

（ITガバナンス要求が異なるという事は、それに応じた、お客様側のシステム管理/運用体制を構築すべきだという事です）

**ガバナンス要求とシステム機能の関係：**
- **基幹系機能：** Mode 1, レイヤ1（記録システム）
- **情報系機能：** Mode 1, レイヤ2（差別化システム）
- **顧客サービス機能：** Mode 2, レイヤ2（差別化システム）
- **新サービス用Apps：** Mode 2, レイヤ3（革新システム）

### 2-2. ペースレイヤリング分析

#### ペースレイヤリング分析フレームワークの紹介

Gartner社が提唱したペースレイヤリングモデルを、品質管理セクションが整理し分析ツール化したものが、**ペースレイヤリング分析フレームワーク**です。

このフレームワークは、分析対象の「システム」に含まれる個々の機能に対してITガバナンス分析を行い、**機械的にレイヤを判定**します。判定のための情報は、分析者のドメイン知識だけではなく、**お客様とのヒアリングによって入手**します。

**プロセス：**
1. **案件獲得活動期：** 一枚企画書等を用いてお客様にヒアリングする時期
2. **分析：** ペースレイヤリング分析実施
3. **フィードバック：** 一枚企画書と合わせて分析結果をお客様にフィードバックし、再度ヒアリングを重ねる
4. **結果：** プラットフォームの組み合わせ、サブシステム分割、プロダクト、運用プラン、移行案

**企画段階でITガバナンス要求を明らかにする事は、お客様にとっても重要作業。**
**→ 企画支援（コンサルティング）にもつながるので、積極的にヒアリングすべき。**

#### ペースレイヤリング分析フレームワーク・デモンストレーション

（RFPの分析と、お客様へのヒアリング結果から、ITガバナンス要求を勘案した、複数プラットフォームに分散するサブシステム構成案を導くまでの、簡単なデモンストレーションを実施します）

**デモプロセス：**
```
RFPサンプル → ペースレイヤリング分析フレームワークへ機能一覧を転記 → RFP分析
                                                                    ↓
お客様へヒアリング → ペースレイヤリング分析フレームワークへ評価結果を記録 → ペースレイヤリング分析 → サブシステム分割案
```

### 2-3. 提案戦略

#### お客様との「すり合わせ」の効果

本フレームワークを用いたお客様へのヒアリングは、**お客様とのITガバナンス要求に関するすり合わせ**でもあります。お客様自身が、自社のITガバナンス要求を正しく理解し、対象システム/機能に対してどのような要求を行う事が正しいのかを認識する事で、**企画段階での無理な要望、ミスマッチな要望が除外**されます。これにより、早い段階で大きな不確実性が排除され、その後の提案や要件定義をスムーズにし、**プロジェクトの成功率を向上**させます。

**効果の連鎖：**
```
ITガバナンス要求すり合わせ → お客様の無理な要望排除 → 不確実性の低下
                                                        ↓
見積もりの期待精度向上 → プロジェクト成功率向上 → 顧客満足向上
        ↓                        ↓                    ↓
最適なプラットフォームや     利益率の向上        中長期的な
テクノロジを早期選定                            経営安定
        ↓
コスト最適化 → 提案の差別化 → 受注率向上
```

**経営層向けの提案アピールポイントにもなる。**

#### ITガバナンス要求を隠し「逆転」を図る

提案の中には、どうしてもとりたい案件ながら、**当社に不利な前提条件がある（ように見える）案件**があります。このような場合、提案内容での一発逆転を図るために、**ITガバナンス分析の結果を提案まで隠す**という選択肢もあります。

ITガバナンス要求は事業要求であり、お客様のIT担当者ではなく、**お客様経営層の要求**です。特に大型提案の場合、押すべきは**経営層（決裁者）のホットボタン**であり、それ以外は差別化要素では無いとも言えます。

この場合は、事前のお客様ヒアリングやRFI/RFTに含まれる、ITガバナンス要求上の問題や欠陥は敢えて放置します。RFP後の、他ベンダーと共有するQAシートでも、敢えて知らぬふりをしてその問題や欠陥に触れずにいるか、むしろ他ベンダーが、それが原因で誤ったソリューションを提案するようミスリードする、といった戦術もあります。

**差別化とは、「お客様が当社を選ばざるを得ない状況を作り出す」事です。**

---

## まとめ

- **顧客満足向上のコツは、事前に期待させない事。**

- **提案における差別化とは、お客様が当社を選ばざるを得ない理由を作り出す事。**

- **プロダクトやサービスは、時期によって売るべき相手が異なり、売り方も異なる。**

- **マーケティング知識を身につければ、市場の動きが見えてくる。**

- **ペースレイヤリング分析で、お客様のITガバナンス要求を素早く分析し、お客様経営層のホットボタンを押す、差別化された提案を。**

---

## 参考文献

- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』(ダイヤモンド社)
- 『ITエンジニアの必須スキル 顧客に響くシステム提案メソッド』(日経BP)
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』(早川書房)
- 『キャズム Ver.2 増補改訂版 新商品をブレイクさせる「超」マーケティング理論』(翔泳社)
- 『プロジェクトガイドライン』（システムエグゼ プロジェクト品質保証委員会）

---

## 【HPMS】アーキテクト教育・第九回v4.5.md

## 第九回 ミドルウェア(DB,OS)設計・開発フレームワーク構築

**アーキテクト教育セミナー**

相田一英 2024/12/23

Copyright(c) 2019-2024 SystemEXE Inc. All rights reserved.

## 目次

### 1. ミドルウェア(DB,OS)設計基礎
- 1-1. ミドルウェア設計とは
- 1-2. データベース物理設計
- 1-3. Web/APサーバ設計
- 1-4. その他のミドルウェア

### 2. 開発フレームワーク設計
- 2-1. 開発フレームワークとは
- 2-2. フレームワーク投資判断
- 2-3. ソフトウェアアーキテクチャ
- 2-4. コンポーネント配置

### 3. 開発フレームワーク構築
- 3-1. アプリケーションアーキテクチャ
- 3-2. APコンポーネント設計
- 3-3. フレームワーク/APIの実装
- 3-4. テスタビリティ

### まとめ

### 参考文献

---

## 1. ミドルウェア(DB,OS)設計基礎

ミドルウェアとは、OSとアプリケーションとの中間に位置し、システムに対し様々なサービスを提供するソフトウェアのことです。ここでは、我々が普段良く目にするミドルウェアと、システムにおけるミドルウェア構成及び設計を概観します。

### 1-1. ミドルウェア設計とは

#### 「ミドルウェア」とは

ミドルウェア(middleware)とは、**OSとアプリケーションの中間(middle)に位置し**、アプリケーションに対して様々なサービスを提供するソフトウェアのことです。

代表的なミドルウェアには以下があります：
- （プログラム向けの）仮想マシンやランタイム（JVM, CLR）
- データベースマネジメントシステム（DBMS）
- Webサーバ/APサーバ
- ジョブコントローラ
- メッセージキュー（MQ）

また、いわゆる**クラウドサービス**は、ソフトウェアそのものは提供せず、そのサービスだけを提供する、これまでのミドルウェアに相当するものだと言えます：
- PaaS
- DBaaS, dbPaaS
- メッセージブローカ
- サーバレス

### 1-2. データベース物理設計

#### データベースマネジメントシステム

データベースマネジメントシステム(DBMS)には、普段馴染み深いRDBMS以外にも、様々な種類があります。データストア設計の第一歩目は、システムの目的に応じてどのようなDBMSを採用するかを検討する事です。

| DBMS | 概説 |
|------|------|
| **RDBMS** | 多くのステートソーシングシステムで広く採用される、普及率が最も高いDBMS。Oracle DBやSQL Serverが有名。 |
| **ODBMS/ORDBMS** | オブジェクト指向プログラミングで扱う「オブジェクト」をそのまま保持するためのDBMS。インピーダンスミスマッチが軽減され大変扱い易いが、普及率は極めて低い。なお、厳密にはOracle DB等もORDBMSとしての機能を持つ。 |
| **インメモリDBMS** | データベースの実体をメモリ上に持たせたDBMS。高速な応答が可能。組み込みDBのような軽薄短小ニーズに応えるもの。ちなみにTomcat等でHTTPセッションを保持しているのはこれである。（これに対抗しOracle DBでは特定の表領域をインメモリに配置する機能が追加された） |
| **分散KVS** | クラウドサービスのような極端に多くのユーザーに対して高速なデータの入出力を提供するためのデータストア。キャッシュ層の構成にも採用される。 |

#### データベースの「物理設計」？

まず最初に、**用語混乱ポイント**である「データベース設計」という言葉を整理しておきます。

歴史的経緯により、単に「データベース設計」と言った場合はデータの論理設計を指す事がほとんどです。対して、DBMSのためのハードウェア構成やバックアップ、運用・監視などの設計は**データベースの物理設計**と呼びます。

**データ/アプリケーションの世界**：
- 概念設計
- 論理設計（データベース設計※）
- 物理設計
- データ論理設計
- テーブル設計

**インフラ/ミドルウェアの世界**：
- データベース物理設計
- ハードウェア設計
- バックアップ設計
- 運用設計
- 監視設計

※本当はまとめて「データ設計」と呼ぶ方が良いのです。

#### データベースの物理設計

ここではRDBMSを例に取り、データベースの物理設計観点を概観します。

**主要な設計観点**：

- **メモリサイジング**：同時接続クライアント数などを元にサーバ或いはストレージのスペック見積もり
- **ディスクサイジング**：現在～将来予測されるデータやログの総量を見積もり
- **冗長化**：多重化やクラスタリング。Oracle RACが有名
- **セキュリティ**：DB接続の暗号化やFWの設置、NWセグメントの分離、個人情報/秘密情報向けストアの分離など
- **データバックアップ、運用・監視、監査証跡** etc...

### 1-3. Web/APサーバ設計

#### WebサーバとAPサーバ

アプリケーション開発者に馴染み深いのがWebサーバ或いはアプリケーションサーバ(APサーバ)です。

一般的には「静的サイト向けのサーバがWebサーバ、動的サイト向けのサーバがAPサーバ」と説明されますが、システム設計の観点ではもう少し違った視点が必要となります。

**Webサーバの役割**：
- HTMLを配置
- SPAを配置
- Sorryページを配置
- リバースプロキシ
- SWロードバランサ
- TLS装置
- URLの処理

**APサーバの役割**：
- Webアプリケーションを配置
- Web Service, Web APIを配置
- HTTPセッション管理

**注意点**：
- IISはWeb/APを兼ねている
- node.jsなどセルフホスト方式のアプリケーションも増えている
- もっと前方の装置がTLS処理を行う場合もある
- セッション管理は外部のKVS等で行う場合もある

#### APサーバの設計

現在のAPサーバはその多くが**J2EE仕様に従ったJ2EEサーバ**です。従って、APサーバ設計を理解するためにはJ2EE仕様(現在のJakarta EE仕様)を知る必要があります。

システムコンポーネントの観点では、大きく**共有ライブラリ構成**と**冗長化構成**が設計のポイントとなります。

**設計観点**：

| 項目 | 説明 |
|------|------|
| **リバースプロキシを構成する？** | 原則として構成した方が良い。構成した場合は（特にSPAの場合）HTMLコンテンツの配置先をどちらにするかを検討。 |
| **共有ライブラリ構成** | 配置されるアプリケーションで共有されるライブラリの定義や構成。これをきちんと定義・確認しておかないと、アプリケーションが意図しないライブラリを使用してしまう場合がある。 |
| **冗長化構成・セッション同期** | 大きく以下の三つの方針がある：<br>• APサーバクラスタリング<br>• セッションをDBに永続化<br>• アプリケーションでセッションを利用しない |

#### Webサーバの設計

WebシステムにおけるWebサーバは、多く**リバースプロキシの構成**を目的とします。リバースプロキシの役割は多岐に渡ります：

- **URLの処理**：通常、URLを定義するのはリバースプロキシの役割。必要に応じてURLのりライトやリダイレクトを行う
- **障害・メンテナンス対応**：アプリケーション側で障害が発生した場合やメンテナンス時に応答するページ（Sorryページ）の配置。メンテナンス時のURL（ポート）切り替え手順の設計など
- **TLS装置**：リバースプロキシをTLS境界とした場合、cookieのセキュア属性の書き換えを実装しておかなければならない
- SSO、負荷分散など

**重要な注意点**：これらの役割は、より前方のネットワーク装置（ADCなど）が行う事もありますので、**インフラ担当者とアプリケーション担当者で事前に方針を合意しておく事が重要**です。

#### C10K問題とNon Blocking I/O

Apache HTTP Serverのような古くから採用されてきたWebサーバには、1HTTPリクエストに応じて1プロセスを使う仕様になっているものがあり、原理的に、**OSが提供可能なプロセス数上限以上のリクエストを受け付ける事が出来ません**。これを**C10K問題（クライアント1万台問題）**と呼びます。

特にクラウドインテグレーションでは、ユーザー数の最大想定が莫大な数になりがちなコンシューマ向けシステムの開発機会が多いため、C10K問題を持たないWebサーバを採用する事例が多くなります。併せて、莫大な数のリクエストを高速に処理するため、内部的なボトルネックを発生させにくい**Non Blocking I/O**という方式が採用されているものが選択されます。

**次世代のWeb/APサーバ**：
- NGINX
- node.js
- Vert.x（Netty project）
- Suave

もはや**Tomcat＋Apache HTTP Serverは定番構成ではない**...

### 1-4. その他のミドルウェア

#### ジョブコントローラ/統合ジョブ管理

夜間バッチに代表される**定期実行処理を制御する**のがジョブコントローラです。

**基本的なジョブコントローラ**：
- Linux系OSが備えるcron
- Windowsのタスクスケジューラ
- 一部のDBMS製品が備えるジョブコントローラ機能

**統合ジョブ管理**：
定期実行処理やシステム間連携処理が多い場合は、JP1等の**統合ジョブ管理機能を持った製品を採用し、ジョブ管理を一元化**します。

**重要な考慮点**：
- ジョブコントローラの一元化は非常に重要
- お客様によっては、この観点でしか社内システムを俯瞰出来ない状況にある場合も
- 多くの場合ジョブコントローラの役割はシステム間連携（インテグレーション）
- メッセージングを用いたリアルタイム連携の方が適している場合もあるため、事前に連携方式の検討が必要

#### メッセージキューイング

メッセージングキューイング(MQ)は、非常に昔からある**リアルタイムシステム間連携**方式です。（一般的にはメッセージング、クラウドの文脈ではサービス間コミュニケーション等と呼びます）

MQは**クライアントからのメッセージ（リクエスト）を一時的にキューしておく（溜めておく）**ミドルウェアです。特にクライアント数（或いは種類）が非常に多い場合や、メッセージ頻度が非常に高い場合に採用します。

**動作の流れ**：
1. 多数のクライアントからメッセージを受信
2. いったんメッセージを溜める
3. 必要に応じて振り分けながら、順次メッセージを送る

#### クラウドインテグレーション

クラウドでは、ここまで紹介してきたミドルウェアに相当する対し様々なサービスが提供されており、場合によってはより高機能だったり低コスト（※イニシャルコストはほぼ間違いなく下がります。その代わりランニングコストが発生します）な選択となり得ます。

**各ミドルウェアのクラウド対応**：

| オンプレミス | クラウドサービス | 特徴 |
|-------------|----------------|------|
| **DBMS** | DBaaS, dbPaaS, マネージドDB | オンプレミスのDBと同等なものや運用が自動化されたもの、PaaSの一部として提供されWeb API経由で利用するものなど、多彩 |
| **Web/APサーバ** | PaaS, サーバレス | そもそもWeb/APサーバを必要としないプラットフォームが多く提供されている |
| **ジョブコントローラ** | - | クラウド向けの製品もあるが、そもそも定期実行処理が必要ないアーキテクチャが好まれる（メッセージ駆動、ワークフローオーケストレーション、etc…） |
| **MQ** | メッセージブローカ, メッセージルータ | スマホやIoT機器を対象としたものが多いので、非常に高性能・高機能なメッセージングサービスが多彩に提供されている |

### 【閑話】ITプロジェクト内での分業

インフラ、ミドルウェア、アプリケーションという各システム要素にはそれぞれ専門家がおり、ITプロジェクトにおいてはそれぞれの領域の作業を分担します。しかし、システム全体の設計に関しては、なかなか「分担」というわけにはいきません。「全体」の設計が終わってからその各「要素」を分担するのですから当然です。

では「**システム全体**」の設計は誰が担当するのでしょうか？それは当然「**システム設計（システムインテグレーション/SI）の専門家**」が担当します。当社はSIベンダーですので、当然そのような専門家もいなければなりません。皆さんの部門にも、ちゃんと専門家がいますか？

**当社の場合、いわゆる開発本部内にいなければならない専門家であり、上級技術者の責務でもある...**

---

## 2. 開発フレームワーク設計

「開発フレームワーク」とは、オブジェクト指向開発文化から生まれた、アプリケーション開発の基盤となる「レイヤ」です。OSI参照モデルと同様にアプリケーション内にレイヤを設け、プログラマ向けの上位レイヤを支える下位レイヤを構成します。

開発フレームワークはアプリケーション「製造」時に使用する生産ラインであり、製造に先行して「開発」します。

### 2-1. 開発フレームワークとは

#### 「開発」と「製造」

製造業の世界では、「**開発**」とは新技術を、製品として実用化するまでの、**研究・検証・設計・生産ラインの構築**の事で、「**製造**」とは、その**生産ライン上での（大量）生産**を意味します。当社で言う「開発フレームワーク」とは**生産ラインに相当するもの**です。

**生産ライン＝開発フレームワーク**：
- この生産ラインそのものを作るのが「開発」
- 生産ライン上で実際にモノを作るのが「製造」
- 「機能」を実現するプログラムを「製造」する

#### 「開発」期間

生産ラインは、当然ですが工場が稼動を始める前に「開発」しておかなければなりません。ITプロジェクトではプログラムを「製造」する前の工程で、開発フレームワークの設計・構築を終えます。

**EXE標準工程モデル**：

| 工程 | 内容 |
|------|------|
| **要件定義** | |
| **基本設計** | **◆開発**<br>研究、検証、仕様確定、設計、及び生産ライン（フレームワークや共通部品の開発）期間 |
| **詳細設計** | 開発フレームワーク構築<br>共通部品作成<br>テスティングフレームワーク構築<br>構成管理設計 |
| **製造+UT** | **◆製造**<br>生産ライン上で実際のコードを生産 |
| **機能単体テスト** | **◆テスト**<br>製造物のテスト。一つ一つの検品や全体を連携させた動作テスト、性能テストやセキュリティテストなど、出荷前の様々な検査を行う |
| **結合テスト** | |
| **システムテスト** | |
| **ユーザーテスト** | |

**重要なポイント**：
- 厳密には、詳細設計を開始する前に開発フレームワークの設計を終えておかないと、詳細設計（プログラム設計）を行う事が出来ない
- 「**アーキテクト**」が最も活動する時期

#### 「機能」の基盤となる「人のレイヤ」と「非機能のレイヤ」

開発フレームワークには製造に当たるメンバー向けの「**人のレイヤ**」と、製造される機能（プログラム）の基盤となる「**非機能のレイヤ**」があります。

- **「人のレイヤ」** → 自然言語で記述されるドキュメント
- **「非機能のレイヤ」** → プログラム言語で記述されるコード

**構成要素**：

**人のレイヤ（ドキュメントフレームワーク）**：
- 実装規約
- UI標準
- 製造・テストガイドライン
- 共通コンポーネント設計書
- テスティングフレームワーク設計書
- ソフトウェアフレームワーク設計書

**非機能のレイヤ（ソフトウェアフレームワーク）**：
- 共通コンポーネント
- ソフトウェアフレームワーク
- テスティングフレームワーク

**設計要素**：
- アーキテクチャ
- コンポーネントモデル
- 設計モデル
- デザインパターン

#### 開発フレームワークの目的

開発フレームワークを構築する最大の目的は**生産性の向上**です。

生産性向上を実現するため、開発フレームワークは以下の仕組みを整備します：

1. **設計のパターン化**
2. **非機能処理の自動化**
3. **ドメイン分割**によるプログラマへの要求知識の最小化
4. **単体テストの自動化**
5. **頑健性の担保**による保守性の向上（※仕様変更に対する頑健性も保守性に含みます）

**重要な認識**：開発フレームワークを使用しない場合は、これら全てが設計者/プログラマの個人能力に委ねられる → いわゆる**ムリ・ムダ・ムラの温床**に

### 2-2. フレームワーク投資判断

#### 開発フレームワークの効果

開発フレームワークを構築する事で、プロジェクトの生産性（＝コスト）に対して様々な効果が得られます。対象のプロジェクトにおける**ロスコスト源が何か**によって、実現すべき仕組みの優先度が決まります。

**効果の分類**：

| カテゴリ | 対応手法 | 効果 |
|----------|----------|------|
| **効率** | ドメイン分割、設計のパターン化、非機能処理の自動化 | プログラマへの要求レベルを下げられるので人件費の抑制になる。また、品質リスクも抑制される |
| **品質** | 設計のパターン化、非機能処理の自動化、単体テスト自動化 | |
| **リスク** | 単体テスト自動化、頑健性 | 手戻リスクが少なくなるので、後ろの工程（テスト工程）のコスト削減に直結する |

#### 生産ラインの何処にいくら投資するか？

優先度に応じ、開発フレームワークの**ROI（費用対効果）**を判断します。開発フレームワークに掛かるコストは**品質ロスコスト**です。

**投資判断の観点**：

| 分析対象 | 制約条件 | 考慮事項 |
|----------|----------|----------|
| **ヒト** | | |
| メンバー構成 | プロパー比率 | プロパーが多い場合は教育的効果も勘案 |
| | BP比率 | BPが多い場合は品質、リスク抑制が重要 |
| 人材市場 | 採用技術 | Javaは良い人材の確保が比較的容易なので品質、リスク抑制を。.NETは人材確保が難しく平均スキルレベルも低いので効率、品質、リスク抑制全てが重要 |
| スキルレベル | 高⇔低 | 平均スキルレベルが低い場合は効率、品質、リスク抑制全てが重要 |
| **カネ** | | |
| 開発規模 | 大⇔小 | 規模が大きい場合は効率、品質、リスク抑制全てが重要 |
| セキュリティ要求 | 高⇔低 | セキュリティ要求が高い場合はリスク抑制が最重要。低い場合は品質が最重要 |
| 利益目標 | 高⇔低 | 利益目標が高い場合は効率、品質、リスク抑制全てが重要 |

**結論**：多くの場合、投資優先度は **リスク抑制 ＞ 品質 ＞ 効率** となる

#### fool proof（ポカヨケ）

開発フレームワークの重要な役割の一つが**fool proof（ポカヨケ）**です。これは製造業で有名な考え方で、工業製品や生産設備、ソフトウェアなどで、利用者が誤った操作をしても危険に晒されることがないよう（そもそも誤った操作をさせないようにするなど）設計の段階で安全対策を施しておくことです。

開発フレームワークの文脈では：
- **「利用者」** = 製造参加するPG
- **「設計」を行う** = アーキテクトやプロジェクトの技術リーダー
- **「危険」** = バグの発生

**具体的な対策例**：

| 問題 | 対策 |
|------|------|
| 四捨五入計算間違えそう<br>（※一般に、四捨五入仕様は複数ある） | 四捨五入ユーティリティ用意。仕様上不必要な引数は指定出来ないようにしておく |
| 特定のクラスを駄目な場所で new しそう | パッケージを物理分割し参照を制限し、駄目な場所では特定のクラスを new 出来ないように |
| DBコネクション閉じ忘れそう | AOPの仕組みを使いDBコネクション＆トランザクション制御自動化 |
| 例外握りつぶしそう | AOPの仕組みを使い自動例外処理し、PGに対しては原則例外処理禁止のルールを |

### 2-3. ソフトウェアアーキテクチャ

#### ソフトウェアコンポーネントの設計

開発フレームワークは対象システムのソフトウェアアーキテクチャに応じて設計されます。従って、プロジェクトにおいて**アーキテクトが最初に行うことは（概念レベルの）ソフトウェアコンポーネントの設計**です。

システム全体をどのようなソフトウェアコンポーネント（※1）で構成するか、抽象的なレベルで計画・設計します（※2）。このレベルでは**システムインテグレーションの知識**が必要になります。

※1 ミドルウェア及びアプリケーションインスタンスとその方式
※2 この話題は実際にはシステムコンポーネントの設計と切り離せないが、ここでは割愛

**検討観点**：
- Webモノリシック？ネイティブ？Thinサーバ？SPA？サーバレス？
- 性能要求？冗長化？クラスタリング？
- OS/ミドルウェアの指定？
- 再利用性？Web API？マイクロサービス？
- 仮想化？クラウド？マネージドサービス？

**機能/非機能要求を整理し、主要なコンポーネントを定義する**

#### ペースレイヤリング

クラウドサービスやOpen APIの出現により、昨今は古典的なモノリスアプリケーションよりも、ソフトウェアコンポーネント/サービスを分割して定義しシステム全体を実現する**分散システム**が好まれる時代となっています。分散システムは機能コンポーネント（※）もその特性によって分割し、分散して配置します。この時役立つ観点が**ペースレイヤリング**です。

※機能コンポーネントとは、お客様の業務機能が実装されるコンポーネントの事です

| レイヤ | 変化頻度（ペース） | 事業要求 | 配置 | 開発手法 |
|-------|------------------|----------|------|----------|
| **レイヤ1** | 機能の更改ペース4年以上。機能自体はほぼ永続的に使用 | 「記録システム」と呼称。基幹システムとして長期の使用が前提。コスト効率、信頼性、安定性を要求 | オンプレミスに配置 | +従来型の基幹システム開発 |
| **レイヤ2** | 機能の更改ペース1～3年程度 | 「差別化システム」と呼称。ビジネス上の戦略的ニーズに応じた柔軟な使用が前提。競合他社との差別化を実現するための俊敏性を要求 | クラウドに配置 | |
| **レイヤ3** | 機能の更改或いは廃棄のペースが1年以下。試行的なものも含む | 「革新システム」と呼称。ビジネスチャンスの補足、新たな戦略の試行のため即時・短期の使用が前提。時機を逃さない機敏性を要求 | クラウドサービスで構成 | +アジャイル |

**「業務機能」をこのような観点で分割し、コンポーネント化する → 今後必要なアプローチ**

#### マイクロサービスアーキテクチャとは？

昨今よく耳にする「マイクロサービス」は、その基盤となる要素技術を知るだけでは理解出来ません。その設計思想の本質を理解するためには、**コンテナやk8s等の知識はむしろ邪魔になる事もあります**。

少なくとも、単一のデータベースに対して複数の機能（WebアプリケーションやWeb API）を接続して全体を一つの「システム」として設計した段階で、それは単なる**分散モノリス**です。マイクロサービスどころか、むしろ**設計上のアンチパターン**です。

**【マイクロサービス4要件】**（by Chris Munns(Amazon)）：
1. 単一の目的
2. API 経由だけの接続
3. HTTPS での接続
4. マイクロサービス同士はお互いにブラックボックス

**重要な特徴**：
- 個々のマイクロサービスは、お互いの事を何も知らない、個々独立したアプリケーションです
- 場合によっては、開発・保守する組織すら、ばらばらにします（その方が望ましい）
- マイクロサービス同士に副作用があってはいけない
- なので、例えば**DB共有は望ましく無い**

#### 基礎的なソフトウェアスタックの構成

ソフトウェアコンポーネントを定義後、それぞれのコンポーネントへの非機能要求に応じた**ソフトウェアスタック**を構成します。特に現在はクラウドサービスの利用が増えソフトウェア（サービス）スタックの選択肢が非常に広がっています。また、**OSS/商用製品の選択の際には、そのサポート状況及びライフサイクルも重要な観点**となります。

**【非機能要求に応じて検討】**：
- コストは？調達先は？
- OSS/商用のサポートライフサイクルは？当社でサポート可能？
- 技術のトレンドは？冗長化は何で実現？
- 利用可能なプロトコルは？

### 2-4. コンポーネント配置

#### ソフトウェアコンポーネント配置の設計

ソフトウェアコンポーネント/機能コンポーネント及びソフトウェアスタックが決まった段階で、実際のインフラ構成に合わせて（※）その配置を設計します。

※この段階でソフトウェアアーキテクチャからのフィードバックによりインフラ構成が変更される場合もあります

これがいわゆる**コンポーネント配置図**であり、設計成果物です。

**配置図の例**：

**クライアントサイド**：
- PC（Windows 10）
  - View（SPA）

**オンプレミス**：
- リバースプロキシ（Nginx）
- APサーバ
  - ビジネスロジック（Web Service）
- DBサーバ
  - DB（SQL server）

**クラウド（Microsoft Azure）**：
- API Apps（PaaS）
  - マスタ情報（Web API）
- SQL Database（DBaaS）
  - マスタ情報（DB）
- Microsoft PowerApps（PaaS）
  - マスタメンテ（Web application）

---

## 3. 開発フレームワーク構築

開発フレームワークの構築に当たっては、様々な設計上のプラクティスを知る必要があります。設計に使用する言語は**デザインパターン**であり、その目的は**アプリケーションの品質向上/生産性向上**です。

### 3-1. アプリケーションアーキテクチャ

#### アプリケーションの「コンセプト」

ソフトウェアコンポーネントを定義したら、各コンポーネント毎にアプリケーションアーキテクチャを定義します。ここでは特に機能コンポーネントを例にとって解説します。

アプリケーションアーキテクチャを検討する上で、最初に重要になるのが「**コンセプト**」です。前述のように、現実のプロジェクトには様々な制約条件が存在します。どのような制約条件が存在し、アプリケーションアーキテクチャ及び開発フレームワークによりどのように課題解決するのかを**シンプルに言語化**します。

**【コンセプト例】**：
「非機能処理の自動化率は最低限で良いが、OSS等のAPIのラップ率を高めて頑健性を確保する。単体テスト用のテスティングフレームワークを整備しテスト効率を上げテストカバレッジの監視を徹底する」

**投資出来るコストは有限**なので、コンセプトに基づき、どこに重点的に投資するかを決める

#### ハイレベルなアーキテクチャの選択

コンセプトに応じ、対象アプリケーションに対する最もハイレベル（抽象度が高い）なアーキテクチャを選択します。

当社では、業務システム/基幹システムの開発では、多く**BCEコンポーネントモデル＋レイヤードアーキテクチャ（及びトランザクションスクリプト）**が採用されます。これは既に10年以上の歴史を持つオーソドックスなアーキテクチャであり、本セミナーではこの構成を紹介します。

ただし昨今は xTech, DX 等の文脈で**ペースレイヤ2～3のシステムの引き合いも多くなっています**ので、その際にはその**ITガバナンスやシステム特性に応じたアーキテクチャを選択する必要**があります。

**ペースレイヤ3/モード2の世界へようこそ！**

**最新のアーキテクチャパターン**：
- イベント駆動
- メッセージ駆動
- リアクティブシステム
- リアクティブプログラミング
- オニオン
- クリーン
- ポートアンドアダプタ
- ヘキサゴナル
- DDD ドメインモデル
- Flux
- JAM stack
- ヘッドレスCMS
- 静的サイトジェネレータ
- SPA
- モダンモノリス

#### 機能ドメインを分析する

機能コンポーネントのアプリケーションアーキテクチャを定義するため、まずは対象となる機能を**ドメイン分析**し（※1）、その結果からレイヤ、ドメイン、アプリケーションコンポーネント（※2）を洗い出します。

※1 ドメイン分析の詳細については別の回に解説しているので、ここでは割愛します
※2 ここで言うアプリケーションコンポーネントとはアプリケーションの内部構造上のコンポーネントです

この時、パターンとしての**コンポーネントモデル及びデザインパターンの知識**が必要になります。

**検討要素**：
- BCEモデル
- MVCSパターン
- 4層レイヤ
- 機能ドメイン
- 機能サブドメイン
- 横断的機能
- 名前空間
- AOP

**検討観点**：
- さらに多層化が必要？
- スーパークラスの継承階層で表現？
- アスペクトを分ける？

#### レイヤ、ドメイン、アプリケーションコンポーネント

レイヤ、ドメイン、アプリケーションコンポーネントの関係を示すイメージは以下の通りです：

- **レイヤ**：スーパークラスによって表現
- **ドメイン**：名前空間か派生スーパークラスで表現
- **アスペクト或いはAPコンポーネント**：必要に応じて必要なレイヤ或いはドメインに提供

**構造**：
- **Boundary layer**（緑）
- **Control layer**（青）
  - Sub layer
- **Entity layer**（オレンジ）

各レイヤ内に：
- スーパークラス
- ドメイン（名前空間 or 派生スーパークラス）
- アスペクト or APコンポーネント

### 3-2. APコンポーネント設計

#### ドメイン

ドメインオブジェクトは、**基本的にはレイヤ毎に独立して定義**します。

**各レイヤのドメイン特性**：

**バウンダリ層（View）**：
- 人間が認識する「画面」のまとまり或いは「URL」のまとまりがドメインに対応
- 階層化されたメニュー構成のイメージに近いもの
- 例：人事・給与

**コントロール層（Controller）**：
- 分析の結果現れる「業務機能」のまとまりがドメインに対応
- 「人事系機能」「給与系機能」のような業務組織の単位に似たもの
- 場合によっては副層（Sub layer）或いはサブドメインとして「評価系機能」「採用系機能」「退職系機能」などが現れる場合もある
- 例：人事、給与 → 採用、評価、退職

**エンティティ層（Model）**：
- 分析の結果現れる「データ」のまとまりがドメインに対応
- 理想的には、このドメインは**データモデリングの結果得られるデータドメインと一致**する
- 例：組織・社員情報、人事・評価情報、給与・経費情報、退職者情報

#### アプリケーションコンポーネント

アプリケーションコンポーネントは**その適用スコープに応じて設計する必要**があります。

**設計原則**：

**特定のレイヤに対し横断的に適用されるもの**：
- 多く**アスペクト（AOP）として設計**
- 例：バウンダリ層向けのエラーメッセージ表示アスペクト、コントロール層向けのDBトランザクション制御アスペクト、各レイヤ向けの専用ログ出力アスペクト

**特定のドメインに対し適用されるもの**：
- 多く**スーパークラスから（いわゆるprotectedな）オブジェクト/メソッドとして提供**

**重要な設計指針**：
- **APコンポーネントの適用スコープを最小化するように設計！**
- 担当プログラマが「知らなければならない事」を最小化するため
- **可能な限り避けるべき事**：グローバルスコープを持つ「ユーティリティクラス」やグローバルオブジェクトの作成（担当プログラマが「知らなければいけない事」を無意味に肥大させてしまう）

### 3-3. フレームワーク/APIの実装

#### スーパークラスの設計

古典的なオブジェクト指向の教科書では、スーパークラスの継承階層によって再利用性が高まるといった記述がありますが、**現在ではこの考え方は誤りだったと評価されています**。

頑健性・保守性を高めるため、以下の原則に従って下さい：

1. **スーパークラスは抽象クラスで定義**
2. **継承階層は浅く（1～2層程度）**
3. **派生クラスに提供するオブジェクトはインターフェースを経由して提供**

**設計構造**：
- 抽象基底クラス（abstract）
  - 派生抽象クラス（abstract）
    - コンクリートクラス
  - 派生抽象クラス（abstract）
    - コンクリートクラス

**重要なポイント**：
- 継承階層はなるべく浅く保つ → 深くなりそうならリファクタリング！
- 派生クラスにオブジェクトを提供する場合、protectedかつインターフェース経由で提供する
- レイヤ間で交換するデータは、原則DTOのような「プロトコル」を経由して入出力

#### ラップ！ラップ！ラップ！

現代のオブジェクト指向設計では、保守性と頑健性を高めるためには**「継承よりもラップ（wrap）戦略の方が望ましい」**とされています。（※「継承よりもコンポジット（複合）」というのが厳密な表現です）

**ラップ戦略の理由**：
- OSSが提供するAPI（オブジェクトやメソッド）
- アンマネージドコード等
- 後で変更や特殊な処理（メモリリークへの対処など）が入り易い
- 原則としてプログラマには直接触らせない方が望ましい

**基本戦略**：可能な限りラップし、ラッパーオブジェクト或いはそのインターフェースを提供する

**ラップ構造**：
```
クライアントオブジェクト
    ↓（uses）
ラッパークラスのインターフェース
    ↑（implements）
ラッパークラス
    ↓（has）
OSS提供のオブジェクト
```

**利点**：
- プログラマが触るのはインターフェース → 製造されるプログラムは**POJOに保たれる**
- ラッパークラスのインターフェースはラップ対象オブジェクトと同一のインターフェース
- このクラス内が**拡張ポイント**になる
- 特殊な処理の挿入や、必要に応じて対象オブジェクトの入れ替えやOSSの変更も可能となる ＝ プログラマ向けのインターフェースは維持される

### 3-4. テスタビリティ

#### 「良い設計」＝「テストし易い設計」

重要な価値観として**「良い設計」とは「テストし易い設計」**であると認識して下さい。

開発フレームワークの重要な役割の一つは**テスタビリティ（テストのし易さ）の提供**です。設計において、結合度や凝集度を適切に保つ事の目的は、**究極的にはテストを楽にする事**です。現代における設計スキルの多くはテストに関する知見に依拠します。

**テスタビリティを実現する要素**：

1. **DIの採用** → レイヤ毎に独立したテストを可能にする
2. **製造コードのPOJO化** → テストの際に余計な（APIの）知識を必要としない
3. **バウンダリとコントロールを分離** → 自動テストによるカバレッジ範囲を最大化
4. **xUnit, 自動カバレッジ測定** → テスト漏れを無くし品質を向上

**これらを実現するのが設計スキル**

#### テスタビリティ基本戦略（1/2）

テスタビリティを向上させるための基本戦略：

| 戦略 | 解説 |
|------|------|
| **1. テスト不要なモノで構成する** | なるべく既成の製品やサービス、OSSなどを採用し、テストの必要が無い範囲を最大化する。これは小さなスケールでも同じで、OSSライブラリが提供しているAPIを「自分で書いたものの方が便利だ」などと言って独自実装すべきではない。面倒でもOSSライブラリを探し、採用し、ラップする事が重要。 |
| **2. 自動テストを採用する** | 手動テストの範囲を最小化しないと回帰テストに莫大なコストがかかってしまう。テストパターンが大量になる（特に単体）テストは、原則として自動テストしなければならない。自動テスト可能なように、ビジネスロジックはPOJO及びステートレスな設計を維持しなければならない。 |
| **3. テスト対象の粒度を小さくする** | 「小さなクラス」や「行数の少ないメソッド」の方が当然テストは楽。対象粒度をいかに小さくするか＝いかに適切に分割するかが、過去から現在まで最も重要な設計スキル。階層化設計やSOLID設計原則はこのための方針でもある。 |
| **4. 可能な限りステートレスに設計する** | クラスもメソッドも可能な限りステートレスに設計する。クラスなら非イミュータブルなインスタンス変数はなるべく持たないように、メソッドなら引数と戻り値以外のI/Oを持たないように設計する。 |

#### テスタビリティ基本戦略（2/2）

| 戦略 | 解説 |
|------|------|
| **5. テストパターンが減るように設計する** | このテクニックの多くは**論理エラーを物理エラーに変換する戦略**である。これはつまり（論理的な）バグをコンパイルエラーに変換するためのテクニック。<br><br>• **メソッドの引数をプリミティブな型にせず、列挙型で定義する**。こうすれば引数への入力パターンが減り、異常値の入力が物理的に抑止出来る。つまり、テスト数が減る。<br><br>• **Type Safe Enumパターンを使用する**。引数入力値の制約と同時に、if文等での値評価もCommandパターンに置き換え可能になるため、主たる処理と値評価を分離してテスト出来るようになる。<br><br>• **ORマッピング（※）を採用する**。DBに変更があった場合は、エンティティクラスのインターフェースを変更すればコンパイルエラーにより直ちに修正範囲が明確になる。（※少なくともオブジェクトバインディングを採用）<br><br>• **局所変数も含め、可能な限りイミュータブルにする**。イミュータブルにすれば副作用が排除出来るので、テストが劇的に簡単になる。**変数の再利用は悪である**。<br><br>これ以外にも様々な設計テクニックがあるので、しっかり学ぼう。 |

※これらのアイディアは、多く関数型プログラミングから取り込まれたものである

---

## まとめ

- **ミドルウェアとはOSとアプリケーションの中間にあるもの**
- **DBの物理設計、Web/APサーバ、ジョブコントローラ、メッセージキューを最低限把握**
- **そしてクラウドインテグレーションへ**
- **開発フレームワークの目的は生産性の向上＝製造コストと品質ロスコストの削減**
- **常にレイヤ、ドメイン、アプリケーションコンポーネントを意識**
- **良い設計とは「テストし易い設計」の事。設計スキルが高い人が設計したプログラムはテストし易い**

---

## 参考文献

- 『Java魂―プログラミングを極める匠の技』（オライリージャパン）
- 『Effective Java 第3版』（丸善出版）
- 『新装版 リファクタリング―既存のコードを安全に改善する』（オーム社）
- 『プリンシプル オブ プログラミング3年目までに身につけたい一生役立つ101の原理原則』（秀和システム）
- 『J2EEデザインパターン』（オライリージャパン）
- 『達人プログラマー（第2版）熟達に向けたあなたの旅』（オーム社）
- 『エリック・エヴァンスのドメイン駆動設計』（翔泳社）
- 『FROG SPAWN』（株式会社システムエグゼ）
  https://revo.system-exe.co.jp/secure/wiki/?FROG%20SPAWN

---

## 【HPMS】見積もり・提案教育・第九回v1.8.md

## 第九回 提案作成 見積もり・提案教育セミナー

## 目次

### 4. ソリューションを創る
- 4-1. 「真なる課題」の分析
- 4-2. コンセプト
- 4-3. ストーリーとキャラクター

### 5. 提案書を作る
- 5-1. RFP への回答
- 5-2. 非機能より機能
- 5-3. ビジネス文書作法

### まとめ

### 参考文献

---

## 4. ソリューションを創る

### 4-1. 「真なる課題」の分析

#### 提案計画～提案

プロポーザルマネジメント（提案管理）の観点では、「提案」とは、案件評価～案件獲得活動期に準備していた提案戦略と様々な解決策をもとに、具体的な提案計画を立案し、提案作成体制を整え、一つのストーリーボードにまとめ、最終成果物としての「提案書」を作る作業のことです。

（システム開発プロジェクトで言えば、詳細設計～製造・テスト工程に当たる）

#### プロポーザルマネジメントプロセス

```
ユーザープロセス（企画）:
RFI発行 → RFT発行 → RFP発行 → ...

ベンダープロセス:
案件評価 → 案件獲得活動 → 提案計画 → 提案
```

**成果物の流れ：**
- 情報収集・分析 → 各種分析資料
- 戦略策定 → 提案戦略、一枚企画書、エグゼクティブサマリ
- 提案計画 → 提案計画、役割分担表、執筆ガイドライン
- 骨格作成 → ストーリーボード
- 提案書作成 → 提案書（分担・作成・統合・レビュー）

#### 「提案」とは「お客様の課題の解決策」のこと

改めて、「提案」とは何かを一言で言えば、「お客様の課題の解決策」のことです。システムのことでも、ソフトウェアのことでも、製品のことでも、見積もりのことでもありません。お客様の事業課題や業務課題を解決するための、提供可能な多くの解決策を、一つの「ストーリー」にまとめあげたものが、提案の骨格となるストーリーボードです。

**解決策の要素：**
- アプリケーション
- インフラ
- 業務改善
- サービス
- ナレッジ
- コスト削減策

これらを一つの「ストーリー」にまとめあげることで、提案の「骨格」となるストーリーボードが完成します。

*注：ソフトウェアハウスは通常、アプリケーションとインフラの部分のみを扱っています。*

#### RFPに「真なる課題」は載っているのか？

RFP（提案依頼書）と一口に言っても、その品質は様々です。事業や業務レベルの課題が明記されておらず、機能レベルの課題のみしか書かれていないものや、場合によっては機能要求しか書かれていないものも多くあります。これでは、その企画の妥当性を評価することも出来ません。

きちんとしたRFPであれば、企画の「背景」や「目的」が記載されています。記載されていない場合でも、ヒアリングやQAで把握する必要があります。その分析から事業要求や業務要求を見極め、お客様の「真なる課題」を発見し、その課題に対する解決策を提示するのが「提案」です。

**分析プロセス：**
```
提案依頼書(RFP) + ヒアリング/QA → 分析 → 事業要求・業務要求・機能要求
```

- 機能要求は普通書いてある
- 業務要求以上は、書いていないことが多い
- 真なる課題（事業/業務上の課題）を発見し、企画妥当性検証/独自立案を行う
- 解決策を一つのストーリーにまとめ上げる

*分析力、企画力、解決策の多さと適切さ、それら全体を「提案力」と呼ぶ。*

#### 「顧客はドリルが欲しいんじゃない。穴をあけたいのだ」

マーケティングの世界で良く知られるセオドア・レビットの「顧客はドリルが欲しいんじゃない。穴をあけたいのだ」という言葉は、何かを売る時には対象のモノだけを考えるのではなく、その背景や真なる課題を考える重要さを示しています。

また、期待値コントロールの面で考えても、RFPのサブセットのような提案は顧客満足を低下させることがわかります。つまり、RFPの要求に対し「忠実に頑張って、出来る所だけ提案」すると、逆にマイナスの効果が発生します。

「提案」は、原則としてお客様の期待を上回らなければなりません。

**分析の例：**

RFP要求：「頑丈なドリルが欲しい！」

分析項目：
- 何に使う？
- そもそも穴を開ける目的は？
- 何故頑丈なものが欲しい？
- そもそも何故その板はそんなに固い？
- 何故ドリル以外は駄目？

真なる課題：「通気のため家の壁に穴をあけたい！」

解決策の案：
- 通気を諦めるという選択肢は？
- 壁そのものを建て替えたほうが安いかも？
- たくさん穴をあけると建築法違反では？
- 換気扇などで通気を良くするのは？

#### 差別化されたストーリー

真なる課題を発見し、（RFP内の案以外にも）独自の解決策を立案し、それを束ねたものこそが、本当に差別化されたストーリーです。それが出来れば、当社がドリルを持っていない場合や、他社の方が良いドリルを持っている場合、ドリルがありふれた商品なので価格勝負しか無いような状況でも、当社が勝利し、しかも高い価格で売れる提案を創ることが出来ます。

**顧客満足度の比較：**

| 顧客満足の低いストーリー | 差別化されたストーリー |
|-------------------------|----------------------|
| A社提案、B社提案、C社提案（同じ「モノ」で種類が違うだけ。大きな機能差が無く価格競争になりがち。差別化が難しい上に顧客満足も小さい。） | 真なる課題提示 + 当社の提案（完全に差別化され、お客様のアイディアを上回る、顧客満足の大きい提案。） |

### 4-2. コンセプト

#### 選ばれる作品の条件とは？

皆さんは、小説や漫画を読みますか？読む方は考えてみてください。皆さんは、どういう基準で、新しい作品を選びますか？ジャンル？タイトル？絵柄？それとも評判でしょうか？お金を払う価値があるのは「面白い物語」だけですよね。皆さんは、作品を買う前に、それをどうやって判断していますか？

**判断基準の考察：**
- タイトルからして面白そう → タイトルから何がわかるのか？
- 好きな絵柄 → 絵柄から何を判断した？
- ネットで評判 → 評判から何を判断出来る？
- あらすじを読んで → あらすじから何がわかるのか？

**答え：** その作品が「どんな作品なのか」がわかり、読む前から「自分にとって価値がある」と判断出来たから。

つまり...

**一見して作品のコンセプトがわかり、価値が判断出来れば、売れる可能性が高まる。**

#### 優れた提案の必須条件 ① シンプルなコンセプト

我々が売ろうとする「提案」も、お客様が一見しただけで、提案のコンセプトを理解出来るようにしなければなりません。

シンプルな短い一言で、我々の提案の価値や、他社との違いを表現出来なければなりません。そしてなにより、その一言で、お客様の課題が間違いなく解決出来るのだと、確信出来なければなりません。

提案において最も重要なのはコンセプトの作成であり、プロポーザルマネージャーと担当PMは、十分な時間をかけて「その一言」を作り上げなければなりません。

**テーマステートメントの例：**
```
この提案は、お客様にとって最も重要な●●を実現するため、
他社では提供出来ない▲▲によって、
★★を行う提案です。
```

提案書全体のテーマステートメントであり、最初のページに記載すべき内容であり、プレゼンの冒頭で話すべき一言であり、最重要ホットボタン、差別化ポイント、ソリューションが含まれ、かつ誰でも理解可能な一言です。

*※はっきり言ってこれが一番難しい。逆に言えば、この一言が作れる提案なら、それは勝てる提案だということ。*

#### 優れた提案の必須条件 ② 魅力的なストーリー

小説や漫画も、優れたコンセプトは必須ですが、コンセプトだけではまだ「必ず買ってもらえる」には至りません。コンセプトだけではなく、実際にそのコンセプト通り、価値があることを証明しなければなりません。提案書には、そのコンセプトに基く、一貫したストーリーが必要です。

かつ、提案書もまた一つのコンテンツですので、そのストーリーは魅力的で、楽しいものでなければなりません。お客様が、提案内容を一生懸命読み解かなければならないような文書では失格です。提案書は、我々が考えた解決への道のりを、あたかも一つの物語であるかのように、語るものでなければなりません。

**読みやすい提案書の特徴：**
- 読み易くわかり易い
- 紹介されている知識も面白い
- 要点がわかりやすく、単なる見積もりの羅列ではない

**ダメな提案書の特徴：**
- 一覧表と専門用語ばかりでつまらない
- どこを読ませたいのか、何を理解して欲しいのかわからない

#### 優れたコンセプトを生み出すのは「アイディア」

優れた小説や漫画を生み出すことと同じで、優れたコンセプトを生み出すためには「アイディア」が必要です。つまり、優れた提案を生み出すためには発想力や創造性、ひらめきが必要であり、良いアイディアを導く発想法/思考法が必要です。

発想法や思考法には色々ありますが、提案において最も基礎となり、絶対に必要な思考法がゼロベース思考です。提案とは、お客様の真なる課題を解決するための「あらゆる手段」を検討し適切に組み合わせたものです。RFPに示された企画内容の変更を提案したり、場合によっては「何もしない」という提案すらあり得ます。

**思考法の比較：**

| 「御用聞き」の思考（狭い視野） | ゼロベース思考（広い視野） |
|---------------------------|------------------------|
| RFPの範囲内で、前提条件、現在の環境、現在の業務のみを考慮 | RFPの範囲を超えて、業務改善、新技術、別視点のアイディア、不要なものの排除も検討 |

### 4-3. ストーリーとキャラクター

#### ストーリーボード（提案の骨格）

提案戦略に基くコンセプトが決定したら、そのコンセプトに基づき「提案」の骨格である「ストーリーボード（Storyboard）」を作成します。ストーリーボードは、提案のストーリー立てや流れ、提案書の章立てなどを計画したドキュメントのことで、提案書の「粗筋」のようなものです。提案メンバーは、このストーリーボードを元に、各自の担当部分の提案書を作成します。

ストーリーボードは、その名の通り「物語（ストーリー）」を記すものです。ストーリーボードを作成する人には、作家や小説家のような、物語を描く能力が要求されます。

#### 主人公はお客様

ストーリーボードを作成する上で強く意識しなければいけないことは、我々が「提案」する物語の主人公はお客様だということです。

そもそもITプロジェクトというのはお客様のものです。システム/ソフトウェアの持ち主もお客様で、使うのもお客様、維持するのもお客様、お金を払うのもお客様です。

物語に例えれば、主人公である勇者はお客様であり、我々ベンダーは主人公を手助けする戦士や僧侶や魔法使いのようなものです。提案書は、武器や防具、魔法の説明をしつつも、主人公がそれらを使ってどう冒険するかを表現しなければなりません。つまり提案とは、課題解決に至るストーリーを、お客様を主人公にして描く物語です。

**役割分担：**
- お客様：主人公（勇者）
- ベンダー：主役ではない（戦士、僧侶、魔法使い等のサポート役）

提案とは「我々を使ってどうやってどう冒険すれば良いのか」というガイドラインのようなもの。

#### 「差別化」された物語とは？

物語の差別化とはなんでしょう？「勇者」や「魔法使い」のように、主人公を変わった職業に就ければ良いでしょうか？「剣」や「魔法」のように、主人公に使わせる小道具を変えてみれば良いでしょうか？そんな物語、似たようなものを山程見たことありませんか？

他とは明らかに差別化された物語には「他には無い」ユニークなストーリーが必要です。逆に、ストーリーが工夫されていれば、登場人物や小道具が「どこかで見たことのあるもの」でも大きな問題はありません。ミステリーならば、想像もつかない巧妙なトリックを。SFならば、奇想天外な想像上のテクノロジーを。冒険物なら、手強い敵と、胸のすく大逆転劇を。お客様の課題と背景を徹底的に分析し、魅力的な物語を創造しましょう。

**物語の要素：**
- お客様：主人公
- 我々ベンダー：モブなので、あくまでも主人公の引き立て役として
- 小道具：プラットフォームやプロダクト、アーキテクチャや開発モデル/プロセス等は、あくまでも添え物で良い
- 敵：読者が想像もしていなかったような、あっと驚く手強い敵（真なる課題）
- ストーリー：敵を倒す（課題解決）までの道筋と、そのために必要な道具や人は何かを説明

#### 同じRFPから「差別化された物語」を生み出すには

見積もり資料を作り慣れていると、ついつい当社の特徴や、売りたい商品（プラットフォームやプロダクト、様々な要素技術）のことをたくさん書きたくなりますが、それだと提案としては非常に退屈なものになってしまいます。

ゼロベース思考で、RFPだけでなくお客様のITガバナンス要求（事業要求）まで分析し、それに対する解決策（ソリューション）を提示することで、他には無い、ユニークな物語を創ることが理想です。

**ゼロベース思考の範囲：**
- ITガバナンス要求：読者が想像もしていなかったような、あっと驚く魅力的な敵（真なる課題）
- 真なる課題に対するソリューション：敵を倒す（課題解決）までの道筋と、そのために必要な道具や人は何かを説明
- RFPの範囲：不要なものの排除も含む
- 当社の特徴・商品や要素技術：我々ベンダーはモブなので、あくまでも主人公の引き立て役として

#### 改めて「見積もりと提案の違い」

ここで改めて見積もりと提案の違いを思い出すと、

- 「見積もり資料」とは、お客様の要求に忠実に応え、製品と価格（見積もり）を並べた資料。
- 「提案書」とは、お客様の要求（期待）を上回り、明確に他社と差別化されたソリューションが記載された資料。

つまり、見積資料を作る作業と、提案を創る作業は全く異なり、要求される能力や作成プロセスも全く異なります。

提案では、システムを配置するクラウドなどのプラットフォームや、データを格納するデータベース、アプリケーションを開発するプログラミング言語などは、基本的にはそれそのものが差別化要素になることは無いので、後で考えれば良い、些事です。

まずは魅力的なストーリーボード（提案骨子）を創ることに集中し、そのストーリーボードを成立させるため、後からキャラクターや小道具を選択しましょう。

#### ストーリーボードは少人数で創る

小説や漫画、映画同様、ストーリーボードは一人、或いはごく少人数で創ります。提案という物語は非常に複雑です。様々な要素の相関関係や因果関係、メリットやデメリットを把握し、個々の解決策（ソリューション）のアイディアや、当社が提供可能な要素技術、人材を、一本の物語へと紡いでいく作業を、大勢で行うことは不可能です。

※日本には「船頭多くして船山に登る」という良い言葉があります。企画というのは、原則として少人数で開始すべきです

このような、ストーリーボード（提案骨子）を作り上げる能力も、いわゆる「提案力」の重要な要素です。

**要素間の相互影響：**
- 業務改善アイディアはアプリケーションやサービスと相互に影響し...
- インフラは（特にクラウドだと）サービスやアプリケーションと相互に影響し...
- サービスとアプリケーションは相互に影響し...
- コスト削減策は、あらゆる要素と相互に影響し...

---

## 5. 提案書を作る

### 5-1. RFP への回答

#### 「提案書」の作成

提案活動として、情報収集や分析に始まり、繰り返しの見積もり、お客様へのヒアリングやそれを通しての期待値コントロール、提案計画の立案や体制構築などを行ってきた結果、RFP受領後のストーリーボード（提案骨子）— いわゆる「提案」の本体を創り上げることが出来ました。

ここまでくれば、後はその全てを「提案書」という一つのドキュメントに記載するだけです。「提案書」の作成は、ここまでの活動と比べれば、比較的単純な作業ですので、提案メンバーと分業して手早く終わらせることが出来ます。

**提案書作成の流れ（1～2週間程度）：**
書く → レビュー の繰り返し

#### 具体的なスケジュール（当社の場合）

改めて、当社における提案期のスケジュールを、具体的に示します。RFP受領から提案書提出まで1ヶ月の場合、文書のレビューや、その後の社内決裁手続きを考えると、提案書（文書）作成期間は概ね1～2週間程度です。

**提案スケジュール（1ヶ月の例）：**

| 第一週 | 第二週 | 第三週 | 第四週 |
|--------|--------|--------|--------|
| RFP受領 → 骨格作成 | 提案原稿作成（分担） | 提案書統合 → レビュー&修正（本部内） | 社内決裁手続き |
| RFP分析、ストーリーボーディング、役割分担表作成 | 確定見積もり | （品質管理レビュー、役員レビュー、経営会議、取締役会） |

※プロポーザルマネジメント無しで、RFP受領後急いでやる場合、事前活動何もしてないと、実質的な提案書作成期間は1週間程度...

#### 「提案書」は「提案依頼書への回答文書」

提案依頼書（RFP）が存在する場合、提案書とは「提案依頼書への回答文書」のことです。RFPには、お客様の企画内容と、それを実現するために必要（だとお客様が思っている）ものと、ベンダーから「提案」して欲しいことが記されています。

回答文書ですので、原則、提案書の目次はRFPの目次と一致させます。その上で、お客様企画上の抜け漏れや考慮不足があれば、目次を追加します。

**目次の対応例：**

| RFP | 提案書 |
|-----|--------|
| 1. 業務要件<br>1.1. 業務の概要<br>1.1.1. 全社<br>1.1.2. ...<br>2. 機能要件<br>2.1. 新システム化方針<br>2.2. システム化範囲の概要<br>2.3. ...<br>3. 非機能要件<br>3.1. システム環境要件<br>3.1.1. インフラ要件<br>3.1.2. クライアント端末要件<br>3.1.3. ... | 1. 業務要件の理解<br>1.1. 業務の概要<br>1.1.1. 全社<br>1.1.2. ...<br>2. 機能要件<br>2.1. 新システム化方針<br>2.2. システム化範囲の概要<br>2.3. ...<br>3. 非機能要件<br>3.1. システム環境要件<br>3.1.1. インフラ要件<br>3.1.2. クライアント端末要件<br>3.1.3. ...<br>3.2. 機能性<br>3.3. 信頼性<br>3.4. 使用性<br>3.5. ... |

原則、同じ目次。足りない分は足しても良い。

お客様は、RFPに示した内容がちゃんと回答されているかを、各社比較しながら何社分も読む。目次がばらばらでは、どこに何が書いてあるか、探し回らなければならない。読み易さへの配慮が非常に重要。

#### 冒頭にはテーマステートメント

提案書では、提案全体や、個々の章、ページ、段落などの冒頭に、必ずテーマステートメントを記載することが重要です。

テーマステートメントとは、最も伝えたい「キーとなるメッセージ」のことで、他社との違い（差別化ポイント）を、お客様の要求と結びつけつつ、簡潔な一文で示すものです。

ですので、提案書の最初の1ページ目は、前ページの例で言えば「1. 業務要件の理解と提案のコンセプト」などとし、必ずテーマステートメントを記述することを強く推奨します。

**一発勝負のコンテンツでは、冒頭の「つかみ」が最重要**

某有名映画監督のアニメ映画では、冒頭の5分以内で観客の心をつかむため、物語の世界観を説明しつつテーマを表現し、その上一気に盛り上げるシーンを入れるそうです。興行的に成功する映画には、こういう緻密な計算があるのですね。

### 5-2. 非機能より機能

#### 案件規模やタイプにより、提案書の読み手が変わる

案件の規模やタイプによって、提案書の読み手は変化します。対象が、お客様企業にとっての重要業務だったり、予算上のインパクトが大きい大規模案件だったりした場合、より上位の決裁者 — つまり上位の役職者が読み手になります。そして、その多くはITリテラシーがそれほど高くない、上位管理職者や経営層です。

提案書の品質は、その日本語品質を含め、大企業の経営層クラスの方々が目にする資料なのだと、強く意識しなければなりません。その方々にアピールし、その方々からのイメージを損なわない、そういう品質が必要です。

**読み手と要求レベルの関係：**

| ロール | 要求レベル |
|--------|------------|
| 経営層 | 事業要求 |
| 業務部門 | 業務要求 |
| 情報システム部門 | 機能要求 |
| ベンダー | 非機能要求 |

- 大規模案件の提案の場合、提案書の読み手は、経営層・業務部門を想定しなければならない
- → 最も重要なのは事業要件で、業務・機能要件が次ぐ。非機能要件（技術要素）はそれほど重要ではない
- 小規模案件の場合は情報システム部門向けの資料なので、見積もり資料的な（上位の要件に着目していない）提案書でも通用する

#### テーマステートメントは事業要求に対する回答が理想

ここまでで見てきた通り、本格的な提案/大型提案の場合、テーマステートメントは、お客様の真なる課題である、事業要求に対する回答であることが理想です。もしも事業要求に辿り着かなかった場合でも、それに準じた業務要求を明示する必要があります。

機能要求は、普通RFPに書いてありますので、そのまま書いてもただの転記であり、お客様にとって1bitも情報が増えていません。

提案全体の、差別化されたテーマステートメントを記述するためには、お客様の事業要求の分析と言語化が必須です。

**提案のコンセプト構成：**
- 事業要求（ITガバナンス要求等）：ここが提案全体のコンセプトになっている事が理想
- 真なる課題に対するソリューション：これをテーマステートメントとして短く、端的に言語化することが非常に重要
- それ以外の個々のソリューション：それぞれテーマステートメントを添える

#### 「技術的な話」は、あまり重要ではない

当社の場合、IT技術者が「提案書」を書くことが多いため、ついつい技術的な話を多めに書きたくなります。当社が持っている高度な技術ノウハウや、最近扱っている有力パートナーのプロダクトなど、それが非常に有益だと知っているので、そのアピールをしたくなります。しかし、技術的な話は、あまり重要ではありません。重要なのは、その技術でどんな課題（要求）を解決するかということであり、必ず先に「要求」がなければいけません。

つまり、技術的な話が書きたいばかりに、お客様が持ってもいない要求をでっち上げてはいけません。提案書においては、非機能的な話は、ほとんどの場合見積もりの添え物であり、技術力が提案の差別化ポイントになることは稀です。

**お客様（経営層）の視点は...**
- このベンダの提案は、他社の提案とどう違うのか？
- このベンダは、どのくらい当社の事業や業務を理解しているか？
- その上で、当社の課題を理解し、適切な解決策を提示しているか？
- さらには、隠れた課題を指摘し、我々の期待を上回る解決策を提示しているか？
- それらの解決策は、当社にとってどのくらいの価値があるか？
- このベンダにはそれを実現する能力があるか？（技術的な話はこのテーマの添え物）

お客様の経営層は、大抵の場合「事業の玄人」であり「ITの素人」である...

### 5-3. ビジネス文書作法

#### 提案書は「公的文書」です

ビジネス文書の中でも「提案書」は、社外の相手に提示する、いわゆる公的文書です。公的文書の書き方は、一般的には公用文の書き方に準拠します。

公用文とは、官公庁における文書作成ルールであり、内閣府や文化庁によって定められています。これはいわゆるマナーといったものではなく、公的な日本語文書を作成する際の明確なルールです。

公用文は、官公需ビジネスや、官公庁向けの書類や、契約書を扱う業務に携わるビジネスマンにとっての基礎スキルの一つです。特に営業や管理職者の皆さん、提案に関わる中堅以上の技術者の方も、一度は学習の機会を持つべきでしょう。

**参考資料：**
- 文化庁の公式サイトでも、公用文の書き方に関する様々な資料が公開されている
- 公用文の書き方を解説したハウツー本も、多く出版されている

#### 提案書に関係する基本的なルール（1/2）

提案書の作成に当たり、最低限知っておくべき基本的なルール（公用文に準じるもの）を、いくつかご紹介します。

**① フォントは（本来は）明朝体**

公用文は「書体は明朝体で」と定められています。漢字の「とめ」や「はね」がしっかりと（つまり正しい書体が）認識出来るように、というルールです。ですので、一般的なビジネス文書は原則明朝体で記述します。

とは言え、昨今の提案書はプロジェクター等で投影する、プレゼン資料としての側面が強く、ゴシック体等の使用も許容されています。ただし、提案書冒頭の挨拶文は、プレゼン時には表示しませんので、挨拶文だけは明朝体で記載するのが一般的です。

**② 使える漢字は常用漢字のみ**

ビジネス文書一般の話ですが、使用出来る漢字は原則として常用漢字のみです（※固有名詞を除く）。例えば「宜しくお願いします」といった表現がありますが「宜」は常用漢字ではありませんので、公的文書では使えません。ただし、

- 「公用文作成の要領」に定めがある場合は、常用漢字表に記載がある場合でもかなで表記する。「おそれ（恐れ）」「かつ（且）」「（接続詞の場合の）したがって（従って）」「ただし（但し）」「ただし書（但書）」「ほか（外、他）」「また（又）」「よる（因る）」など。
- ?（疑問符）や!（感嘆符）は原則使わない。2022年の改定で使用が許容されたが、議事録や広報文書の場合に限るもので、提案書では使用しない方が良い。

#### 提案書に関係する基本的なルール（2/2）

**③ 謙譲語は正しく使う**

謙譲語として「○○致します」という表記がありますが、これは純粋な誤用です。謙譲語の「いたす」はそもそも平仮名ですので「○○いたします」と書くのが正しい日本語です。（「致す」という言葉は存在しますが、意味が異なります。音が同じだけで謙譲語ではありません）

謙譲語表現は、敬語の中でもかなり誤りが多い表現なので、特に気をつけましょう。

**④ 補助動詞を正しく使う**

公用文では、補助動詞は平仮名で書くと定められています。そのため、「ふつうは」一般の文書でも平仮名表記が望ましいと言われています。補助動詞は、通常の動詞との区別が難しく、混乱が良く見られます。

典型的な例として、相手に何かを要望したり懇願したりする意（英語だとPlease）を表す補助動詞に「ください」があります。「お座りください」「ご覧ください」「止めてください」という風に、何かをして欲しい時に使用する補助動詞です。

対して、漢字の「下さい」は「何かが欲しい、請求する（英語だとgive）」という表現の尊敬語です。ですので「ご連絡下さい」「資料を下さい」「時間を下さい」という風に、何かが欲しい時に使用する尊敬語表現です。

（ちなみに、尊敬語ではあるものの命令形の文ですので、お客様向け文書ではあまり使いません）

よく見る補助動詞には、他に「○○いたします」「○○させていただきます」などがあります。これらは平仮名しかない語です。

---

## まとめ

- これまでの提案活動の成果を、提案のストーリーボードにまとめあげる。
- RFPを分析し真なる課題を発見。差別化されたストーリーボードを。
- 「提案のコンセプト」は最重要テーマ。提案の良し悪しはそこで決まる。テーマステートメントとして冒頭に。
- 提案とは、お客様が主人公の物語。
- 提案書とは、RFPへの回答文書。そして想定すべき読み手は経営層。
- 提案書は公的文書。ビジネス文書作法を忘れずに。

---

## 参考文献

- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』（ダイヤモンド社）
- 『ITエンジニアの必須スキル 顧客に響くシステム提案メソッド』（日経BP）
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』（早川書房）
- 『キャズム Ver.2 増補改訂版 新商品をブレイクさせる「超」マーケティング理論』（翔泳社）
- 『令和時代の公用文 書き方のルール』（学陽書房）
- 文化庁（公式）No.21 公用文の書き方資料集  
  https://www.bunka.go.jp/kokugo_nihongo/sisaku/joho/joho/series/21/21.html
- 『プロジェクトガイドライン』（システムエグゼ プロジェクト品質保証委員会）

---

## 【HPMS】アーキテクト教育・第十回v5.8.md

## 第十回 テスト・品質管理・セキュリティ アーキテクト教育セミナー

Copyright(c) 2019-2025 SystemEXE Inc. All rights reserved.  
相田一英 2025/02/19

## 目次

### 1. テスト
- 1-1. テストの基礎
- 1-2. テストカバレッジ
- 1-3. テストの自動化
- 1-4. テスタビリティに配慮した設計

### 2. 品質管理
- 2-1. テスト工程/プロセス
- 2-2. テスト計画/仕様
- 2-3. レビュー
- 2-4. 品質目標

### 3. セキュリティ
- 3-1. ネットワークセキュリティ
- 3-2. ミドルウェアセキュリティ
- 3-3. アプリケーションセキュリティ
- 3-4. データセキュリティ

### まとめ
### 参考文献

---

## 1. テスト

「テスト」はITプロジェクトの工期・工数のほぼ半分を占める重要なプロセスです。

ビジネス観点では、請負開発における品質保証の要であり、お客様に対し我々がプロフェッショナルである事を証明するための、極めて重要な知識領域です。

反面、テストにかかるコストは本質的にロスコストであり、常に効率化・合理化が求められる非常に難しい領域でもあります。

### 1-1. テストの基礎

#### 「テスト」の本質

ITプロジェクトにおける「テスト」の本質とは、自然言語から機械語に順次翻訳する過程における、劣化コピー（欠落、誤訳など）の抑止です。あらゆる言語は、翻訳の際に少なからぬエラーが発生します。テストはそれを抑止する活動全般の総称です。

**翻訳プロセス：**
1. ユーザー要件（自然言語/ユーザー語）
2. 設計（自然言語/システム語）
3. 製造（プログラミング言語）
4. コンパイル（機械語）※自動

各段階で：
- 誤訳が無いか、要件定義書と設計書を比較（テスト）する
- 誤訳が無いか、設計書とプログラムコードを比較（テスト）する
- 誤訳が無いか、プログラムコードと実行プログラムを比較（テスト）する

**「テスト」の本質とは「翻訳前と翻訳後を比較する事」**
→ 全てのテストは「何と何をどのように比較するか」を計画する必要がある

#### 「テスト」の種類

「テスト」と総称される活動にはいくつかの種類があります。全ての活動は「翻訳前と翻訳後を比較する」という意味で本質的には同じ行為ですが、比較対象によってその呼び名が変わります。

**レビュー（自然言語ドキュメント対象）：**
- セルフレビュー
- ウォークスルー
- ピアレビュー
- インスペクション

対象が自然言語で記述されたドキュメントなので、人間が目視でテストしなければいけない。この行為を一般的にレビューと総称する。テスト全体の中で最も難易度が高い活動。

**テスト（プログラム対象）：**
- 単体テスト
- 結合テスト
- システムテスト
- ユーザーテスト

対象がプログラミング言語或いは実行プログラムであり、設計書（或いは仕様書）と比較。設計書が無い場合は本質的にテスト不能なので、特殊な手段が必要となる。

> **★AI/LLM Challenge！**
> 「自然言語」と来ればAI/LLMの出番。プロセス改善のためにLLMが活かせる可能性が非常に高い。レビュープロセスへの組み込みを考えてみよう！

#### ホワイトボックステスト

テスト手法は、大きくは「ホワイトボックステスト」と「ブラックボックステスト」の二種類に分類されます。

ホワイトボックステストとはプログラムの内部構造を基にすべての実行経路の動作を確認するテストです。従って、実施に当たっては「プログラムコード」と「プログラムの内部構造が記述された比較対象」が必要になります（つまり「設計情報」が必要）。

ITプロジェクトのテストプロセスとしては単体テスト（ユニットテスト）がホワイトボックステストに該当します。

**対象：** メソッド/ファンクション単位

**テスト内容：**
- 処理経路全てをテストする
- 評価される条件全てをテストする
- 全ての入力値をテストする

（プログラムの）中身が見える箱＝ホワイトボックスをテストする。本来は詳細設計書とプログラムコードを比較するテスト。

#### ブラックボックステスト

ブラックボックステストとはプログラムの内部構造を意識せず、入出力仕様通りの結果になるかを確認するテストです。つまり実施に当たっては「実行プログラム」と「プログラムの入出力仕様が記述された比較対象」が必要になります。

メソッド/ファンクションが対象であれば対象メソッドの入出力仕様（シグニチャ及びメソッドコメント）情報が必要であり、機能/画面が対象であれば機能仕様書/画面仕様書が必要になります。

ITプロジェクトのテストプロセスとしては結合テスト～ユーザーテストに該当します。

**対象：** メソッド、機能、画面など

**テスト内容：**
- 値を入力し出力値を確認する

（プログラムの）中身が見えない箱＝ブラックボックスをテストする。要件定義書や基本設計書と実行プログラムを比較するテスト。

※）メソッドやファンクションの単位でも引数と戻り値の定義が入出力仕様に当たる。

> **★AI/LLM Challenge！**
> 仕様或いは設計情報が「文章」として存在しているのであれば、そこからテストデータやテストシナリオを生成出来る可能性がある。ぜひ適用を試行してみよう！

#### ブラックボックステストは「全ての境界」をテストする

ブラックボックステストはシステムやアプリケーション（及びその内部）の「境界」に対するテストです。表現を変えれば、システムコンポーネント同士の結合テストの事です。システムコンポーネント同士は様々なプロトコルで相互に通信を行っていますので、それぞれの「境界」毎に実施すべきテストが異なります。

**システム構成例：**
- クライアントPC（Windows 10）→ ブラウザ（FireFox）
- サーバ（CentOS）→ リバースプロキシ（Apache HTTP Server）→ APサーバ（Tomcat）
- DBサーバ（CentOS）→ データベース（Oracle 11g）
- I/Fファイル

**テスト対象となる境界：**
- UI境界（人との境界）
- ネットワーク境界
- TLS境界
- トランザクション境界
- 他システムとの境界

#### 「境界」には「プロトコル」がある

システムやアプリケーションの「境界」には、必ず何らかの「プロトコル」が定義されています。テストの実施に当たっては、それぞれのプロトコルに対応するテストツールや手段を選ぶ必要があります。

**プロトコル別テスト手段：**

| プロトコル | テスト手段 |
|------------|------------|
| HTTPS | JMeterなどのHTTPSに対応したツールで様々なテストが可能 |
| HTTP | JMeterなどのHTTPに対応したツールで様々なテストが可能 |
| JDBC | JMeterなどのJDBCに対応したツールで様々なテストが可能 |
| ファイルシステム | ファイルの読み書きが出来るツール採用 |
| 目と手 | 目と手が無いとテスト出来ない。ブラウザ自動操作や画像認識といった手段が必要に |

#### 「アプリケーション境界」はアーキテクチャにより異なる

特に「アプリケーション境界」に着目した場合、アーキテクチャによって境界が異なります。現代では、システムコンポーネントとして複数のアプリケーションが存在する事も一般的になりましたので、クラウドインテグレーション等では特に意識する必要があります。

**Webアプリケーション：**
- 「アプリケーション」は1つでUI境界も1箇所だけ

**SPA＋Webサービス：**
- サービス化により、サーバーアプリケーションのUI境界はここに後退
- Webサービス/Web APIのUIはここで、「ユーザー」は様々なアプリケーション
- 新たなUI境界としてAngularアプリケーションなどが追加

#### 非同期分散システムのテスト

本格的なクラウドインテグレーションの普及とともに、SPAを始めとした非同期分散システムの事例が増えています。これはつまり、単一のシステムを実現するために、ソフトウェアアーキテクチャが異なる複数のアプリケーションを開発する事が多くなる、という事です。

結果として、従来の、（比較的小規模な）モノリス開発とは異なり、テストプロセスをアプリケーション個別に定義し、テストプロセスの合流タイミング等を設計する必要があると言うことです。

**アプリケーション別テスト例：**

- **React（SPA）：** SPAは独立したクライアントアプリなので、モックサーバ等を用意して単体、結合テスト。その後バックエンドと接続するE2Eテスト（システムテスト）へ。
- **node.js（サーバレス Web API）：** サーバレスを利用しているので、独立しての単体、結合テスト。その後他のアプリケーションと協調して動作させるシステムテストへ移行。
- **Spring Boot（Web Service）：** 従来通り単体、結合テスト。その後他のアプリケーションと接続するシステムテストへ移行。
- **PL/SQL（バッチアプリケーション）：** JUnit等を経由して自動テスト。単体、結合テスト後は Web Service との結合テストへ。

### 1-2. テストカバレッジ

#### テストの「品質」

テスト自体にも「品質」があります。テスト品質において最も重要なのがテストカバレッジ（テスト網羅率）です。テストカバレッジとは全てのシステム要素（ドキュメントやシステム/ミドルウェア/アプリケーションコンポーネント）がテストされているか、テスト対象の全ての入出力仕様がテストされているか、テスト対象プログラムの全ての命令文/分岐/分岐条件がテストされているかを表す数値です。

我々はシステムの全要素をテストし、全体が正しく動作する事を証明しなければなりません。

**「システム」全体の全ての要素を網羅的にテストする**
→ 言い換えれば、仕様書、設計書、プログラム、インフラなど作成したもの全てをテストし、テストした事をお客様に証明する必要がある。

#### ホワイトボックステストの品質

ホワイトボックステストでは、テストカバレッジにおける品質基準が明確に定められています。ITプロジェクトでは、プログラムを作成した場合、原則としてこの品質基準を満たさなければなりません。

| 網羅性基準 | 説明 |
|------------|------|
| **C0基準** | ラインカバレッジ（行網羅性）基準。コード内の全ての命令（≒全部の行）を少なくとも1回は実行。 |
| **C1基準** | ブランチカバレッジ（分岐網羅性）基準。コード内の全ての分岐を少なくとも1回は実行。※ 当然、例外処理も分岐に含まれる。 |
| **C2基準** | コンディションカバレッジ（分岐条件網羅性）基準。コード内のすべての分岐条件の取りうる値を少なくとも1回は実行。※ 値の選択は同値分割、境界値分析、といった考え方で決まる。 |

「今回のテストはC1基準クリアの品質です」といった評価をする。当然最高品質はC2基準クリア！

これらの基準を満たしている（網羅している）事を証明するのは難しいので、テストには「仕組み」や「工夫」が必要になる。

### 1-3. テストの自動化

#### テストのコストはロスコスト

レビュー/テストにかかるコストは、原理的にロスコスト（損失）です。テストを増やせば品質は向上しますが、そのコストは利益を減少させます。従って、テスト品質を向上させつつも、テスト活動にかかるコストは抑制するための対策が極めて重要です。

テストのコストを抑制するには、いくつかの対策を組み合わせる必要があります。

**ロスコスト削減の手法：**
- テスト対象の数を減らす → 共通機能分割（設計）
- テストパターンを減らす → 凝集度↑結合度↓（設計）、直交表、オールペア法,etc…（テストデータ作成技法）
- 個々のテストの難易度を下げる → 論理エラーを物理エラーに変換（プログラム設計）、デザインパターン（設計）
- テストの自動化 → テスト作業を効率化する

#### テストの自動化可能/自動化必須な作業

テストに関わる様々な作業の自動化が可能です。さらに自動化必須な作業もあります。

**基本的なポイント：**
- 手動作業を減らす
- 繰り返すテストは自動化
- テスト結果評価を自動化

**自動化項目：**

| 項目 | 区分 | 説明 |
|------|------|------|
| 文書品質自動検査 | - | ドキュメント品質の自動チェック |
| コード品質自動検査 | IDEが標準で備える | Lint、メトリクス自動測定 |
| テスト実施の自動化 | 自動化必須 | テストドライバ、xUnit等 |
| テストカバレッジ自動測定 | 自動化必須 | xUnit関連ツール |
| テストレポート自動作成 | 自動化必須 | xUnit関連ツール |
| 繰り返しテストの自動実施 | - | 回帰テスト等 |
| GUIテスト実施の自動化 | メリットが出る条件が限られる | 各種ツール |
| テストデータ自動作成 | - | ブラックボックステスト向け |

> **★AI/LLM Challenge！**
> IDEにAI/LLMが組み込まれれば、検査だけでなくサンプルコード生成や、設計情報を元にした修正箇所の助言など、ペアプログラミングに近い支援が受けられる。ぜひ試してみよう！

#### 単体テストは自動化するのが「常識」

ソフトウェア開発の黎明期（1970～1980）の頃から単体テスト（ホワイトボックステスト）は自動化するのが常識です。
（※ 当時から現在まで、テストパターンが多い場合は「テストドライバ」と呼ぶ専用プログラムを開発します）

単体テストや結合テストでは原理的に極めて多くのテストケースを実行する必要があり、自動化せずに十分なテストカバレッジを得る事は、現実的なコスト内ではほとんど不可能です。

**必要テストケース数：**
- C1基準を満たすために必要なテストケース数：品質が良い場合でも、1メソッド当たり10ケース以上
- C2基準を満たすために必要なテストケース数：1メソッド当たり20～100ケース以上

※サイクロマティック数を元にした試算

C2基準が要求される開発で10メソッド書いた場合、実施しなければならない単体テストは200～1,000ケース以上となる。→ **自動化が当然**

#### 単体テストの「暗黒の8年間」

ここまでが単体テストに関する常識的な説明（あらゆる教科書にこう書いてある）なのですが、何故かメソッド個々のテストを行わず、手動で画面を操作して行うテストしか行わない現場があります。

これは歴史的経緯に原因があり一部の開発現場から単体テストが文化として消えてしまったのです。

**ITの歴史における単体テスト：**

| 期間 | 開発環境 | 単体テストの状況 |
|------|----------|------------------|
| 1970～1994年 | メインフレームが開発の中心 | テストドライバ（test driver）と呼ぶ自動テストプログラムを都度開発しテスト実施 |
| 1995～2002年 | PC向けC/S開発 | オープン系開発のごく一部の現場で、テストドライバ作成の手間を嫌い、単体テストをしなくなってしまう… |
| 2003～2019年 | Web/Javaが開発の中心 | Java等ではテストドライバを自作しなくても自動テストが可能に |

**重要なツールの登場：**
- VB4出現
- Junit登場、Nunit登場
- EclipseがOSSに

ITの歴史約50年間中わずか8年間の影響で、オープン系開発のごく一部の現場（主に4GL採用の現場）から「単体テスト」が消えてしまった…

#### xUnitによるテスト自動化標準ソリューション

現代のJavaやC#、JavaScript開発においては、xUnitと総称されるテスティングフレームワークが標準的に採用されます。xUnitとその関連ツールを使用した、標準的なソリューションを以下に示します。

**標準的なソリューション：**

1. **製造+単体テスト工程を一体化**
2. **xUnitテストケースを必ず作成**
3. **自動カバレッジ測定ツールを導入**
4. **単体テストのブランチカバレッジ100％確認を、対象の製造完了条件とする**
5. **結合テスト以降～保守まで、回帰テストはxUnitで実施**
6. **ビジネスロジック向けのモジュール間結合テストもxUnitでカバレッジ**

**効果：**
- 製造完了時点でC1基準が担保されたコードになる
- C2基準をクリアするためにはテストコード或いはテストデータのレビューが必要
- 手動での結合テストのテストケース数が大きく減る
- 結果として手動テスト及び結合テスト以降のテスト工数を大きく削減出来る

**テストケース作成を効率化するツール：**
- モックオブジェクト
- モックサーバ
- FROG Unit

#### GUIテストの特殊性(1/2)

テストの自動化を考える上で、誰もが考えるものの実際には効果が出にくいのがGUIテストです。GUIテストは、原理的に最もコストがかかるテストです。
（※ GUIはモジュール/コンポーネントを多数結合した状態で動作するため、原理的にテスト対象範囲が広くなり、かつ欠陥検出時の原因分析・調査に時間がかかる）

**テストピラミッド（Martin Fowler）：**
- **UI（上層）：** GUIテストは非常に時間がかかり、トータルでかかるコストも非常に大きい
- **Service（中層）：** ビジネスロジックのテストは結構面倒。手間も時間も結構かかる
- **Unit（下層）：** 自動ユニットテストは早くて安い！

#### GUIテストの特殊性(2/2)

GUIテストの内、昨今大きな課題となっているのが、SPA等のアーキテクチャを採用した際のE2Eテストです。E2Eテストは従来のWebアプリケーションに対する結合テスト（GUIを操作して行うテスト）に似ていますが、むしろシステム間連携テストに近い、全く性質の異なるテストであり、その実施に当たっては注意が必要です。

**E2E（End-to-End）テストの課題：**

- **異なる複数のアプリケーションをネットワーク経由で連携させるテストである**
  → エンドポイントとエンドポイントの連携テスト＝E2Eテスト

- **JavaScriptアプリケーションは本質的に非同期処理なのでテストの記述が非常に大変（非効率）**

- **クライアント側のアプリケーションの動作とネットワーク、サーバ側アプリケーションの動作が独立しているため関連要素が多くテストが不安定**
  また障害原因調査も非常に大変

**推奨アプローチ：**
なるべく自動ユニットテストでカバレッジを効かせ、E2Eテストは最小限にすべき、とされている。

### 1-4. テスタビリティに配慮した設計

#### 「テスタビリティ」とは何か

テスタビリティ（テスト容易性/試験性）とはISO/IEC 25010 及び JIS X 25010 の品質モデルに定義されている「保守性」の副特性です。テストをいかに楽に（そして低コストで）実施出来るかを示す品質特性であり、テスト界で有名なJames Bach（※）はテスタビリティを以下のような特性の集合と定義しています。

（※ 『ソフトウェアテスト293の鉄則』の著者。以下は『実践ソフトウェアエンジニアリング』から引用）

**テスタビリティの構成要素：**

- **実行円滑性：** そもそも品質が良い → テストが円滑に進む
- **観測容易性：** 障害結果や原因の観測が容易
- **制御容易性：** テスト対象の内部を操作しやすい
- **分解容易性：** テスト対象を他から分離しやすい → モック等に差し替えしやすい
- **単純性：** テスト対象がそもそもシンプル
- **安定性：** テストそのものが安定
- **理解容易性：** テスト対象の仕様が理解しやすい

#### テスタビリティを生み出す設計

テスタビリティを実現するためには、そのような特性を持つよう設計する必要があります。James Bach のモデルを設計観点によって表現し直すと以下のようになります。

**設計観点とテスタビリティ特性の対応：**

| 設計領域 | 手法 | 対応するテスタビリティ特性 |
|----------|------|---------------------------|
| **プログラム設計の領域** | 品質を作り込む、適切な例外設計、論理エラーを物理エラーに変換、テスティングフレームワーク導入 | 実行円滑性、観測容易性、安定性 |
| **アーキテクチャ設計の領域** | 適切なDI/AOP、凝集度を上げる、結合度を下げる、デザインパターン、階層化設計、ドメイン分析/ロバストネス分析、適切な命名、用語集/命名規約 | 制御容易性、分解容易性、単純性、理解容易性 |

---

## 2. 品質管理

ビジネスとしてシステム開発を行う上で、避けて通れないのが品質管理です。我々がお客様にお届けするのは機能と品質であり、いずれか一方ではありません。

品質管理（QM）活動はITプロジェクトのあらゆる部分に必要で、プロジェクトに関わる全メンバーが意識しなければいけない知識領域です。

### 2-1. テスト工程/プロセス

#### 「品質管理」と「品質保証」

品質を実現するために必要な二つの活動が「品質管理（Quality Management/QM）」と「品質保証（Quality Assurance/QA）」です。

**品質管理活動（QM活動）：**
「品質コントロール」とも呼ばれ、開発・製造に関わる全ての人が行う活動です。ITプロジェクトにおける品質/レビュー/テストの計画、設計、開発、製造など一連のプロセスが対象となります。

**品質保証活動（QA活動）：**
品質管理活動に対する監査に当たるプロセスです。ITプロジェクトにおいてはPM或いはお客様による品質/レビュー/テスト計画やテスト結果に対するピアレビュー/インスペクションがそれに該当します。

**役割分担：**
- **品質管理：** PM/アーキテクトを始めとしたメンバー全員の活動（レビュー、テスト）
- **品質保証：** PMやお客様担当者による品質管理活動に対する監査（ピアレビュー(PM)、インスペクション(顧客)）

#### ITプロジェクトにおける標準的なテスト工程

まずはテスト注目し、ITプロジェクトにおける標準的なテスト工程定義の内、我々ベンダー側のプロセスに当たる工程を見ていきます。

**システムエグゼ標準工程モデル：**
要件定義 → 基本設計 → 詳細設計 → 製造+UT → 機能単体テスト → 結合テスト → システムテスト → ユーザーテスト

**共通フレームモデル（IPA/経済産業省）：**
要件定義 → 基本設計 → 詳細設計 → 製造 → 単体テスト → 結合テスト（モジュール間/機能間） → システムテスト → ユーザー受入テスト

**特徴：**
- 前方工程でも計画やレビュープロセスが必要（後述）
- 最近は製造と単体テストは1セットの工程として定義される
- 結合テストは工程として二つ以上に分割される事も（当社標準モデルでは分けている）
- 当社はSIベンダーなので、システムテストはネットワークやH/W、周辺システムも含む
- いわゆる検収

#### 主要なテストの定義

工程名に示される主要なテスト（※）の定義を以下に示します。
（※ 実際のテスト工程にはこれ以外にも様々なテストプロセスが含まれます（後述））

| テスト | 定義 | 備考 |
|--------|------|------|
| **単体テスト（製造＋UT）** | 【ホワイトボックステスト】プログラマのためのテスト。カバレッジ基準（C0～C2）が課題になるテスト。テストケースのバリエーションが最も多いテスト。 | 自動化必須。 |
| **機能単体テスト（モジュール間結合テスト）** | 【ブラックボックステスト】モジュール設計者のためのテスト。設計通りにモジュール同士が連携するかのテスト。 | 適切な設計が行われていれば、ビジネスロジックの機能単体テストは自動テストでカバレッジ可能。※「画面」は結合済みモジュールなので、画面を手動で操作するテストは全てここに含まれる。 |
| **結合テスト（機能間結合テスト）** | 【ブラックボックステスト】機能設計者のためのテスト。設計通りに機能同士が連携するかのテスト。 | |
| **システムテスト** | 【ブラックボックステスト】システム設計者のためのテスト。設計通りにシステム全体が連携するかのテスト。 | システム全体の機能や性能、バックアップ、障害復旧など、人間系を含めた全てをテスト。 |
| **ユーザーテスト** | 【ブラックボックステスト】ユーザーのためのテスト。システムと実業務が正しく連携するかのテスト。 | お客様にとっては人間側をテストする「運用テスト」でもある。 |

#### V字モデル表現

開発～製造工程成果物とテスト工程の関係を示したものがV字モデルです。現在のITプロジェクト実際に合わせた、現実的なV字モデルを以下に示します。

**V字モデルの構成：**

**左側（開発工程）：**
- 要件定義
- 基本設計
- 詳細設計
- 製造

**右側（テスト工程）：**
- UT（自動ユニットテスト）
- 機能単体テスト
- 結合テスト
- システムテスト

**検証関係：**
- 要件定義書に記述された機能/非機能要件全てのテスト → システムテスト
- 機能間/サブシステム間の連携をテスト → 結合テスト
- 機能（≒画面）単体を対象にモジュール間結合テストを実施 → 機能単体テスト
- 製造とUTは一体の工程 → UT

**特記事項：**
- 画面を除くビジネスロジック以下のテストは、テスティングフレームワークでほぼカバレッジ可能
- 画面から直接機能をデリゲーションされるメソッド（コントローラ、サービス）は、単体テストに加えモジュール間結合テストを実施するのが合理的
- 小規模開発ではクラス/メソッドコメントを詳細設計の代わりとする事も

#### テスト工程に含まれる主要テストプロセス

各テスト工程では、その期間に複数のテストプロセスが実施されます。以下に主要なテストプロセスを示します。

**テストプロセスの分類：**

| 工程 | ホワイトボックステスト | ブラックボックステスト |
|------|------------------------|------------------------|
| **UT（自動ユニットテスト）** | 制御フロー確認プロセス、ユニット機能確認プロセス | |
| **機能単体テスト** | | ユーザー機能確認プロセス、GUIテストプロセス |
| **結合テスト** | | 機能間/サブシステム間連携確認プロセス、状態遷移確認プロセス、環境確認プロセス |
| **システムテスト** | | シナリオテストプロセス、パフォーマンステストプロセス、インターフェーステストプロセス |

**テスト観点：**
- **ホワイトボックステスト：** コードの内部構造の検証が目的のテスト
- **ブラックボックステスト：** 仕様書や設計書を元に、入力と出力の観点で行うテスト

### 2-2. テスト計画/仕様

#### 品質管理計画

ITプロジェクトを開始する際に、そのプロジェクトにおける品質計画（品質条件や品質目標など）、テスト計画（テスト戦略や基本的な手順など）、及び開発フレームワークの構築計画を作成します。

これらの作成に当たるのは一般的にはPM/PMO及びアーキテクトです。

**システムエグゼ標準工程モデルでの計画活動：**

| 工程 | 品質/テスト活動 | 開発FW活動 |
|------|----------------|------------|
| **要件定義** | 品質計画、テスト計画、開発FW計画 | FW設計 |
| **基本設計** | UT準備 | FW開発 |
| **詳細設計** | 機能単体テスト計画、準備 | FWを使った製造 |
| **製造+UT** | UT実施、結合テスト計画、準備 | |
| **機能単体テスト** | 機能単体テスト実施、システムテスト計画、準備 | |
| **結合テスト** | 結合テスト実施 | |
| **システムテスト** | システムテスト実施、ユーザーテスト支援準備 | |
| **ユーザーテスト** | 実施 | |

**回帰テスト：**
- UT回帰テスト
- 機能単体回帰テスト
- 結合回帰テスト
- システム回帰テスト

※工程個別のテスト計画は前工程で作成・準備でも良い。

**アーキテクトが関わる事が多いプロセス**

#### 品質/テスト計画書

品質/テスト計画書はユーザーレビューの対象です。品質管理レベルについてユーザーと合意する事で、品質管理コストの理解を得、またユーザーの協力が必要な内容と時期に関する理解も得られます。

**ユーザにとっての品質/テスト計画書：**

| 項目 | 内容 |
|------|------|
| **品質管理の合意事項** | どのように品質を管理するか<br>✓ 実施するテストの種類, etc… |
| **協力が必要な事項や時期** | ✓ ユーザ参加が必要なテストの実施有無、内容<br>✓ 提供が必要な資料やデータ、準備してもらう環境やツール |
| **どのように品質を確認するか** | ✓ どのようなエビデンスでテスト実施を確認するか<br>✓ テストの結果として何が納品されるか<br>✓ テストの状況、結果をどのように確認するか, etc… |

**開発チームにとっての品質/テスト計画書：**

| 項目 | 内容 |
|------|------|
| **品質管理のガイドブック** | どのように品質を管理するか<br>✓ 実施するテストの種類（『何を』『どのように』確認するか）, etc… |
| **『いつ』『だれが』『何を』『どのように』** | ✓ 『いつ』『だれが』『何を』『どのように』して作業を進めるか, etc… |
| **どのように品質を提示するか** | ✓ どのようなエビデンスを提示するか<br>✓ テストの結果として何を作成、納品するか<br>✓ テストの状況、結果をどのように報告するか, etc… |

#### 品質/テスト計画書の項目例(1/2)

| 項目 | 説明 |
|------|------|
| **基本方針（テストの種類）** | 『何（どのような品質）』を確認するかを定義します。 |
| **テスト対象と範囲** | テスト対象と範囲を定義します。 |
| **テスト環境** | テストを実施する環境構成を定義します。<br>ユーザに準備してもらう環境やツールがあれば記載します。 |
| **テストデータ** | テストで利用するデータの作成方法、管理方法について定義します。<br>ユーザに提供してもらう資料やデータがあれば記載します。 |
| **スケジュール** | テスト実施の時期やユーザとの合意が必要なマイルストーンを定義します。<br>計画を詳細化する過程で詳細WBSや詳細スケジュールを作成します。 |
| **テストの実施及び検証の方法** | テストを『どのように』実施し『どのように』検証するかを定義します。<br>『どのように』検証するかを定義する過程で取得すべきエビデンスも定義します。 |
| **再テスト/回帰テストの方針** | 当該工程で変更、修正が発生した場合に、どの工程までさかのぼって再テスト/回帰テストを実施するかの方針を定義します。 |
| **テスト準備** | 環境構築やツール開発など、テスト工程に入る前に実施しておく作業を定義します。 |
| **作成ドキュメント** | テスト工程のインプットドキュメントおよびアウトプットドキュメント（成果物）を定義します。 |
| **テスト実施の開始、終了基準** | テスト実施の開始、終了基準を定義します。 |

#### 品質/テスト計画書の項目例(2/2)

| 項目 | 説明 |
|------|------|
| **テストケース作成観点** | テストケースの漏れや担当者ごとのばらつきがないよう、テストケースを抽出する際の具体的な指針や適用するテストケース設計技法を提示します。 |

**品質管理計画：**

| 項目 | 説明 |
|------|------|
| **品質目標** | テストで達成すべき品質目標値および目標達成しなかった場合の対策を定義します。 |
| **レビュー実施計画** | レビューの目的と実施タイミング、実施のフローや指摘事項の管理方法などを定義します。<br>計画詳細化の過程で実施のフローや指摘事項の管理方法などを定義していきます。 |
| **障害分析方法** | テストで発生した障害をどのように分類/分析し、分析結果に異常が見られた場合にどのような対応を行うか方針を定めます。 |

**以下、プロジェクト計画書に記述すべき品質/テスト関連項目：**

| 項目 | 説明 |
|------|------|
| **体制** | テスト実施の体制を定義します。 |
| **会議体** | テスト実施中に設けられる会議体やエスカレーションの方法を定義します。 |
| **障害管理フロー** | 障害発生時の作業フローを定義します。 |
| **進捗管理基準** | テスト仕様書作成、実施の進捗基準や報告方法、内容を定義します。 |

※）製造＋UTで自動ユニットテストを実施する場合、通常は、お客様に対しユニットテスト実行及びカバレッジレポート出力環境をまるごと納品する事で合意します。なお、単体テストはベンダー内部のテストプロセスであり、カバレッジ100％かつ欠陥件数0という最終報告が当たり前なので、（結合テスト以降のような）中間状況の報告やテストエビデンスは不要です。

### 2-3. レビュー

#### 「レビュー」は目視で行うテスト

品質管理活動においてテストと同じくらい重要なのがレビューです。レビューはテストの一種であり、そのプロセス設計はテストに準じます。テスト同様計画し、設計し、実施する必要があります。

一般的には、レビュー計画は品質管理計画書に記載します。

**レビューとテストの対応関係：**

| レビュー | テスト | 説明 |
|----------|--------|------|
| **セルフレビュー** | **単体テスト** | ドキュメント作成者自身が目視で品質確認。ドキュメントの単体テスト。 |
| **ウォークスルー** | **結合テスト** | チームメンバー相互にドキュメント間の関係性も観点に品質確認。ドキュメントの結合テスト。 |
| **ピアレビュー** | **システムテスト** | PM/PMOも加わりドキュメント全体や品質の観点で確認。ドキュメントのシステムテスト。 |
| **インスペクション** | **ユーザーテスト** | お客様の担当者による品質に対する監査。ドキュメントのユーザーテスト。 |

> **★AI/LLM Challenge！**
> 「自然言語」と来ればAI/LLMの出番。プロセス改善のためにLLMが活かせる可能性が非常に高い。レビュープロセスへの組み込みを考えてみよう！

#### レビュープロセスの定義

レビュープロセスは、全てのドキュメント（成果物）に対して定義します。レビュープロセスと、それを適用すべき対象について、概要を以下に示します。

| 種類 | 呼称 | 説明 | 適用 |
|------|------|------|------|
| **セルフレビュー** | 自己レビュー | 作成者自身による「見直し」の事。実施に当ってはレビュー観点をまとめたセルフレビューチェックシートを作成しメンバーに配布する事。 | 全ての成果物。<br>※ 成果物フォーマットの冒頭に成果物の作成要綱を付与し、都度自己チェックさせる形式でも良い。 |
| **ウォークスルー** | 内部レビュー、カジュアルレビュー | チーム内メンバー同士による相互レビュー。或いはTL、SLによるレビュー。<br>観点はセルフレビューチェックシートをベースに成果物利用者を想定したシミュレーション的観点でチェックする。 | 全ての成果物。<br>※ プログラムコードに関してはチーム外の品質管理者或いはアーキテクトによるコードレビュー実施を強く推奨。 |
| **ピアレビュー** | 内部レビュー、相互レビュー、査読 | PM、PMO、PLを含めたプロジェクト内最終レビュー。 | 要件定義書、基本設計書、テスト結果報告書、品質レポート。 |
| **インスペクション** | ユーザーレビュー、検収 | ユーザーによる受け入れレビュー。<br>※ レビュー計画は事前にユーザーに提示し、ユーザー側のスケジュールを調整していただく事。 | プロジェクト計画書（品質/テスト計画）、要件定義書、基本設計書（外部仕様）、テスト結果報告書、品質レポート。 |

#### コードレビュー①目視によるレビュー

コードレビューは、アーキテクトが実施すべき重要なウォークスルー（レビュー）です。特に製造を開始した早い段階で、製造メンバー全員に対し実施すべきです。メンバーの知識不足・スキル不足を早期に点検する事で、低品質なコードの量産を抑制し、メンバーに対する訓練・教育機会を得ます。

**実施方法：**

**小規模なプロジェクト：**
- メンバー全員に対面レビュー実施

**大規模なプロジェクト：**
- 主要なメンバーに対しオンラインレビュー実施
- 目視レビューし指摘をTODOコメントとして記述する
- 主要メンバーのスキルレベルを上げる事で、彼らによるウォークスルー品質を向上させる

**効率化のポイント：**
目視レビューにあまり時間をかけられない事情がある場合はコードメトリクスを計測し、行数或いはサイクロマティック数を基準にレビュー対象コードを抽出すると効果的です。

#### コードレビュー②コード解析ツール

目視によるコードレビューは非常に重要なレビューですが、メンバーのスキルレベルが全体的に低い場合、或いはメンバー数が非常に多い場合、極めて大きなロスコストになってしまいます。このような場合は、IDEに統合されたコード解析ツール（Lintツール）を採用し、基本的な構文や記述スタイル等はメンバー自身にチェックさせるプロセスの実施を強く推奨します。

**代表的なコード解析ツール：**

| 言語 | ツール |
|------|--------|
| **Java向け** | Checkstyle、FindBugs、PMD、Lint4j、etc… |
| **C#向け** | StyleCop、FxCop、etc… |
| **SQL** | SQLCheck、etc… |

**有償製品について：**
有償製品のコード解析ツールを採用すれば、多くのプログラム言語に対し、より詳細なソースコード解析及びメトリクス分析が実施出来ます。5千万円を超えるような比較的大型のプロジェクトの場合、有償製品の導入も検討して下さい。

※) ここに挙げた例にはもう古いものが含まれていると思われます。実際に採用する時は最新のツールを調査の上採用してください。

#### コードレビュー③リファクタリング

アーキテクトが実施する最も強力なレビューがリファクタリングです。実案件では、リファクタリングを開発プロセスとして導入するのには難しい状況（※1）もあります。そこでリファクタリングをレビュープロセスの一部として位置づければ、無理なく採用する事が出来ます。

（※1 頑健性/保守性を重んじない開発を長く経験した方やお客様は「テストをクリアしているコードを修正する」事を無駄に感じる場合があります）

リファクタリングは①で示した目視レビューと同じ形式で行い、リファクタリング箇所にはプログラマが修正内容を把握出来るようTODOコメント（※2）を記述します。

（※2 このTODOコメントはプログラマが確認後、すぐに削除するコメントです）

また、同じような問題が繰り返されている場合は、最初の一箇所だけリファクタリングし、残りの箇所はプログラマ自身が修正するよう、TODOによる修正指示を記述します。

**注意事項：**
ただし、リファクタリングは専門かつ高度なスキルが要求されるため、レビュアーには事前の学習とトレーニングが要求されます。

リファクタリングスキルを持つ有識者がいる場合のみ、本プロセスを実施して下さい。

> **★AI/LLM Challenge！**
> AI/LLMは、設計情報やコーディング規約などを読み込ませれば、それを元にしたリファクタリングの助言もしてくれる！有識者が不在でも、近いプロセスが実現する可能性あり！試してみよう！

### 2-4. 品質目標

#### テストの品質目標

「品質目標」には二種類あり、JIS-X 0129-1 品質モデルに示されるような品質特性の充足を意味する場合と、レビューやテスト「そのもの」の品質を示す品質管理上の品質目標があります。

ここでは後者について、IPAやJUASといった各団体が公開する数字を元に、各工程毎の品質目標例を紹介します。

（※ JIS-X 0129-1 に応じた品質目標は、通常非機能要件定義書に記述され、充足度合いを評価するためのテストを定義します）

**品質目標の構造：**
- **システムの品質目標** ← テストが品質特性を証明 → **品質特性**
- **テストの品質目標** ← テストの品質を証明 → **テスト**

#### 要件定義～詳細設計工程の品質目標

要件定義～基本設計工程の主要成果物はドキュメントです。従って、この期間の品質目標はレビューに対して定義されます。

| 成果物 | 対象プロセス | 品質目標（例） | 備考 |
|--------|--------------|----------------|------|
| **要件定義書<br>基本設計書** | 内部レビュー（ウォークスルー＋ピアレビュー） | 内部レビュー総工数<br>＝総ページ数×3.6人時 | IPAソフトウェア開発データ白書2014-2015/レビュー密度より。 |
| | ユーザーレビュー（インスペクション） | ユーザー参加レビュー総工数<br>＝ドキュメント作成工数×20％（以上） | JUASソフトウェアメトリクス調査報告書（2013年）。 |
| **基本設計書** | レビュー（ウォークスルー＋ピアレビュー＋インスペクション） | レビュー指摘密度<br>＝総指摘数÷総ページ数<br>＝0.5以上だと品質に課題あり。 | |
| **詳細設計書** | 内部レビュー（ウォークスルー） | 内部レビュー総工数<br>＝総ページ数×1.8人時（※） | ※詳細設計書については要件定義書/基本設計書に準じた参考値。 |

このような品質目標を元に、内部レビュー、ユーザーレビューの予定（参加人数、時間）を計画し、指摘数のようなメトリクスと合わせて品質を評価する事で、特に詳細なチェックが必要な（＝品質に問題のある）ドキュメントを検出出来る。

> **★AI/LLM Challenge！**
> もしAI/LLMの支援でこれらの工数を削減出来たら、その分他の作業に工数を割り振れる/品質が向上する/利益が向上する、いずれかの効果が期待出来る。ぜひ検討してみよう！

#### 製造＋UT工程の品質目標

製造（プログラミング）に関しても「コード品質」に関する定量的な品質目標が設定可能です。ユニットテスト（UT）については標準的な単体テスト品質基準に準じます。

| 成果物 | 対象プロセス | 品質目標（例） | 備考 |
|--------|--------------|----------------|------|
| **プログラムコード** | プログラミング | サイクロマティック数（※1）＝30未満 | ※1 サイクロマティック数に関しては後述。 |
| | | 1クラス当たりのメソッド数<br>＝10以下 | Apache Commonsコードにおける80パーセンタイル値。 |
| | | 1メソッド当たりの行数<br>＝20行未満 | Linuxカーネルにおける90パーセンタイル値。 |
| **プログラム** | 自動ユニットテスト | 自動カバレッジ測定による網羅率<br>＝C1基準（※2） | ※2 C0～C2基準に関しては後述。<br>なおC2基準はテストデータのレビューでしか確認出来ない。 |
| | | テストデータ数<br>＝サイクロマティック数（※1）以上 | |
| | | テストデータのレビューによりC2基準（※2）を確認 | |

#### 製造品質 ─ サイクロマティック数

サイクロマティック数（循環的複雑度）は、プログラムコードの複雑さを示す指標です。IDE付属或いは専用ツールにより、コードメトリクスの一つとして測定する事が出来ます。この数字を元に概ね以下のような品質評価が可能です。

| サイクロマティック数 | 複雑度の状態 | バグ混入確率 |
|----------------------|--------------|--------------|
| **10以下** | 非常に良い構造。 | 25％ |
| **30以上** | 構造的なリスクあり。保守性に問題が出るレベル。 | 40％ |
| **50以上** | 手動でのテスト不可能。 | 70％ |
| **75以上** | いかなる変更も誤修正を生む。<br>直ちに修正が必要。 | 98％ |

プログラムの構造によっては、サイクロマティック数では上手く複雑度を評価出来ない（＝複雑度を低く評価してしまう）場合もある。1クラス当たりのメソッド数やメソッド内行数などのメトリクスと併せて評価する事が重要。

#### 単体テスト品質 ─ C0～C2基準

手動/自動に関わらず、単体テストには標準的な品質基準があります。改めて C0～C2基準を紹介します。

| 品質基準 | 解説 |
|----------|------|
| **C0基準** | 全行網羅（ラインカバレッジ）→ コード全行がテストされている。 |
| **C1基準** | 分岐網羅（ブランチカバレッジ）<br>→ if文や例外処理など、全ての分岐がテストされている。 |
| **C2基準** | 条件網羅（コンディションカバレッジ）<br>→ if文等の全ての条件がテストされている。 |

**重要なポイント：**
- 単体テストは、C2基準をクリアして初めて「品質の良いテスト」と評価出来る
- C1基準をクリアするためのテストパターン数は、原理的にサイクロマティック数以上の数となる。テストデータ数は同値クラス/境界値分析の適用によって定まる
- C2基準は原理的に自動測定出来ないため、ホワイトボックス的にプログラム設計を理解した上で、テストデータの目視レビューが必要となる → テスタビリティに配慮した設計をしないと非常に大変な作業に
- この基準は製造された全てのプログラムコードに適用される
- C0～C2基準のクリアは、テスト自動化無しでは、現実のコスト内では不可能

#### 状態遷移テスト品質 ─ Nスイッチカバレッジ

結合テストにおける、重要なテストサブプロセスの一つが状態遷移テストです。

例えばGUI（画面）のように、あるボタンを押下する度に表示（等の）状態が変化する場合、その状態遷移が設計通りかどうかを確認するテストです。この場合、取りうる状態が多く、かつ関係して状態が変化するコンポーネントが多い場合、極めて多数の組み合わせが発生します。この時、状態遷移ツリーが抜け漏れなくテストされているかどうかを示すのが「Nスイッチカバレッジ」という指標です。

| 品質基準 | 解例 |
|----------|------|
| **0スイッチカバレッジ** | ボタン①押下 → 状態が A から B に変わる。 |
| **1スイッチカバレッジ** | 1. ボタン①を2回押下 → 状態が A - B - A に変わる。 |
| **2スイッチカバレッジ** | ボタン①とチェックボックス②の組み合わせで状態が変わる場合、<br>1. ②ON＋①押下 → 状態が A - B - A に変わる。<br>2. ②OFF＋①押下 → 状態が A - C - A に変わる。 |
| **...** | ... |
| **Nスイッチカバレッジ** | N個の分岐（スイッチ）の組み合わせによる状態遷移が網羅されている。 |

#### テストパターンの組合せ爆発

状態遷移テストにおいて、取りうる状態と関係する要素が多い場合、その組み合わせは指数関数的或いは階乗的に増大していき、いわゆる組合せ爆発という状態に簡単に達します。こうなると有限時間内での手動テストの実施はほぼ不可能（※）になってしまいます。

（※ xUnit等による自動テストならば力任せに解決出来る可能性はあります。その場合は自動テスト可能なように対象モジュールを設計する必要があります。つまり、いずれにしても適切な設計スキルが必要です）

このような場合にテスト数を可能な限り削減するための手法として直交表の作成、オールペア法（ペアワイズ法）、HAYST 法、タグチメソッド等がありますが、非常に手間がかかる上に数学的な計算が必要になりますので、十分な事前準備と計算ツールが必要です。

つまり、入力欄やボタンが多数配置された巨大画面（タブや長大な画面遷移も含みます）を定義した場合、高確率でテストパターンの組合せ爆発が発生し、原理的に高コストかつ低品質に陥ります。

逆に言えば、取りうる状態を少なくし、関係する要素を減らせばこのような事態を回避出来ます。

**原則として、システムの構成要素は小さく、疎結合に設計しましょう。**

#### 機能単体テスト～結合テスト工程の品質目標

結合テスト工程（EXE標準工程モデルの機能単体テスト～結合テスト）の品質目標はテストケース密度とバグ密度で評価出来ます。

| 成果物 | 対象プロセス | 品質目標（例） | 備考 |
|--------|--------------|----------------|------|
| **テストケース** | 機能単体テスト～結合テスト | テストケース密度<br>＝47ケース/1KLOC | IPA ソフトウェア開発データ白書2014-2015（Java）より。 |
| **バグ件数** | | バグ密度<br>＝2.5件/1KLOC | |
| **テストケース** | （機能間）結合テスト（※） | テストケース密度<br>＝5ケース/1KLOC | ※自動ユニットテストを実施せず、機能単体テストを「単体テスト」と位置付け実施した場合の機能間結合テストのみの当社実績値。 |
| **バグ件数** | | バグ密度<br>＝0.2件/1KLOC | |

自動ユニットテストを実施しないと結合テスト完了後の品質は原理的に低下し、バグに起因するロスコストが増大する。スクラッチ開発の場合、手動テストのみで品質を実現するのは非常に困難である。

#### システムテスト工程の品質目標

システムテスト工程の品質目標も、テストシナリオ密度とバグ密度で評価出来ます。

| 成果物 | 対象プロセス | 品質目標（例） | 備考 |
|--------|--------------|----------------|------|
| **テストシナリオ** | システムテスト | テストシナリオ密度<br>＝18ケース/1KLOC | IPA ソフトウェア開発データ白書2014-2015（Java）より。 |
| **バグ件数** | | バグ密度<br>＝1件/1KLOC | |

**【システムテストの欠陥数からリリース後品質を予測】**

システムテストの結果から本番リリース後の品質が予測出来ます（JUASによる2012-2013年の調査）。

**リリース後の欠陥数 ＝ システムテストで出た欠陥数の 27％**

つまり、システムテストで100件のバグが発見された場合、潜在的なバグが20～30件残っていると推測出来ます。

#### ユーザーテスト工程～納品後の品質目標

ユーザーテスト工程（検収）及び納品（本番リリース）後の欠陥数は以下のように予測出来ます。

**リリース後3ヵ月の欠陥数 ＝ 総開発工数（人月） * 0.25**

（JUASによる2012-2013年の調査より）

逆に言えば、統計的な調査や過去の裁判の判例を見ても、欠陥の無いシステムを実現する事は事実上不可能だと結論出来ます。

このような観点に立ち、本番リリース後の保守対応を計画するとともに、お客様にも保守契約の重要性を理解していただきましょう。

---

## 3. セキュリティ

品質特性において、近年特にその重要度を増しているのがセキュリティです。

エンタープライズ向けIT業界では長年軽視されがちだったセキュリティですが、近年はオンプレミス（社内システム）の領域でもセキュリティに配慮した設計・アーキテクチャの構築が求められ、SIベンダーとしての競争力にも直結している状況です。

### 3-1. ネットワークセキュリティ

#### もはや「セキュリティ」を避けては通れない

社内システムでは、これまでセキュリティに関して大きな注意が払われませんでした。これは外部ネットワーク（インターネット）に比べ、内部ネットワーク（LAN/WAN）には攻撃者が少なく対策のコストメリットが薄い、と判断されてきた事が原因です。

しかし現在では、クラウドインテグレーションの広まりや、秘密情報の漏洩、ソフトウェア脆弱性に起因する攻撃、ランサムウェア（サイバー脅迫）やBEC（ビジネスメール詐欺）による直接的な被害の発生により、ネットワークの内外を問わずセキュリティ対策を実施する事が一般的になりました。

**セキュリティ脅威の例：**
- **社外ネットワーク発：** なりすまし、Webサイト改竄、DoS、インジェクション
- **社内ネットワーク発：** 秘密情報漏洩、ランサムウェア、BEC、遠隔操作

#### セキュリティ対策の基本構成

企業におけるセキュリティ対策はいくつかのレイヤに分類されます。IPAによる情報セキュリティマネジメントの文脈ではポリシー/スタンダード/プロシージャの三層でそれを表現しています。

**セキュリティポリシーの三層構造：**

1. **基本方針（ポリシー）** - Why
   - 経営レベルの対策
   - 企業経営方針、目的、道徳、責任などの明確化

2. **対策基準（スタンダード）** - What
   - 組織レベルの対策
   - 体制、規定、マネジメントシステム

3. **実施手順（プロシージャ）** - How
   - 部門レベルの対策
   - マニュアル、教育、プロセス

お客様への提案・開発においては先方のセキュリティポリシーを必ず確認し、ポリシーに応じた仕様定義・設計・実装を実現しなければならない。

#### ネットワーク上のセキュリティコンポーネント

代表的なコンポーネントを概観します。お客様の社内ネットワークに、どれとどれが存在しているか、把握していますか？

**主要なセキュリティコンポーネント：**
- **ファイアウォール（FW）**
- **

---

## 【HPMS】見積もり・提案教育・第十回v1.6.md

## 第十回「勝つ提案」作成 見積もり・提案教育セミナー

## 目次

### 1. プロポーザルマネジメントの実現
- 1-1. 勝てる案件に集中する
- 1-2. プロポーザルマネジメント体制構築
- 1-3. 提案のための人材育成

### 2. 勝つ提案を造る
- 2-1. ペルソナ
- 2-2. ブービートラップ
- 2-3. コスト

### まとめ

### 参考文献

---

## 1. プロポーザルマネジメントの実現

### 1-1. 勝てる案件に集中する

#### ■ 改めて「何故プロポーザルマネジメントが必要なのか？」

「提案」の目的は競争に勝ち、案件を受注する事です。しかし提案行為には大きなコストがかかります。勝つことが目的で、大きなコストをかけるのですから、**提案には勝たなければなりません**。

勝つためには、戦略と、作戦と、戦術と、それらを統制するマネジメントが必要です。提案には、きちんとした**プロポーザルマネジメントが必須**です。

**マネジメントによる統制**

戦略に従い、一貫した目的と目標のために用意した戦術オプションを、適切に作戦として束ね、統制し、実行するのがマネジメントの責務。そのための方法論がプロポーザルマネジメント。

個人技芸頼りで、場当たり的に攻撃を行っても、勝利はおぼつかない。

#### ■「必勝」の絶対条件「勝てる相手とだけ勝負する」

武術においては、負けは即ち死を意味します。従って、戦うからには必ず勝たなければなりません。そのような武術家にとって、絶対の条件は**「勝てる相手とだけ勝負する」**です。どのような方法でも構いませんが、この条件を満たさなければなりません。

確実に勝てる弱い相手を探しても構いませんし、相手よりも大人数を用意しても良いですし、相手よりも強力な武器を用意しても良いです。こちらに有利な場所まで相手をおびき出すのも良いですし、勝負の事前に工作や罠を仕掛けても構いません。

提案は勝負ですので、**原則として必ず勝てる状況を作り出すべきであり**、それが出来ないなら提案辞退すべきです。**勝てる案件に集中すべきであり、負ける可能性がある引き合いに過剰なリソースを投入すべきではありません**。これは提案管理の基本です。

> **「戦う事、六十余度、一度として、敗れたる事、無し」**（宮本武蔵）

『五輪書』に本人がそう書いていますが、映画やドラマ、漫画と違い実際の宮本武蔵は、それを実現するために、（現代人から見て）かなり無茶苦茶な事をやっています……当時の「兵法」とは（つまり武術とは）、ルール無き軍事行動だったのです……

#### ■ 勝てる案件に集中するために必要な事

とは言え、十分な数のリードの中から確度が高い案件だけ提案する、或いはリード顧客に対する案件獲得活動を通し受注確度を上げる、という事が出来ない場合もあります。また、リードに含まれていない、全くの新規のお客様から急な引き合い※をいただく事もあります。

※ このような場合、お客様が既存ベンダーとトラブルを抱えていたり、なんらか困っている場合が多いので、比較的当社に有利な場合が多い

そのような場合は、**引き合い発生後の一週間が最重要期間**であり、この短い期間で、なんとしても受注確度を評価し、辞退するかどうかの判断をしなければなりません。

#### 提案期間（1ヶ月の例）

| 第一週 | 第二週 | 第三週 | 第四週 |
|--------|--------|--------|--------|
| 情報収集・分析 | 骨格作成 | 提案書作成（半分はレビューや決裁期間） | |
| 戦略策定 | | | |
| 提案計画 | | | |

この一週間で判断出来なければ、この後の全ての期間、関わる全ての人の工数を無駄にする。

売上に換算すると、少なくとも数十万円以上の社内的なコストがかかる話なので、**提案対応には適切な人材を**。

作業見積もりの延長では「提案」は出来ないので、担当者の能力が不足している場合は、**上長と担当営業による十分なサポートを**。

### 1-2. プロポーザルマネジメント体制構築

#### ■ 提案人材のスキルセット

これまで本セミナーで見てきたように、本格的な「提案」は「見積もり」の延長ではありません。提案にはセールス、マーケティング、マネジメントに関する知識と方法論、お客様に対するドメイン知識、そして高度なITリテラシーと、当社とそのビジネスに関する基本的な理解が必要です。

その上で、文章作成力や図解など資料作成力、プレゼンテーション能力などが求められます。当然ながら、このような人材は一朝一夕には育成出来ませんので、計画的に、十分に時間をかけて人材育成を行う必要があります。

**提案人材に必要なスキル：**

- **セールス知識・方法論**
- **マーケティング知識・方法論**
- **PM知識・方法論**
- **高度なITリテラシー**
- **当社とそのビジネスへの理解**
- **お客様、業界のドメイン知識**
- **文章力**
- **図解・資料作成**
- **プレゼン能力**

**習得の難易度：**
- 現場経験だけで、ある程度は身に付くものもあるが...
- ソフトスキルは意識した訓練が必要
- ドメイン知識はAPS等の活動を含め、関係法令の勉強など、非常に学ぶのが難しい課題
- マーケティングやセールスは、書籍も多く、外部セミナーも多いので勉強はしやすいが、専門性が高い
- 当社のビジネスやエコシステム、扱っているプロダクトなども、興味を持って知ろうとする必要がある

#### ■ 最低限必要な「提案チーム」体制

以前の回でプロポーザルマネジメント上必要とされる体制を紹介しました。ここでは当社での実践機会を想定し、最低限必要な「提案チーム」の体制と、役割をご紹介します。

**【プロポーザルマネージャー(PpM)】**
1. **担当営業**
   - 最高責任者は担当営業の方がやるべき。営業本部の方か、開発本部の営業担当者。

**【プロジェクトマネージャー(PjM)】**
2. **開発本部の担当PM**
   - その案件を担当予定のPjM。PpMとの兼任は駄目。その案件を担当しない人も（原則）駄目。

**提案作成に必要な各専門家**

3. **組織内レビューや助言のための、開発本部の担当PMの上長、部長、本部長（決裁の規程に応じ参画）**
   - ※PMを担当出来ないなら、その役割を持ってはいけない。あくまでも助言者。

4. **そのお客様の案件に過去関わった実績がある、或いは現在保守を担当している技術者。ドメイン知識担当。**

5. **他部門、他本部でも良いので、提案骨子の検討に強力可能な技術者。個別の要素技術ではなく、システム全体の分析・設計担当。**

6. **システム設計後、個別の要素技術担当者を必要な分呼ぶ。プロダクト、インフラ、ミドルウェア、アプリケーション、保守運用等。本来このメンバーは序盤では不要。**

もしも一ヶ月の提案期間なら、最初の一週間に必要なのはこの2名とドメイン知識担当者だけである。その後⑤までの5名程度の体制となり、最終段階では必要な分の人数に声がかかる。

### 1-3. 提案のための人材育成

#### ■ 大型提案に向け必須な人材（1/2）

プロポーザルマネジメントの実現のため、以下のような人材の確保或いは育成を行う必要があります。

**【PpM】① 担当営業**

必要スキル：
- プロポーザルマネジメント
- 営業
- 見積もり
- マーケティング
- 公用文
- コンサルティング

もちろんドメイン知識やITリテラシーも必要だが、まずは何よりもプロポーザルマネジメントの実現のための基礎能力が必要。経営・事業・戦略レベルのコンサルティング能力があるとベスト。

**【PjM】② 担当PM**

必要スキル：
- プロポーザルマネジメント
- PMBOK
- 見積もり
- 高度なITリテラシー
- 公用文
- ITコンサルティング

もちろん基本条件はプロジェクトマネジメントの専門家である事。その上で、専門技術者を統括可能な各種リテラシーが必要。ITコンサルティング能力があるとベスト。

#### ■ 大型提案に向け必須な人材（2/2）

**④ ドメイン知識担当**

必要スキル：
- 顧客知識
- 見積もり
- 業務設計
- 業界知識
- 業務コンサルティング
- ITリテラシー

ドメイン知識として、業界知識や関係法令まで身につけている業務SEクラスの人が望ましい。可能ならば、お客様の部長以上の方と普段から交流がある人。業務コンサルティング能力があるとベスト。

**⑤ システム全体の分析・設計担当**

必要スキル：
- システムアーキテクチャ
- 開発
- 運用
- システムインテグレーション
- 品質管理
- ITコンサルティング

多数のシステム要素を連携・統合させる、システムインテグレーションの専門家。開発から運用まで、SDLC全体を計画できる人。ITコンサルティング能力があるとベスト。

#### ■ 将来に向けて

当然ですが、このような人材が常に確保出来るとは限りません。もしも**必要な人材が不足しているのならば、その分提案難易度が高まっている**と判断すべきです。

> **「戦争を始める時は現有戦力で向かう。あればいいのにと思う戦力ではない」**
> （Donald Rumsfeld 米元国防長官）

...というのが現実なわけですが、当然、不利な状況で勝とうとするならば、それ相応の工夫が必要です。長い目で見れば、こつこつと人材育成をした方が楽でしょう...

---

## 2. 勝つ提案を造る

### 2-1. ペルソナ

#### ■ まずは前提を確認 ─ それは「コンペティション」？それとも「プロポーザル」？

ここまで「提案」と一口に言ってきましたが、実は提案には「コンペティション」と「プロポーザル」の二種類※があります。提案依頼書（RFP/Request For Proposal）という名称からもわかる通り、それなりの品質のRFPが発行されるような非常に大型の案件の場合、その多くは「プロポーザル」です。この違いは、提案の際に評価されるポイントが異なるという事なので、かなり重要です。

※ お客様に自身がこの違いを全く意識していない事も多いので、お客様が使った言葉だけで判断する事は出来ません

この点も含め、その提案においてどのようなポイントがどのように評価されるのかを、お客様に確認しておく事は非常に重要です。もしもRFPや入札仕様書にそのような情報が無い場合には、**必ず質問しましょう**。

| コンペティション | プロポーザル |
|------------------|--------------|
| **提案内容を選ぶ** | **委託する会社を選ぶ** |
| • 提案の内容そのもの（つまり「案」）を選ぶ | • 提案の「案」だけではなく、その会社に案の実現能力があるかどうかが判断される |
| • 良い案（ソリューション）であれば、小さな会社が大手に勝利する事も可能 | • 会社の財務状況や体制、過去の実績などが評価される → その会社に「社格」が無いと、大型提案は出来ない |
| • 案が凡庸であれば受注確度は低いので、特に提案骨格が重要になる | • 提案を担当する営業やPMの能力もそのまま評価されるので、非常に難易度が高い |

#### ■ 戦略・作戦・戦術

そして、勝つためには戦略・作戦・戦術という3つのレベル※でそれぞれ方針を立て行動する必要があります。基本的には、戦術で戦略を覆す事はできません。戦略的に取り組んでいる競合他社に勝つためには、当社がその戦略を上回る必要があります。

※ これを「軍隊行動の3レベル」と呼びます

**戦略：達成する目標やそのための兵站**
- 「差別化」「コストリーダーシップ」「ニッチ」などの基本的な戦略と、それを実演するための（提案人材や体制を含めた）兵站に関する方針を立てる
- この方針の実現が戦略目標となり、これが提案の最も根本的なコンセプトとなる

**作戦：状況に応じた戦術の組み合わせ**
- 戦略目標を実現するため、様々な戦術の組み合わせや、それを実施する時期に関する方針を立てる、文字通りの「作戦」である
- お客様側の状況や競合他社の状況に応じ様々な作戦が有り得る

**戦術：様々な商材**
- クラウドサービス、パッケージ、スクラッチ開発、（準委任契約での）アジャイル開発、他社との共同提案、サブシステム分割、など様々な商材
- 提案とはこれらの組み合わせである
- ただし**戦闘は、戦術だけでは勝てない**

#### ■「戦場の霧」と戦う ─ 仮説思考/ペルソナ

戦場においては、自軍の状況や敵軍の状況、天候、そしてそれらの変化をリアルタイムに把握する事は、容易なことではありません。指揮官からみたそのような不確実性の事を「戦場の霧」などと呼びます。戦場の霧立ち込める状況では、「計画」の価値が低下するため、戦略思考（≒PDCA型）よりも、仮説思考型（OODA Loop型）によるアプローチが必要です。

「提案」も同様で、時間をかけて情報収集と分析を行っても、案件獲得に十分な情報が入手できるとは限りません。そんな時に利用できる、仮説思考型のマーケティング技法が**ペルソナマーケティング**です。情報収集前にいくつかの仮説を立て、その仮説に基づいた情報収集やQAを行い、**お客様と競合他社のペルソナ（仮想人格）を構築**します。このペルソナの情報を提案チーム内で共有し、それに基づいた戦略策定、提案計画を行います。

#### 提案プロセス

**案件評価** → **案件獲得活動** → **提案計画** → **提案**

1. **仮説・ペルソナ**
   - お客様や競合他社のペルソナ
   - 提案チーム内で明確なペルソナを共有 → 素早い情報収集・分析や判断が可能に

2. **戦略決定**
   - 競争優位はこの段階で生み出す

3. **チームで作戦立案**
   - そして戦術準備

4. **戦術実行**
   - プロダクト調達
   - 人材調達
   - 協業・共同提案
   - 競合への牽制
   - 企画の誘導
   - コスト最適化
   - 提案書作成や見積もり等着手

#### ■ 戦術から考えてはいけない

「パッケージの提案をする」「フルスクラッチで開発する」「お客様が例示しているクラウドで提案する」といった方針は**単なる戦術**です。ビジネスにおいては、戦術とは「商品棚に並べる商品の一つ一つ」に過ぎません。商品棚から考えるというのは、小売ビジネスや小口の商談のやり方です。

大口の商談であるシステム開発は、**複数の商品を組み合わせ、かつ魅力的なフレーズやストーリーを添えて一括（=ソリューション）で売るビジネス**です。商品棚"を"売るビジネスと言っても良いかもしれません。

定めたペルソナに対し、どのような商品群で何を「提案」するのか、**戦略と作戦の検討に時間をかけましょう**。

**なので...**

- 商品（戦術）数が、作戦の多様性を左右するので、検討対象とうる製品数は多ければ多いほど良いです
- ただし、今持っていない商品や、売り方のわからない商品は商品棚に収めてはいけません
  - ※「戦争を始める時は現有戦力で向かう。あればいいのにと思う戦力ではない」／Donald Rumsfeld 米元国防長官
- なので、提案チームには他部門や営業本部ほか、組織に拘らずに社内の有識者を提案チームメンバーとして招集すべきです
- その上で、商品棚を埋める商品が無い場合は、速やかに提案辞退しましょう

### 2-2. ブービートラップ

#### ■「作戦」は多種多様で毎回違う

作戦は、ある意味では戦略よりも戦術よりも重要です。作戦は、お客様のその時々の状況や市場背景、競合他社の状況、そして当社の商材状況や「前回行った提案の影響」も受けるので、その内容は提案毎に異なります。

戦略目標が決まったら、その達成に向け**ペルソナに対する作戦を立案**します。この時行うのは作戦行動の立案です。例えば（営業活動以外にも）**事前に行うQAも、お客様や競合他社に影響を与える事が出来る重要な行動機会**です。

明確にペルソナを定義する事で、作戦や戦術を議論する際の曖昧さが無くなる。

法と倫理に触れない限り、何をしても良い。もっと発想を自由に...

#### ■ QAに、競合他社向けの罠をしかける

QAの内容は、公平性のため他社にも共有されます。つまり、その応答内容は競合他社の担当者も見ますので、**そこに様々な心理的な罠をしかける事が出来ます**。

例えば、RFPに示されたお客様の要求が過剰仕様だった場合、QAではあたかもその仕様が重要なように細部に拘った質問をしておきます。しかし、実際の提案では過剰仕様である事を合理的に説明し実現化範囲から除外する、といった事です。QAを見た他社は、律儀に過剰仕様で提案してくれる**❝かもしれません❞**。

或いは、要求分析の結果、お客様の要求の優先度がわかった場合、優先度が低い要求に関する質問を敢えて多く（細かく）質問するという手もあります。もちろん、実際の提案ではその回答はほぼ使いません。QAを見た他社は、優先度を誤認してくれる**❝かもしれません❞**。

このように、こちらの戦術を誤認させたり、要求優先度を誤誘導する事によって、**他社の提案品質の低下を誘導し、お客様に対しては期待値コントロールをしかける事が出来ます**。

**必要に応じ、時間とともに戦術を変える事もある**
→ QAの時と実提案では敢えて提示アイディアを変える等

#### ■ 提案書にも罠をしかける

提案書にも、他社の提案を不利にするための罠をしかけます。すぐ考えつくのはプロダクトに関するメリデメ表ですが、**単なるメリデメの記載ではほとんど効果がありません**。当然ですが、他社は逆のメリデメを記載※してきます。

※ 明らかに当社のソリューションにメリットがある場合は、他社もそのソリューションを提案してきます

提案書にしかけるべき罠は、**RFPに示されていない事業要件或いは業務要件**であり、**事業の決裁権限者（経営層）や、業務の決裁権限者（事業部長など）に向けたメッセージ**です。事前の分析で彼らのホットボタンを見極め、他社がそのボタンを押す事を妨害するという明確な目的を持って、ネガティブメッセージを盛り込みます。

**例えば...**

**■ お客様のステークホルダーに関する情報収集**
主要なステークホルダーの主義・主張や性格を調べる。時間が無い場合は公式サイトやインターネット上のインタビュー記事等でも。RFPには無く、公開情報にはあるホットボタンを押す。

**■ 特に業務部門決裁者を狙う**
システム化によって逆に業務負荷が上がる箇所や、新規発生する業務※を分析し、そこを課題として強調して書く。
※ 権限管理などが狙い目

独自の課題の創造と解決。

**■ 特に経営者を狙う**
お客様のビジネス上の競合他社を調査し、システム機能によって差別化「される」ポイントを分析。それを課題として強調して書く。解決策を提示しなくても、「二次開発で解決すべき課題」という提示でも良い。それも勘案して設計、などの事業視点メリットの創造。

※ RFP外の問題や課題は、否定・非難ではなく「課題として認識」「その解決策」という表現になるよう注意して書き、かつ必ず根拠となる情報源への参照も添える。

### 2-3. コスト

#### ■ コスト安は差別化要素ではない、とは言うものの...

コスト安、つまり安い金額の見積もりを出す事は、「提案」においては差別化要素にはなりません。

── **基本的にはならないのですが、お客様の状況によっては、コストがホットボタンの一つになってしまう事は有り得ます。**

例えば、なんらかの理由で企画に失敗しており、プロジェクト予算が少ない場合。或いはお客様の事業がうまくいっておらず、IT予算自体に制約がある場合。お客様のステークホルダーにシステム導入反対派がいて、コストがかかるシステム導入に反対している場合。お客様の会社のシステム調達プロセスが、昔ながらの機器調達プロセスと同じで、**必ず値引き要求する事が定義され、その成功がステークホルダーの人事評価に反映される場合**などです。これらはいずれも**お客様企業内の問題**です。

実の所、これこそが「RFPに現れて来ない、お客様の真の課題」である事が多いのですが、その解決策を「提案」出来ないのであれば※、実際にコストを低くするしかありません。

※ 真の課題の解決案を考えた方が、低コスト化のアイディアを考えるより楽な場合もありますので、安易に低コスト化という判断をしないよう、気をつけましょう

**無理・無根拠な値下げは、事実上のリベートです。当社の収支の面でも、倫理面でも望ましい事ではありません。**

#### ■ 制約条件「品質を下げずにコストを下げる」

低コスト化という戦術を取る上で、絶対に守らなければならないのは**「提案の品質を下げずにコストを下げる」**という制約条件です。いわゆる値下げ（ビジネスの世界には「出精値引き」などという言葉もありますが）とは、商品の品質そのままに価格を下げる事です。当然ですが、商品の品質を下げてしまうと、商品が売れなくなるか、顧客満足が低下します。

さらにもう一つ、当然の事ですが、我々は常に利益を追求しなければなりません。原則として、**商品の価格を値下げしても、利益が減らないようにしなければなりません**。つまり、原価を減らす必要があります。

**低コスト化戦術は、決して安易には実行出来ない、かなり難しい戦術です。**

**低コスト化の3要素：**

1. **品質は下げない**
   - 「提案」の品質とは？
   - 「事業要求」が満たされていれば「機能要求」は減らせる
   - 「不確実性」を減らせれば、その分のコストは減らせる

2. **利益を減らさない**

3. **原価を下げる**
   - SIにおける「原価」とは？
   - 最も費用がかかる原価は人件費
   - 利益は凹凸をつけて「とれる所から取る」でも良い

#### ■ 低コスト化戦術アンチパターン

先の制約条件に従った場合、まずは、比較的思いつき易いが、**原則として採用してはいけないアンチパターン**から見ていきます。

| アンチパターン | 説明 | 備考 |
|----------------|------|------|
| 特に意味の無い値引き | 何の工夫も無く、大きく利益率に影響する価格を値引きする | 「端数切り捨て」などが多いが、システム開発には定価は無いので、どうしてもそう見せたければ少し多めに見積もり、過剰分を切り捨てるべき |
| 作業・ドキュメント・テスト品質を下げて工数見積もりを下げる | 提案品質が下がっているので競争力が落ちる。もしも受注した場合、プロジェクト品質が下がるので進捗遅延や品質問題が発生する可能性が上がる | 請負契約における「工数」は作業時間を示すものではなく、システム規模の表現なので、根本的に間違っている。似たアイディアに「低単価人材を使う」「作業道具を安い低機能のものにする」がある |
| お客様と共同での製品開発企画を持ちかけ、当社からも開発コストを充当する | 場当たり的な企画で生まれる製品が利益を生み出す確率は数％程度。かつ、一点ものの社内システムと、販売目的のプロダクトでは品質目標が違い過ぎ、販売目的にした時点で、イニシャルコストはさらに増大する | これをやる場合は、別途製品化企画書（事業計画）を作成し、社内決裁を通す必要がある。（それで本当に稼げるなら、受託開発などやっている場合ではない） |
| フィットギャップ分析をせずにパッケージカスタマイズ提案 | パッケージカスタマイズ率が30％を超えると、ランニングコストも勘案した場合、フルスクラッチ開発よりもトータルコストが増える場合がある | パッケージやサービスを提案する事そのものは良い方法。ただし Fit to Standard か2層ERPなどの方針を採用 |

#### ■ 低コスト化戦術パターン

それでは、先の制約条件に従った場合有効なパターンです。

| パターン | 説明 | 備考 |
|----------|------|------|
| 保守契約でコスト回収 | 開発時の利益率を減らし、保守契約の利益率をあげる。回収計画が必要だが、中長期では増益の可能性 | 初期提案時に、保守契約の内容・費用を提示し、お客様の合意を得る必要がある |
| 自社/パートナー製品ベースの提案 | 自社製品や、再販権のあるパートナー社製品をベースに提案。原則、Fit to Standard か2層ERPの提案（つまりスクラッチ開発を最小化） | フィットギャップ分析でフィット率が極めて高い場合はカスタマイズも許容するが、その場合でもSide-by-Sideが望ましい |
| 他案件でコスト回収 | 非常に特殊な場合のみ適用可能。開発時の利益率を減らし、受注が確約された他案件の利益率を上げる | たまたま大型の保守開発案件があった場合など、非常に稀だろう |
| 低単価パートナーの利用 | オフショア/ニアショア等で「低単価かつ高い能力」なパートナー社に対して再委託 | 「かつ高い能力」が絶対条件。そうしないと単に提案品質を下げただけになる。実績の無いBPはNG |
| お客様の機能要求を減らす | お客様のRFP案とは別案で提案。事業要求は維持しながら、機能要求を減らすか先送りする。実現化範囲が狭くなれば当然全体工数は減る。この変形として、優先度の低い（或いは下げた）機能を二次開発等に先送り、という方法もある | 要求分析力や業務設計力、高い提案力が無いととれない戦術。コストを減らしながら、むしろ提案品質は上がるくらいを目標にする |

---

## まとめ

- プロポーザルマネジメントによって**「勝てる状況」を作り上げる**か、**「勝てる案件」を短期間で素早く判断する**必要がある

- **「提案力」も高度スキルの集合**なので、**人材育成が必須**

- **組織の壁を越えて「提案チーム」を構築する**。それがプロポーザルマネージャー（PpM）の責務

- 提案で勝つためには**戦略・作戦・戦術**が必要

- 提案で勝つためには、法と倫理に触れない限り、何をしても良い。**もっと発想を自由に**

- 低コスト化はただの「戦術」の一つ。そして**制約条件の多い戦術**である

> **「真の競争優位をもつ企業は、競合他社に比べて低いコストで事業を運営しているか、高い価格を課しているか、その両方だ」**
> 
> （ジョアン・マグレッタ『〔エッセンシャル版〕マイケル・ポーターの競争戦略』）

---

## 参考文献

- 『「作戦」とは何か 戦略・戦術を活かす技術』（中央公論新社）
- 『五輪書』（岩波書店）
- 『受注を勝ち取るための 外資系「提案」の技術---日本人の知らない世界標準メソッド』（ダイヤモンド社）
- 『ITエンジニアの必須スキル 顧客に響くシステム提案メソッド』（日経BP）
- 『〔エッセンシャル版〕マイケル・ポーターの競争戦略』（早川書房）
- 『キャズム Ver.2 増補改訂版 新商品をブレイクさせる「超」マーケティング理論』（翔泳社）
- 『システムを作らせる技術 エンジニアではないあなたへ』（日経BP）

---

## 【HPMS】ロードサービス社内業務システム サンプルRFPv1.3.md

## ロードサービス社内業務システム RFPサンプル

**Copyright(c) 2018-2024 SystemEXE Inc. All rights reserved.**

本資料は、実際にあった案件を元にした、簡易なRFPのサンプルです。  
資料内に出てくる企業名、機能名は全て架空のものです。

相田一英 2024/10/03

---

## 1. 基本情報

### 1-1. 企業情報

弊社は浪速損害保険株式会社様が販売する自動車保険「ネット型自動車保険」に付帯するロードサービスを提供する企業です。

ネット型自動車保険はネット通販専門の保険で、スマートフォンのアプリから契約、ロードサービスの提供状況確認・サービスリクエスト、カスタマーFAQなどをワンストップで提供します。

アプリのダウンロード数は2024/10/03時点で100万ダウンロードを超え、会員数は50万人、カスタマーコミュニケーション機能を含む各種サービスに対する同時接続クライアント数は10万クライアントを超えています。

### 1-2. 事業課題

弊社が本サービスを提供開始してから既に5年が経ち、現行システムの更改と、企業成長に合わせた機能拡張、そしてリクエスト数増大への対応及び運用コストの抑制が、喫緊の事業課題です。

皆様より、弊社依頼書に基づいた具体的な提案をお待ち申し上げます。

### 1-3. システム化の目的

今回は大規模システム更改の第一段階目として、ロードサービス社内業務システム（既存システム）の更改と保険商品マスタ/サービスマスタの拡張を行います。

#### ■ロードサービス社内業務システム更改
サーバーOS及びミドルウェアのライセンス切れに伴い、基盤の入れ替え及びミドルウェアのバージョンアップを実施します。

#### ■保険商品マスタ/サービスマスタ拡張
浪速損害保険会社様による新保険対応及び付帯ロードサービス対応を実施します。

---

## 2. システム化範囲

### 2-1. システム化対象範囲

今回依頼するシステム化（更改及び拡張）範囲は以下の通りです。

**システム構成図**
```
インターネット → 弊社データセンター
├── カスタマーアプリ
├── メッセージ処理システム
├── カスタマーコミュニケーションシステム
└── 業務システム向けネットワーク（各整備拠点からもアクセス）
    ├── MQ
    ├── Oracle Database
    └── ロードサービス社内業務システム ← 【対象範囲】
        ├── 基幹システム向けネットワーク → 基幹システム
        └── BIシステム
```

**注記：**
- メッセージ処理システムから24×365で最大4,000件/1日のJSONメッセージの配信があるので、相応の受信の仕組みを備える必要がある
- ネットワーク/サーバ設計・構築は弊社で実施します

### 2-2. 現行システム規模

現行システムの規模を以下に示します。概算見積もりの参考にしてください。

| 項目 | アーキテクチャ/規模 |
|------|---------------------|
| OS/ソフトウェア | RHEL, Oracle Database, Apache HTTP Server, Java, Tomcat |
| 機能数 | 17機能（※ 11画面/6帳票. 新システムでは一部帳票を画面化） |
| テーブル数 | 13テーブル<br/>（※ 保険商品マスタ, ロードサービスマスタ, サービス担当マスタも現行商品/サービス向けに存在） |
| I/Fファイル数 | 2 |
| バッチ処理数 | 12 |
| アプリからのリクエスト数 | 平均1,100件/1日。ピーク時4,000件/1日。<br/>（※実績数値. 今後の増加ペースは予測が難しい） |
| オペレーター数 | 30名 |
| システム稼動時間 | AM 8:00～PM 20:00<br/>（※夜間のメンテナンス停止は許容するが, メッセージ受信の長時間停止は許容しない） |

---

## 3. スケジュール

### 3-1. マスタスケジュール

以下が、現在弊社が想定しているマスタスケジュールです。提案に際し、より良いスケジュールがある場合はご提示願います。

**スケジュール表**

| 年 | 2024 ||||||| 2025 ||||||||||
|----|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| 月 | 9 | 10 | 11 | 12 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |
| RFP発行 | ▼ |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| ベンダ選定 | ■■■ |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| ベンダ確定 |  |  |  | ▼ |  |  |  |  |  |  |  |  |  |  |  |  |
| 開発 |  |  |  | ■■■■■■■ |  |  |  |  |  |  |  |  |  |  |  |  |
| 検収 |  |  |  |  |  |  |  |  |  | ■ |  |  |  |  |  |  |
| 平行稼動 |  |  |  |  |  |  |  |  |  |  | ■ |  |  |  |  |  |
| 移行/リリース |  |  |  |  |  |  |  |  |  |  |  | ▼ |  |  |  |  |
| 納品 |  |  |  |  |  |  |  |  |  | ▼ |  |  |  |  |  |  |
| 初期流動 |  |  |  |  |  |  |  |  |  |  |  | ■ | ■ |  |  |  |
| 通常保守～ |  |  |  |  |  |  |  |  |  |  |  |  |  | ■■■■ |
| インフラ構築 |  |  |  | ■■■■ |  |  |  |  |  |  |  |  |  |  |  |  |

**今回の提案依頼範囲**は「開発」「検収」「平行稼動」「移行/リリース」「納品」です。

---

## 4. 提案依頼範囲

### 4-1. 依頼範囲

提案の依頼範囲は以下の通りです。

- ロードサービス社内業務システムの要件定義～総合テスト（後述の機能一覧参照）
- ミドルウェア（サーバソフトウェア/データベース）の設計/構築
- データ／システム移行作業

開発言語、OS、その他ミドルウェアの選定に関しては貴社よりご提案いただきます。  
ただし、OS含むミドルウェアの調達は弊社で行いますので、調達費用は見積もりには含みません。

また、ネットワーク及びサーバ設計、及び構築作業も弊社で実施しますが、サイジングに必要な情報は要件定義の際に提示いただくものとします。

> ※ 本資料は研修素材なので、かなり簡易な前提条件を示しています。
> このような条件が顧客側から提示される事は稀です。

### 4-2. 機能一覧

#### 基本機能（1/2）

| No | 機能名 | 説明 |
|----|--------|------|
| 1 | 加入受付け機能 | アプリからの加入申請の確認と、担当者を手動で指定する。 |
| 2 | 加入申込書作成機能 | 加入申込書（電子）を作成する。 |
| 3 | 会員証作成機能 | 会員証（電子）を作成する。 |
| 4 | 点検受付け機能 | アプリからの点検申請の確認と、整備拠点を手動で指定する。 |
| 5 | 点検実施記録機能 | 各整備拠点から、点検実施記録を入力する。 |
| 6 | 事故受付け機能 | アプリからの事故申請の確認と、担当者を手動で指定する。 |
| 7 | 事故対応記録機能 | 各担当者による事故対応の、記録を確認。 |
| 8 | 事故対応連携機能 | 浪速損害保険会社様への情報連携機能。メッセージ処理システムに自動メッセージング。 |
| 9 | サービス問い合わせ受付け機能 | アプリからのサービス問い合わせの確認と、担当者を手動で指定する。 |
| 10 | サービス問い合わせ記録機能 | 各担当者によるサービス問い合わせ対応の、記録を確認。 |
| 11 | 解約受付け機能 | アプリからの解約申請の確認と、担当者を手動で指定する。 |
| 12 | 解約書類作成機能 | 解約書類の印刷と発送依頼。 |
| 13 | 解約機能 | アプリからの解約リクエストを実行。会員証（電子）を無効化し、オプトアウトを実行。 |

#### マスタ管理・集計機能（2/2）

| No | 機能名 | 説明 |
|----|--------|------|
| 14 | 整備拠点マスタ管理機能 | 整備点検拠点（取引先）マスタ情報の登録、修正、削除。 |
| 15 | 保険商品マスタ管理機能 | **新規**：保険商品情報の登録、修正、削除。既存商品及び新規商品対応。 |
| 16 | ロードサービスマスタ管理機能 | **新規**：保険商品付帯のロードサービス内容情報の登録、修正、削除。既存商品及び新規商品対応。 |
| 17 | サービス担当マスタ管理機能 | **新規**：ロードサービス担当者マスタ情報の登録、修正、削除。新・旧保険商品/サービスへの対応可/不可情報など。 |
| 18 | 加入・サービス利用状況集計機能 | 加入・サービス利用状況集計データの作成機能。集計結果はBIシステムに自動連携。 |
| 19 | 月次集計機能 | 月次収支の集計機能。集計結果は基幹システムに自動連携。 |
| 20 | カスタマーメッセージ受信機能 | 現状はActiveMQを使用しているが、他のミドルウェア或いは方式に変更しても良い。 |

### 4-3. 前提条件

今回の提案依頼における前提条件は以下の通りです。

- 本開発は要件定義及び検収支援を準委任契約、それ以外は一括請負契約で発注予定です。
- 外部仕様及びデータモデルは一から再設計するものとします。
- 各マスタデータは弊社側でDBに直接手動セットアップします。データフォーマットをご提示下さい。
- データ移行費用は大きく変動する可能性があるため、要件定義後再見積もりとします。本提案時点では一般的な費用感でご提示下さい。
- 本プロジェクトを担当する弊社側の体制は、担当者2名（関連部門2部門）です。また、隔月でステアリング・コミッティを実施しますので、PMの方はご参加いただきます。
- システムマニュアル作成/社内教育、及び保守契約については別途ご相談とします。

> ※ 本資料は研修素材なので、かなり簡易な前提条件を示しています。
> このような条件が顧客側から提示される事は稀です。

---

